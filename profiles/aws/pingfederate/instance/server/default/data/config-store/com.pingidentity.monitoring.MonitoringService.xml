<?xml version="1.0" encoding="UTF-8"?>
<con:config xmlns:con="http://www.sourceid.org/2004/05/config">
  <!--
  The window, in seconds, to report statistics
  -->
  <con:item name="StatisticsWindowSecs">10</con:item>

  <!--
  Maximum number of statistic objects to cache.
  -->
  <con:item name="ResponseStatisticsWindowSize">5000</con:item>

  <!--
  Statistics are cached for a short amount of time. This helps
  when multiple responses are being generated for the heartbeat endpoint or if
  multiple percentiles are specified by "StatisticsPercentilesList" below.
  -->
  <con:item name="StatisticsUpdateIntervalSecs">10</con:item>

  <!--
  Comma separated list of percentiles to report on with the heartbeat endpoint.
  These can be non-integer's like "99.9".
  -->
  <con:item name="StatisticsPercentilesList">90</con:item>

  <!--
  Determines whether PingFederate tracks metrics related to IdP adapters.
-->
  <con:item name="EnableAdapterMetrics">true</con:item>

  <!--
      Determines whether PingFederate tracks metrics related to IdP connections.
  -->
  <con:item name="EnableConnectionMetrics">true</con:item>

  <!--
      A map containing MBean attributes that are made available for inclusion in the heartbeat page templates.
      The key in the map is the variable name that can be referenced in the Velocity template.
      The value is the name of the MBean concatenated with the attribute name, separated with the pipe (|)
      character.
  -->
  <con:map name="HeartbeatMBeanAttributes">
    <con:item name="engine.jetty.queued.thread.pool.utilized.threads">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=0|utilizedThreads</con:item>
    <con:item name="engine.jetty.queued.thread.pool.max.available.threads">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=0|maxAvailableThreads</con:item>
    <con:item name="engine.jetty.queued.thread.pool.utilization.rate">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=0|utilizationRate</con:item>
    <con:item name="engine.jetty.queued.thread.pool.queue.size">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=0|queueSize</con:item>
    <con:item name="admin.jetty.queued.thread.pool.utilized.threads">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=1|utilizedThreads</con:item>
    <con:item name="admin.jetty.queued.thread.pool.max.available.threads">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=1|maxAvailableThreads</con:item>
    <con:item name="admin.jetty.queued.thread.pool.utilization.rate">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=1|utilizationRate</con:item>
    <con:item name="admin.jetty.queued.thread.pool.queue.size">org.eclipse.jetty.util.thread:type=queuedthreadpool,id=1|queueSize</con:item>
  </con:map>

</con:config>