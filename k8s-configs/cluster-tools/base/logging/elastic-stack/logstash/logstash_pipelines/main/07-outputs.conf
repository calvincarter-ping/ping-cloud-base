output {
  if ([log_type] == "customer_out") {
    pipeline {
      id => "customer_pipe"
      send_to => "customer_pipe"
    }
  }
  if ([log_group] == "application" and [log_type] != "customer_out") {
    elasticsearch {
      id => "logstash_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      sniffing => false
      ilm_enabled => true
      ilm_rollover_alias => "logstash"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/logstash.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "logstash-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "logstash"
      template => "/usr/share/logstash/os/index_templates/logstash.json"
      legacy_template => false
      template_overwrite => true
    }

  }
    if ([log_group] == "healthcheck") {
    elasticsearch {
      id => "healthcheck_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      sniffing => false
      ilm_enabled => true
      ilm_rollover_alias => "healthchecks"
      ilm_policy => "ping-7-day-retention"
      template => "/usr/share/logstash/index_templates/healthchecks.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "healthchecks-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "healthchecks"
      template => "/usr/share/logstash/os/index_templates/healthchecks.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PF_Provisioner_Log"){
    elasticsearch {
      id => "pf_provision_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-provision"
      ilm_policy => "ping-logstash-policy"
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-provision-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pf-provision"
      template => "/usr/share/logstash/os/index_templates/pf-provision.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PF_Audit_Log"){
    elasticsearch {
      id => "pf_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pf-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pf-audit"
      template => "/usr/share/logstash/os/index_templates/pf-audit.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PF_System_Log"){
    elasticsearch {
      id => "pf_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pf-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pf-system"
      template => "/usr/share/logstash/os/index_templates/pf-system.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PF_Transaction_Log"){
    elasticsearch {
      id => "pf_transaction_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-transaction"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pf-transaction.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-transaction-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pf-transaction"
      template => "/usr/share/logstash/os/index_templates/pf-transaction.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PD_Access_Log"){
    elasticsearch {
      id => "pd_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pd-access"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pd-access.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pd-access-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pd-access"
      template => "/usr/share/logstash/os/index_templates/pd-access.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PD_Failed_Ops"){
    elasticsearch {
      id => "pd_failed_ops_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pd-failed-ops"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pd-failed-ops.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pd-failed-ops-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pd-failed-ops"
      template => "/usr/share/logstash/os/index_templates/pd-failed-ops.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PA_System_Log"){
    elasticsearch {
      id => "pa_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-system"
      template => "/usr/share/logstash/os/index_templates/pa-system.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PA_Audit_Log"){
    elasticsearch {
      id => "pa_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-audit"
      template => "/usr/share/logstash/os/index_templates/pa-audit.json"
      legacy_template => false
      template_overwrite => true
    }

  }
  if([log_type] == "PA_WAS_System_Log"){
    elasticsearch {
      id => "pa_was_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-was-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-was-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-was-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-was-system"
      template => "/usr/share/logstash/os/index_templates/pa-was-system.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PA_WAS_Audit_Log"){
    elasticsearch {
      id => "pa_was_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-was-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-was-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-was-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-was-audit"
      template => "/usr/share/logstash/os/index_templates/pa-was-audit.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PF_Admin_Audit_Log" or [log_type] == "PF_Admin_Audit_API_Log"){
    elasticsearch {
      id => "pf_admin_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-admin-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pf-admin-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-admin-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-admin-audit"
      template => "/usr/share/logstash/os/index_templates/pa-admin-audit.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PF_Admin_System_Log"){
    elasticsearch {
      id => "pf_admin_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pf-admin-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pf-admin-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pf-admin-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pf-admin-system"
      template => "/usr/share/logstash/os/index_templates/pf-admin-system.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PA_Admin_System_Log"){
    elasticsearch {
      id => "pa_admin_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-admin-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-admin-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-admin-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-admin-system"
      template => "/usr/share/logstash/os/index_templates/pa-admin-system.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PA_Admin_Audit_Log"){
    elasticsearch {
      id => "pa_admin_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-admin-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-admin-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-admin-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-admin-admin"
      template => "/usr/share/logstash/os/index_templates/pa-admin-audit.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PA_WAS_Admin_System_Log"){
    elasticsearch {
      id => "pa_was_admin_system_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-was-admin-system"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-was-admin-system.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-was-admin-system-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-was-admin-system"
      template => "/usr/share/logstash/os/index_templates/pa-was-admin-system.json"
      legacy_template => false
      template_overwrite => true
    }
  }
  if([log_type] == "PA_WAS_Admin_Audit_Log"){
    elasticsearch {
      id => "pa_was_admin_audit_out"
      hosts => "${ELASTICSEARCH_HOSTS}"
      ilm_enabled => true
      ilm_rollover_alias => "pa-was-admin-audit"
      ilm_policy => "ping-logstash-policy"
      template => "/usr/share/logstash/index_templates/pa-was-admin-audit.json"
      template_overwrite => true
    }
    opensearch {
      hosts       => ["https://opensearch-cluster-master:9200"]
      user        => "logstash"
      password    => "logstash"
      index       => "pa-was-admin-audit-%{+YYYY.MM.dd}"
      ssl_certificate_verification => false
      manage_template => true
      template_name => "pa-was-admin-audit"
      template => "/usr/share/logstash/os/index_templates/pa-was-admin-audit.json"
      legacy_template => false
      template_overwrite => true
    }
  }
}