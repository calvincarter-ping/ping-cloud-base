apiVersion: v1
kind: Namespace
metadata:
  labels:
    name: amazon-cloudwatch
  name: amazon-cloudwatch
---
apiVersion: v1
kind: Namespace
metadata:
  name: argo-events
---
apiVersion: v1
kind: Namespace
metadata:
  name: cert-manager
---
apiVersion: v1
kind: Namespace
metadata:
  name: elastic-stack-logging
---
apiVersion: v1
kind: Namespace
metadata:
  name: external-dns
---
apiVersion: v1
kind: Namespace
metadata:
  name: health
---
apiVersion: v1
kind: Namespace
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: ingress-nginx-private
---
apiVersion: v1
kind: Namespace
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: ingress-nginx-public
---
apiVersion: v1
kind: Namespace
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "-1"
  name: newrelic
---
apiVersion: v1
kind: Namespace
metadata:
  labels:
    app: ping-cloud
  name: ping-cloud
---
apiVersion: v1
kind: Namespace
metadata:
  name: pod-reaper
---
apiVersion: v1
kind: Namespace
metadata:
  name: prometheus
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: opensearch
  name: opensearch-sc1
mountOptions:
- discard
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: sc1
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-gp3
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: gp3
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-gp3
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: gp3
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: ping-cloud
    role: pingdatasync
  name: pingdatasync-gp3
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: gp3
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-gp3
mountOptions:
- discard
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: gp3
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
allowVolumeExpansion: true
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-gp3
parameters:
  csi.storage.k8s.io/fstype: ext4
  encrypted: "true"
  type: gp3
provisioner: ebs.csi.aws.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: certificaterequests.cert-manager.io
spec:
  group: cert-manager.io
  names:
    categories:
    - cert-manager
    kind: CertificateRequest
    listKind: CertificateRequestList
    plural: certificaterequests
    shortNames:
    - cr
    - crs
    singular: certificaterequest
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Approved")].status
      name: Approved
      type: string
    - jsonPath: .status.conditions[?(@.type=="Denied")].status
      name: Denied
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .spec.issuerRef.name
      name: Issuer
      type: string
    - jsonPath: .spec.username
      name: Requestor
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].message
      name: Status
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: "A CertificateRequest is used to request a signed certificate
          from one of the configured issuers. \n All fields within the CertificateRequest's
          `spec` are immutable after creation. A CertificateRequest will either succeed
          or fail, as denoted by its `status.state` field. \n A CertificateRequest
          is a one-shot resource, meaning it represents a single point in time request
          for a certificate and cannot be re-used."
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Desired state of the CertificateRequest resource.
            properties:
              duration:
                description: The requested 'duration' (i.e. lifetime) of the Certificate.
                  This option may be ignored/overridden by some issuer types.
                type: string
              extra:
                additionalProperties:
                  items:
                    type: string
                  type: array
                description: Extra contains extra attributes of the user that created
                  the CertificateRequest. Populated by the cert-manager webhook on
                  creation and immutable.
                type: object
              groups:
                description: Groups contains group membership of the user that created
                  the CertificateRequest. Populated by the cert-manager webhook on
                  creation and immutable.
                items:
                  type: string
                type: array
                x-kubernetes-list-type: atomic
              isCA:
                description: IsCA will request to mark the certificate as valid for
                  certificate signing when submitting to the issuer. This will automatically
                  add the `cert sign` usage to the list of `usages`.
                type: boolean
              issuerRef:
                description: IssuerRef is a reference to the issuer for this CertificateRequest.  If
                  the `kind` field is not set, or set to `Issuer`, an Issuer resource
                  with the given name in the same namespace as the CertificateRequest
                  will be used.  If the `kind` field is set to `ClusterIssuer`, a
                  ClusterIssuer with the provided name will be used. The `name` field
                  in this stanza is required at all times. The group field refers
                  to the API group of the issuer which defaults to `cert-manager.io`
                  if empty.
                properties:
                  group:
                    description: Group of the resource being referred to.
                    type: string
                  kind:
                    description: Kind of the resource being referred to.
                    type: string
                  name:
                    description: Name of the resource being referred to.
                    type: string
                required:
                - name
                type: object
              request:
                description: The PEM-encoded x509 certificate signing request to be
                  submitted to the CA for signing.
                format: byte
                type: string
              uid:
                description: UID contains the uid of the user that created the CertificateRequest.
                  Populated by the cert-manager webhook on creation and immutable.
                type: string
              usages:
                description: Usages is the set of x509 usages that are requested for
                  the certificate. If usages are set they SHOULD be encoded inside
                  the CSR spec Defaults to `digital signature` and `key encipherment`
                  if not specified.
                items:
                  description: "KeyUsage specifies valid usage contexts for keys.
                    See: https://tools.ietf.org/html/rfc5280#section-4.2.1.3 https://tools.ietf.org/html/rfc5280#section-4.2.1.12
                    \n Valid KeyUsage values are as follows: \"signing\", \"digital
                    signature\", \"content commitment\", \"key encipherment\", \"key
                    agreement\", \"data encipherment\", \"cert sign\", \"crl sign\",
                    \"encipher only\", \"decipher only\", \"any\", \"server auth\",
                    \"client auth\", \"code signing\", \"email protection\", \"s/mime\",
                    \"ipsec end system\", \"ipsec tunnel\", \"ipsec user\", \"timestamping\",
                    \"ocsp signing\", \"microsoft sgc\", \"netscape sgc\""
                  enum:
                  - signing
                  - digital signature
                  - content commitment
                  - key encipherment
                  - key agreement
                  - data encipherment
                  - cert sign
                  - crl sign
                  - encipher only
                  - decipher only
                  - any
                  - server auth
                  - client auth
                  - code signing
                  - email protection
                  - s/mime
                  - ipsec end system
                  - ipsec tunnel
                  - ipsec user
                  - timestamping
                  - ocsp signing
                  - microsoft sgc
                  - netscape sgc
                  type: string
                type: array
              username:
                description: Username contains the name of the user that created the
                  CertificateRequest. Populated by the cert-manager webhook on creation
                  and immutable.
                type: string
            required:
            - issuerRef
            - request
            type: object
          status:
            description: Status of the CertificateRequest. This is set and managed
              automatically.
            properties:
              ca:
                description: The PEM encoded x509 certificate of the signer, also
                  known as the CA (Certificate Authority). This is set on a best-effort
                  basis by different issuers. If not set, the CA is assumed to be
                  unknown/not available.
                format: byte
                type: string
              certificate:
                description: The PEM encoded x509 certificate resulting from the certificate
                  signing request. If not set, the CertificateRequest has either not
                  been completed or has failed. More information on failure can be
                  found by checking the `conditions` field.
                format: byte
                type: string
              conditions:
                description: List of status conditions to indicate the status of a
                  CertificateRequest. Known condition types are `Ready` and `InvalidRequest`.
                items:
                  description: CertificateRequestCondition contains condition information
                    for a CertificateRequest.
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the timestamp corresponding
                        to the last status change of this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human readable description of the
                        details of the last transition, complementing reason.
                      type: string
                    reason:
                      description: Reason is a brief machine readable explanation
                        for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of (`True`, `False`,
                        `Unknown`).
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Type of the condition, known values are (`Ready`,
                        `InvalidRequest`, `Approved`, `Denied`).
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              failureTime:
                description: FailureTime stores the time that this CertificateRequest
                  failed. This is used to influence garbage collection and back-off.
                format: date-time
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: certificates.cert-manager.io
spec:
  group: cert-manager.io
  names:
    categories:
    - cert-manager
    kind: Certificate
    listKind: CertificateList
    plural: certificates
    shortNames:
    - cert
    - certs
    singular: certificate
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .spec.secretName
      name: Secret
      type: string
    - jsonPath: .spec.issuerRef.name
      name: Issuer
      priority: 1
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].message
      name: Status
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: "A Certificate resource should be created to ensure an up to
          date and signed x509 certificate is stored in the Kubernetes Secret resource
          named in `spec.secretName`. \n The stored certificate will be renewed before
          it expires (as configured by `spec.renewBefore`)."
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Desired state of the Certificate resource.
            properties:
              additionalOutputFormats:
                description: AdditionalOutputFormats defines extra output formats
                  of the private key and signed certificate chain to be written to
                  this Certificate's target Secret. This is an Alpha Feature and is
                  only enabled with the `--feature-gates=AdditionalCertificateOutputFormats=true`
                  option on both the controller and webhook components.
                items:
                  description: CertificateAdditionalOutputFormat defines an additional
                    output format of a Certificate resource. These contain supplementary
                    data formats of the signed certificate chain and paired private
                    key.
                  properties:
                    type:
                      description: Type is the name of the format type that should
                        be written to the Certificate's target Secret.
                      enum:
                      - DER
                      - CombinedPEM
                      type: string
                  required:
                  - type
                  type: object
                type: array
              commonName:
                description: 'CommonName is a common name to be used on the Certificate.
                  The CommonName should have a length of 64 characters or fewer to
                  avoid generating invalid CSRs. This value is ignored by TLS clients
                  when any subject alt name is set. This is x509 behaviour: https://tools.ietf.org/html/rfc6125#section-6.4.4'
                type: string
              dnsNames:
                description: DNSNames is a list of DNS subjectAltNames to be set on
                  the Certificate.
                items:
                  type: string
                type: array
              duration:
                description: The requested 'duration' (i.e. lifetime) of the Certificate.
                  This option may be ignored/overridden by some issuer types. If unset
                  this defaults to 90 days. Certificate will be renewed either 2/3
                  through its duration or `renewBefore` period before its expiry,
                  whichever is later. Minimum accepted duration is 1 hour. Value must
                  be in units accepted by Go time.ParseDuration https://golang.org/pkg/time/#ParseDuration
                type: string
              emailAddresses:
                description: EmailAddresses is a list of email subjectAltNames to
                  be set on the Certificate.
                items:
                  type: string
                type: array
              encodeUsagesInRequest:
                description: EncodeUsagesInRequest controls whether key usages should
                  be present in the CertificateRequest
                type: boolean
              ipAddresses:
                description: IPAddresses is a list of IP address subjectAltNames to
                  be set on the Certificate.
                items:
                  type: string
                type: array
              isCA:
                description: IsCA will mark this Certificate as valid for certificate
                  signing. This will automatically add the `cert sign` usage to the
                  list of `usages`.
                type: boolean
              issuerRef:
                description: IssuerRef is a reference to the issuer for this certificate.
                  If the `kind` field is not set, or set to `Issuer`, an Issuer resource
                  with the given name in the same namespace as the Certificate will
                  be used. If the `kind` field is set to `ClusterIssuer`, a ClusterIssuer
                  with the provided name will be used. The `name` field in this stanza
                  is required at all times.
                properties:
                  group:
                    description: Group of the resource being referred to.
                    type: string
                  kind:
                    description: Kind of the resource being referred to.
                    type: string
                  name:
                    description: Name of the resource being referred to.
                    type: string
                required:
                - name
                type: object
              keystores:
                description: Keystores configures additional keystore output formats
                  stored in the `secretName` Secret resource.
                properties:
                  jks:
                    description: JKS configures options for storing a JKS keystore
                      in the `spec.secretName` Secret resource.
                    properties:
                      create:
                        description: Create enables JKS keystore creation for the
                          Certificate. If true, a file named `keystore.jks` will be
                          created in the target Secret resource, encrypted using the
                          password stored in `passwordSecretRef`. The keystore file
                          will be updated immediately. If the issuer provided a CA
                          certificate, a file named `truststore.jks` will also be
                          created in the target Secret resource, encrypted using the
                          password stored in `passwordSecretRef` containing the issuing
                          Certificate Authority
                        type: boolean
                      passwordSecretRef:
                        description: PasswordSecretRef is a reference to a key in
                          a Secret resource containing the password used to encrypt
                          the JKS keystore.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - create
                    - passwordSecretRef
                    type: object
                  pkcs12:
                    description: PKCS12 configures options for storing a PKCS12 keystore
                      in the `spec.secretName` Secret resource.
                    properties:
                      create:
                        description: Create enables PKCS12 keystore creation for the
                          Certificate. If true, a file named `keystore.p12` will be
                          created in the target Secret resource, encrypted using the
                          password stored in `passwordSecretRef`. The keystore file
                          will be updated immediately. If the issuer provided a CA
                          certificate, a file named `truststore.p12` will also be
                          created in the target Secret resource, encrypted using the
                          password stored in `passwordSecretRef` containing the issuing
                          Certificate Authority
                        type: boolean
                      passwordSecretRef:
                        description: PasswordSecretRef is a reference to a key in
                          a Secret resource containing the password used to encrypt
                          the PKCS12 keystore.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - create
                    - passwordSecretRef
                    type: object
                type: object
              literalSubject:
                description: LiteralSubject is an LDAP formatted string that represents
                  the [X.509 Subject field](https://datatracker.ietf.org/doc/html/rfc5280#section-4.1.2.6).
                  Use this *instead* of the Subject field if you need to ensure the
                  correct ordering of the RDN sequence, such as when issuing certs
                  for LDAP authentication. See https://github.com/cert-manager/cert-manager/issues/3203,
                  https://github.com/cert-manager/cert-manager/issues/4424. This field
                  is alpha level and is only supported by cert-manager installations
                  where LiteralCertificateSubject feature gate is enabled on both
                  cert-manager controller and webhook.
                type: string
              privateKey:
                description: Options to control private keys used for the Certificate.
                properties:
                  algorithm:
                    description: Algorithm is the private key algorithm of the corresponding
                      private key for this certificate. If provided, allowed values
                      are either `RSA`,`Ed25519` or `ECDSA` If `algorithm` is specified
                      and `size` is not provided, key size of 256 will be used for
                      `ECDSA` key algorithm and key size of 2048 will be used for
                      `RSA` key algorithm. key size is ignored when using the `Ed25519`
                      key algorithm.
                    enum:
                    - RSA
                    - ECDSA
                    - Ed25519
                    type: string
                  encoding:
                    description: The private key cryptography standards (PKCS) encoding
                      for this certificate's private key to be encoded in. If provided,
                      allowed values are `PKCS1` and `PKCS8` standing for PKCS#1 and
                      PKCS#8, respectively. Defaults to `PKCS1` if not specified.
                    enum:
                    - PKCS1
                    - PKCS8
                    type: string
                  rotationPolicy:
                    description: RotationPolicy controls how private keys should be
                      regenerated when a re-issuance is being processed. If set to
                      Never, a private key will only be generated if one does not
                      already exist in the target `spec.secretName`. If one does exists
                      but it does not have the correct algorithm or size, a warning
                      will be raised to await user intervention. If set to Always,
                      a private key matching the specified requirements will be generated
                      whenever a re-issuance occurs. Default is 'Never' for backward
                      compatibility.
                    enum:
                    - Never
                    - Always
                    type: string
                  size:
                    description: Size is the key bit size of the corresponding private
                      key for this certificate. If `algorithm` is set to `RSA`, valid
                      values are `2048`, `4096` or `8192`, and will default to `2048`
                      if not specified. If `algorithm` is set to `ECDSA`, valid values
                      are `256`, `384` or `521`, and will default to `256` if not
                      specified. If `algorithm` is set to `Ed25519`, Size is ignored.
                      No other values are allowed.
                    type: integer
                type: object
              renewBefore:
                description: How long before the currently issued certificate's expiry
                  cert-manager should renew the certificate. The default is 2/3 of
                  the issued certificate's duration. Minimum accepted value is 5 minutes.
                  Value must be in units accepted by Go time.ParseDuration https://golang.org/pkg/time/#ParseDuration
                type: string
              revisionHistoryLimit:
                description: revisionHistoryLimit is the maximum number of CertificateRequest
                  revisions that are maintained in the Certificate's history. Each
                  revision represents a single `CertificateRequest` created by this
                  Certificate, either when it was created, renewed, or Spec was changed.
                  Revisions will be removed by oldest first if the number of revisions
                  exceeds this number. If set, revisionHistoryLimit must be a value
                  of `1` or greater. If unset (`nil`), revisions will not be garbage
                  collected. Default value is `nil`.
                format: int32
                type: integer
              secretName:
                description: SecretName is the name of the secret resource that will
                  be automatically created and managed by this Certificate resource.
                  It will be populated with a private key and certificate, signed
                  by the denoted issuer.
                type: string
              secretTemplate:
                description: SecretTemplate defines annotations and labels to be copied
                  to the Certificate's Secret. Labels and annotations on the Secret
                  will be changed as they appear on the SecretTemplate when added
                  or removed. SecretTemplate annotations are added in conjunction
                  with, and cannot overwrite, the base set of annotations cert-manager
                  sets on the Certificate's Secret.
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations is a key value map to be copied to the
                      target Kubernetes Secret.
                    type: object
                  labels:
                    additionalProperties:
                      type: string
                    description: Labels is a key value map to be copied to the target
                      Kubernetes Secret.
                    type: object
                type: object
              subject:
                description: Full X509 name specification (https://golang.org/pkg/crypto/x509/pkix/#Name).
                properties:
                  countries:
                    description: Countries to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  localities:
                    description: Cities to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  organizationalUnits:
                    description: Organizational Units to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  organizations:
                    description: Organizations to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  postalCodes:
                    description: Postal codes to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  provinces:
                    description: State/Provinces to be used on the Certificate.
                    items:
                      type: string
                    type: array
                  serialNumber:
                    description: Serial number to be used on the Certificate.
                    type: string
                  streetAddresses:
                    description: Street addresses to be used on the Certificate.
                    items:
                      type: string
                    type: array
                type: object
              uris:
                description: URIs is a list of URI subjectAltNames to be set on the
                  Certificate.
                items:
                  type: string
                type: array
              usages:
                description: Usages is the set of x509 usages that are requested for
                  the certificate. Defaults to `digital signature` and `key encipherment`
                  if not specified.
                items:
                  description: "KeyUsage specifies valid usage contexts for keys.
                    See: https://tools.ietf.org/html/rfc5280#section-4.2.1.3 https://tools.ietf.org/html/rfc5280#section-4.2.1.12
                    \n Valid KeyUsage values are as follows: \"signing\", \"digital
                    signature\", \"content commitment\", \"key encipherment\", \"key
                    agreement\", \"data encipherment\", \"cert sign\", \"crl sign\",
                    \"encipher only\", \"decipher only\", \"any\", \"server auth\",
                    \"client auth\", \"code signing\", \"email protection\", \"s/mime\",
                    \"ipsec end system\", \"ipsec tunnel\", \"ipsec user\", \"timestamping\",
                    \"ocsp signing\", \"microsoft sgc\", \"netscape sgc\""
                  enum:
                  - signing
                  - digital signature
                  - content commitment
                  - key encipherment
                  - key agreement
                  - data encipherment
                  - cert sign
                  - crl sign
                  - encipher only
                  - decipher only
                  - any
                  - server auth
                  - client auth
                  - code signing
                  - email protection
                  - s/mime
                  - ipsec end system
                  - ipsec tunnel
                  - ipsec user
                  - timestamping
                  - ocsp signing
                  - microsoft sgc
                  - netscape sgc
                  type: string
                type: array
            required:
            - issuerRef
            - secretName
            type: object
          status:
            description: Status of the Certificate. This is set and managed automatically.
            properties:
              conditions:
                description: List of status conditions to indicate the status of certificates.
                  Known condition types are `Ready` and `Issuing`.
                items:
                  description: CertificateCondition contains condition information
                    for an Certificate.
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the timestamp corresponding
                        to the last status change of this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human readable description of the
                        details of the last transition, complementing reason.
                      type: string
                    observedGeneration:
                      description: If set, this represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.condition[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the Certificate.
                      format: int64
                      type: integer
                    reason:
                      description: Reason is a brief machine readable explanation
                        for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of (`True`, `False`,
                        `Unknown`).
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Type of the condition, known values are (`Ready`,
                        `Issuing`).
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              failedIssuanceAttempts:
                description: The number of continuous failed issuance attempts up
                  till now. This field gets removed (if set) on a successful issuance
                  and gets set to 1 if unset and an issuance has failed. If an issuance
                  has failed, the delay till the next issuance will be calculated
                  using formula time.Hour * 2 ^ (failedIssuanceAttempts - 1).
                type: integer
              lastFailureTime:
                description: LastFailureTime is set only if the lastest issuance for
                  this Certificate failed and contains the time of the failure. If
                  an issuance has failed, the delay till the next issuance will be
                  calculated using formula time.Hour * 2 ^ (failedIssuanceAttempts
                  - 1). If the latest issuance has succeeded this field will be unset.
                format: date-time
                type: string
              nextPrivateKeySecretName:
                description: The name of the Secret resource containing the private
                  key to be used for the next certificate iteration. The keymanager
                  controller will automatically set this field if the `Issuing` condition
                  is set to `True`. It will automatically unset this field when the
                  Issuing condition is not set or False.
                type: string
              notAfter:
                description: The expiration time of the certificate stored in the
                  secret named by this resource in `spec.secretName`.
                format: date-time
                type: string
              notBefore:
                description: The time after which the certificate stored in the secret
                  named by this resource in spec.secretName is valid.
                format: date-time
                type: string
              renewalTime:
                description: RenewalTime is the time at which the certificate will
                  be next renewed. If not set, no upcoming renewal is scheduled.
                format: date-time
                type: string
              revision:
                description: "The current 'revision' of the certificate as issued.
                  \n When a CertificateRequest resource is created, it will have the
                  `cert-manager.io/certificate-revision` set to one greater than the
                  current value of this field. \n Upon issuance, this field will be
                  set to the value of the annotation on the CertificateRequest resource
                  used to issue the certificate. \n Persisting the value on the CertificateRequest
                  resource allows the certificates controller to know whether a request
                  is part of an old issuance or if it is part of the ongoing revision's
                  issuance by checking if the revision value in the annotation is
                  greater than this field."
                type: integer
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: challenges.acme.cert-manager.io
spec:
  group: acme.cert-manager.io
  names:
    categories:
    - cert-manager
    - cert-manager-acme
    kind: Challenge
    listKind: ChallengeList
    plural: challenges
    singular: challenge
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .spec.dnsName
      name: Domain
      type: string
    - jsonPath: .status.reason
      name: Reason
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: Challenge is a type to represent a Challenge request with an
          ACME server
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              authorizationURL:
                description: The URL to the ACME Authorization resource that this
                  challenge is a part of.
                type: string
              dnsName:
                description: dnsName is the identifier that this challenge is for,
                  e.g. example.com. If the requested DNSName is a 'wildcard', this
                  field MUST be set to the non-wildcard domain, e.g. for `*.example.com`,
                  it must be `example.com`.
                type: string
              issuerRef:
                description: References a properly configured ACME-type Issuer which
                  should be used to create this Challenge. If the Issuer does not
                  exist, processing will be retried. If the Issuer is not an 'ACME'
                  Issuer, an error will be returned and the Challenge will be marked
                  as failed.
                properties:
                  group:
                    description: Group of the resource being referred to.
                    type: string
                  kind:
                    description: Kind of the resource being referred to.
                    type: string
                  name:
                    description: Name of the resource being referred to.
                    type: string
                required:
                - name
                type: object
              key:
                description: 'The ACME challenge key for this challenge For HTTP01
                  challenges, this is the value that must be responded with to complete
                  the HTTP01 challenge in the format: `<private key JWK thumbprint>.<key
                  from acme server for challenge>`. For DNS01 challenges, this is
                  the base64 encoded SHA256 sum of the `<private key JWK thumbprint>.<key
                  from acme server for challenge>` text that must be set as the TXT
                  record content.'
                type: string
              solver:
                description: Contains the domain solving configuration that should
                  be used to solve this challenge resource.
                properties:
                  dns01:
                    description: Configures cert-manager to attempt to complete authorizations
                      by performing the DNS01 challenge flow.
                    properties:
                      acmeDNS:
                        description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns)
                          API to manage DNS01 challenge records.
                        properties:
                          accountSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          host:
                            type: string
                        required:
                        - accountSecretRef
                        - host
                        type: object
                      akamai:
                        description: Use the Akamai DNS zone management API to manage
                          DNS01 challenge records.
                        properties:
                          accessTokenSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          clientSecretSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          clientTokenSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          serviceConsumerDomain:
                            type: string
                        required:
                        - accessTokenSecretRef
                        - clientSecretSecretRef
                        - clientTokenSecretRef
                        - serviceConsumerDomain
                        type: object
                      azureDNS:
                        description: Use the Microsoft Azure DNS API to manage DNS01
                          challenge records.
                        properties:
                          clientID:
                            description: if both this and ClientSecret are left unset
                              MSI will be used
                            type: string
                          clientSecretSecretRef:
                            description: if both this and ClientID are left unset
                              MSI will be used
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          environment:
                            description: name of the Azure environment (default AzurePublicCloud)
                            enum:
                            - AzurePublicCloud
                            - AzureChinaCloud
                            - AzureGermanCloud
                            - AzureUSGovernmentCloud
                            type: string
                          hostedZoneName:
                            description: name of the DNS zone that should be used
                            type: string
                          managedIdentity:
                            description: managed identity configuration, can not be
                              used at the same time as clientID, clientSecretSecretRef
                              or tenantID
                            properties:
                              clientID:
                                description: client ID of the managed identity, can
                                  not be used at the same time as resourceID
                                type: string
                              resourceID:
                                description: resource ID of the managed identity,
                                  can not be used at the same time as clientID
                                type: string
                            type: object
                          resourceGroupName:
                            description: resource group the DNS zone is located in
                            type: string
                          subscriptionID:
                            description: ID of the Azure subscription
                            type: string
                          tenantID:
                            description: when specifying ClientID and ClientSecret
                              then this field is also needed
                            type: string
                        required:
                        - resourceGroupName
                        - subscriptionID
                        type: object
                      cloudDNS:
                        description: Use the Google Cloud DNS API to manage DNS01
                          challenge records.
                        properties:
                          hostedZoneName:
                            description: HostedZoneName is an optional field that
                              tells cert-manager in which Cloud DNS zone the challenge
                              record has to be created. If left empty cert-manager
                              will automatically choose a zone.
                            type: string
                          project:
                            type: string
                          serviceAccountSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - project
                        type: object
                      cloudflare:
                        description: Use the Cloudflare API to manage DNS01 challenge
                          records.
                        properties:
                          apiKeySecretRef:
                            description: 'API key to use to authenticate with Cloudflare.
                              Note: using an API token to authenticate is now the
                              recommended method as it allows greater control of permissions.'
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          apiTokenSecretRef:
                            description: API token used to authenticate with Cloudflare.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          email:
                            description: Email of the account, only required when
                              using API key based authentication.
                            type: string
                        type: object
                      cnameStrategy:
                        description: CNAMEStrategy configures how the DNS01 provider
                          should handle CNAME records when found in DNS zones.
                        enum:
                        - None
                        - Follow
                        type: string
                      digitalocean:
                        description: Use the DigitalOcean DNS API to manage DNS01
                          challenge records.
                        properties:
                          tokenSecretRef:
                            description: A reference to a specific 'key' within a
                              Secret resource. In some instances, `key` is a required
                              field.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - tokenSecretRef
                        type: object
                      rfc2136:
                        description: Use RFC2136 ("Dynamic Updates in the Domain Name
                          System") (https://datatracker.ietf.org/doc/rfc2136/) to
                          manage DNS01 challenge records.
                        properties:
                          nameserver:
                            description: The IP address or hostname of an authoritative
                              DNS server supporting RFC2136 in the form host:port.
                              If the host is an IPv6 address it must be enclosed in
                              square brackets (e.g [2001:db8::1]) ; port is optional.
                              This field is required.
                            type: string
                          tsigAlgorithm:
                            description: 'The TSIG Algorithm configured in the DNS
                              supporting RFC2136. Used only when ``tsigSecretSecretRef``
                              and ``tsigKeyName`` are defined. Supported values are
                              (case-insensitive): ``HMACMD5`` (default), ``HMACSHA1``,
                              ``HMACSHA256`` or ``HMACSHA512``.'
                            type: string
                          tsigKeyName:
                            description: The TSIG Key name configured in the DNS.
                              If ``tsigSecretSecretRef`` is defined, this field is
                              required.
                            type: string
                          tsigSecretSecretRef:
                            description: The name of the secret containing the TSIG
                              value. If ``tsigKeyName`` is defined, this field is
                              required.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - nameserver
                        type: object
                      route53:
                        description: Use the AWS Route53 API to manage DNS01 challenge
                          records.
                        properties:
                          accessKeyID:
                            description: 'The AccessKeyID is used for authentication.
                              Cannot be set when SecretAccessKeyID is set. If neither
                              the Access Key nor Key ID are set, we fall-back to using
                              env vars, shared credentials file or AWS Instance metadata,
                              see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                            type: string
                          accessKeyIDSecretRef:
                            description: 'The SecretAccessKey is used for authentication.
                              If set, pull the AWS access key ID from a key within
                              a Kubernetes Secret. Cannot be set when AccessKeyID
                              is set. If neither the Access Key nor Key ID are set,
                              we fall-back to using env vars, shared credentials file
                              or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          hostedZoneID:
                            description: If set, the provider will manage only this
                              zone in Route53 and will not do an lookup using the
                              route53:ListHostedZonesByName api call.
                            type: string
                          region:
                            description: Always set the region when using AccessKeyID
                              and SecretAccessKey
                            type: string
                          role:
                            description: Role is a Role ARN which the Route53 provider
                              will assume using either the explicit credentials AccessKeyID/SecretAccessKey
                              or the inferred credentials from environment variables,
                              shared credentials file or AWS Instance metadata
                            type: string
                          secretAccessKeySecretRef:
                            description: 'The SecretAccessKey is used for authentication.
                              If neither the Access Key nor Key ID are set, we fall-back
                              to using env vars, shared credentials file or AWS Instance
                              metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - region
                        type: object
                      webhook:
                        description: Configure an external webhook based DNS01 challenge
                          solver to manage DNS01 challenge records.
                        properties:
                          config:
                            description: Additional configuration that should be passed
                              to the webhook apiserver when challenges are processed.
                              This can contain arbitrary JSON data. Secret values
                              should not be specified in this stanza. If secret values
                              are needed (e.g. credentials for a DNS service), you
                              should use a SecretKeySelector to reference a Secret
                              resource. For details on the schema of this field, consult
                              the webhook provider implementation's documentation.
                            x-kubernetes-preserve-unknown-fields: true
                          groupName:
                            description: The API group name that should be used when
                              POSTing ChallengePayload resources to the webhook apiserver.
                              This should be the same as the GroupName specified in
                              the webhook provider implementation.
                            type: string
                          solverName:
                            description: The name of the solver to use, as defined
                              in the webhook provider implementation. This will typically
                              be the name of the provider, e.g. 'cloudflare'.
                            type: string
                        required:
                        - groupName
                        - solverName
                        type: object
                    type: object
                  http01:
                    description: Configures cert-manager to attempt to complete authorizations
                      by performing the HTTP01 challenge flow. It is not possible
                      to obtain certificates for wildcard domain names (e.g. `*.example.com`)
                      using the HTTP01 challenge mechanism.
                    properties:
                      gatewayHTTPRoute:
                        description: The Gateway API is a sig-network community API
                          that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/).
                          The Gateway solver will create HTTPRoutes with the specified
                          labels in the same namespace as the challenge. This solver
                          is experimental, and fields / behaviour may change in the
                          future.
                        properties:
                          labels:
                            additionalProperties:
                              type: string
                            description: Custom labels that will be applied to HTTPRoutes
                              created by cert-manager while solving HTTP-01 challenges.
                            type: object
                          parentRefs:
                            description: 'When solving an HTTP-01 challenge, cert-manager
                              creates an HTTPRoute. cert-manager needs to know which
                              parentRefs should be used when creating the HTTPRoute.
                              Usually, the parentRef references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                            items:
                              description: "ParentReference identifies an API object
                                (usually a Gateway) that can be considered a parent
                                of this resource (usually a route). The only kind
                                of parent resource with \"Core\" support is Gateway.
                                This API may be extended in the future to support
                                additional kinds of parent resources, such as HTTPRoute.
                                \n The API object must be valid in the cluster; the
                                Group and Kind must be registered in the cluster for
                                this reference to be valid."
                              properties:
                                group:
                                  default: gateway.networking.k8s.io
                                  description: "Group is the group of the referent.
                                    When unspecified, \"gateway.networking.k8s.io\"
                                    is inferred. To set the core API group (such as
                                    for a \"Service\" kind referent), Group must be
                                    explicitly set to \"\" (empty string). \n Support:
                                    Core"
                                  maxLength: 253
                                  pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  type: string
                                kind:
                                  default: Gateway
                                  description: "Kind is kind of the referent. \n Support:
                                    Core (Gateway) \n Support: Implementation-specific
                                    (Other Resources)"
                                  maxLength: 63
                                  minLength: 1
                                  pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                  type: string
                                name:
                                  description: "Name is the name of the referent.
                                    \n Support: Core"
                                  maxLength: 253
                                  minLength: 1
                                  type: string
                                namespace:
                                  description: "Namespace is the namespace of the
                                    referent. When unspecified, this refers to the
                                    local namespace of the Route. \n Note that there
                                    are specific rules for ParentRefs which cross
                                    namespace boundaries. Cross-namespace references
                                    are only valid if they are explicitly allowed
                                    by something in the namespace they are referring
                                    to. For example: Gateway has the AllowedRoutes
                                    field, and ReferenceGrant provides a generic way
                                    to enable any other kind of cross-namespace reference.
                                    \n Support: Core"
                                  maxLength: 63
                                  minLength: 1
                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                  type: string
                                port:
                                  description: "Port is the network port this Route
                                    targets. It can be interpreted differently based
                                    on the type of parent resource. \n When the parent
                                    resource is a Gateway, this targets all listeners
                                    listening on the specified port that also support
                                    this kind of Route(and select this Route). It's
                                    not recommended to set `Port` unless the networking
                                    behaviors specified in a Route must apply to a
                                    specific port as opposed to a listener(s) whose
                                    port(s) may be changed. When both Port and SectionName
                                    are specified, the name and port of the selected
                                    listener must match both specified values. \n
                                    Implementations MAY choose to support other parent
                                    resources. Implementations supporting other types
                                    of parent resources MUST clearly document how/if
                                    Port is interpreted. \n For the purpose of status,
                                    an attachment is considered successful as long
                                    as the parent resource accepts it partially. For
                                    example, Gateway listeners can restrict which
                                    Routes can attach to them by Route kind, namespace,
                                    or hostname. If 1 of 2 Gateway listeners accept
                                    attachment from the referencing Route, the Route
                                    MUST be considered successfully attached. If no
                                    Gateway listeners accept attachment from this
                                    Route, the Route MUST be considered detached from
                                    the Gateway. \n Support: Extended \n <gateway:experimental>"
                                  format: int32
                                  maximum: 65535
                                  minimum: 1
                                  type: integer
                                sectionName:
                                  description: "SectionName is the name of a section
                                    within the target resource. In the following resources,
                                    SectionName is interpreted as the following: \n
                                    * Gateway: Listener Name. When both Port (experimental)
                                    and SectionName are specified, the name and port
                                    of the selected listener must match both specified
                                    values. \n Implementations MAY choose to support
                                    attaching Routes to other resources. If that is
                                    the case, they MUST clearly document how SectionName
                                    is interpreted. \n When unspecified (empty string),
                                    this will reference the entire resource. For the
                                    purpose of status, an attachment is considered
                                    successful if at least one section in the parent
                                    resource accepts it. For example, Gateway listeners
                                    can restrict which Routes can attach to them by
                                    Route kind, namespace, or hostname. If 1 of 2
                                    Gateway listeners accept attachment from the referencing
                                    Route, the Route MUST be considered successfully
                                    attached. If no Gateway listeners accept attachment
                                    from this Route, the Route MUST be considered
                                    detached from the Gateway. \n Support: Core"
                                  maxLength: 253
                                  minLength: 1
                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                          serviceType:
                            description: Optional service type for Kubernetes solver
                              service. Supported values are NodePort or ClusterIP.
                              If unset, defaults to NodePort.
                            type: string
                        type: object
                      ingress:
                        description: The ingress based HTTP01 challenge solver will
                          solve challenges by creating or modifying Ingress resources
                          in order to route requests for '/.well-known/acme-challenge/XYZ'
                          to 'challenge solver' pods that are provisioned by cert-manager
                          for each Challenge to be completed.
                        properties:
                          class:
                            description: This field configures the annotation `kubernetes.io/ingress.class`
                              when creating Ingress resources to solve ACME challenges
                              that use this challenge solver. Only one of `class`,
                              `name` or `ingressClassName` may be specified.
                            type: string
                          ingressClassName:
                            description: This field configures the field `ingressClassName`
                              on the created Ingress resources used to solve ACME
                              challenges that use this challenge solver. This is the
                              recommended way of configuring the ingress class. Only
                              one of `class`, `name` or `ingressClassName` may be
                              specified.
                            type: string
                          ingressTemplate:
                            description: Optional ingress template used to configure
                              the ACME challenge solver ingress used for HTTP01 challenges.
                            properties:
                              metadata:
                                description: ObjectMeta overrides for the ingress
                                  used to solve HTTP01 challenges. Only the 'labels'
                                  and 'annotations' fields may be set. If labels or
                                  annotations overlap with in-built values, the values
                                  here will override the in-built values.
                                properties:
                                  annotations:
                                    additionalProperties:
                                      type: string
                                    description: Annotations that should be added
                                      to the created ACME HTTP01 solver ingress.
                                    type: object
                                  labels:
                                    additionalProperties:
                                      type: string
                                    description: Labels that should be added to the
                                      created ACME HTTP01 solver ingress.
                                    type: object
                                type: object
                            type: object
                          name:
                            description: The name of the ingress resource that should
                              have ACME challenge solving routes inserted into it
                              in order to solve HTTP01 challenges. This is typically
                              used in conjunction with ingress controllers like ingress-gce,
                              which maintains a 1:1 mapping between external IPs and
                              ingress resources. Only one of `class`, `name` or `ingressClassName`
                              may be specified.
                            type: string
                          podTemplate:
                            description: Optional pod template used to configure the
                              ACME challenge solver pods used for HTTP01 challenges.
                            properties:
                              metadata:
                                description: ObjectMeta overrides for the pod used
                                  to solve HTTP01 challenges. Only the 'labels' and
                                  'annotations' fields may be set. If labels or annotations
                                  overlap with in-built values, the values here will
                                  override the in-built values.
                                properties:
                                  annotations:
                                    additionalProperties:
                                      type: string
                                    description: Annotations that should be added
                                      to the create ACME HTTP01 solver pods.
                                    type: object
                                  labels:
                                    additionalProperties:
                                      type: string
                                    description: Labels that should be added to the
                                      created ACME HTTP01 solver pods.
                                    type: object
                                type: object
                              spec:
                                description: PodSpec defines overrides for the HTTP01
                                  challenge solver pod. Check ACMEChallengeSolverHTTP01IngressPodSpec
                                  to find out currently supported fields. All other
                                  fields will be ignored.
                                properties:
                                  affinity:
                                    description: If specified, the pod's scheduling
                                      constraints
                                    properties:
                                      nodeAffinity:
                                        description: Describes node affinity scheduling
                                          rules for the pod.
                                        properties:
                                          preferredDuringSchedulingIgnoredDuringExecution:
                                            description: The scheduler will prefer
                                              to schedule pods to nodes that satisfy
                                              the affinity expressions specified by
                                              this field, but it may choose a node
                                              that violates one or more of the expressions.
                                              The node that is most preferred is the
                                              one with the greatest sum of weights,
                                              i.e. for each node that meets all of
                                              the scheduling requirements (resource
                                              request, requiredDuringScheduling affinity
                                              expressions, etc.), compute a sum by
                                              iterating through the elements of this
                                              field and adding "weight" to the sum
                                              if the node matches the corresponding
                                              matchExpressions; the node(s) with the
                                              highest sum are the most preferred.
                                            items:
                                              description: An empty preferred scheduling
                                                term matches all objects with implicit
                                                weight 0 (i.e. it's a no-op). A null
                                                preferred scheduling term matches
                                                no objects (i.e. is also a no-op).
                                              properties:
                                                preference:
                                                  description: A node selector term,
                                                    associated with the corresponding
                                                    weight.
                                                  properties:
                                                    matchExpressions:
                                                      description: A list of node
                                                        selector requirements by node's
                                                        labels.
                                                      items:
                                                        description: A node selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: The label
                                                              key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: Represents
                                                              a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists, DoesNotExist.
                                                              Gt, and Lt.
                                                            type: string
                                                          values:
                                                            description: An array
                                                              of string values. If
                                                              the operator is In or
                                                              NotIn, the values array
                                                              must be non-empty. If
                                                              the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. If the operator
                                                              is Gt or Lt, the values
                                                              array must have a single
                                                              element, which will
                                                              be interpreted as an
                                                              integer. This array
                                                              is replaced during a
                                                              strategic merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchFields:
                                                      description: A list of node
                                                        selector requirements by node's
                                                        fields.
                                                      items:
                                                        description: A node selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: The label
                                                              key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: Represents
                                                              a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists, DoesNotExist.
                                                              Gt, and Lt.
                                                            type: string
                                                          values:
                                                            description: An array
                                                              of string values. If
                                                              the operator is In or
                                                              NotIn, the values array
                                                              must be non-empty. If
                                                              the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. If the operator
                                                              is Gt or Lt, the values
                                                              array must have a single
                                                              element, which will
                                                              be interpreted as an
                                                              integer. This array
                                                              is replaced during a
                                                              strategic merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                weight:
                                                  description: Weight associated with
                                                    matching the corresponding nodeSelectorTerm,
                                                    in the range 1-100.
                                                  format: int32
                                                  type: integer
                                              required:
                                              - preference
                                              - weight
                                              type: object
                                            type: array
                                          requiredDuringSchedulingIgnoredDuringExecution:
                                            description: If the affinity requirements
                                              specified by this field are not met
                                              at scheduling time, the pod will not
                                              be scheduled onto the node. If the affinity
                                              requirements specified by this field
                                              cease to be met at some point during
                                              pod execution (e.g. due to an update),
                                              the system may or may not try to eventually
                                              evict the pod from its node.
                                            properties:
                                              nodeSelectorTerms:
                                                description: Required. A list of node
                                                  selector terms. The terms are ORed.
                                                items:
                                                  description: A null or empty node
                                                    selector term matches no objects.
                                                    The requirements of them are ANDed.
                                                    The TopologySelectorTerm type
                                                    implements a subset of the NodeSelectorTerm.
                                                  properties:
                                                    matchExpressions:
                                                      description: A list of node
                                                        selector requirements by node's
                                                        labels.
                                                      items:
                                                        description: A node selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: The label
                                                              key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: Represents
                                                              a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists, DoesNotExist.
                                                              Gt, and Lt.
                                                            type: string
                                                          values:
                                                            description: An array
                                                              of string values. If
                                                              the operator is In or
                                                              NotIn, the values array
                                                              must be non-empty. If
                                                              the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. If the operator
                                                              is Gt or Lt, the values
                                                              array must have a single
                                                              element, which will
                                                              be interpreted as an
                                                              integer. This array
                                                              is replaced during a
                                                              strategic merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchFields:
                                                      description: A list of node
                                                        selector requirements by node's
                                                        fields.
                                                      items:
                                                        description: A node selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: The label
                                                              key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: Represents
                                                              a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists, DoesNotExist.
                                                              Gt, and Lt.
                                                            type: string
                                                          values:
                                                            description: An array
                                                              of string values. If
                                                              the operator is In or
                                                              NotIn, the values array
                                                              must be non-empty. If
                                                              the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. If the operator
                                                              is Gt or Lt, the values
                                                              array must have a single
                                                              element, which will
                                                              be interpreted as an
                                                              integer. This array
                                                              is replaced during a
                                                              strategic merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                type: array
                                            required:
                                            - nodeSelectorTerms
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                      podAffinity:
                                        description: Describes pod affinity scheduling
                                          rules (e.g. co-locate this pod in the same
                                          node, zone, etc. as some other pod(s)).
                                        properties:
                                          preferredDuringSchedulingIgnoredDuringExecution:
                                            description: The scheduler will prefer
                                              to schedule pods to nodes that satisfy
                                              the affinity expressions specified by
                                              this field, but it may choose a node
                                              that violates one or more of the expressions.
                                              The node that is most preferred is the
                                              one with the greatest sum of weights,
                                              i.e. for each node that meets all of
                                              the scheduling requirements (resource
                                              request, requiredDuringScheduling affinity
                                              expressions, etc.), compute a sum by
                                              iterating through the elements of this
                                              field and adding "weight" to the sum
                                              if the node has pods which matches the
                                              corresponding podAffinityTerm; the node(s)
                                              with the highest sum are the most preferred.
                                            items:
                                              description: The weights of all of the
                                                matched WeightedPodAffinityTerm fields
                                                are added per-node to find the most
                                                preferred node(s)
                                              properties:
                                                podAffinityTerm:
                                                  description: Required. A pod affinity
                                                    term, associated with the corresponding
                                                    weight.
                                                  properties:
                                                    labelSelector:
                                                      description: A label query over
                                                        a set of resources, in this
                                                        case pods.
                                                      properties:
                                                        matchExpressions:
                                                          description: matchExpressions
                                                            is a list of label selector
                                                            requirements. The requirements
                                                            are ANDed.
                                                          items:
                                                            description: A label selector
                                                              requirement is a selector
                                                              that contains values,
                                                              a key, and an operator
                                                              that relates the key
                                                              and values.
                                                            properties:
                                                              key:
                                                                description: key is
                                                                  the label key that
                                                                  the selector applies
                                                                  to.
                                                                type: string
                                                              operator:
                                                                description: operator
                                                                  represents a key's
                                                                  relationship to
                                                                  a set of values.
                                                                  Valid operators
                                                                  are In, NotIn, Exists
                                                                  and DoesNotExist.
                                                                type: string
                                                              values:
                                                                description: values
                                                                  is an array of string
                                                                  values. If the operator
                                                                  is In or NotIn,
                                                                  the values array
                                                                  must be non-empty.
                                                                  If the operator
                                                                  is Exists or DoesNotExist,
                                                                  the values array
                                                                  must be empty. This
                                                                  array is replaced
                                                                  during a strategic
                                                                  merge patch.
                                                                items:
                                                                  type: string
                                                                type: array
                                                            required:
                                                            - key
                                                            - operator
                                                            type: object
                                                          type: array
                                                        matchLabels:
                                                          additionalProperties:
                                                            type: string
                                                          description: matchLabels
                                                            is a map of {key,value}
                                                            pairs. A single {key,value}
                                                            in the matchLabels map
                                                            is equivalent to an element
                                                            of matchExpressions, whose
                                                            key field is "key", the
                                                            operator is "In", and
                                                            the values array contains
                                                            only "value". The requirements
                                                            are ANDed.
                                                          type: object
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                    namespaceSelector:
                                                      description: A label query over
                                                        the set of namespaces that
                                                        the term applies to. The term
                                                        is applied to the union of
                                                        the namespaces selected by
                                                        this field and the ones listed
                                                        in the namespaces field. null
                                                        selector and null or empty
                                                        namespaces list means "this
                                                        pod's namespace". An empty
                                                        selector ({}) matches all
                                                        namespaces.
                                                      properties:
                                                        matchExpressions:
                                                          description: matchExpressions
                                                            is a list of label selector
                                                            requirements. The requirements
                                                            are ANDed.
                                                          items:
                                                            description: A label selector
                                                              requirement is a selector
                                                              that contains values,
                                                              a key, and an operator
                                                              that relates the key
                                                              and values.
                                                            properties:
                                                              key:
                                                                description: key is
                                                                  the label key that
                                                                  the selector applies
                                                                  to.
                                                                type: string
                                                              operator:
                                                                description: operator
                                                                  represents a key's
                                                                  relationship to
                                                                  a set of values.
                                                                  Valid operators
                                                                  are In, NotIn, Exists
                                                                  and DoesNotExist.
                                                                type: string
                                                              values:
                                                                description: values
                                                                  is an array of string
                                                                  values. If the operator
                                                                  is In or NotIn,
                                                                  the values array
                                                                  must be non-empty.
                                                                  If the operator
                                                                  is Exists or DoesNotExist,
                                                                  the values array
                                                                  must be empty. This
                                                                  array is replaced
                                                                  during a strategic
                                                                  merge patch.
                                                                items:
                                                                  type: string
                                                                type: array
                                                            required:
                                                            - key
                                                            - operator
                                                            type: object
                                                          type: array
                                                        matchLabels:
                                                          additionalProperties:
                                                            type: string
                                                          description: matchLabels
                                                            is a map of {key,value}
                                                            pairs. A single {key,value}
                                                            in the matchLabels map
                                                            is equivalent to an element
                                                            of matchExpressions, whose
                                                            key field is "key", the
                                                            operator is "In", and
                                                            the values array contains
                                                            only "value". The requirements
                                                            are ANDed.
                                                          type: object
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                    namespaces:
                                                      description: namespaces specifies
                                                        a static list of namespace
                                                        names that the term applies
                                                        to. The term is applied to
                                                        the union of the namespaces
                                                        listed in this field and the
                                                        ones selected by namespaceSelector.
                                                        null or empty namespaces list
                                                        and null namespaceSelector
                                                        means "this pod's namespace".
                                                      items:
                                                        type: string
                                                      type: array
                                                    topologyKey:
                                                      description: This pod should
                                                        be co-located (affinity) or
                                                        not co-located (anti-affinity)
                                                        with the pods matching the
                                                        labelSelector in the specified
                                                        namespaces, where co-located
                                                        is defined as running on a
                                                        node whose value of the label
                                                        with key topologyKey matches
                                                        that of any node on which
                                                        any of the selected pods is
                                                        running. Empty topologyKey
                                                        is not allowed.
                                                      type: string
                                                  required:
                                                  - topologyKey
                                                  type: object
                                                weight:
                                                  description: weight associated with
                                                    matching the corresponding podAffinityTerm,
                                                    in the range 1-100.
                                                  format: int32
                                                  type: integer
                                              required:
                                              - podAffinityTerm
                                              - weight
                                              type: object
                                            type: array
                                          requiredDuringSchedulingIgnoredDuringExecution:
                                            description: If the affinity requirements
                                              specified by this field are not met
                                              at scheduling time, the pod will not
                                              be scheduled onto the node. If the affinity
                                              requirements specified by this field
                                              cease to be met at some point during
                                              pod execution (e.g. due to a pod label
                                              update), the system may or may not try
                                              to eventually evict the pod from its
                                              node. When there are multiple elements,
                                              the lists of nodes corresponding to
                                              each podAffinityTerm are intersected,
                                              i.e. all terms must be satisfied.
                                            items:
                                              description: Defines a set of pods (namely
                                                those matching the labelSelector relative
                                                to the given namespace(s)) that this
                                                pod should be co-located (affinity)
                                                or not co-located (anti-affinity)
                                                with, where co-located is defined
                                                as running on a node whose value of
                                                the label with key <topologyKey> matches
                                                that of any node on which a pod of
                                                the set of pods is running
                                              properties:
                                                labelSelector:
                                                  description: A label query over
                                                    a set of resources, in this case
                                                    pods.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaceSelector:
                                                  description: A label query over
                                                    the set of namespaces that the
                                                    term applies to. The term is applied
                                                    to the union of the namespaces
                                                    selected by this field and the
                                                    ones listed in the namespaces
                                                    field. null selector and null
                                                    or empty namespaces list means
                                                    "this pod's namespace". An empty
                                                    selector ({}) matches all namespaces.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaces:
                                                  description: namespaces specifies
                                                    a static list of namespace names
                                                    that the term applies to. The
                                                    term is applied to the union of
                                                    the namespaces listed in this
                                                    field and the ones selected by
                                                    namespaceSelector. null or empty
                                                    namespaces list and null namespaceSelector
                                                    means "this pod's namespace".
                                                  items:
                                                    type: string
                                                  type: array
                                                topologyKey:
                                                  description: This pod should be
                                                    co-located (affinity) or not co-located
                                                    (anti-affinity) with the pods
                                                    matching the labelSelector in
                                                    the specified namespaces, where
                                                    co-located is defined as running
                                                    on a node whose value of the label
                                                    with key topologyKey matches that
                                                    of any node on which any of the
                                                    selected pods is running. Empty
                                                    topologyKey is not allowed.
                                                  type: string
                                              required:
                                              - topologyKey
                                              type: object
                                            type: array
                                        type: object
                                      podAntiAffinity:
                                        description: Describes pod anti-affinity scheduling
                                          rules (e.g. avoid putting this pod in the
                                          same node, zone, etc. as some other pod(s)).
                                        properties:
                                          preferredDuringSchedulingIgnoredDuringExecution:
                                            description: The scheduler will prefer
                                              to schedule pods to nodes that satisfy
                                              the anti-affinity expressions specified
                                              by this field, but it may choose a node
                                              that violates one or more of the expressions.
                                              The node that is most preferred is the
                                              one with the greatest sum of weights,
                                              i.e. for each node that meets all of
                                              the scheduling requirements (resource
                                              request, requiredDuringScheduling anti-affinity
                                              expressions, etc.), compute a sum by
                                              iterating through the elements of this
                                              field and adding "weight" to the sum
                                              if the node has pods which matches the
                                              corresponding podAffinityTerm; the node(s)
                                              with the highest sum are the most preferred.
                                            items:
                                              description: The weights of all of the
                                                matched WeightedPodAffinityTerm fields
                                                are added per-node to find the most
                                                preferred node(s)
                                              properties:
                                                podAffinityTerm:
                                                  description: Required. A pod affinity
                                                    term, associated with the corresponding
                                                    weight.
                                                  properties:
                                                    labelSelector:
                                                      description: A label query over
                                                        a set of resources, in this
                                                        case pods.
                                                      properties:
                                                        matchExpressions:
                                                          description: matchExpressions
                                                            is a list of label selector
                                                            requirements. The requirements
                                                            are ANDed.
                                                          items:
                                                            description: A label selector
                                                              requirement is a selector
                                                              that contains values,
                                                              a key, and an operator
                                                              that relates the key
                                                              and values.
                                                            properties:
                                                              key:
                                                                description: key is
                                                                  the label key that
                                                                  the selector applies
                                                                  to.
                                                                type: string
                                                              operator:
                                                                description: operator
                                                                  represents a key's
                                                                  relationship to
                                                                  a set of values.
                                                                  Valid operators
                                                                  are In, NotIn, Exists
                                                                  and DoesNotExist.
                                                                type: string
                                                              values:
                                                                description: values
                                                                  is an array of string
                                                                  values. If the operator
                                                                  is In or NotIn,
                                                                  the values array
                                                                  must be non-empty.
                                                                  If the operator
                                                                  is Exists or DoesNotExist,
                                                                  the values array
                                                                  must be empty. This
                                                                  array is replaced
                                                                  during a strategic
                                                                  merge patch.
                                                                items:
                                                                  type: string
                                                                type: array
                                                            required:
                                                            - key
                                                            - operator
                                                            type: object
                                                          type: array
                                                        matchLabels:
                                                          additionalProperties:
                                                            type: string
                                                          description: matchLabels
                                                            is a map of {key,value}
                                                            pairs. A single {key,value}
                                                            in the matchLabels map
                                                            is equivalent to an element
                                                            of matchExpressions, whose
                                                            key field is "key", the
                                                            operator is "In", and
                                                            the values array contains
                                                            only "value". The requirements
                                                            are ANDed.
                                                          type: object
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                    namespaceSelector:
                                                      description: A label query over
                                                        the set of namespaces that
                                                        the term applies to. The term
                                                        is applied to the union of
                                                        the namespaces selected by
                                                        this field and the ones listed
                                                        in the namespaces field. null
                                                        selector and null or empty
                                                        namespaces list means "this
                                                        pod's namespace". An empty
                                                        selector ({}) matches all
                                                        namespaces.
                                                      properties:
                                                        matchExpressions:
                                                          description: matchExpressions
                                                            is a list of label selector
                                                            requirements. The requirements
                                                            are ANDed.
                                                          items:
                                                            description: A label selector
                                                              requirement is a selector
                                                              that contains values,
                                                              a key, and an operator
                                                              that relates the key
                                                              and values.
                                                            properties:
                                                              key:
                                                                description: key is
                                                                  the label key that
                                                                  the selector applies
                                                                  to.
                                                                type: string
                                                              operator:
                                                                description: operator
                                                                  represents a key's
                                                                  relationship to
                                                                  a set of values.
                                                                  Valid operators
                                                                  are In, NotIn, Exists
                                                                  and DoesNotExist.
                                                                type: string
                                                              values:
                                                                description: values
                                                                  is an array of string
                                                                  values. If the operator
                                                                  is In or NotIn,
                                                                  the values array
                                                                  must be non-empty.
                                                                  If the operator
                                                                  is Exists or DoesNotExist,
                                                                  the values array
                                                                  must be empty. This
                                                                  array is replaced
                                                                  during a strategic
                                                                  merge patch.
                                                                items:
                                                                  type: string
                                                                type: array
                                                            required:
                                                            - key
                                                            - operator
                                                            type: object
                                                          type: array
                                                        matchLabels:
                                                          additionalProperties:
                                                            type: string
                                                          description: matchLabels
                                                            is a map of {key,value}
                                                            pairs. A single {key,value}
                                                            in the matchLabels map
                                                            is equivalent to an element
                                                            of matchExpressions, whose
                                                            key field is "key", the
                                                            operator is "In", and
                                                            the values array contains
                                                            only "value". The requirements
                                                            are ANDed.
                                                          type: object
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                    namespaces:
                                                      description: namespaces specifies
                                                        a static list of namespace
                                                        names that the term applies
                                                        to. The term is applied to
                                                        the union of the namespaces
                                                        listed in this field and the
                                                        ones selected by namespaceSelector.
                                                        null or empty namespaces list
                                                        and null namespaceSelector
                                                        means "this pod's namespace".
                                                      items:
                                                        type: string
                                                      type: array
                                                    topologyKey:
                                                      description: This pod should
                                                        be co-located (affinity) or
                                                        not co-located (anti-affinity)
                                                        with the pods matching the
                                                        labelSelector in the specified
                                                        namespaces, where co-located
                                                        is defined as running on a
                                                        node whose value of the label
                                                        with key topologyKey matches
                                                        that of any node on which
                                                        any of the selected pods is
                                                        running. Empty topologyKey
                                                        is not allowed.
                                                      type: string
                                                  required:
                                                  - topologyKey
                                                  type: object
                                                weight:
                                                  description: weight associated with
                                                    matching the corresponding podAffinityTerm,
                                                    in the range 1-100.
                                                  format: int32
                                                  type: integer
                                              required:
                                              - podAffinityTerm
                                              - weight
                                              type: object
                                            type: array
                                          requiredDuringSchedulingIgnoredDuringExecution:
                                            description: If the anti-affinity requirements
                                              specified by this field are not met
                                              at scheduling time, the pod will not
                                              be scheduled onto the node. If the anti-affinity
                                              requirements specified by this field
                                              cease to be met at some point during
                                              pod execution (e.g. due to a pod label
                                              update), the system may or may not try
                                              to eventually evict the pod from its
                                              node. When there are multiple elements,
                                              the lists of nodes corresponding to
                                              each podAffinityTerm are intersected,
                                              i.e. all terms must be satisfied.
                                            items:
                                              description: Defines a set of pods (namely
                                                those matching the labelSelector relative
                                                to the given namespace(s)) that this
                                                pod should be co-located (affinity)
                                                or not co-located (anti-affinity)
                                                with, where co-located is defined
                                                as running on a node whose value of
                                                the label with key <topologyKey> matches
                                                that of any node on which a pod of
                                                the set of pods is running
                                              properties:
                                                labelSelector:
                                                  description: A label query over
                                                    a set of resources, in this case
                                                    pods.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaceSelector:
                                                  description: A label query over
                                                    the set of namespaces that the
                                                    term applies to. The term is applied
                                                    to the union of the namespaces
                                                    selected by this field and the
                                                    ones listed in the namespaces
                                                    field. null selector and null
                                                    or empty namespaces list means
                                                    "this pod's namespace". An empty
                                                    selector ({}) matches all namespaces.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaces:
                                                  description: namespaces specifies
                                                    a static list of namespace names
                                                    that the term applies to. The
                                                    term is applied to the union of
                                                    the namespaces listed in this
                                                    field and the ones selected by
                                                    namespaceSelector. null or empty
                                                    namespaces list and null namespaceSelector
                                                    means "this pod's namespace".
                                                  items:
                                                    type: string
                                                  type: array
                                                topologyKey:
                                                  description: This pod should be
                                                    co-located (affinity) or not co-located
                                                    (anti-affinity) with the pods
                                                    matching the labelSelector in
                                                    the specified namespaces, where
                                                    co-located is defined as running
                                                    on a node whose value of the label
                                                    with key topologyKey matches that
                                                    of any node on which any of the
                                                    selected pods is running. Empty
                                                    topologyKey is not allowed.
                                                  type: string
                                              required:
                                              - topologyKey
                                              type: object
                                            type: array
                                        type: object
                                    type: object
                                  imagePullSecrets:
                                    description: If specified, the pod's imagePullSecrets
                                    items:
                                      description: LocalObjectReference contains enough
                                        information to let you locate the referenced
                                        object inside the same namespace.
                                      properties:
                                        name:
                                          description: 'Name of the referent. More
                                            info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion,
                                            kind, uid?'
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    type: array
                                  nodeSelector:
                                    additionalProperties:
                                      type: string
                                    description: 'NodeSelector is a selector which
                                      must be true for the pod to fit on a node. Selector
                                      which must match a node''s labels for the pod
                                      to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                    type: object
                                  priorityClassName:
                                    description: If specified, the pod's priorityClassName.
                                    type: string
                                  serviceAccountName:
                                    description: If specified, the pod's service account
                                    type: string
                                  tolerations:
                                    description: If specified, the pod's tolerations.
                                    items:
                                      description: The pod this Toleration is attached
                                        to tolerates any taint that matches the triple
                                        <key,value,effect> using the matching operator
                                        <operator>.
                                      properties:
                                        effect:
                                          description: Effect indicates the taint
                                            effect to match. Empty means match all
                                            taint effects. When specified, allowed
                                            values are NoSchedule, PreferNoSchedule
                                            and NoExecute.
                                          type: string
                                        key:
                                          description: Key is the taint key that the
                                            toleration applies to. Empty means match
                                            all taint keys. If the key is empty, operator
                                            must be Exists; this combination means
                                            to match all values and all keys.
                                          type: string
                                        operator:
                                          description: Operator represents a key's
                                            relationship to the value. Valid operators
                                            are Exists and Equal. Defaults to Equal.
                                            Exists is equivalent to wildcard for value,
                                            so that a pod can tolerate all taints
                                            of a particular category.
                                          type: string
                                        tolerationSeconds:
                                          description: TolerationSeconds represents
                                            the period of time the toleration (which
                                            must be of effect NoExecute, otherwise
                                            this field is ignored) tolerates the taint.
                                            By default, it is not set, which means
                                            tolerate the taint forever (do not evict).
                                            Zero and negative values will be treated
                                            as 0 (evict immediately) by the system.
                                          format: int64
                                          type: integer
                                        value:
                                          description: Value is the taint value the
                                            toleration matches to. If the operator
                                            is Exists, the value should be empty,
                                            otherwise just a regular string.
                                          type: string
                                      type: object
                                    type: array
                                type: object
                            type: object
                          serviceType:
                            description: Optional service type for Kubernetes solver
                              service. Supported values are NodePort or ClusterIP.
                              If unset, defaults to NodePort.
                            type: string
                        type: object
                    type: object
                  selector:
                    description: Selector selects a set of DNSNames on the Certificate
                      resource that should be solved using this challenge solver.
                      If not specified, the solver will be treated as the 'default'
                      solver with the lowest priority, i.e. if any other solver has
                      a more specific match, it will be used instead.
                    properties:
                      dnsNames:
                        description: List of DNSNames that this solver will be used
                          to solve. If specified and a match is found, a dnsNames
                          selector will take precedence over a dnsZones selector.
                          If multiple solvers match with the same dnsNames value,
                          the solver with the most matching labels in matchLabels
                          will be selected. If neither has more matches, the solver
                          defined earlier in the list will be selected.
                        items:
                          type: string
                        type: array
                      dnsZones:
                        description: List of DNSZones that this solver will be used
                          to solve. The most specific DNS zone match specified here
                          will take precedence over other DNS zone matches, so a solver
                          specifying sys.example.com will be selected over one specifying
                          example.com for the domain www.sys.example.com. If multiple
                          solvers match with the same dnsZones value, the solver with
                          the most matching labels in matchLabels will be selected.
                          If neither has more matches, the solver defined earlier
                          in the list will be selected.
                        items:
                          type: string
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: A label selector that is used to refine the set
                          of certificate's that this challenge solver will apply to.
                        type: object
                    type: object
                type: object
              token:
                description: The ACME challenge token for this challenge. This is
                  the raw value returned from the ACME server.
                type: string
              type:
                description: The type of ACME challenge this resource represents.
                  One of "HTTP-01" or "DNS-01".
                enum:
                - HTTP-01
                - DNS-01
                type: string
              url:
                description: The URL of the ACME Challenge resource for this challenge.
                  This can be used to lookup details about the status of this challenge.
                type: string
              wildcard:
                description: wildcard will be true if this challenge is for a wildcard
                  identifier, for example '*.example.com'.
                type: boolean
            required:
            - authorizationURL
            - dnsName
            - issuerRef
            - key
            - solver
            - token
            - type
            - url
            type: object
          status:
            properties:
              presented:
                description: presented will be set to true if the challenge values
                  for this challenge are currently 'presented'. This *does not* imply
                  the self check is passing. Only that the values have been 'submitted'
                  for the appropriate challenge mechanism (i.e. the DNS01 TXT record
                  has been presented, or the HTTP01 configuration has been configured).
                type: boolean
              processing:
                description: Used to denote whether this challenge should be processed
                  or not. This field will only be set to true by the 'scheduling'
                  component. It will only be set to false by the 'challenges' controller,
                  after the challenge has reached a final state or timed out. If this
                  field is set to false, the challenge controller will not take any
                  more action.
                type: boolean
              reason:
                description: Contains human readable information on why the Challenge
                  is in the current state.
                type: string
              state:
                description: Contains the current 'state' of the challenge. If not
                  set, the state of the challenge is unknown.
                enum:
                - valid
                - ready
                - pending
                - processing
                - invalid
                - expired
                - errored
                type: string
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: clusterissuers.cert-manager.io
spec:
  group: cert-manager.io
  names:
    categories:
    - cert-manager
    kind: ClusterIssuer
    listKind: ClusterIssuerList
    plural: clusterissuers
    singular: clusterissuer
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].message
      name: Status
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: A ClusterIssuer represents a certificate issuing authority which
          can be referenced as part of `issuerRef` fields. It is similar to an Issuer,
          however it is cluster-scoped and therefore can be referenced by resources
          that exist in *any* namespace, not just the same namespace as the referent.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Desired state of the ClusterIssuer resource.
            properties:
              acme:
                description: ACME configures this issuer to communicate with a RFC8555
                  (ACME) server to obtain signed x509 certificates.
                properties:
                  caBundle:
                    description: Base64-encoded bundle of PEM CAs which can be used
                      to validate the certificate chain presented by the ACME server.
                      Mutually exclusive with SkipTLSVerify; prefer using CABundle
                      to prevent various kinds of security vulnerabilities. If CABundle
                      and SkipTLSVerify are unset, the system certificate bundle inside
                      the container is used to validate the TLS connection.
                    format: byte
                    type: string
                  disableAccountKeyGeneration:
                    description: Enables or disables generating a new ACME account
                      key. If true, the Issuer resource will *not* request a new account
                      but will expect the account key to be supplied via an existing
                      secret. If false, the cert-manager system will generate a new
                      ACME account key for the Issuer. Defaults to false.
                    type: boolean
                  email:
                    description: Email is the email address to be associated with
                      the ACME account. This field is optional, but it is strongly
                      recommended to be set. It will be used to contact you in case
                      of issues with your account or certificates, including expiry
                      notification emails. This field may be updated after the account
                      is initially registered.
                    type: string
                  enableDurationFeature:
                    description: Enables requesting a Not After date on certificates
                      that matches the duration of the certificate. This is not supported
                      by all ACME servers like Let's Encrypt. If set to true when
                      the ACME server does not support it it will create an error
                      on the Order. Defaults to false.
                    type: boolean
                  externalAccountBinding:
                    description: ExternalAccountBinding is a reference to a CA external
                      account of the ACME server. If set, upon registration cert-manager
                      will attempt to associate the given external account credentials
                      with the registered ACME account.
                    properties:
                      keyAlgorithm:
                        description: 'Deprecated: keyAlgorithm field exists for historical
                          compatibility reasons and should not be used. The algorithm
                          is now hardcoded to HS256 in golang/x/crypto/acme.'
                        enum:
                        - HS256
                        - HS384
                        - HS512
                        type: string
                      keyID:
                        description: keyID is the ID of the CA key that the External
                          Account is bound to.
                        type: string
                      keySecretRef:
                        description: keySecretRef is a Secret Key Selector referencing
                          a data item in a Kubernetes Secret which holds the symmetric
                          MAC key of the External Account Binding. The `key` is the
                          index string that is paired with the key data in the Secret
                          and should not be confused with the key data itself, or
                          indeed with the External Account Binding keyID above. The
                          secret key stored in the Secret **must** be un-padded, base64
                          URL encoded data.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - keyID
                    - keySecretRef
                    type: object
                  preferredChain:
                    description: 'PreferredChain is the chain to use if the ACME server
                      outputs multiple. PreferredChain is no guarantee that this one
                      gets delivered by the ACME endpoint. For example, for Let''s
                      Encrypt''s DST crosssign you would use: "DST Root CA X3" or
                      "ISRG Root X1" for the newer Let''s Encrypt root CA. This value
                      picks the first certificate bundle in the ACME alternative chains
                      that has a certificate with this value as its issuer''s CN'
                    maxLength: 64
                    type: string
                  privateKeySecretRef:
                    description: PrivateKey is the name of a Kubernetes Secret resource
                      that will be used to store the automatically generated ACME
                      account private key. Optionally, a `key` may be specified to
                      select a specific entry within the named Secret resource. If
                      `key` is not specified, a default of `tls.key` will be used.
                    properties:
                      key:
                        description: The key of the entry in the Secret resource's
                          `data` field to be used. Some instances of this field may
                          be defaulted, in others it may be required.
                        type: string
                      name:
                        description: 'Name of the resource being referred to. More
                          info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                        type: string
                    required:
                    - name
                    type: object
                  server:
                    description: 'Server is the URL used to access the ACME server''s
                      ''directory'' endpoint. For example, for Let''s Encrypt''s staging
                      endpoint, you would use: "https://acme-staging-v02.api.letsencrypt.org/directory".
                      Only ACME v2 endpoints (i.e. RFC 8555) are supported.'
                    type: string
                  skipTLSVerify:
                    description: 'INSECURE: Enables or disables validation of the
                      ACME server TLS certificate. If true, requests to the ACME server
                      will not have the TLS certificate chain validated. Mutually
                      exclusive with CABundle; prefer using CABundle to prevent various
                      kinds of security vulnerabilities. Only enable this option in
                      development environments. If CABundle and SkipTLSVerify are
                      unset, the system certificate bundle inside the container is
                      used to validate the TLS connection. Defaults to false.'
                    type: boolean
                  solvers:
                    description: 'Solvers is a list of challenge solvers that will
                      be used to solve ACME challenges for the matching domains. Solver
                      configurations must be provided in order to obtain certificates
                      from an ACME server. For more information, see: https://cert-manager.io/docs/configuration/acme/'
                    items:
                      description: An ACMEChallengeSolver describes how to solve ACME
                        challenges for the issuer it is part of. A selector may be
                        provided to use different solving strategies for different
                        DNS names. Only one of HTTP01 or DNS01 must be provided.
                      properties:
                        dns01:
                          description: Configures cert-manager to attempt to complete
                            authorizations by performing the DNS01 challenge flow.
                          properties:
                            acmeDNS:
                              description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns)
                                API to manage DNS01 challenge records.
                              properties:
                                accountSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                host:
                                  type: string
                              required:
                              - accountSecretRef
                              - host
                              type: object
                            akamai:
                              description: Use the Akamai DNS zone management API
                                to manage DNS01 challenge records.
                              properties:
                                accessTokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                clientSecretSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                clientTokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                serviceConsumerDomain:
                                  type: string
                              required:
                              - accessTokenSecretRef
                              - clientSecretSecretRef
                              - clientTokenSecretRef
                              - serviceConsumerDomain
                              type: object
                            azureDNS:
                              description: Use the Microsoft Azure DNS API to manage
                                DNS01 challenge records.
                              properties:
                                clientID:
                                  description: if both this and ClientSecret are left
                                    unset MSI will be used
                                  type: string
                                clientSecretSecretRef:
                                  description: if both this and ClientID are left
                                    unset MSI will be used
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                environment:
                                  description: name of the Azure environment (default
                                    AzurePublicCloud)
                                  enum:
                                  - AzurePublicCloud
                                  - AzureChinaCloud
                                  - AzureGermanCloud
                                  - AzureUSGovernmentCloud
                                  type: string
                                hostedZoneName:
                                  description: name of the DNS zone that should be
                                    used
                                  type: string
                                managedIdentity:
                                  description: managed identity configuration, can
                                    not be used at the same time as clientID, clientSecretSecretRef
                                    or tenantID
                                  properties:
                                    clientID:
                                      description: client ID of the managed identity,
                                        can not be used at the same time as resourceID
                                      type: string
                                    resourceID:
                                      description: resource ID of the managed identity,
                                        can not be used at the same time as clientID
                                      type: string
                                  type: object
                                resourceGroupName:
                                  description: resource group the DNS zone is located
                                    in
                                  type: string
                                subscriptionID:
                                  description: ID of the Azure subscription
                                  type: string
                                tenantID:
                                  description: when specifying ClientID and ClientSecret
                                    then this field is also needed
                                  type: string
                              required:
                              - resourceGroupName
                              - subscriptionID
                              type: object
                            cloudDNS:
                              description: Use the Google Cloud DNS API to manage
                                DNS01 challenge records.
                              properties:
                                hostedZoneName:
                                  description: HostedZoneName is an optional field
                                    that tells cert-manager in which Cloud DNS zone
                                    the challenge record has to be created. If left
                                    empty cert-manager will automatically choose a
                                    zone.
                                  type: string
                                project:
                                  type: string
                                serviceAccountSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - project
                              type: object
                            cloudflare:
                              description: Use the Cloudflare API to manage DNS01
                                challenge records.
                              properties:
                                apiKeySecretRef:
                                  description: 'API key to use to authenticate with
                                    Cloudflare. Note: using an API token to authenticate
                                    is now the recommended method as it allows greater
                                    control of permissions.'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                apiTokenSecretRef:
                                  description: API token used to authenticate with
                                    Cloudflare.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                email:
                                  description: Email of the account, only required
                                    when using API key based authentication.
                                  type: string
                              type: object
                            cnameStrategy:
                              description: CNAMEStrategy configures how the DNS01
                                provider should handle CNAME records when found in
                                DNS zones.
                              enum:
                              - None
                              - Follow
                              type: string
                            digitalocean:
                              description: Use the DigitalOcean DNS API to manage
                                DNS01 challenge records.
                              properties:
                                tokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - tokenSecretRef
                              type: object
                            rfc2136:
                              description: Use RFC2136 ("Dynamic Updates in the Domain
                                Name System") (https://datatracker.ietf.org/doc/rfc2136/)
                                to manage DNS01 challenge records.
                              properties:
                                nameserver:
                                  description: The IP address or hostname of an authoritative
                                    DNS server supporting RFC2136 in the form host:port.
                                    If the host is an IPv6 address it must be enclosed
                                    in square brackets (e.g [2001:db8::1]) ; port
                                    is optional. This field is required.
                                  type: string
                                tsigAlgorithm:
                                  description: 'The TSIG Algorithm configured in the
                                    DNS supporting RFC2136. Used only when ``tsigSecretSecretRef``
                                    and ``tsigKeyName`` are defined. Supported values
                                    are (case-insensitive): ``HMACMD5`` (default),
                                    ``HMACSHA1``, ``HMACSHA256`` or ``HMACSHA512``.'
                                  type: string
                                tsigKeyName:
                                  description: The TSIG Key name configured in the
                                    DNS. If ``tsigSecretSecretRef`` is defined, this
                                    field is required.
                                  type: string
                                tsigSecretSecretRef:
                                  description: The name of the secret containing the
                                    TSIG value. If ``tsigKeyName`` is defined, this
                                    field is required.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - nameserver
                              type: object
                            route53:
                              description: Use the AWS Route53 API to manage DNS01
                                challenge records.
                              properties:
                                accessKeyID:
                                  description: 'The AccessKeyID is used for authentication.
                                    Cannot be set when SecretAccessKeyID is set. If
                                    neither the Access Key nor Key ID are set, we
                                    fall-back to using env vars, shared credentials
                                    file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  type: string
                                accessKeyIDSecretRef:
                                  description: 'The SecretAccessKey is used for authentication.
                                    If set, pull the AWS access key ID from a key
                                    within a Kubernetes Secret. Cannot be set when
                                    AccessKeyID is set. If neither the Access Key
                                    nor Key ID are set, we fall-back to using env
                                    vars, shared credentials file or AWS Instance
                                    metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                hostedZoneID:
                                  description: If set, the provider will manage only
                                    this zone in Route53 and will not do an lookup
                                    using the route53:ListHostedZonesByName api call.
                                  type: string
                                region:
                                  description: Always set the region when using AccessKeyID
                                    and SecretAccessKey
                                  type: string
                                role:
                                  description: Role is a Role ARN which the Route53
                                    provider will assume using either the explicit
                                    credentials AccessKeyID/SecretAccessKey or the
                                    inferred credentials from environment variables,
                                    shared credentials file or AWS Instance metadata
                                  type: string
                                secretAccessKeySecretRef:
                                  description: 'The SecretAccessKey is used for authentication.
                                    If neither the Access Key nor Key ID are set,
                                    we fall-back to using env vars, shared credentials
                                    file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - region
                              type: object
                            webhook:
                              description: Configure an external webhook based DNS01
                                challenge solver to manage DNS01 challenge records.
                              properties:
                                config:
                                  description: Additional configuration that should
                                    be passed to the webhook apiserver when challenges
                                    are processed. This can contain arbitrary JSON
                                    data. Secret values should not be specified in
                                    this stanza. If secret values are needed (e.g.
                                    credentials for a DNS service), you should use
                                    a SecretKeySelector to reference a Secret resource.
                                    For details on the schema of this field, consult
                                    the webhook provider implementation's documentation.
                                  x-kubernetes-preserve-unknown-fields: true
                                groupName:
                                  description: The API group name that should be used
                                    when POSTing ChallengePayload resources to the
                                    webhook apiserver. This should be the same as
                                    the GroupName specified in the webhook provider
                                    implementation.
                                  type: string
                                solverName:
                                  description: The name of the solver to use, as defined
                                    in the webhook provider implementation. This will
                                    typically be the name of the provider, e.g. 'cloudflare'.
                                  type: string
                              required:
                              - groupName
                              - solverName
                              type: object
                          type: object
                        http01:
                          description: Configures cert-manager to attempt to complete
                            authorizations by performing the HTTP01 challenge flow.
                            It is not possible to obtain certificates for wildcard
                            domain names (e.g. `*.example.com`) using the HTTP01 challenge
                            mechanism.
                          properties:
                            gatewayHTTPRoute:
                              description: The Gateway API is a sig-network community
                                API that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/).
                                The Gateway solver will create HTTPRoutes with the
                                specified labels in the same namespace as the challenge.
                                This solver is experimental, and fields / behaviour
                                may change in the future.
                              properties:
                                labels:
                                  additionalProperties:
                                    type: string
                                  description: Custom labels that will be applied
                                    to HTTPRoutes created by cert-manager while solving
                                    HTTP-01 challenges.
                                  type: object
                                parentRefs:
                                  description: 'When solving an HTTP-01 challenge,
                                    cert-manager creates an HTTPRoute. cert-manager
                                    needs to know which parentRefs should be used
                                    when creating the HTTPRoute. Usually, the parentRef
                                    references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                                  items:
                                    description: "ParentReference identifies an API
                                      object (usually a Gateway) that can be considered
                                      a parent of this resource (usually a route).
                                      The only kind of parent resource with \"Core\"
                                      support is Gateway. This API may be extended
                                      in the future to support additional kinds of
                                      parent resources, such as HTTPRoute. \n The
                                      API object must be valid in the cluster; the
                                      Group and Kind must be registered in the cluster
                                      for this reference to be valid."
                                    properties:
                                      group:
                                        default: gateway.networking.k8s.io
                                        description: "Group is the group of the referent.
                                          When unspecified, \"gateway.networking.k8s.io\"
                                          is inferred. To set the core API group (such
                                          as for a \"Service\" kind referent), Group
                                          must be explicitly set to \"\" (empty string).
                                          \n Support: Core"
                                        maxLength: 253
                                        pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        type: string
                                      kind:
                                        default: Gateway
                                        description: "Kind is kind of the referent.
                                          \n Support: Core (Gateway) \n Support: Implementation-specific
                                          (Other Resources)"
                                        maxLength: 63
                                        minLength: 1
                                        pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                        type: string
                                      name:
                                        description: "Name is the name of the referent.
                                          \n Support: Core"
                                        maxLength: 253
                                        minLength: 1
                                        type: string
                                      namespace:
                                        description: "Namespace is the namespace of
                                          the referent. When unspecified, this refers
                                          to the local namespace of the Route. \n
                                          Note that there are specific rules for ParentRefs
                                          which cross namespace boundaries. Cross-namespace
                                          references are only valid if they are explicitly
                                          allowed by something in the namespace they
                                          are referring to. For example: Gateway has
                                          the AllowedRoutes field, and ReferenceGrant
                                          provides a generic way to enable any other
                                          kind of cross-namespace reference. \n Support:
                                          Core"
                                        maxLength: 63
                                        minLength: 1
                                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                        type: string
                                      port:
                                        description: "Port is the network port this
                                          Route targets. It can be interpreted differently
                                          based on the type of parent resource. \n
                                          When the parent resource is a Gateway, this
                                          targets all listeners listening on the specified
                                          port that also support this kind of Route(and
                                          select this Route). It's not recommended
                                          to set `Port` unless the networking behaviors
                                          specified in a Route must apply to a specific
                                          port as opposed to a listener(s) whose port(s)
                                          may be changed. When both Port and SectionName
                                          are specified, the name and port of the
                                          selected listener must match both specified
                                          values. \n Implementations MAY choose to
                                          support other parent resources. Implementations
                                          supporting other types of parent resources
                                          MUST clearly document how/if Port is interpreted.
                                          \n For the purpose of status, an attachment
                                          is considered successful as long as the
                                          parent resource accepts it partially. For
                                          example, Gateway listeners can restrict
                                          which Routes can attach to them by Route
                                          kind, namespace, or hostname. If 1 of 2
                                          Gateway listeners accept attachment from
                                          the referencing Route, the Route MUST be
                                          considered successfully attached. If no
                                          Gateway listeners accept attachment from
                                          this Route, the Route MUST be considered
                                          detached from the Gateway. \n Support: Extended
                                          \n <gateway:experimental>"
                                        format: int32
                                        maximum: 65535
                                        minimum: 1
                                        type: integer
                                      sectionName:
                                        description: "SectionName is the name of a
                                          section within the target resource. In the
                                          following resources, SectionName is interpreted
                                          as the following: \n * Gateway: Listener
                                          Name. When both Port (experimental) and
                                          SectionName are specified, the name and
                                          port of the selected listener must match
                                          both specified values. \n Implementations
                                          MAY choose to support attaching Routes to
                                          other resources. If that is the case, they
                                          MUST clearly document how SectionName is
                                          interpreted. \n When unspecified (empty
                                          string), this will reference the entire
                                          resource. For the purpose of status, an
                                          attachment is considered successful if at
                                          least one section in the parent resource
                                          accepts it. For example, Gateway listeners
                                          can restrict which Routes can attach to
                                          them by Route kind, namespace, or hostname.
                                          If 1 of 2 Gateway listeners accept attachment
                                          from the referencing Route, the Route MUST
                                          be considered successfully attached. If
                                          no Gateway listeners accept attachment from
                                          this Route, the Route MUST be considered
                                          detached from the Gateway. \n Support: Core"
                                        maxLength: 253
                                        minLength: 1
                                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  type: array
                                serviceType:
                                  description: Optional service type for Kubernetes
                                    solver service. Supported values are NodePort
                                    or ClusterIP. If unset, defaults to NodePort.
                                  type: string
                              type: object
                            ingress:
                              description: The ingress based HTTP01 challenge solver
                                will solve challenges by creating or modifying Ingress
                                resources in order to route requests for '/.well-known/acme-challenge/XYZ'
                                to 'challenge solver' pods that are provisioned by
                                cert-manager for each Challenge to be completed.
                              properties:
                                class:
                                  description: This field configures the annotation
                                    `kubernetes.io/ingress.class` when creating Ingress
                                    resources to solve ACME challenges that use this
                                    challenge solver. Only one of `class`, `name`
                                    or `ingressClassName` may be specified.
                                  type: string
                                ingressClassName:
                                  description: This field configures the field `ingressClassName`
                                    on the created Ingress resources used to solve
                                    ACME challenges that use this challenge solver.
                                    This is the recommended way of configuring the
                                    ingress class. Only one of `class`, `name` or
                                    `ingressClassName` may be specified.
                                  type: string
                                ingressTemplate:
                                  description: Optional ingress template used to configure
                                    the ACME challenge solver ingress used for HTTP01
                                    challenges.
                                  properties:
                                    metadata:
                                      description: ObjectMeta overrides for the ingress
                                        used to solve HTTP01 challenges. Only the
                                        'labels' and 'annotations' fields may be set.
                                        If labels or annotations overlap with in-built
                                        values, the values here will override the
                                        in-built values.
                                      properties:
                                        annotations:
                                          additionalProperties:
                                            type: string
                                          description: Annotations that should be
                                            added to the created ACME HTTP01 solver
                                            ingress.
                                          type: object
                                        labels:
                                          additionalProperties:
                                            type: string
                                          description: Labels that should be added
                                            to the created ACME HTTP01 solver ingress.
                                          type: object
                                      type: object
                                  type: object
                                name:
                                  description: The name of the ingress resource that
                                    should have ACME challenge solving routes inserted
                                    into it in order to solve HTTP01 challenges. This
                                    is typically used in conjunction with ingress
                                    controllers like ingress-gce, which maintains
                                    a 1:1 mapping between external IPs and ingress
                                    resources. Only one of `class`, `name` or `ingressClassName`
                                    may be specified.
                                  type: string
                                podTemplate:
                                  description: Optional pod template used to configure
                                    the ACME challenge solver pods used for HTTP01
                                    challenges.
                                  properties:
                                    metadata:
                                      description: ObjectMeta overrides for the pod
                                        used to solve HTTP01 challenges. Only the
                                        'labels' and 'annotations' fields may be set.
                                        If labels or annotations overlap with in-built
                                        values, the values here will override the
                                        in-built values.
                                      properties:
                                        annotations:
                                          additionalProperties:
                                            type: string
                                          description: Annotations that should be
                                            added to the create ACME HTTP01 solver
                                            pods.
                                          type: object
                                        labels:
                                          additionalProperties:
                                            type: string
                                          description: Labels that should be added
                                            to the created ACME HTTP01 solver pods.
                                          type: object
                                      type: object
                                    spec:
                                      description: PodSpec defines overrides for the
                                        HTTP01 challenge solver pod. Check ACMEChallengeSolverHTTP01IngressPodSpec
                                        to find out currently supported fields. All
                                        other fields will be ignored.
                                      properties:
                                        affinity:
                                          description: If specified, the pod's scheduling
                                            constraints
                                          properties:
                                            nodeAffinity:
                                              description: Describes node affinity
                                                scheduling rules for the pod.
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the affinity expressions
                                                    specified by this field, but it
                                                    may choose a node that violates
                                                    one or more of the expressions.
                                                    The node that is most preferred
                                                    is the one with the greatest sum
                                                    of weights, i.e. for each node
                                                    that meets all of the scheduling
                                                    requirements (resource request,
                                                    requiredDuringScheduling affinity
                                                    expressions, etc.), compute a
                                                    sum by iterating through the elements
                                                    of this field and adding "weight"
                                                    to the sum if the node matches
                                                    the corresponding matchExpressions;
                                                    the node(s) with the highest sum
                                                    are the most preferred.
                                                  items:
                                                    description: An empty preferred
                                                      scheduling term matches all
                                                      objects with implicit weight
                                                      0 (i.e. it's a no-op). A null
                                                      preferred scheduling term matches
                                                      no objects (i.e. is also a no-op).
                                                    properties:
                                                      preference:
                                                        description: A node selector
                                                          term, associated with the
                                                          corresponding weight.
                                                        properties:
                                                          matchExpressions:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's labels.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchFields:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's fields.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      weight:
                                                        description: Weight associated
                                                          with matching the corresponding
                                                          nodeSelectorTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - preference
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the affinity requirements
                                                    specified by this field are not
                                                    met at scheduling time, the pod
                                                    will not be scheduled onto the
                                                    node. If the affinity requirements
                                                    specified by this field cease
                                                    to be met at some point during
                                                    pod execution (e.g. due to an
                                                    update), the system may or may
                                                    not try to eventually evict the
                                                    pod from its node.
                                                  properties:
                                                    nodeSelectorTerms:
                                                      description: Required. A list
                                                        of node selector terms. The
                                                        terms are ORed.
                                                      items:
                                                        description: A null or empty
                                                          node selector term matches
                                                          no objects. The requirements
                                                          of them are ANDed. The TopologySelectorTerm
                                                          type implements a subset
                                                          of the NodeSelectorTerm.
                                                        properties:
                                                          matchExpressions:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's labels.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchFields:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's fields.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      type: array
                                                  required:
                                                  - nodeSelectorTerms
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                              type: object
                                            podAffinity:
                                              description: Describes pod affinity
                                                scheduling rules (e.g. co-locate this
                                                pod in the same node, zone, etc. as
                                                some other pod(s)).
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the affinity expressions
                                                    specified by this field, but it
                                                    may choose a node that violates
                                                    one or more of the expressions.
                                                    The node that is most preferred
                                                    is the one with the greatest sum
                                                    of weights, i.e. for each node
                                                    that meets all of the scheduling
                                                    requirements (resource request,
                                                    requiredDuringScheduling affinity
                                                    expressions, etc.), compute a
                                                    sum by iterating through the elements
                                                    of this field and adding "weight"
                                                    to the sum if the node has pods
                                                    which matches the corresponding
                                                    podAffinityTerm; the node(s) with
                                                    the highest sum are the most preferred.
                                                  items:
                                                    description: The weights of all
                                                      of the matched WeightedPodAffinityTerm
                                                      fields are added per-node to
                                                      find the most preferred node(s)
                                                    properties:
                                                      podAffinityTerm:
                                                        description: Required. A pod
                                                          affinity term, associated
                                                          with the corresponding weight.
                                                        properties:
                                                          labelSelector:
                                                            description: A label query
                                                              over a set of resources,
                                                              in this case pods.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaceSelector:
                                                            description: A label query
                                                              over the set of namespaces
                                                              that the term applies
                                                              to. The term is applied
                                                              to the union of the
                                                              namespaces selected
                                                              by this field and the
                                                              ones listed in the namespaces
                                                              field. null selector
                                                              and null or empty namespaces
                                                              list means "this pod's
                                                              namespace". An empty
                                                              selector ({}) matches
                                                              all namespaces.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaces:
                                                            description: namespaces
                                                              specifies a static list
                                                              of namespace names that
                                                              the term applies to.
                                                              The term is applied
                                                              to the union of the
                                                              namespaces listed in
                                                              this field and the ones
                                                              selected by namespaceSelector.
                                                              null or empty namespaces
                                                              list and null namespaceSelector
                                                              means "this pod's namespace".
                                                            items:
                                                              type: string
                                                            type: array
                                                          topologyKey:
                                                            description: This pod
                                                              should be co-located
                                                              (affinity) or not co-located
                                                              (anti-affinity) with
                                                              the pods matching the
                                                              labelSelector in the
                                                              specified namespaces,
                                                              where co-located is
                                                              defined as running on
                                                              a node whose value of
                                                              the label with key topologyKey
                                                              matches that of any
                                                              node on which any of
                                                              the selected pods is
                                                              running. Empty topologyKey
                                                              is not allowed.
                                                            type: string
                                                        required:
                                                        - topologyKey
                                                        type: object
                                                      weight:
                                                        description: weight associated
                                                          with matching the corresponding
                                                          podAffinityTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - podAffinityTerm
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the affinity requirements
                                                    specified by this field are not
                                                    met at scheduling time, the pod
                                                    will not be scheduled onto the
                                                    node. If the affinity requirements
                                                    specified by this field cease
                                                    to be met at some point during
                                                    pod execution (e.g. due to a pod
                                                    label update), the system may
                                                    or may not try to eventually evict
                                                    the pod from its node. When there
                                                    are multiple elements, the lists
                                                    of nodes corresponding to each
                                                    podAffinityTerm are intersected,
                                                    i.e. all terms must be satisfied.
                                                  items:
                                                    description: Defines a set of
                                                      pods (namely those matching
                                                      the labelSelector relative to
                                                      the given namespace(s)) that
                                                      this pod should be co-located
                                                      (affinity) or not co-located
                                                      (anti-affinity) with, where
                                                      co-located is defined as running
                                                      on a node whose value of the
                                                      label with key <topologyKey>
                                                      matches that of any node on
                                                      which a pod of the set of pods
                                                      is running
                                                    properties:
                                                      labelSelector:
                                                        description: A label query
                                                          over a set of resources,
                                                          in this case pods.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query
                                                          over the set of namespaces
                                                          that the term applies to.
                                                          The term is applied to the
                                                          union of the namespaces
                                                          selected by this field and
                                                          the ones listed in the namespaces
                                                          field. null selector and
                                                          null or empty namespaces
                                                          list means "this pod's namespace".
                                                          An empty selector ({}) matches
                                                          all namespaces.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies
                                                          a static list of namespace
                                                          names that the term applies
                                                          to. The term is applied
                                                          to the union of the namespaces
                                                          listed in this field and
                                                          the ones selected by namespaceSelector.
                                                          null or empty namespaces
                                                          list and null namespaceSelector
                                                          means "this pod's namespace".
                                                        items:
                                                          type: string
                                                        type: array
                                                      topologyKey:
                                                        description: This pod should
                                                          be co-located (affinity)
                                                          or not co-located (anti-affinity)
                                                          with the pods matching the
                                                          labelSelector in the specified
                                                          namespaces, where co-located
                                                          is defined as running on
                                                          a node whose value of the
                                                          label with key topologyKey
                                                          matches that of any node
                                                          on which any of the selected
                                                          pods is running. Empty topologyKey
                                                          is not allowed.
                                                        type: string
                                                    required:
                                                    - topologyKey
                                                    type: object
                                                  type: array
                                              type: object
                                            podAntiAffinity:
                                              description: Describes pod anti-affinity
                                                scheduling rules (e.g. avoid putting
                                                this pod in the same node, zone, etc.
                                                as some other pod(s)).
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the anti-affinity
                                                    expressions specified by this
                                                    field, but it may choose a node
                                                    that violates one or more of the
                                                    expressions. The node that is
                                                    most preferred is the one with
                                                    the greatest sum of weights, i.e.
                                                    for each node that meets all of
                                                    the scheduling requirements (resource
                                                    request, requiredDuringScheduling
                                                    anti-affinity expressions, etc.),
                                                    compute a sum by iterating through
                                                    the elements of this field and
                                                    adding "weight" to the sum if
                                                    the node has pods which matches
                                                    the corresponding podAffinityTerm;
                                                    the node(s) with the highest sum
                                                    are the most preferred.
                                                  items:
                                                    description: The weights of all
                                                      of the matched WeightedPodAffinityTerm
                                                      fields are added per-node to
                                                      find the most preferred node(s)
                                                    properties:
                                                      podAffinityTerm:
                                                        description: Required. A pod
                                                          affinity term, associated
                                                          with the corresponding weight.
                                                        properties:
                                                          labelSelector:
                                                            description: A label query
                                                              over a set of resources,
                                                              in this case pods.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaceSelector:
                                                            description: A label query
                                                              over the set of namespaces
                                                              that the term applies
                                                              to. The term is applied
                                                              to the union of the
                                                              namespaces selected
                                                              by this field and the
                                                              ones listed in the namespaces
                                                              field. null selector
                                                              and null or empty namespaces
                                                              list means "this pod's
                                                              namespace". An empty
                                                              selector ({}) matches
                                                              all namespaces.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaces:
                                                            description: namespaces
                                                              specifies a static list
                                                              of namespace names that
                                                              the term applies to.
                                                              The term is applied
                                                              to the union of the
                                                              namespaces listed in
                                                              this field and the ones
                                                              selected by namespaceSelector.
                                                              null or empty namespaces
                                                              list and null namespaceSelector
                                                              means "this pod's namespace".
                                                            items:
                                                              type: string
                                                            type: array
                                                          topologyKey:
                                                            description: This pod
                                                              should be co-located
                                                              (affinity) or not co-located
                                                              (anti-affinity) with
                                                              the pods matching the
                                                              labelSelector in the
                                                              specified namespaces,
                                                              where co-located is
                                                              defined as running on
                                                              a node whose value of
                                                              the label with key topologyKey
                                                              matches that of any
                                                              node on which any of
                                                              the selected pods is
                                                              running. Empty topologyKey
                                                              is not allowed.
                                                            type: string
                                                        required:
                                                        - topologyKey
                                                        type: object
                                                      weight:
                                                        description: weight associated
                                                          with matching the corresponding
                                                          podAffinityTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - podAffinityTerm
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the anti-affinity
                                                    requirements specified by this
                                                    field are not met at scheduling
                                                    time, the pod will not be scheduled
                                                    onto the node. If the anti-affinity
                                                    requirements specified by this
                                                    field cease to be met at some
                                                    point during pod execution (e.g.
                                                    due to a pod label update), the
                                                    system may or may not try to eventually
                                                    evict the pod from its node. When
                                                    there are multiple elements, the
                                                    lists of nodes corresponding to
                                                    each podAffinityTerm are intersected,
                                                    i.e. all terms must be satisfied.
                                                  items:
                                                    description: Defines a set of
                                                      pods (namely those matching
                                                      the labelSelector relative to
                                                      the given namespace(s)) that
                                                      this pod should be co-located
                                                      (affinity) or not co-located
                                                      (anti-affinity) with, where
                                                      co-located is defined as running
                                                      on a node whose value of the
                                                      label with key <topologyKey>
                                                      matches that of any node on
                                                      which a pod of the set of pods
                                                      is running
                                                    properties:
                                                      labelSelector:
                                                        description: A label query
                                                          over a set of resources,
                                                          in this case pods.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query
                                                          over the set of namespaces
                                                          that the term applies to.
                                                          The term is applied to the
                                                          union of the namespaces
                                                          selected by this field and
                                                          the ones listed in the namespaces
                                                          field. null selector and
                                                          null or empty namespaces
                                                          list means "this pod's namespace".
                                                          An empty selector ({}) matches
                                                          all namespaces.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies
                                                          a static list of namespace
                                                          names that the term applies
                                                          to. The term is applied
                                                          to the union of the namespaces
                                                          listed in this field and
                                                          the ones selected by namespaceSelector.
                                                          null or empty namespaces
                                                          list and null namespaceSelector
                                                          means "this pod's namespace".
                                                        items:
                                                          type: string
                                                        type: array
                                                      topologyKey:
                                                        description: This pod should
                                                          be co-located (affinity)
                                                          or not co-located (anti-affinity)
                                                          with the pods matching the
                                                          labelSelector in the specified
                                                          namespaces, where co-located
                                                          is defined as running on
                                                          a node whose value of the
                                                          label with key topologyKey
                                                          matches that of any node
                                                          on which any of the selected
                                                          pods is running. Empty topologyKey
                                                          is not allowed.
                                                        type: string
                                                    required:
                                                    - topologyKey
                                                    type: object
                                                  type: array
                                              type: object
                                          type: object
                                        imagePullSecrets:
                                          description: If specified, the pod's imagePullSecrets
                                          items:
                                            description: LocalObjectReference contains
                                              enough information to let you locate
                                              the referenced object inside the same
                                              namespace.
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          type: array
                                        nodeSelector:
                                          additionalProperties:
                                            type: string
                                          description: 'NodeSelector is a selector
                                            which must be true for the pod to fit
                                            on a node. Selector which must match a
                                            node''s labels for the pod to be scheduled
                                            on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                          type: object
                                        priorityClassName:
                                          description: If specified, the pod's priorityClassName.
                                          type: string
                                        serviceAccountName:
                                          description: If specified, the pod's service
                                            account
                                          type: string
                                        tolerations:
                                          description: If specified, the pod's tolerations.
                                          items:
                                            description: The pod this Toleration is
                                              attached to tolerates any taint that
                                              matches the triple <key,value,effect>
                                              using the matching operator <operator>.
                                            properties:
                                              effect:
                                                description: Effect indicates the
                                                  taint effect to match. Empty means
                                                  match all taint effects. When specified,
                                                  allowed values are NoSchedule, PreferNoSchedule
                                                  and NoExecute.
                                                type: string
                                              key:
                                                description: Key is the taint key
                                                  that the toleration applies to.
                                                  Empty means match all taint keys.
                                                  If the key is empty, operator must
                                                  be Exists; this combination means
                                                  to match all values and all keys.
                                                type: string
                                              operator:
                                                description: Operator represents a
                                                  key's relationship to the value.
                                                  Valid operators are Exists and Equal.
                                                  Defaults to Equal. Exists is equivalent
                                                  to wildcard for value, so that a
                                                  pod can tolerate all taints of a
                                                  particular category.
                                                type: string
                                              tolerationSeconds:
                                                description: TolerationSeconds represents
                                                  the period of time the toleration
                                                  (which must be of effect NoExecute,
                                                  otherwise this field is ignored)
                                                  tolerates the taint. By default,
                                                  it is not set, which means tolerate
                                                  the taint forever (do not evict).
                                                  Zero and negative values will be
                                                  treated as 0 (evict immediately)
                                                  by the system.
                                                format: int64
                                                type: integer
                                              value:
                                                description: Value is the taint value
                                                  the toleration matches to. If the
                                                  operator is Exists, the value should
                                                  be empty, otherwise just a regular
                                                  string.
                                                type: string
                                            type: object
                                          type: array
                                      type: object
                                  type: object
                                serviceType:
                                  description: Optional service type for Kubernetes
                                    solver service. Supported values are NodePort
                                    or ClusterIP. If unset, defaults to NodePort.
                                  type: string
                              type: object
                          type: object
                        selector:
                          description: Selector selects a set of DNSNames on the Certificate
                            resource that should be solved using this challenge solver.
                            If not specified, the solver will be treated as the 'default'
                            solver with the lowest priority, i.e. if any other solver
                            has a more specific match, it will be used instead.
                          properties:
                            dnsNames:
                              description: List of DNSNames that this solver will
                                be used to solve. If specified and a match is found,
                                a dnsNames selector will take precedence over a dnsZones
                                selector. If multiple solvers match with the same
                                dnsNames value, the solver with the most matching
                                labels in matchLabels will be selected. If neither
                                has more matches, the solver defined earlier in the
                                list will be selected.
                              items:
                                type: string
                              type: array
                            dnsZones:
                              description: List of DNSZones that this solver will
                                be used to solve. The most specific DNS zone match
                                specified here will take precedence over other DNS
                                zone matches, so a solver specifying sys.example.com
                                will be selected over one specifying example.com for
                                the domain www.sys.example.com. If multiple solvers
                                match with the same dnsZones value, the solver with
                                the most matching labels in matchLabels will be selected.
                                If neither has more matches, the solver defined earlier
                                in the list will be selected.
                              items:
                                type: string
                              type: array
                            matchLabels:
                              additionalProperties:
                                type: string
                              description: A label selector that is used to refine
                                the set of certificate's that this challenge solver
                                will apply to.
                              type: object
                          type: object
                      type: object
                    type: array
                required:
                - privateKeySecretRef
                - server
                type: object
              ca:
                description: CA configures this issuer to sign certificates using
                  a signing CA keypair stored in a Secret resource. This is used to
                  build internal PKIs that are managed by cert-manager.
                properties:
                  crlDistributionPoints:
                    description: The CRL distribution points is an X.509 v3 certificate
                      extension which identifies the location of the CRL from which
                      the revocation of this certificate can be checked. If not set,
                      certificates will be issued without distribution points set.
                    items:
                      type: string
                    type: array
                  ocspServers:
                    description: The OCSP server list is an X.509 v3 extension that
                      defines a list of URLs of OCSP responders. The OCSP responders
                      can be queried for the revocation status of an issued certificate.
                      If not set, the certificate will be issued with no OCSP servers
                      set. For example, an OCSP server URL could be "http://ocsp.int-x3.letsencrypt.org".
                    items:
                      type: string
                    type: array
                  secretName:
                    description: SecretName is the name of the secret used to sign
                      Certificates issued by this Issuer.
                    type: string
                required:
                - secretName
                type: object
              selfSigned:
                description: SelfSigned configures this issuer to 'self sign' certificates
                  using the private key used to create the CertificateRequest object.
                properties:
                  crlDistributionPoints:
                    description: The CRL distribution points is an X.509 v3 certificate
                      extension which identifies the location of the CRL from which
                      the revocation of this certificate can be checked. If not set
                      certificate will be issued without CDP. Values are strings.
                    items:
                      type: string
                    type: array
                type: object
              vault:
                description: Vault configures this issuer to sign certificates using
                  a HashiCorp Vault PKI backend.
                properties:
                  auth:
                    description: Auth configures how cert-manager authenticates with
                      the Vault server.
                    properties:
                      appRole:
                        description: AppRole authenticates with Vault using the App
                          Role auth mechanism, with the role and secret stored in
                          a Kubernetes Secret resource.
                        properties:
                          path:
                            description: 'Path where the App Role authentication backend
                              is mounted in Vault, e.g: "approle"'
                            type: string
                          roleId:
                            description: RoleID configured in the App Role authentication
                              backend when setting up the authentication backend in
                              Vault.
                            type: string
                          secretRef:
                            description: Reference to a key in a Secret that contains
                              the App Role secret used to authenticate with Vault.
                              The `key` field must be specified and denotes which
                              entry within the Secret resource is used as the app
                              role secret.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - path
                        - roleId
                        - secretRef
                        type: object
                      kubernetes:
                        description: Kubernetes authenticates with Vault by passing
                          the ServiceAccount token stored in the named Secret resource
                          to the Vault server.
                        properties:
                          mountPath:
                            description: The Vault mountPath here is the mount path
                              to use when authenticating with Vault. For example,
                              setting a value to `/v1/auth/foo`, will use the path
                              `/v1/auth/foo/login` to authenticate with Vault. If
                              unspecified, the default value "/v1/auth/kubernetes"
                              will be used.
                            type: string
                          role:
                            description: A required field containing the Vault Role
                              to assume. A Role binds a Kubernetes ServiceAccount
                              with a set of Vault policies.
                            type: string
                          secretRef:
                            description: The required Secret field containing a Kubernetes
                              ServiceAccount JWT used for authenticating with Vault.
                              Use of 'ambient credentials' is not supported.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountRef:
                            description: A reference to a service account that will
                              be used to request a bound token (also known as "projected
                              token"). Compared to using "secretRef", using this field
                              means that you don't rely on statically bound tokens.
                              To use this field, you must configure an RBAC rule to
                              let cert-manager request a token.
                            properties:
                              name:
                                description: Name of the ServiceAccount used to request
                                  a token.
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - role
                        type: object
                      tokenSecretRef:
                        description: TokenSecretRef authenticates with Vault by presenting
                          a token.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    type: object
                  caBundle:
                    description: Base64-encoded bundle of PEM CAs which will be used
                      to validate the certificate chain presented by Vault. Only used
                      if using HTTPS to connect to Vault and ignored for HTTP connections.
                      Mutually exclusive with CABundleSecretRef. If neither CABundle
                      nor CABundleSecretRef are defined, the certificate bundle in
                      the cert-manager controller container is used to validate the
                      TLS connection.
                    format: byte
                    type: string
                  caBundleSecretRef:
                    description: Reference to a Secret containing a bundle of PEM-encoded
                      CAs to use when verifying the certificate chain presented by
                      Vault when using HTTPS. Mutually exclusive with CABundle. If
                      neither CABundle nor CABundleSecretRef are defined, the certificate
                      bundle in the cert-manager controller container is used to validate
                      the TLS connection. If no key for the Secret is specified, cert-manager
                      will default to 'ca.crt'.
                    properties:
                      key:
                        description: The key of the entry in the Secret resource's
                          `data` field to be used. Some instances of this field may
                          be defaulted, in others it may be required.
                        type: string
                      name:
                        description: 'Name of the resource being referred to. More
                          info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                        type: string
                    required:
                    - name
                    type: object
                  namespace:
                    description: 'Name of the vault namespace. Namespaces is a set
                      of features within Vault Enterprise that allows Vault environments
                      to support Secure Multi-tenancy. e.g: "ns1" More about namespaces
                      can be found here https://www.vaultproject.io/docs/enterprise/namespaces'
                    type: string
                  path:
                    description: 'Path is the mount path of the Vault PKI backend''s
                      `sign` endpoint, e.g: "my_pki_mount/sign/my-role-name".'
                    type: string
                  server:
                    description: 'Server is the connection address for the Vault server,
                      e.g: "https://vault.example.com:8200".'
                    type: string
                required:
                - auth
                - path
                - server
                type: object
              venafi:
                description: Venafi configures this issuer to sign certificates using
                  a Venafi TPP or Venafi Cloud policy zone.
                properties:
                  cloud:
                    description: Cloud specifies the Venafi cloud configuration settings.
                      Only one of TPP or Cloud may be specified.
                    properties:
                      apiTokenSecretRef:
                        description: APITokenSecretRef is a secret key selector for
                          the Venafi Cloud API token.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                      url:
                        description: URL is the base URL for Venafi Cloud. Defaults
                          to "https://api.venafi.cloud/v1".
                        type: string
                    required:
                    - apiTokenSecretRef
                    type: object
                  tpp:
                    description: TPP specifies Trust Protection Platform configuration
                      settings. Only one of TPP or Cloud may be specified.
                    properties:
                      caBundle:
                        description: Base64-encoded bundle of PEM CAs which will be
                          used to validate the certificate chain presented by the
                          TPP server. Only used if using HTTPS; ignored for HTTP.
                          If undefined, the certificate bundle in the cert-manager
                          controller container is used to validate the chain.
                        format: byte
                        type: string
                      credentialsRef:
                        description: CredentialsRef is a reference to a Secret containing
                          the username and password for the TPP server. The secret
                          must contain two keys, 'username' and 'password'.
                        properties:
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                      url:
                        description: 'URL is the base URL for the vedsdk endpoint
                          of the Venafi TPP instance, for example: "https://tpp.example.com/vedsdk".'
                        type: string
                    required:
                    - credentialsRef
                    - url
                    type: object
                  zone:
                    description: Zone is the Venafi Policy Zone to use for this issuer.
                      All requests made to the Venafi platform will be restricted
                      by the named zone policy. This field is required.
                    type: string
                required:
                - zone
                type: object
            type: object
          status:
            description: Status of the ClusterIssuer. This is set and managed automatically.
            properties:
              acme:
                description: ACME specific status options. This field should only
                  be set if the Issuer is configured to use an ACME server to issue
                  certificates.
                properties:
                  lastPrivateKeyHash:
                    description: LastPrivateKeyHash is a hash of the private key associated
                      with the latest registered ACME account, in order to track changes
                      made to registered account associated with the Issuer
                    type: string
                  lastRegisteredEmail:
                    description: LastRegisteredEmail is the email associated with
                      the latest registered ACME account, in order to track changes
                      made to registered account associated with the  Issuer
                    type: string
                  uri:
                    description: URI is the unique account identifier, which can also
                      be used to retrieve account details from the CA
                    type: string
                type: object
              conditions:
                description: List of status conditions to indicate the status of a
                  CertificateRequest. Known condition types are `Ready`.
                items:
                  description: IssuerCondition contains condition information for
                    an Issuer.
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the timestamp corresponding
                        to the last status change of this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human readable description of the
                        details of the last transition, complementing reason.
                      type: string
                    observedGeneration:
                      description: If set, this represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.condition[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the Issuer.
                      format: int64
                      type: integer
                    reason:
                      description: Reason is a brief machine readable explanation
                        for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of (`True`, `False`,
                        `Unknown`).
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Type of the condition, known values are (`Ready`).
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: eventbus.argoproj.io
spec:
  group: argoproj.io
  names:
    kind: EventBus
    listKind: EventBusList
    plural: eventbus
    shortNames:
    - eb
    singular: eventbus
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: eventsources.argoproj.io
spec:
  group: argoproj.io
  names:
    kind: EventSource
    listKind: EventSourceList
    plural: eventsources
    shortNames:
    - es
    singular: eventsource
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    argocd.argoproj.io/sync-options: ServerSideApply=true
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: grafanadashboards.grafana.integreatly.org
spec:
  group: grafana.integreatly.org
  names:
    kind: GrafanaDashboard
    listKind: GrafanaDashboardList
    plural: grafanadashboards
    singular: grafanadashboard
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.NoMatchingInstances
      name: No matching instances
      type: boolean
    - format: date-time
      jsonPath: .status.lastResync
      name: Last resync
      type: date
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: GrafanaDashboard is the Schema for the grafanadashboards API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: GrafanaDashboardSpec defines the desired state of GrafanaDashboard
            properties:
              allowCrossNamespaceImport:
                description: allow to import this resources from an operator in a
                  different namespace
                type: boolean
              contentCacheDuration:
                description: Cache duration for dashboards fetched from URLs
                type: string
              datasources:
                description: maps required data sources to existing ones
                items:
                  properties:
                    datasourceName:
                      type: string
                    inputName:
                      type: string
                  required:
                  - datasourceName
                  - inputName
                  type: object
                type: array
              folder:
                description: folder assignment for dashboard
                type: string
              grafanaCom:
                description: grafana.com/dashboards
                properties:
                  id:
                    type: integer
                  revision:
                    type: integer
                required:
                - id
                type: object
              gzipJson:
                description: GzipJson the dashboard's JSON compressed with Gzip. Base64-encoded
                  when in YAML.
                format: byte
                type: string
              instanceSelector:
                description: selects Grafanas for import
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
              json:
                description: dashboard json
                type: string
              jsonnet:
                description: Jsonnet
                type: string
              plugins:
                description: plugins
                items:
                  properties:
                    name:
                      type: string
                    version:
                      type: string
                  required:
                  - name
                  - version
                  type: object
                type: array
              resyncPeriod:
                description: how often the dashboard is refreshed, defaults to 5m
                  if not set
                type: string
              url:
                description: dashboard url
                type: string
            required:
            - instanceSelector
            type: object
          status:
            description: GrafanaDashboardStatus defines the observed state of GrafanaDashboard
            properties:
              NoMatchingInstances:
                description: The dashboard instanceSelector can't find matching grafana
                  instances
                type: boolean
              contentCache:
                format: byte
                type: string
              contentTimestamp:
                format: date-time
                type: string
              contentUrl:
                type: string
              hash:
                type: string
              lastResync:
                description: Last time the dashboard was resynced
                format: date-time
                type: string
              uid:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    argocd.argoproj.io/sync-options: ServerSideApply=true
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: grafanadatasources.grafana.integreatly.org
spec:
  group: grafana.integreatly.org
  names:
    kind: GrafanaDatasource
    listKind: GrafanaDatasourceList
    plural: grafanadatasources
    singular: grafanadatasource
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.NoMatchingInstances
      name: No matching instances
      type: boolean
    - format: date-time
      jsonPath: .status.lastResync
      name: Last resync
      type: date
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: GrafanaDatasource is the Schema for the grafanadatasources API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: GrafanaDatasourceSpec defines the desired state of GrafanaDatasource
            properties:
              allowCrossNamespaceImport:
                description: allow to import this resources from an operator in a
                  different namespace
                type: boolean
              datasource:
                properties:
                  access:
                    type: string
                  basicAuth:
                    type: boolean
                  basicAuthUser:
                    type: string
                  database:
                    type: string
                  editable:
                    type: boolean
                  isDefault:
                    type: boolean
                  jsonData:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  name:
                    type: string
                  orgId:
                    format: int64
                    type: integer
                  secureJsonData:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  type:
                    type: string
                  uid:
                    type: string
                  url:
                    type: string
                  user:
                    type: string
                type: object
              instanceSelector:
                description: selects Grafana instances for import
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
              plugins:
                description: plugins
                items:
                  properties:
                    name:
                      type: string
                    version:
                      type: string
                  required:
                  - name
                  - version
                  type: object
                type: array
              resyncPeriod:
                description: how often the datasource is refreshed, defaults to 5m
                  if not set
                type: string
              valuesFrom:
                description: environments variables from secrets or config maps
                items:
                  properties:
                    targetPath:
                      type: string
                    valueFrom:
                      properties:
                        configMapKeyRef:
                          description: Selects a key of a ConfigMap.
                          properties:
                            key:
                              description: The key to select.
                              type: string
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                            optional:
                              description: Specify whether the ConfigMap or its key
                                must be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                        secretKeyRef:
                          description: Selects a key of a Secret.
                          properties:
                            key:
                              description: The key of the secret to select from.  Must
                                be a valid secret key.
                              type: string
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                            optional:
                              description: Specify whether the Secret or its key must
                                be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                      type: object
                  required:
                  - targetPath
                  - valueFrom
                  type: object
                type: array
            required:
            - instanceSelector
            type: object
          status:
            description: GrafanaDatasourceStatus defines the observed state of GrafanaDatasource
            properties:
              NoMatchingInstances:
                description: The datasource instanceSelector can't find matching grafana
                  instances
                type: boolean
              hash:
                type: string
              lastMessage:
                type: string
              lastResync:
                description: Last time the datasource was resynced
                format: date-time
                type: string
              uid:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    argocd.argoproj.io/sync-options: ServerSideApply=true
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: grafanafolders.grafana.integreatly.org
spec:
  group: grafana.integreatly.org
  names:
    kind: GrafanaFolder
    listKind: GrafanaFolderList
    plural: grafanafolders
    singular: grafanafolder
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.NoMatchingInstances
      name: No matching instances
      type: boolean
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: GrafanaFolder is the Schema for the grafanafolders API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: GrafanaFolderSpec defines the desired state of GrafanaFolder
            properties:
              allowCrossNamespaceImport:
                description: allow to import this resources from an operator in a
                  different namespace
                type: boolean
              instanceSelector:
                description: selects Grafanas for import
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
              permissions:
                description: raw json with folder permissions
                type: string
              resyncPeriod:
                description: how often the folder is synced, defaults to 5m if not
                  set
                type: string
              title:
                type: string
            required:
            - instanceSelector
            type: object
          status:
            description: GrafanaFolderStatus defines the observed state of GrafanaFolder
            properties:
              NoMatchingInstances:
                description: The folder instanceSelector can't find matching grafana
                  instances
                type: boolean
              hash:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state
                  of cluster Important: Run "make" to regenerate code after modifying
                  this file'
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    argocd.argoproj.io/sync-options: ServerSideApply=true
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: grafanas.grafana.integreatly.org
spec:
  group: grafana.integreatly.org
  names:
    kind: Grafana
    listKind: GrafanaList
    plural: grafanas
    singular: grafana
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.stage
      name: Stage
      type: string
    - jsonPath: .status.stageStatus
      name: Stage status
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Grafana is the Schema for the grafanas API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: GrafanaSpec defines the desired state of Grafana
            properties:
              client:
                description: Client defines how the grafana-operator talks to the
                  grafana instance.
                properties:
                  preferIngress:
                    description: If the operator should send it's request through
                      the grafana instances ingress object instead of through the
                      service.
                    nullable: true
                    type: boolean
                  timeout:
                    nullable: true
                    type: integer
                type: object
              config:
                additionalProperties:
                  additionalProperties:
                    type: string
                  type: object
                description: Config defines how your grafana ini file should looks
                  like.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              deployment:
                description: Deployment sets how the deployment object should look
                  like with your grafana instance, contains a number of defaults.
                properties:
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    properties:
                      minReadySeconds:
                        format: int32
                        type: integer
                      paused:
                        type: boolean
                      progressDeadlineSeconds:
                        format: int32
                        type: integer
                      replicas:
                        format: int32
                        type: integer
                      revisionHistoryLimit:
                        format: int32
                        type: integer
                      selector:
                        description: A label selector is a label query over a set
                          of resources. The result of matchLabels and matchExpressions
                          are ANDed. An empty label selector matches all objects.
                          A null label selector matches no objects.
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: A label selector requirement is a selector
                                that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: operator represents a key's relationship
                                    to a set of values. Valid operators are In, NotIn,
                                    Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: values is an array of string values.
                                    If the operator is In or NotIn, the values array
                                    must be non-empty. If the operator is Exists or
                                    DoesNotExist, the values array must be empty.
                                    This array is replaced during a strategic merge
                                    patch.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: matchLabels is a map of {key,value} pairs.
                              A single {key,value} in the matchLabels map is equivalent
                              to an element of matchExpressions, whose key field is
                              "key", the operator is "In", and the values array contains
                              only "value". The requirements are ANDed.
                            type: object
                        type: object
                        x-kubernetes-map-type: atomic
                      strategy:
                        description: DeploymentStrategy describes how to replace existing
                          pods with new ones.
                        properties:
                          rollingUpdate:
                            description: 'Rolling update config params. Present only
                              if DeploymentStrategyType = RollingUpdate. --- TODO:
                              Update this to follow our convention for oneOf, whatever
                              we decide it to be.'
                            properties:
                              maxSurge:
                                anyOf:
                                - type: integer
                                - type: string
                                description: 'The maximum number of pods that can
                                  be scheduled above the desired number of pods. Value
                                  can be an absolute number (ex: 5) or a percentage
                                  of desired pods (ex: 10%). This can not be 0 if
                                  MaxUnavailable is 0. Absolute number is calculated
                                  from percentage by rounding up. Defaults to 25%.
                                  Example: when this is set to 30%, the new ReplicaSet
                                  can be scaled up immediately when the rolling update
                                  starts, such that the total number of old and new
                                  pods do not exceed 130% of desired pods. Once old
                                  pods have been killed, new ReplicaSet can be scaled
                                  up further, ensuring that total number of pods running
                                  at any time during the update is at most 130% of
                                  desired pods.'
                                x-kubernetes-int-or-string: true
                              maxUnavailable:
                                anyOf:
                                - type: integer
                                - type: string
                                description: 'The maximum number of pods that can
                                  be unavailable during the update. Value can be an
                                  absolute number (ex: 5) or a percentage of desired
                                  pods (ex: 10%). Absolute number is calculated from
                                  percentage by rounding down. This can not be 0 if
                                  MaxSurge is 0. Defaults to 25%. Example: when this
                                  is set to 30%, the old ReplicaSet can be scaled
                                  down to 70% of desired pods immediately when the
                                  rolling update starts. Once new pods are ready,
                                  old ReplicaSet can be scaled down further, followed
                                  by scaling up the new ReplicaSet, ensuring that
                                  the total number of pods available at all times
                                  during the update is at least 70% of desired pods.'
                                x-kubernetes-int-or-string: true
                            type: object
                          type:
                            description: Type of deployment. Can be "Recreate" or
                              "RollingUpdate". Default is RollingUpdate.
                            type: string
                        type: object
                      template:
                        properties:
                          metadata:
                            description: 'Standard object''s metadata. More info:
                              https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata'
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            description: 'Specification of the desired behavior of
                              the pod. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status'
                            properties:
                              activeDeadlineSeconds:
                                format: int64
                                type: integer
                              affinity:
                                description: If specified, the pod's scheduling constraints
                                properties:
                                  nodeAffinity:
                                    description: Describes node affinity scheduling
                                      rules for the pod.
                                    properties:
                                      preferredDuringSchedulingIgnoredDuringExecution:
                                        description: The scheduler will prefer to
                                          schedule pods to nodes that satisfy the
                                          affinity expressions specified by this field,
                                          but it may choose a node that violates one
                                          or more of the expressions. The node that
                                          is most preferred is the one with the greatest
                                          sum of weights, i.e. for each node that
                                          meets all of the scheduling requirements
                                          (resource request, requiredDuringScheduling
                                          affinity expressions, etc.), compute a sum
                                          by iterating through the elements of this
                                          field and adding "weight" to the sum if
                                          the node matches the corresponding matchExpressions;
                                          the node(s) with the highest sum are the
                                          most preferred.
                                        items:
                                          description: An empty preferred scheduling
                                            term matches all objects with implicit
                                            weight 0 (i.e. it's a no-op). A null preferred
                                            scheduling term matches no objects (i.e.
                                            is also a no-op).
                                          properties:
                                            preference:
                                              description: A node selector term, associated
                                                with the corresponding weight.
                                              properties:
                                                matchExpressions:
                                                  description: A list of node selector
                                                    requirements by node's labels.
                                                  items:
                                                    description: A node selector requirement
                                                      is a selector that contains
                                                      values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key
                                                          that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: Represents a
                                                          key's relationship to a
                                                          set of values. Valid operators
                                                          are In, NotIn, Exists, DoesNotExist.
                                                          Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: An array of string
                                                          values. If the operator
                                                          is In or NotIn, the values
                                                          array must be non-empty.
                                                          If the operator is Exists
                                                          or DoesNotExist, the values
                                                          array must be empty. If
                                                          the operator is Gt or Lt,
                                                          the values array must have
                                                          a single element, which
                                                          will be interpreted as an
                                                          integer. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchFields:
                                                  description: A list of node selector
                                                    requirements by node's fields.
                                                  items:
                                                    description: A node selector requirement
                                                      is a selector that contains
                                                      values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key
                                                          that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: Represents a
                                                          key's relationship to a
                                                          set of values. Valid operators
                                                          are In, NotIn, Exists, DoesNotExist.
                                                          Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: An array of string
                                                          values. If the operator
                                                          is In or NotIn, the values
                                                          array must be non-empty.
                                                          If the operator is Exists
                                                          or DoesNotExist, the values
                                                          array must be empty. If
                                                          the operator is Gt or Lt,
                                                          the values array must have
                                                          a single element, which
                                                          will be interpreted as an
                                                          integer. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            weight:
                                              description: Weight associated with
                                                matching the corresponding nodeSelectorTerm,
                                                in the range 1-100.
                                              format: int32
                                              type: integer
                                          required:
                                          - preference
                                          - weight
                                          type: object
                                        type: array
                                      requiredDuringSchedulingIgnoredDuringExecution:
                                        description: If the affinity requirements
                                          specified by this field are not met at scheduling
                                          time, the pod will not be scheduled onto
                                          the node. If the affinity requirements specified
                                          by this field cease to be met at some point
                                          during pod execution (e.g. due to an update),
                                          the system may or may not try to eventually
                                          evict the pod from its node.
                                        properties:
                                          nodeSelectorTerms:
                                            description: Required. A list of node
                                              selector terms. The terms are ORed.
                                            items:
                                              description: A null or empty node selector
                                                term matches no objects. The requirements
                                                of them are ANDed. The TopologySelectorTerm
                                                type implements a subset of the NodeSelectorTerm.
                                              properties:
                                                matchExpressions:
                                                  description: A list of node selector
                                                    requirements by node's labels.
                                                  items:
                                                    description: A node selector requirement
                                                      is a selector that contains
                                                      values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key
                                                          that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: Represents a
                                                          key's relationship to a
                                                          set of values. Valid operators
                                                          are In, NotIn, Exists, DoesNotExist.
                                                          Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: An array of string
                                                          values. If the operator
                                                          is In or NotIn, the values
                                                          array must be non-empty.
                                                          If the operator is Exists
                                                          or DoesNotExist, the values
                                                          array must be empty. If
                                                          the operator is Gt or Lt,
                                                          the values array must have
                                                          a single element, which
                                                          will be interpreted as an
                                                          integer. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchFields:
                                                  description: A list of node selector
                                                    requirements by node's fields.
                                                  items:
                                                    description: A node selector requirement
                                                      is a selector that contains
                                                      values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key
                                                          that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: Represents a
                                                          key's relationship to a
                                                          set of values. Valid operators
                                                          are In, NotIn, Exists, DoesNotExist.
                                                          Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: An array of string
                                                          values. If the operator
                                                          is In or NotIn, the values
                                                          array must be non-empty.
                                                          If the operator is Exists
                                                          or DoesNotExist, the values
                                                          array must be empty. If
                                                          the operator is Gt or Lt,
                                                          the values array must have
                                                          a single element, which
                                                          will be interpreted as an
                                                          integer. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            type: array
                                        required:
                                        - nodeSelectorTerms
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                  podAffinity:
                                    description: Describes pod affinity scheduling
                                      rules (e.g. co-locate this pod in the same node,
                                      zone, etc. as some other pod(s)).
                                    properties:
                                      preferredDuringSchedulingIgnoredDuringExecution:
                                        description: The scheduler will prefer to
                                          schedule pods to nodes that satisfy the
                                          affinity expressions specified by this field,
                                          but it may choose a node that violates one
                                          or more of the expressions. The node that
                                          is most preferred is the one with the greatest
                                          sum of weights, i.e. for each node that
                                          meets all of the scheduling requirements
                                          (resource request, requiredDuringScheduling
                                          affinity expressions, etc.), compute a sum
                                          by iterating through the elements of this
                                          field and adding "weight" to the sum if
                                          the node has pods which matches the corresponding
                                          podAffinityTerm; the node(s) with the highest
                                          sum are the most preferred.
                                        items:
                                          description: The weights of all of the matched
                                            WeightedPodAffinityTerm fields are added
                                            per-node to find the most preferred node(s)
                                          properties:
                                            podAffinityTerm:
                                              description: Required. A pod affinity
                                                term, associated with the corresponding
                                                weight.
                                              properties:
                                                labelSelector:
                                                  description: A label query over
                                                    a set of resources, in this case
                                                    pods.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaceSelector:
                                                  description: A label query over
                                                    the set of namespaces that the
                                                    term applies to. The term is applied
                                                    to the union of the namespaces
                                                    selected by this field and the
                                                    ones listed in the namespaces
                                                    field. null selector and null
                                                    or empty namespaces list means
                                                    "this pod's namespace". An empty
                                                    selector ({}) matches all namespaces.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaces:
                                                  description: namespaces specifies
                                                    a static list of namespace names
                                                    that the term applies to. The
                                                    term is applied to the union of
                                                    the namespaces listed in this
                                                    field and the ones selected by
                                                    namespaceSelector. null or empty
                                                    namespaces list and null namespaceSelector
                                                    means "this pod's namespace".
                                                  items:
                                                    type: string
                                                  type: array
                                                topologyKey:
                                                  description: This pod should be
                                                    co-located (affinity) or not co-located
                                                    (anti-affinity) with the pods
                                                    matching the labelSelector in
                                                    the specified namespaces, where
                                                    co-located is defined as running
                                                    on a node whose value of the label
                                                    with key topologyKey matches that
                                                    of any node on which any of the
                                                    selected pods is running. Empty
                                                    topologyKey is not allowed.
                                                  type: string
                                              required:
                                              - topologyKey
                                              type: object
                                            weight:
                                              description: weight associated with
                                                matching the corresponding podAffinityTerm,
                                                in the range 1-100.
                                              format: int32
                                              type: integer
                                          required:
                                          - podAffinityTerm
                                          - weight
                                          type: object
                                        type: array
                                      requiredDuringSchedulingIgnoredDuringExecution:
                                        description: If the affinity requirements
                                          specified by this field are not met at scheduling
                                          time, the pod will not be scheduled onto
                                          the node. If the affinity requirements specified
                                          by this field cease to be met at some point
                                          during pod execution (e.g. due to a pod
                                          label update), the system may or may not
                                          try to eventually evict the pod from its
                                          node. When there are multiple elements,
                                          the lists of nodes corresponding to each
                                          podAffinityTerm are intersected, i.e. all
                                          terms must be satisfied.
                                        items:
                                          description: Defines a set of pods (namely
                                            those matching the labelSelector relative
                                            to the given namespace(s)) that this pod
                                            should be co-located (affinity) or not
                                            co-located (anti-affinity) with, where
                                            co-located is defined as running on a
                                            node whose value of the label with key
                                            <topologyKey> matches that of any node
                                            on which a pod of the set of pods is running
                                          properties:
                                            labelSelector:
                                              description: A label query over a set
                                                of resources, in this case pods.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: A label selector
                                                      requirement is a selector that
                                                      contains values, a key, and
                                                      an operator that relates the
                                                      key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: operator represents
                                                          a key's relationship to
                                                          a set of values. Valid operators
                                                          are In, NotIn, Exists and
                                                          DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: values is an
                                                          array of string values.
                                                          If the operator is In or
                                                          NotIn, the values array
                                                          must be non-empty. If the
                                                          operator is Exists or DoesNotExist,
                                                          the values array must be
                                                          empty. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: matchLabels is a map
                                                    of {key,value} pairs. A single
                                                    {key,value} in the matchLabels
                                                    map is equivalent to an element
                                                    of matchExpressions, whose key
                                                    field is "key", the operator is
                                                    "In", and the values array contains
                                                    only "value". The requirements
                                                    are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaceSelector:
                                              description: A label query over the
                                                set of namespaces that the term applies
                                                to. The term is applied to the union
                                                of the namespaces selected by this
                                                field and the ones listed in the namespaces
                                                field. null selector and null or empty
                                                namespaces list means "this pod's
                                                namespace". An empty selector ({})
                                                matches all namespaces.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: A label selector
                                                      requirement is a selector that
                                                      contains values, a key, and
                                                      an operator that relates the
                                                      key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: operator represents
                                                          a key's relationship to
                                                          a set of values. Valid operators
                                                          are In, NotIn, Exists and
                                                          DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: values is an
                                                          array of string values.
                                                          If the operator is In or
                                                          NotIn, the values array
                                                          must be non-empty. If the
                                                          operator is Exists or DoesNotExist,
                                                          the values array must be
                                                          empty. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: matchLabels is a map
                                                    of {key,value} pairs. A single
                                                    {key,value} in the matchLabels
                                                    map is equivalent to an element
                                                    of matchExpressions, whose key
                                                    field is "key", the operator is
                                                    "In", and the values array contains
                                                    only "value". The requirements
                                                    are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaces:
                                              description: namespaces specifies a
                                                static list of namespace names that
                                                the term applies to. The term is applied
                                                to the union of the namespaces listed
                                                in this field and the ones selected
                                                by namespaceSelector. null or empty
                                                namespaces list and null namespaceSelector
                                                means "this pod's namespace".
                                              items:
                                                type: string
                                              type: array
                                            topologyKey:
                                              description: This pod should be co-located
                                                (affinity) or not co-located (anti-affinity)
                                                with the pods matching the labelSelector
                                                in the specified namespaces, where
                                                co-located is defined as running on
                                                a node whose value of the label with
                                                key topologyKey matches that of any
                                                node on which any of the selected
                                                pods is running. Empty topologyKey
                                                is not allowed.
                                              type: string
                                          required:
                                          - topologyKey
                                          type: object
                                        type: array
                                    type: object
                                  podAntiAffinity:
                                    description: Describes pod anti-affinity scheduling
                                      rules (e.g. avoid putting this pod in the same
                                      node, zone, etc. as some other pod(s)).
                                    properties:
                                      preferredDuringSchedulingIgnoredDuringExecution:
                                        description: The scheduler will prefer to
                                          schedule pods to nodes that satisfy the
                                          anti-affinity expressions specified by this
                                          field, but it may choose a node that violates
                                          one or more of the expressions. The node
                                          that is most preferred is the one with the
                                          greatest sum of weights, i.e. for each node
                                          that meets all of the scheduling requirements
                                          (resource request, requiredDuringScheduling
                                          anti-affinity expressions, etc.), compute
                                          a sum by iterating through the elements
                                          of this field and adding "weight" to the
                                          sum if the node has pods which matches the
                                          corresponding podAffinityTerm; the node(s)
                                          with the highest sum are the most preferred.
                                        items:
                                          description: The weights of all of the matched
                                            WeightedPodAffinityTerm fields are added
                                            per-node to find the most preferred node(s)
                                          properties:
                                            podAffinityTerm:
                                              description: Required. A pod affinity
                                                term, associated with the corresponding
                                                weight.
                                              properties:
                                                labelSelector:
                                                  description: A label query over
                                                    a set of resources, in this case
                                                    pods.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaceSelector:
                                                  description: A label query over
                                                    the set of namespaces that the
                                                    term applies to. The term is applied
                                                    to the union of the namespaces
                                                    selected by this field and the
                                                    ones listed in the namespaces
                                                    field. null selector and null
                                                    or empty namespaces list means
                                                    "this pod's namespace". An empty
                                                    selector ({}) matches all namespaces.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                namespaces:
                                                  description: namespaces specifies
                                                    a static list of namespace names
                                                    that the term applies to. The
                                                    term is applied to the union of
                                                    the namespaces listed in this
                                                    field and the ones selected by
                                                    namespaceSelector. null or empty
                                                    namespaces list and null namespaceSelector
                                                    means "this pod's namespace".
                                                  items:
                                                    type: string
                                                  type: array
                                                topologyKey:
                                                  description: This pod should be
                                                    co-located (affinity) or not co-located
                                                    (anti-affinity) with the pods
                                                    matching the labelSelector in
                                                    the specified namespaces, where
                                                    co-located is defined as running
                                                    on a node whose value of the label
                                                    with key topologyKey matches that
                                                    of any node on which any of the
                                                    selected pods is running. Empty
                                                    topologyKey is not allowed.
                                                  type: string
                                              required:
                                              - topologyKey
                                              type: object
                                            weight:
                                              description: weight associated with
                                                matching the corresponding podAffinityTerm,
                                                in the range 1-100.
                                              format: int32
                                              type: integer
                                          required:
                                          - podAffinityTerm
                                          - weight
                                          type: object
                                        type: array
                                      requiredDuringSchedulingIgnoredDuringExecution:
                                        description: If the anti-affinity requirements
                                          specified by this field are not met at scheduling
                                          time, the pod will not be scheduled onto
                                          the node. If the anti-affinity requirements
                                          specified by this field cease to be met
                                          at some point during pod execution (e.g.
                                          due to a pod label update), the system may
                                          or may not try to eventually evict the pod
                                          from its node. When there are multiple elements,
                                          the lists of nodes corresponding to each
                                          podAffinityTerm are intersected, i.e. all
                                          terms must be satisfied.
                                        items:
                                          description: Defines a set of pods (namely
                                            those matching the labelSelector relative
                                            to the given namespace(s)) that this pod
                                            should be co-located (affinity) or not
                                            co-located (anti-affinity) with, where
                                            co-located is defined as running on a
                                            node whose value of the label with key
                                            <topologyKey> matches that of any node
                                            on which a pod of the set of pods is running
                                          properties:
                                            labelSelector:
                                              description: A label query over a set
                                                of resources, in this case pods.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: A label selector
                                                      requirement is a selector that
                                                      contains values, a key, and
                                                      an operator that relates the
                                                      key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: operator represents
                                                          a key's relationship to
                                                          a set of values. Valid operators
                                                          are In, NotIn, Exists and
                                                          DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: values is an
                                                          array of string values.
                                                          If the operator is In or
                                                          NotIn, the values array
                                                          must be non-empty. If the
                                                          operator is Exists or DoesNotExist,
                                                          the values array must be
                                                          empty. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: matchLabels is a map
                                                    of {key,value} pairs. A single
                                                    {key,value} in the matchLabels
                                                    map is equivalent to an element
                                                    of matchExpressions, whose key
                                                    field is "key", the operator is
                                                    "In", and the values array contains
                                                    only "value". The requirements
                                                    are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaceSelector:
                                              description: A label query over the
                                                set of namespaces that the term applies
                                                to. The term is applied to the union
                                                of the namespaces selected by this
                                                field and the ones listed in the namespaces
                                                field. null selector and null or empty
                                                namespaces list means "this pod's
                                                namespace". An empty selector ({})
                                                matches all namespaces.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: A label selector
                                                      requirement is a selector that
                                                      contains values, a key, and
                                                      an operator that relates the
                                                      key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: operator represents
                                                          a key's relationship to
                                                          a set of values. Valid operators
                                                          are In, NotIn, Exists and
                                                          DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: values is an
                                                          array of string values.
                                                          If the operator is In or
                                                          NotIn, the values array
                                                          must be non-empty. If the
                                                          operator is Exists or DoesNotExist,
                                                          the values array must be
                                                          empty. This array is replaced
                                                          during a strategic merge
                                                          patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: matchLabels is a map
                                                    of {key,value} pairs. A single
                                                    {key,value} in the matchLabels
                                                    map is equivalent to an element
                                                    of matchExpressions, whose key
                                                    field is "key", the operator is
                                                    "In", and the values array contains
                                                    only "value". The requirements
                                                    are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaces:
                                              description: namespaces specifies a
                                                static list of namespace names that
                                                the term applies to. The term is applied
                                                to the union of the namespaces listed
                                                in this field and the ones selected
                                                by namespaceSelector. null or empty
                                                namespaces list and null namespaceSelector
                                                means "this pod's namespace".
                                              items:
                                                type: string
                                              type: array
                                            topologyKey:
                                              description: This pod should be co-located
                                                (affinity) or not co-located (anti-affinity)
                                                with the pods matching the labelSelector
                                                in the specified namespaces, where
                                                co-located is defined as running on
                                                a node whose value of the label with
                                                key topologyKey matches that of any
                                                node on which any of the selected
                                                pods is running. Empty topologyKey
                                                is not allowed.
                                              type: string
                                          required:
                                          - topologyKey
                                          type: object
                                        type: array
                                    type: object
                                type: object
                              automountServiceAccountToken:
                                description: AutomountServiceAccountToken indicates
                                  whether a service account token should be automatically
                                  mounted.
                                type: boolean
                              containers:
                                items:
                                  description: A single application container that
                                    you want to run within a pod.
                                  properties:
                                    args:
                                      description: 'Arguments to the entrypoint. The
                                        container image''s CMD is used if this is
                                        not provided. Variable references $(VAR_NAME)
                                        are expanded using the container''s environment.
                                        If a variable cannot be resolved, the reference
                                        in the input string will be unchanged. Double
                                        $$ are reduced to a single $, which allows
                                        for escaping the $(VAR_NAME) syntax: i.e.
                                        "$$(VAR_NAME)" will produce the string literal
                                        "$(VAR_NAME)". Escaped references will never
                                        be expanded, regardless of whether the variable
                                        exists or not. Cannot be updated. More info:
                                        https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    command:
                                      description: 'Entrypoint array. Not executed
                                        within a shell. The container image''s ENTRYPOINT
                                        is used if this is not provided. Variable
                                        references $(VAR_NAME) are expanded using
                                        the container''s environment. If a variable
                                        cannot be resolved, the reference in the input
                                        string will be unchanged. Double $$ are reduced
                                        to a single $, which allows for escaping the
                                        $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                        produce the string literal "$(VAR_NAME)".
                                        Escaped references will never be expanded,
                                        regardless of whether the variable exists
                                        or not. Cannot be updated. More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    env:
                                      description: List of environment variables to
                                        set in the container. Cannot be updated.
                                      items:
                                        description: EnvVar represents an environment
                                          variable present in a Container.
                                        properties:
                                          name:
                                            description: Name of the environment variable.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          value:
                                            description: 'Variable references $(VAR_NAME)
                                              are expanded using the previously defined
                                              environment variables in the container
                                              and any service environment variables.
                                              If a variable cannot be resolved, the
                                              reference in the input string will be
                                              unchanged. Double $$ are reduced to
                                              a single $, which allows for escaping
                                              the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)"
                                              will produce the string literal "$(VAR_NAME)".
                                              Escaped references will never be expanded,
                                              regardless of whether the variable exists
                                              or not. Defaults to "".'
                                            type: string
                                          valueFrom:
                                            description: Source for the environment
                                              variable's value. Cannot be used if
                                              value is not empty.
                                            properties:
                                              configMapKeyRef:
                                                description: Selects a key of a ConfigMap.
                                                properties:
                                                  key:
                                                    description: The key to select.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      ConfigMap or its key must be
                                                      defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              fieldRef:
                                                description: 'Selects a field of the
                                                  pod: supports metadata.name, metadata.namespace,
                                                  `metadata.labels[''<KEY>'']`, `metadata.annotations[''<KEY>'']`,
                                                  spec.nodeName, spec.serviceAccountName,
                                                  status.hostIP, status.podIP, status.podIPs.'
                                                properties:
                                                  apiVersion:
                                                    description: Version of the schema
                                                      the FieldPath is written in
                                                      terms of, defaults to "v1".
                                                    type: string
                                                  fieldPath:
                                                    description: Path of the field
                                                      to select in the specified API
                                                      version.
                                                    type: string
                                                required:
                                                - fieldPath
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              resourceFieldRef:
                                                description: 'Selects a resource of
                                                  the container: only resources limits
                                                  and requests (limits.cpu, limits.memory,
                                                  limits.ephemeral-storage, requests.cpu,
                                                  requests.memory and requests.ephemeral-storage)
                                                  are currently supported.'
                                                properties:
                                                  containerName:
                                                    description: 'Container name:
                                                      required for volumes, optional
                                                      for env vars'
                                                    type: string
                                                  divisor:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    description: Specifies the output
                                                      format of the exposed resources,
                                                      defaults to "1"
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  resource:
                                                    description: 'Required: resource
                                                      to select'
                                                    type: string
                                                required:
                                                - resource
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              secretKeyRef:
                                                description: Selects a key of a secret
                                                  in the pod's namespace
                                                properties:
                                                  key:
                                                    description: The key of the secret
                                                      to select from.  Must be a valid
                                                      secret key.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      Secret or its key must be defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            type: object
                                        required:
                                        - name
                                        type: object
                                      type: array
                                    envFrom:
                                      description: List of sources to populate environment
                                        variables in the container. The keys defined
                                        within a source must be a C_IDENTIFIER. All
                                        invalid keys will be reported as an event
                                        when the container is starting. When a key
                                        exists in multiple sources, the value associated
                                        with the last source will take precedence.
                                        Values defined by an Env with a duplicate
                                        key will take precedence. Cannot be updated.
                                      items:
                                        description: EnvFromSource represents the
                                          source of a set of ConfigMaps
                                        properties:
                                          configMapRef:
                                            description: The ConfigMap to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          prefix:
                                            description: An optional identifier to
                                              prepend to each key in the ConfigMap.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          secretRef:
                                            description: The Secret to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                      type: array
                                    image:
                                      description: 'Container image name. More info:
                                        https://kubernetes.io/docs/concepts/containers/images
                                        This field is optional to allow higher level
                                        config management to default or override container
                                        images in workload controllers like Deployments
                                        and StatefulSets.'
                                      type: string
                                    imagePullPolicy:
                                      description: 'Image pull policy. One of Always,
                                        Never, IfNotPresent. Defaults to Always if
                                        :latest tag is specified, or IfNotPresent
                                        otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images'
                                      type: string
                                    lifecycle:
                                      description: Actions that the management system
                                        should take in response to container lifecycle
                                        events. Cannot be updated.
                                      properties:
                                        postStart:
                                          description: 'PostStart is called immediately
                                            after a container is created. If the handler
                                            fails, the container is terminated and
                                            restarted according to its restart policy.
                                            Other management of the container blocks
                                            until the hook completes. More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                        preStop:
                                          description: 'PreStop is called immediately
                                            before a container is terminated due to
                                            an API request or management event such
                                            as liveness/startup probe failure, preemption,
                                            resource contention, etc. The handler
                                            is not called if the container crashes
                                            or exits. The Pod''s termination grace
                                            period countdown begins before the PreStop
                                            hook is executed. Regardless of the outcome
                                            of the handler, the container will eventually
                                            terminate within the Pod''s termination
                                            grace period (unless delayed by finalizers).
                                            Other management of the container blocks
                                            until the hook completes or until the
                                            termination grace period is reached. More
                                            info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                      type: object
                                    livenessProbe:
                                      description: 'Periodic probe of container liveness.
                                        Container will be restarted if the probe fails.
                                        Cannot be updated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    name:
                                      description: Name of the container specified
                                        as a DNS_LABEL. Each container in a pod must
                                        have a unique name (DNS_LABEL). Cannot be
                                        updated.
                                      type: string
                                    ports:
                                      description: List of ports to expose from the
                                        container. Not specifying a port here DOES
                                        NOT prevent that port from being exposed.
                                        Any port which is listening on the default
                                        "0.0.0.0" address inside a container will
                                        be accessible from the network. Modifying
                                        this array with strategic merge patch may
                                        corrupt the data. For more information See
                                        https://github.com/kubernetes/kubernetes/issues/108255.
                                        Cannot be updated.
                                      items:
                                        description: ContainerPort represents a network
                                          port in a single container.
                                        properties:
                                          containerPort:
                                            description: Number of port to expose
                                              on the pod's IP address. This must be
                                              a valid port number, 0 < x < 65536.
                                            format: int32
                                            type: integer
                                          hostIP:
                                            description: What host IP to bind the
                                              external port to.
                                            type: string
                                          hostPort:
                                            description: Number of port to expose
                                              on the host. If specified, this must
                                              be a valid port number, 0 < x < 65536.
                                              If HostNetwork is specified, this must
                                              match ContainerPort. Most containers
                                              do not need this.
                                            format: int32
                                            type: integer
                                          name:
                                            description: If specified, this must be
                                              an IANA_SVC_NAME and unique within the
                                              pod. Each named port in a pod must have
                                              a unique name. Name for the port that
                                              can be referred to by services.
                                            type: string
                                          protocol:
                                            default: TCP
                                            description: Protocol for port. Must be
                                              UDP, TCP, or SCTP. Defaults to "TCP".
                                            type: string
                                        required:
                                        - containerPort
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - containerPort
                                      - protocol
                                      x-kubernetes-list-type: map
                                    readinessProbe:
                                      description: 'Periodic probe of container service
                                        readiness. Container will be removed from
                                        service endpoints if the probe fails. Cannot
                                        be updated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    resources:
                                      description: 'Compute Resources required by
                                        this container. Cannot be updated. More info:
                                        https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                      properties:
                                        limits:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Limits describes the maximum
                                            amount of compute resources allowed. More
                                            info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                        requests:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Requests describes the minimum
                                            amount of compute resources required.
                                            If Requests is omitted for a container,
                                            it defaults to Limits if that is explicitly
                                            specified, otherwise to an implementation-defined
                                            value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                      type: object
                                    securityContext:
                                      description: 'SecurityContext defines the security
                                        options the container should be run with.
                                        If set, the fields of SecurityContext override
                                        the equivalent fields of PodSecurityContext.
                                        More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/'
                                      properties:
                                        allowPrivilegeEscalation:
                                          description: 'AllowPrivilegeEscalation controls
                                            whether a process can gain more privileges
                                            than its parent process. This bool directly
                                            controls if the no_new_privs flag will
                                            be set on the container process. AllowPrivilegeEscalation
                                            is true always when the container is:
                                            1) run as Privileged 2) has CAP_SYS_ADMIN
                                            Note that this field cannot be set when
                                            spec.os.name is windows.'
                                          type: boolean
                                        capabilities:
                                          description: The capabilities to add/drop
                                            when running containers. Defaults to the
                                            default set of capabilities granted by
                                            the container runtime. Note that this
                                            field cannot be set when spec.os.name
                                            is windows.
                                          properties:
                                            add:
                                              description: Added capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                            drop:
                                              description: Removed capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                          type: object
                                        privileged:
                                          description: Run container in privileged
                                            mode. Processes in privileged containers
                                            are essentially equivalent to root on
                                            the host. Defaults to false. Note that
                                            this field cannot be set when spec.os.name
                                            is windows.
                                          type: boolean
                                        procMount:
                                          description: procMount denotes the type
                                            of proc mount to use for the containers.
                                            The default is DefaultProcMount which
                                            uses the container runtime defaults for
                                            readonly paths and masked paths. This
                                            requires the ProcMountType feature flag
                                            to be enabled. Note that this field cannot
                                            be set when spec.os.name is windows.
                                          type: string
                                        readOnlyRootFilesystem:
                                          description: Whether this container has
                                            a read-only root filesystem. Default is
                                            false. Note that this field cannot be
                                            set when spec.os.name is windows.
                                          type: boolean
                                        runAsGroup:
                                          description: The GID to run the entrypoint
                                            of the container process. Uses runtime
                                            default if unset. May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        runAsNonRoot:
                                          description: Indicates that the container
                                            must run as a non-root user. If true,
                                            the Kubelet will validate the image at
                                            runtime to ensure that it does not run
                                            as UID 0 (root) and fail to start the
                                            container if it does. If unset or false,
                                            no such validation will be performed.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence.
                                          type: boolean
                                        runAsUser:
                                          description: The UID to run the entrypoint
                                            of the container process. Defaults to
                                            user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        seLinuxOptions:
                                          description: The SELinux context to be applied
                                            to the container. If unspecified, the
                                            container runtime will allocate a random
                                            SELinux context for each container.  May
                                            also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            level:
                                              description: Level is SELinux level
                                                label that applies to the container.
                                              type: string
                                            role:
                                              description: Role is a SELinux role
                                                label that applies to the container.
                                              type: string
                                            type:
                                              description: Type is a SELinux type
                                                label that applies to the container.
                                              type: string
                                            user:
                                              description: User is a SELinux user
                                                label that applies to the container.
                                              type: string
                                          type: object
                                        seccompProfile:
                                          description: The seccomp options to use
                                            by this container. If seccomp options
                                            are provided at both the pod & container
                                            level, the container options override
                                            the pod options. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            localhostProfile:
                                              description: localhostProfile indicates
                                                a profile defined in a file on the
                                                node should be used. The profile must
                                                be preconfigured on the node to work.
                                                Must be a descending path, relative
                                                to the kubelet's configured seccomp
                                                profile location. Must only be set
                                                if type is "Localhost".
                                              type: string
                                            type:
                                              description: "type indicates which kind
                                                of seccomp profile will be applied.
                                                Valid options are: \n Localhost -
                                                a profile defined in a file on the
                                                node should be used. RuntimeDefault
                                                - the container runtime default profile
                                                should be used. Unconfined - no profile
                                                should be applied."
                                              type: string
                                          required:
                                          - type
                                          type: object
                                        windowsOptions:
                                          description: The Windows specific settings
                                            applied to all containers. If unspecified,
                                            the options from the PodSecurityContext
                                            will be used. If set in both SecurityContext
                                            and PodSecurityContext, the value specified
                                            in SecurityContext takes precedence. Note
                                            that this field cannot be set when spec.os.name
                                            is linux.
                                          properties:
                                            gmsaCredentialSpec:
                                              description: GMSACredentialSpec is where
                                                the GMSA admission webhook (https://github.com/kubernetes-sigs/windows-gmsa)
                                                inlines the contents of the GMSA credential
                                                spec named by the GMSACredentialSpecName
                                                field.
                                              type: string
                                            gmsaCredentialSpecName:
                                              description: GMSACredentialSpecName
                                                is the name of the GMSA credential
                                                spec to use.
                                              type: string
                                            hostProcess:
                                              description: HostProcess determines
                                                if a container should be run as a
                                                'Host Process' container. This field
                                                is alpha-level and will only be honored
                                                by components that enable the WindowsHostProcessContainers
                                                feature flag. Setting this field without
                                                the feature flag will result in errors
                                                when validating the Pod. All of a
                                                Pod's containers must have the same
                                                effective HostProcess value (it is
                                                not allowed to have a mix of HostProcess
                                                containers and non-HostProcess containers).  In
                                                addition, if HostProcess is true then
                                                HostNetwork must also be set to true.
                                              type: boolean
                                            runAsUserName:
                                              description: The UserName in Windows
                                                to run the entrypoint of the container
                                                process. Defaults to the user specified
                                                in image metadata if unspecified.
                                                May also be set in PodSecurityContext.
                                                If set in both SecurityContext and
                                                PodSecurityContext, the value specified
                                                in SecurityContext takes precedence.
                                              type: string
                                          type: object
                                      type: object
                                    startupProbe:
                                      description: 'StartupProbe indicates that the
                                        Pod has successfully initialized. If specified,
                                        no other probes are executed until this completes
                                        successfully. If this probe fails, the Pod
                                        will be restarted, just as if the livenessProbe
                                        failed. This can be used to provide different
                                        probe parameters at the beginning of a Pod''s
                                        lifecycle, when it might take a long time
                                        to load data or warm a cache, than during
                                        steady-state operation. This cannot be updated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    stdin:
                                      description: Whether this container should allocate
                                        a buffer for stdin in the container runtime.
                                        If this is not set, reads from stdin in the
                                        container will always result in EOF. Default
                                        is false.
                                      type: boolean
                                    stdinOnce:
                                      description: Whether the container runtime should
                                        close the stdin channel after it has been
                                        opened by a single attach. When stdin is true
                                        the stdin stream will remain open across multiple
                                        attach sessions. If stdinOnce is set to true,
                                        stdin is opened on container start, is empty
                                        until the first client attaches to stdin,
                                        and then remains open and accepts data until
                                        the client disconnects, at which time stdin
                                        is closed and remains closed until the container
                                        is restarted. If this flag is false, a container
                                        processes that reads from stdin will never
                                        receive an EOF. Default is false
                                      type: boolean
                                    terminationMessagePath:
                                      description: 'Optional: Path at which the file
                                        to which the container''s termination message
                                        will be written is mounted into the container''s
                                        filesystem. Message written is intended to
                                        be brief final status, such as an assertion
                                        failure message. Will be truncated by the
                                        node if greater than 4096 bytes. The total
                                        message length across all containers will
                                        be limited to 12kb. Defaults to /dev/termination-log.
                                        Cannot be updated.'
                                      type: string
                                    terminationMessagePolicy:
                                      description: Indicate how the termination message
                                        should be populated. File will use the contents
                                        of terminationMessagePath to populate the
                                        container status message on both success and
                                        failure. FallbackToLogsOnError will use the
                                        last chunk of container log output if the
                                        termination message file is empty and the
                                        container exited with an error. The log output
                                        is limited to 2048 bytes or 80 lines, whichever
                                        is smaller. Defaults to File. Cannot be updated.
                                      type: string
                                    tty:
                                      description: Whether this container should allocate
                                        a TTY for itself, also requires 'stdin' to
                                        be true. Default is false.
                                      type: boolean
                                    volumeDevices:
                                      description: volumeDevices is the list of block
                                        devices to be used by the container.
                                      items:
                                        description: volumeDevice describes a mapping
                                          of a raw block device within a container.
                                        properties:
                                          devicePath:
                                            description: devicePath is the path inside
                                              of the container that the device will
                                              be mapped to.
                                            type: string
                                          name:
                                            description: name must match the name
                                              of a persistentVolumeClaim in the pod
                                            type: string
                                        required:
                                        - devicePath
                                        - name
                                        type: object
                                      type: array
                                    volumeMounts:
                                      description: Pod volumes to mount into the container's
                                        filesystem. Cannot be updated.
                                      items:
                                        description: VolumeMount describes a mounting
                                          of a Volume within a container.
                                        properties:
                                          mountPath:
                                            description: Path within the container
                                              at which the volume should be mounted.  Must
                                              not contain ':'.
                                            type: string
                                          mountPropagation:
                                            description: mountPropagation determines
                                              how mounts are propagated from the host
                                              to container and the other way around.
                                              When not set, MountPropagationNone is
                                              used. This field is beta in 1.10.
                                            type: string
                                          name:
                                            description: This must match the Name
                                              of a Volume.
                                            type: string
                                          readOnly:
                                            description: Mounted read-only if true,
                                              read-write otherwise (false or unspecified).
                                              Defaults to false.
                                            type: boolean
                                          subPath:
                                            description: Path within the volume from
                                              which the container's volume should
                                              be mounted. Defaults to "" (volume's
                                              root).
                                            type: string
                                          subPathExpr:
                                            description: Expanded path within the
                                              volume from which the container's volume
                                              should be mounted. Behaves similarly
                                              to SubPath but environment variable
                                              references $(VAR_NAME) are expanded
                                              using the container's environment. Defaults
                                              to "" (volume's root). SubPathExpr and
                                              SubPath are mutually exclusive.
                                            type: string
                                        required:
                                        - mountPath
                                        - name
                                        type: object
                                      type: array
                                    workingDir:
                                      description: Container's working directory.
                                        If not specified, the container runtime's
                                        default will be used, which might be configured
                                        in the container image. Cannot be updated.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                              dnsConfig:
                                description: Specifies the DNS parameters of a pod.
                                  Parameters specified here will be merged to the
                                  generated DNS configuration based on DNSPolicy.
                                properties:
                                  nameservers:
                                    description: A list of DNS name server IP addresses.
                                      This will be appended to the base nameservers
                                      generated from DNSPolicy. Duplicated nameservers
                                      will be removed.
                                    items:
                                      type: string
                                    type: array
                                  options:
                                    description: A list of DNS resolver options. This
                                      will be merged with the base options generated
                                      from DNSPolicy. Duplicated entries will be removed.
                                      Resolution options given in Options will override
                                      those that appear in the base DNSPolicy.
                                    items:
                                      description: PodDNSConfigOption defines DNS
                                        resolver options of a pod.
                                      properties:
                                        name:
                                          description: Required.
                                          type: string
                                        value:
                                          type: string
                                      type: object
                                    type: array
                                  searches:
                                    description: A list of DNS search domains for
                                      host-name lookup. This will be appended to the
                                      base search paths generated from DNSPolicy.
                                      Duplicated search paths will be removed.
                                    items:
                                      type: string
                                    type: array
                                type: object
                              dnsPolicy:
                                description: DNSPolicy defines how a pod's DNS will
                                  be configured.
                                type: string
                              enableServiceLinks:
                                description: 'EnableServiceLinks indicates whether
                                  information about services should be injected into
                                  pod''s environment variables, matching the syntax
                                  of Docker links. Optional: Defaults to true.'
                                type: boolean
                              ephemeralContainers:
                                items:
                                  description: "An EphemeralContainer is a temporary
                                    container that you may add to an existing Pod
                                    for user-initiated activities such as debugging.
                                    Ephemeral containers have no resource or scheduling
                                    guarantees, and they will not be restarted when
                                    they exit or when a Pod is removed or restarted.
                                    The kubelet may evict a Pod if an ephemeral container
                                    causes the Pod to exceed its resource allocation.
                                    \n To add an ephemeral container, use the ephemeralcontainers
                                    subresource of an existing Pod. Ephemeral containers
                                    may not be removed or restarted."
                                  properties:
                                    args:
                                      description: 'Arguments to the entrypoint. The
                                        image''s CMD is used if this is not provided.
                                        Variable references $(VAR_NAME) are expanded
                                        using the container''s environment. If a variable
                                        cannot be resolved, the reference in the input
                                        string will be unchanged. Double $$ are reduced
                                        to a single $, which allows for escaping the
                                        $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                        produce the string literal "$(VAR_NAME)".
                                        Escaped references will never be expanded,
                                        regardless of whether the variable exists
                                        or not. Cannot be updated. More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    command:
                                      description: 'Entrypoint array. Not executed
                                        within a shell. The image''s ENTRYPOINT is
                                        used if this is not provided. Variable references
                                        $(VAR_NAME) are expanded using the container''s
                                        environment. If a variable cannot be resolved,
                                        the reference in the input string will be
                                        unchanged. Double $$ are reduced to a single
                                        $, which allows for escaping the $(VAR_NAME)
                                        syntax: i.e. "$$(VAR_NAME)" will produce the
                                        string literal "$(VAR_NAME)". Escaped references
                                        will never be expanded, regardless of whether
                                        the variable exists or not. Cannot be updated.
                                        More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    env:
                                      description: List of environment variables to
                                        set in the container. Cannot be updated.
                                      items:
                                        description: EnvVar represents an environment
                                          variable present in a Container.
                                        properties:
                                          name:
                                            description: Name of the environment variable.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          value:
                                            description: 'Variable references $(VAR_NAME)
                                              are expanded using the previously defined
                                              environment variables in the container
                                              and any service environment variables.
                                              If a variable cannot be resolved, the
                                              reference in the input string will be
                                              unchanged. Double $$ are reduced to
                                              a single $, which allows for escaping
                                              the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)"
                                              will produce the string literal "$(VAR_NAME)".
                                              Escaped references will never be expanded,
                                              regardless of whether the variable exists
                                              or not. Defaults to "".'
                                            type: string
                                          valueFrom:
                                            description: Source for the environment
                                              variable's value. Cannot be used if
                                              value is not empty.
                                            properties:
                                              configMapKeyRef:
                                                description: Selects a key of a ConfigMap.
                                                properties:
                                                  key:
                                                    description: The key to select.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      ConfigMap or its key must be
                                                      defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              fieldRef:
                                                description: 'Selects a field of the
                                                  pod: supports metadata.name, metadata.namespace,
                                                  `metadata.labels[''<KEY>'']`, `metadata.annotations[''<KEY>'']`,
                                                  spec.nodeName, spec.serviceAccountName,
                                                  status.hostIP, status.podIP, status.podIPs.'
                                                properties:
                                                  apiVersion:
                                                    description: Version of the schema
                                                      the FieldPath is written in
                                                      terms of, defaults to "v1".
                                                    type: string
                                                  fieldPath:
                                                    description: Path of the field
                                                      to select in the specified API
                                                      version.
                                                    type: string
                                                required:
                                                - fieldPath
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              resourceFieldRef:
                                                description: 'Selects a resource of
                                                  the container: only resources limits
                                                  and requests (limits.cpu, limits.memory,
                                                  limits.ephemeral-storage, requests.cpu,
                                                  requests.memory and requests.ephemeral-storage)
                                                  are currently supported.'
                                                properties:
                                                  containerName:
                                                    description: 'Container name:
                                                      required for volumes, optional
                                                      for env vars'
                                                    type: string
                                                  divisor:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    description: Specifies the output
                                                      format of the exposed resources,
                                                      defaults to "1"
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  resource:
                                                    description: 'Required: resource
                                                      to select'
                                                    type: string
                                                required:
                                                - resource
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              secretKeyRef:
                                                description: Selects a key of a secret
                                                  in the pod's namespace
                                                properties:
                                                  key:
                                                    description: The key of the secret
                                                      to select from.  Must be a valid
                                                      secret key.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      Secret or its key must be defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            type: object
                                        required:
                                        - name
                                        type: object
                                      type: array
                                    envFrom:
                                      description: List of sources to populate environment
                                        variables in the container. The keys defined
                                        within a source must be a C_IDENTIFIER. All
                                        invalid keys will be reported as an event
                                        when the container is starting. When a key
                                        exists in multiple sources, the value associated
                                        with the last source will take precedence.
                                        Values defined by an Env with a duplicate
                                        key will take precedence. Cannot be updated.
                                      items:
                                        description: EnvFromSource represents the
                                          source of a set of ConfigMaps
                                        properties:
                                          configMapRef:
                                            description: The ConfigMap to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          prefix:
                                            description: An optional identifier to
                                              prepend to each key in the ConfigMap.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          secretRef:
                                            description: The Secret to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                      type: array
                                    image:
                                      description: 'Container image name. More info:
                                        https://kubernetes.io/docs/concepts/containers/images'
                                      type: string
                                    imagePullPolicy:
                                      description: 'Image pull policy. One of Always,
                                        Never, IfNotPresent. Defaults to Always if
                                        :latest tag is specified, or IfNotPresent
                                        otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images'
                                      type: string
                                    lifecycle:
                                      description: Lifecycle is not allowed for ephemeral
                                        containers.
                                      properties:
                                        postStart:
                                          description: 'PostStart is called immediately
                                            after a container is created. If the handler
                                            fails, the container is terminated and
                                            restarted according to its restart policy.
                                            Other management of the container blocks
                                            until the hook completes. More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                        preStop:
                                          description: 'PreStop is called immediately
                                            before a container is terminated due to
                                            an API request or management event such
                                            as liveness/startup probe failure, preemption,
                                            resource contention, etc. The handler
                                            is not called if the container crashes
                                            or exits. The Pod''s termination grace
                                            period countdown begins before the PreStop
                                            hook is executed. Regardless of the outcome
                                            of the handler, the container will eventually
                                            terminate within the Pod''s termination
                                            grace period (unless delayed by finalizers).
                                            Other management of the container blocks
                                            until the hook completes or until the
                                            termination grace period is reached. More
                                            info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                      type: object
                                    livenessProbe:
                                      description: Probes are not allowed for ephemeral
                                        containers.
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    name:
                                      description: Name of the ephemeral container
                                        specified as a DNS_LABEL. This name must be
                                        unique among all containers, init containers
                                        and ephemeral containers.
                                      type: string
                                    ports:
                                      description: Ports are not allowed for ephemeral
                                        containers.
                                      items:
                                        description: ContainerPort represents a network
                                          port in a single container.
                                        properties:
                                          containerPort:
                                            description: Number of port to expose
                                              on the pod's IP address. This must be
                                              a valid port number, 0 < x < 65536.
                                            format: int32
                                            type: integer
                                          hostIP:
                                            description: What host IP to bind the
                                              external port to.
                                            type: string
                                          hostPort:
                                            description: Number of port to expose
                                              on the host. If specified, this must
                                              be a valid port number, 0 < x < 65536.
                                              If HostNetwork is specified, this must
                                              match ContainerPort. Most containers
                                              do not need this.
                                            format: int32
                                            type: integer
                                          name:
                                            description: If specified, this must be
                                              an IANA_SVC_NAME and unique within the
                                              pod. Each named port in a pod must have
                                              a unique name. Name for the port that
                                              can be referred to by services.
                                            type: string
                                          protocol:
                                            default: TCP
                                            description: Protocol for port. Must be
                                              UDP, TCP, or SCTP. Defaults to "TCP".
                                            type: string
                                        required:
                                        - containerPort
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - containerPort
                                      - protocol
                                      x-kubernetes-list-type: map
                                    readinessProbe:
                                      description: Probes are not allowed for ephemeral
                                        containers.
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    resources:
                                      description: Resources are not allowed for ephemeral
                                        containers. Ephemeral containers use spare
                                        resources already allocated to the pod.
                                      properties:
                                        limits:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Limits describes the maximum
                                            amount of compute resources allowed. More
                                            info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                        requests:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Requests describes the minimum
                                            amount of compute resources required.
                                            If Requests is omitted for a container,
                                            it defaults to Limits if that is explicitly
                                            specified, otherwise to an implementation-defined
                                            value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                      type: object
                                    securityContext:
                                      description: 'Optional: SecurityContext defines
                                        the security options the ephemeral container
                                        should be run with. If set, the fields of
                                        SecurityContext override the equivalent fields
                                        of PodSecurityContext.'
                                      properties:
                                        allowPrivilegeEscalation:
                                          description: 'AllowPrivilegeEscalation controls
                                            whether a process can gain more privileges
                                            than its parent process. This bool directly
                                            controls if the no_new_privs flag will
                                            be set on the container process. AllowPrivilegeEscalation
                                            is true always when the container is:
                                            1) run as Privileged 2) has CAP_SYS_ADMIN
                                            Note that this field cannot be set when
                                            spec.os.name is windows.'
                                          type: boolean
                                        capabilities:
                                          description: The capabilities to add/drop
                                            when running containers. Defaults to the
                                            default set of capabilities granted by
                                            the container runtime. Note that this
                                            field cannot be set when spec.os.name
                                            is windows.
                                          properties:
                                            add:
                                              description: Added capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                            drop:
                                              description: Removed capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                          type: object
                                        privileged:
                                          description: Run container in privileged
                                            mode. Processes in privileged containers
                                            are essentially equivalent to root on
                                            the host. Defaults to false. Note that
                                            this field cannot be set when spec.os.name
                                            is windows.
                                          type: boolean
                                        procMount:
                                          description: procMount denotes the type
                                            of proc mount to use for the containers.
                                            The default is DefaultProcMount which
                                            uses the container runtime defaults for
                                            readonly paths and masked paths. This
                                            requires the ProcMountType feature flag
                                            to be enabled. Note that this field cannot
                                            be set when spec.os.name is windows.
                                          type: string
                                        readOnlyRootFilesystem:
                                          description: Whether this container has
                                            a read-only root filesystem. Default is
                                            false. Note that this field cannot be
                                            set when spec.os.name is windows.
                                          type: boolean
                                        runAsGroup:
                                          description: The GID to run the entrypoint
                                            of the container process. Uses runtime
                                            default if unset. May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        runAsNonRoot:
                                          description: Indicates that the container
                                            must run as a non-root user. If true,
                                            the Kubelet will validate the image at
                                            runtime to ensure that it does not run
                                            as UID 0 (root) and fail to start the
                                            container if it does. If unset or false,
                                            no such validation will be performed.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence.
                                          type: boolean
                                        runAsUser:
                                          description: The UID to run the entrypoint
                                            of the container process. Defaults to
                                            user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        seLinuxOptions:
                                          description: The SELinux context to be applied
                                            to the container. If unspecified, the
                                            container runtime will allocate a random
                                            SELinux context for each container.  May
                                            also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            level:
                                              description: Level is SELinux level
                                                label that applies to the container.
                                              type: string
                                            role:
                                              description: Role is a SELinux role
                                                label that applies to the container.
                                              type: string
                                            type:
                                              description: Type is a SELinux type
                                                label that applies to the container.
                                              type: string
                                            user:
                                              description: User is a SELinux user
                                                label that applies to the container.
                                              type: string
                                          type: object
                                        seccompProfile:
                                          description: The seccomp options to use
                                            by this container. If seccomp options
                                            are provided at both the pod & container
                                            level, the container options override
                                            the pod options. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            localhostProfile:
                                              description: localhostProfile indicates
                                                a profile defined in a file on the
                                                node should be used. The profile must
                                                be preconfigured on the node to work.
                                                Must be a descending path, relative
                                                to the kubelet's configured seccomp
                                                profile location. Must only be set
                                                if type is "Localhost".
                                              type: string
                                            type:
                                              description: "type indicates which kind
                                                of seccomp profile will be applied.
                                                Valid options are: \n Localhost -
                                                a profile defined in a file on the
                                                node should be used. RuntimeDefault
                                                - the container runtime default profile
                                                should be used. Unconfined - no profile
                                                should be applied."
                                              type: string
                                          required:
                                          - type
                                          type: object
                                        windowsOptions:
                                          description: The Windows specific settings
                                            applied to all containers. If unspecified,
                                            the options from the PodSecurityContext
                                            will be used. If set in both SecurityContext
                                            and PodSecurityContext, the value specified
                                            in SecurityContext takes precedence. Note
                                            that this field cannot be set when spec.os.name
                                            is linux.
                                          properties:
                                            gmsaCredentialSpec:
                                              description: GMSACredentialSpec is where
                                                the GMSA admission webhook (https://github.com/kubernetes-sigs/windows-gmsa)
                                                inlines the contents of the GMSA credential
                                                spec named by the GMSACredentialSpecName
                                                field.
                                              type: string
                                            gmsaCredentialSpecName:
                                              description: GMSACredentialSpecName
                                                is the name of the GMSA credential
                                                spec to use.
                                              type: string
                                            hostProcess:
                                              description: HostProcess determines
                                                if a container should be run as a
                                                'Host Process' container. This field
                                                is alpha-level and will only be honored
                                                by components that enable the WindowsHostProcessContainers
                                                feature flag. Setting this field without
                                                the feature flag will result in errors
                                                when validating the Pod. All of a
                                                Pod's containers must have the same
                                                effective HostProcess value (it is
                                                not allowed to have a mix of HostProcess
                                                containers and non-HostProcess containers).  In
                                                addition, if HostProcess is true then
                                                HostNetwork must also be set to true.
                                              type: boolean
                                            runAsUserName:
                                              description: The UserName in Windows
                                                to run the entrypoint of the container
                                                process. Defaults to the user specified
                                                in image metadata if unspecified.
                                                May also be set in PodSecurityContext.
                                                If set in both SecurityContext and
                                                PodSecurityContext, the value specified
                                                in SecurityContext takes precedence.
                                              type: string
                                          type: object
                                      type: object
                                    startupProbe:
                                      description: Probes are not allowed for ephemeral
                                        containers.
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    stdin:
                                      description: Whether this container should allocate
                                        a buffer for stdin in the container runtime.
                                        If this is not set, reads from stdin in the
                                        container will always result in EOF. Default
                                        is false.
                                      type: boolean
                                    stdinOnce:
                                      description: Whether the container runtime should
                                        close the stdin channel after it has been
                                        opened by a single attach. When stdin is true
                                        the stdin stream will remain open across multiple
                                        attach sessions. If stdinOnce is set to true,
                                        stdin is opened on container start, is empty
                                        until the first client attaches to stdin,
                                        and then remains open and accepts data until
                                        the client disconnects, at which time stdin
                                        is closed and remains closed until the container
                                        is restarted. If this flag is false, a container
                                        processes that reads from stdin will never
                                        receive an EOF. Default is false
                                      type: boolean
                                    targetContainerName:
                                      description: "If set, the name of the container
                                        from PodSpec that this ephemeral container
                                        targets. The ephemeral container will be run
                                        in the namespaces (IPC, PID, etc) of this
                                        container. If not set then the ephemeral container
                                        uses the namespaces configured in the Pod
                                        spec. \n The container runtime must implement
                                        support for this feature. If the runtime does
                                        not support namespace targeting then the result
                                        of setting this field is undefined."
                                      type: string
                                    terminationMessagePath:
                                      description: 'Optional: Path at which the file
                                        to which the container''s termination message
                                        will be written is mounted into the container''s
                                        filesystem. Message written is intended to
                                        be brief final status, such as an assertion
                                        failure message. Will be truncated by the
                                        node if greater than 4096 bytes. The total
                                        message length across all containers will
                                        be limited to 12kb. Defaults to /dev/termination-log.
                                        Cannot be updated.'
                                      type: string
                                    terminationMessagePolicy:
                                      description: Indicate how the termination message
                                        should be populated. File will use the contents
                                        of terminationMessagePath to populate the
                                        container status message on both success and
                                        failure. FallbackToLogsOnError will use the
                                        last chunk of container log output if the
                                        termination message file is empty and the
                                        container exited with an error. The log output
                                        is limited to 2048 bytes or 80 lines, whichever
                                        is smaller. Defaults to File. Cannot be updated.
                                      type: string
                                    tty:
                                      description: Whether this container should allocate
                                        a TTY for itself, also requires 'stdin' to
                                        be true. Default is false.
                                      type: boolean
                                    volumeDevices:
                                      description: volumeDevices is the list of block
                                        devices to be used by the container.
                                      items:
                                        description: volumeDevice describes a mapping
                                          of a raw block device within a container.
                                        properties:
                                          devicePath:
                                            description: devicePath is the path inside
                                              of the container that the device will
                                              be mapped to.
                                            type: string
                                          name:
                                            description: name must match the name
                                              of a persistentVolumeClaim in the pod
                                            type: string
                                        required:
                                        - devicePath
                                        - name
                                        type: object
                                      type: array
                                    volumeMounts:
                                      description: Pod volumes to mount into the container's
                                        filesystem. Subpath mounts are not allowed
                                        for ephemeral containers. Cannot be updated.
                                      items:
                                        description: VolumeMount describes a mounting
                                          of a Volume within a container.
                                        properties:
                                          mountPath:
                                            description: Path within the container
                                              at which the volume should be mounted.  Must
                                              not contain ':'.
                                            type: string
                                          mountPropagation:
                                            description: mountPropagation determines
                                              how mounts are propagated from the host
                                              to container and the other way around.
                                              When not set, MountPropagationNone is
                                              used. This field is beta in 1.10.
                                            type: string
                                          name:
                                            description: This must match the Name
                                              of a Volume.
                                            type: string
                                          readOnly:
                                            description: Mounted read-only if true,
                                              read-write otherwise (false or unspecified).
                                              Defaults to false.
                                            type: boolean
                                          subPath:
                                            description: Path within the volume from
                                              which the container's volume should
                                              be mounted. Defaults to "" (volume's
                                              root).
                                            type: string
                                          subPathExpr:
                                            description: Expanded path within the
                                              volume from which the container's volume
                                              should be mounted. Behaves similarly
                                              to SubPath but environment variable
                                              references $(VAR_NAME) are expanded
                                              using the container's environment. Defaults
                                              to "" (volume's root). SubPathExpr and
                                              SubPath are mutually exclusive.
                                            type: string
                                        required:
                                        - mountPath
                                        - name
                                        type: object
                                      type: array
                                    workingDir:
                                      description: Container's working directory.
                                        If not specified, the container runtime's
                                        default will be used, which might be configured
                                        in the container image. Cannot be updated.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                              hostAliases:
                                description: HostAliases is an optional list of hosts
                                  and IPs that will be injected into the pod's hosts
                                  file if specified. This is only valid for non-hostNetwork
                                  pods.
                                items:
                                  description: HostAlias holds the mapping between
                                    IP and hostnames that will be injected as an entry
                                    in the pod's hosts file.
                                  properties:
                                    hostnames:
                                      description: Hostnames for the above IP address.
                                      items:
                                        type: string
                                      type: array
                                    ip:
                                      description: IP address of the host file entry.
                                      type: string
                                  type: object
                                type: array
                              hostIPC:
                                description: 'Use the host''s ipc namespace. Optional:
                                  Default to false.'
                                type: boolean
                              hostNetwork:
                                description: Host networking requested for this pod.
                                  Use the host's network namespace. If this option
                                  is set, the ports that will be used must be specified.
                                  Default to false.
                                type: boolean
                              hostPID:
                                description: 'Use the host''s pid namespace. Optional:
                                  Default to false.'
                                type: boolean
                              hostUsers:
                                description: 'Use the host''s user namespace. Optional:
                                  Default to true. If set to true or not present,
                                  the pod will be run in the host user namespace,
                                  useful for when the pod needs a feature only available
                                  to the host user namespace, such as loading a kernel
                                  module with CAP_SYS_MODULE. When set to false, a
                                  new userns is created for the pod. Setting false
                                  is useful for mitigating container breakout vulnerabilities
                                  even allowing users to run their containers as root
                                  without actually having root privileges on the host.
                                  This field is alpha-level and is only honored by
                                  servers that enable the UserNamespacesSupport feature.'
                                type: boolean
                              hostname:
                                description: Specifies the hostname of the Pod If
                                  not specified, the pod's hostname will be set to
                                  a system-defined value.
                                type: string
                              imagePullSecrets:
                                description: 'ImagePullSecrets is an optional list
                                  of references to secrets in the same namespace to
                                  use for pulling any of the images used by this PodSpec.
                                  If specified, these secrets will be passed to individual
                                  puller implementations for them to use. More info:
                                  https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                                items:
                                  description: LocalObjectReference contains enough
                                    information to let you locate the referenced object
                                    inside the same namespace.
                                  properties:
                                    name:
                                      description: 'Name of the referent. More info:
                                        https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                        TODO: Add other useful fields. apiVersion,
                                        kind, uid?'
                                      type: string
                                  type: object
                                  x-kubernetes-map-type: atomic
                                type: array
                              initContainers:
                                items:
                                  description: A single application container that
                                    you want to run within a pod.
                                  properties:
                                    args:
                                      description: 'Arguments to the entrypoint. The
                                        container image''s CMD is used if this is
                                        not provided. Variable references $(VAR_NAME)
                                        are expanded using the container''s environment.
                                        If a variable cannot be resolved, the reference
                                        in the input string will be unchanged. Double
                                        $$ are reduced to a single $, which allows
                                        for escaping the $(VAR_NAME) syntax: i.e.
                                        "$$(VAR_NAME)" will produce the string literal
                                        "$(VAR_NAME)". Escaped references will never
                                        be expanded, regardless of whether the variable
                                        exists or not. Cannot be updated. More info:
                                        https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    command:
                                      description: 'Entrypoint array. Not executed
                                        within a shell. The container image''s ENTRYPOINT
                                        is used if this is not provided. Variable
                                        references $(VAR_NAME) are expanded using
                                        the container''s environment. If a variable
                                        cannot be resolved, the reference in the input
                                        string will be unchanged. Double $$ are reduced
                                        to a single $, which allows for escaping the
                                        $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                        produce the string literal "$(VAR_NAME)".
                                        Escaped references will never be expanded,
                                        regardless of whether the variable exists
                                        or not. Cannot be updated. More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell'
                                      items:
                                        type: string
                                      type: array
                                    env:
                                      description: List of environment variables to
                                        set in the container. Cannot be updated.
                                      items:
                                        description: EnvVar represents an environment
                                          variable present in a Container.
                                        properties:
                                          name:
                                            description: Name of the environment variable.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          value:
                                            description: 'Variable references $(VAR_NAME)
                                              are expanded using the previously defined
                                              environment variables in the container
                                              and any service environment variables.
                                              If a variable cannot be resolved, the
                                              reference in the input string will be
                                              unchanged. Double $$ are reduced to
                                              a single $, which allows for escaping
                                              the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)"
                                              will produce the string literal "$(VAR_NAME)".
                                              Escaped references will never be expanded,
                                              regardless of whether the variable exists
                                              or not. Defaults to "".'
                                            type: string
                                          valueFrom:
                                            description: Source for the environment
                                              variable's value. Cannot be used if
                                              value is not empty.
                                            properties:
                                              configMapKeyRef:
                                                description: Selects a key of a ConfigMap.
                                                properties:
                                                  key:
                                                    description: The key to select.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      ConfigMap or its key must be
                                                      defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              fieldRef:
                                                description: 'Selects a field of the
                                                  pod: supports metadata.name, metadata.namespace,
                                                  `metadata.labels[''<KEY>'']`, `metadata.annotations[''<KEY>'']`,
                                                  spec.nodeName, spec.serviceAccountName,
                                                  status.hostIP, status.podIP, status.podIPs.'
                                                properties:
                                                  apiVersion:
                                                    description: Version of the schema
                                                      the FieldPath is written in
                                                      terms of, defaults to "v1".
                                                    type: string
                                                  fieldPath:
                                                    description: Path of the field
                                                      to select in the specified API
                                                      version.
                                                    type: string
                                                required:
                                                - fieldPath
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              resourceFieldRef:
                                                description: 'Selects a resource of
                                                  the container: only resources limits
                                                  and requests (limits.cpu, limits.memory,
                                                  limits.ephemeral-storage, requests.cpu,
                                                  requests.memory and requests.ephemeral-storage)
                                                  are currently supported.'
                                                properties:
                                                  containerName:
                                                    description: 'Container name:
                                                      required for volumes, optional
                                                      for env vars'
                                                    type: string
                                                  divisor:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    description: Specifies the output
                                                      format of the exposed resources,
                                                      defaults to "1"
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  resource:
                                                    description: 'Required: resource
                                                      to select'
                                                    type: string
                                                required:
                                                - resource
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              secretKeyRef:
                                                description: Selects a key of a secret
                                                  in the pod's namespace
                                                properties:
                                                  key:
                                                    description: The key of the secret
                                                      to select from.  Must be a valid
                                                      secret key.
                                                    type: string
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: Specify whether the
                                                      Secret or its key must be defined
                                                    type: boolean
                                                required:
                                                - key
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            type: object
                                        required:
                                        - name
                                        type: object
                                      type: array
                                    envFrom:
                                      description: List of sources to populate environment
                                        variables in the container. The keys defined
                                        within a source must be a C_IDENTIFIER. All
                                        invalid keys will be reported as an event
                                        when the container is starting. When a key
                                        exists in multiple sources, the value associated
                                        with the last source will take precedence.
                                        Values defined by an Env with a duplicate
                                        key will take precedence. Cannot be updated.
                                      items:
                                        description: EnvFromSource represents the
                                          source of a set of ConfigMaps
                                        properties:
                                          configMapRef:
                                            description: The ConfigMap to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          prefix:
                                            description: An optional identifier to
                                              prepend to each key in the ConfigMap.
                                              Must be a C_IDENTIFIER.
                                            type: string
                                          secretRef:
                                            description: The Secret to select from
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  must be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                      type: array
                                    image:
                                      description: 'Container image name. More info:
                                        https://kubernetes.io/docs/concepts/containers/images
                                        This field is optional to allow higher level
                                        config management to default or override container
                                        images in workload controllers like Deployments
                                        and StatefulSets.'
                                      type: string
                                    imagePullPolicy:
                                      description: 'Image pull policy. One of Always,
                                        Never, IfNotPresent. Defaults to Always if
                                        :latest tag is specified, or IfNotPresent
                                        otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images'
                                      type: string
                                    lifecycle:
                                      description: Actions that the management system
                                        should take in response to container lifecycle
                                        events. Cannot be updated.
                                      properties:
                                        postStart:
                                          description: 'PostStart is called immediately
                                            after a container is created. If the handler
                                            fails, the container is terminated and
                                            restarted according to its restart policy.
                                            Other management of the container blocks
                                            until the hook completes. More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                        preStop:
                                          description: 'PreStop is called immediately
                                            before a container is terminated due to
                                            an API request or management event such
                                            as liveness/startup probe failure, preemption,
                                            resource contention, etc. The handler
                                            is not called if the container crashes
                                            or exits. The Pod''s termination grace
                                            period countdown begins before the PreStop
                                            hook is executed. Regardless of the outcome
                                            of the handler, the container will eventually
                                            terminate within the Pod''s termination
                                            grace period (unless delayed by finalizers).
                                            Other management of the container blocks
                                            until the hook completes or until the
                                            termination grace period is reached. More
                                            info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks'
                                          properties:
                                            exec:
                                              description: Exec specifies the action
                                                to take.
                                              properties:
                                                command:
                                                  description: Command is the command
                                                    line to execute inside the container,
                                                    the working directory for the
                                                    command  is root ('/') in the
                                                    container's filesystem. The command
                                                    is simply exec'd, it is not run
                                                    inside a shell, so traditional
                                                    shell instructions ('|', etc)
                                                    won't work. To use a shell, you
                                                    need to explicitly call out to
                                                    that shell. Exit status of 0 is
                                                    treated as live/healthy and non-zero
                                                    is unhealthy.
                                                  items:
                                                    type: string
                                                  type: array
                                              type: object
                                            httpGet:
                                              description: HTTPGet specifies the http
                                                request to perform.
                                              properties:
                                                host:
                                                  description: Host name to connect
                                                    to, defaults to the pod IP. You
                                                    probably want to set "Host" in
                                                    httpHeaders instead.
                                                  type: string
                                                httpHeaders:
                                                  description: Custom headers to set
                                                    in the request. HTTP allows repeated
                                                    headers.
                                                  items:
                                                    description: HTTPHeader describes
                                                      a custom header to be used in
                                                      HTTP probes
                                                    properties:
                                                      name:
                                                        description: The header field
                                                          name
                                                        type: string
                                                      value:
                                                        description: The header field
                                                          value
                                                        type: string
                                                    required:
                                                    - name
                                                    - value
                                                    type: object
                                                  type: array
                                                path:
                                                  description: Path to access on the
                                                    HTTP server.
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Name or number of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                                scheme:
                                                  description: Scheme to use for connecting
                                                    to the host. Defaults to HTTP.
                                                  type: string
                                              required:
                                              - port
                                              type: object
                                            tcpSocket:
                                              description: Deprecated. TCPSocket is
                                                NOT supported as a LifecycleHandler
                                                and kept for the backward compatibility.
                                                There are no validation of this field
                                                and lifecycle hooks will fail in runtime
                                                when tcp handler is specified.
                                              properties:
                                                host:
                                                  description: 'Optional: Host name
                                                    to connect to, defaults to the
                                                    pod IP.'
                                                  type: string
                                                port:
                                                  anyOf:
                                                  - type: integer
                                                  - type: string
                                                  description: Number or name of the
                                                    port to access on the container.
                                                    Number must be in the range 1
                                                    to 65535. Name must be an IANA_SVC_NAME.
                                                  x-kubernetes-int-or-string: true
                                              required:
                                              - port
                                              type: object
                                          type: object
                                      type: object
                                    livenessProbe:
                                      description: 'Periodic probe of container liveness.
                                        Container will be restarted if the probe fails.
                                        Cannot be updated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    name:
                                      description: Name of the container specified
                                        as a DNS_LABEL. Each container in a pod must
                                        have a unique name (DNS_LABEL). Cannot be
                                        updated.
                                      type: string
                                    ports:
                                      description: List of ports to expose from the
                                        container. Not specifying a port here DOES
                                        NOT prevent that port from being exposed.
                                        Any port which is listening on the default
                                        "0.0.0.0" address inside a container will
                                        be accessible from the network. Modifying
                                        this array with strategic merge patch may
                                        corrupt the data. For more information See
                                        https://github.com/kubernetes/kubernetes/issues/108255.
                                        Cannot be updated.
                                      items:
                                        description: ContainerPort represents a network
                                          port in a single container.
                                        properties:
                                          containerPort:
                                            description: Number of port to expose
                                              on the pod's IP address. This must be
                                              a valid port number, 0 < x < 65536.
                                            format: int32
                                            type: integer
                                          hostIP:
                                            description: What host IP to bind the
                                              external port to.
                                            type: string
                                          hostPort:
                                            description: Number of port to expose
                                              on the host. If specified, this must
                                              be a valid port number, 0 < x < 65536.
                                              If HostNetwork is specified, this must
                                              match ContainerPort. Most containers
                                              do not need this.
                                            format: int32
                                            type: integer
                                          name:
                                            description: If specified, this must be
                                              an IANA_SVC_NAME and unique within the
                                              pod. Each named port in a pod must have
                                              a unique name. Name for the port that
                                              can be referred to by services.
                                            type: string
                                          protocol:
                                            default: TCP
                                            description: Protocol for port. Must be
                                              UDP, TCP, or SCTP. Defaults to "TCP".
                                            type: string
                                        required:
                                        - containerPort
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - containerPort
                                      - protocol
                                      x-kubernetes-list-type: map
                                    readinessProbe:
                                      description: 'Periodic probe of container service
                                        readiness. Container will be removed from
                                        service endpoints if the probe fails. Cannot
                                        be updated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    resources:
                                      description: 'Compute Resources required by
                                        this container. Cannot be updated. More info:
                                        https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                      properties:
                                        limits:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Limits describes the maximum
                                            amount of compute resources allowed. More
                                            info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                        requests:
                                          additionalProperties:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          description: 'Requests describes the minimum
                                            amount of compute resources required.
                                            If Requests is omitted for a container,
                                            it defaults to Limits if that is explicitly
                                            specified, otherwise to an implementation-defined
                                            value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                          type: object
                                      type: object
                                    securityContext:
                                      description: 'SecurityContext defines the security
                                        options the container should be run with.
                                        If set, the fields of SecurityContext override
                                        the equivalent fields of PodSecurityContext.
                                        More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/'
                                      properties:
                                        allowPrivilegeEscalation:
                                          description: 'AllowPrivilegeEscalation controls
                                            whether a process can gain more privileges
                                            than its parent process. This bool directly
                                            controls if the no_new_privs flag will
                                            be set on the container process. AllowPrivilegeEscalation
                                            is true always when the container is:
                                            1) run as Privileged 2) has CAP_SYS_ADMIN
                                            Note that this field cannot be set when
                                            spec.os.name is windows.'
                                          type: boolean
                                        capabilities:
                                          description: The capabilities to add/drop
                                            when running containers. Defaults to the
                                            default set of capabilities granted by
                                            the container runtime. Note that this
                                            field cannot be set when spec.os.name
                                            is windows.
                                          properties:
                                            add:
                                              description: Added capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                            drop:
                                              description: Removed capabilities
                                              items:
                                                description: Capability represent
                                                  POSIX capabilities type
                                                type: string
                                              type: array
                                          type: object
                                        privileged:
                                          description: Run container in privileged
                                            mode. Processes in privileged containers
                                            are essentially equivalent to root on
                                            the host. Defaults to false. Note that
                                            this field cannot be set when spec.os.name
                                            is windows.
                                          type: boolean
                                        procMount:
                                          description: procMount denotes the type
                                            of proc mount to use for the containers.
                                            The default is DefaultProcMount which
                                            uses the container runtime defaults for
                                            readonly paths and masked paths. This
                                            requires the ProcMountType feature flag
                                            to be enabled. Note that this field cannot
                                            be set when spec.os.name is windows.
                                          type: string
                                        readOnlyRootFilesystem:
                                          description: Whether this container has
                                            a read-only root filesystem. Default is
                                            false. Note that this field cannot be
                                            set when spec.os.name is windows.
                                          type: boolean
                                        runAsGroup:
                                          description: The GID to run the entrypoint
                                            of the container process. Uses runtime
                                            default if unset. May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        runAsNonRoot:
                                          description: Indicates that the container
                                            must run as a non-root user. If true,
                                            the Kubelet will validate the image at
                                            runtime to ensure that it does not run
                                            as UID 0 (root) and fail to start the
                                            container if it does. If unset or false,
                                            no such validation will be performed.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence.
                                          type: boolean
                                        runAsUser:
                                          description: The UID to run the entrypoint
                                            of the container process. Defaults to
                                            user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          format: int64
                                          type: integer
                                        seLinuxOptions:
                                          description: The SELinux context to be applied
                                            to the container. If unspecified, the
                                            container runtime will allocate a random
                                            SELinux context for each container.  May
                                            also be set in PodSecurityContext.  If
                                            set in both SecurityContext and PodSecurityContext,
                                            the value specified in SecurityContext
                                            takes precedence. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            level:
                                              description: Level is SELinux level
                                                label that applies to the container.
                                              type: string
                                            role:
                                              description: Role is a SELinux role
                                                label that applies to the container.
                                              type: string
                                            type:
                                              description: Type is a SELinux type
                                                label that applies to the container.
                                              type: string
                                            user:
                                              description: User is a SELinux user
                                                label that applies to the container.
                                              type: string
                                          type: object
                                        seccompProfile:
                                          description: The seccomp options to use
                                            by this container. If seccomp options
                                            are provided at both the pod & container
                                            level, the container options override
                                            the pod options. Note that this field
                                            cannot be set when spec.os.name is windows.
                                          properties:
                                            localhostProfile:
                                              description: localhostProfile indicates
                                                a profile defined in a file on the
                                                node should be used. The profile must
                                                be preconfigured on the node to work.
                                                Must be a descending path, relative
                                                to the kubelet's configured seccomp
                                                profile location. Must only be set
                                                if type is "Localhost".
                                              type: string
                                            type:
                                              description: "type indicates which kind
                                                of seccomp profile will be applied.
                                                Valid options are: \n Localhost -
                                                a profile defined in a file on the
                                                node should be used. RuntimeDefault
                                                - the container runtime default profile
                                                should be used. Unconfined - no profile
                                                should be applied."
                                              type: string
                                          required:
                                          - type
                                          type: object
                                        windowsOptions:
                                          description: The Windows specific settings
                                            applied to all containers. If unspecified,
                                            the options from the PodSecurityContext
                                            will be used. If set in both SecurityContext
                                            and PodSecurityContext, the value specified
                                            in SecurityContext takes precedence. Note
                                            that this field cannot be set when spec.os.name
                                            is linux.
                                          properties:
                                            gmsaCredentialSpec:
                                              description: GMSACredentialSpec is where
                                                the GMSA admission webhook (https://github.com/kubernetes-sigs/windows-gmsa)
                                                inlines the contents of the GMSA credential
                                                spec named by the GMSACredentialSpecName
                                                field.
                                              type: string
                                            gmsaCredentialSpecName:
                                              description: GMSACredentialSpecName
                                                is the name of the GMSA credential
                                                spec to use.
                                              type: string
                                            hostProcess:
                                              description: HostProcess determines
                                                if a container should be run as a
                                                'Host Process' container. This field
                                                is alpha-level and will only be honored
                                                by components that enable the WindowsHostProcessContainers
                                                feature flag. Setting this field without
                                                the feature flag will result in errors
                                                when validating the Pod. All of a
                                                Pod's containers must have the same
                                                effective HostProcess value (it is
                                                not allowed to have a mix of HostProcess
                                                containers and non-HostProcess containers).  In
                                                addition, if HostProcess is true then
                                                HostNetwork must also be set to true.
                                              type: boolean
                                            runAsUserName:
                                              description: The UserName in Windows
                                                to run the entrypoint of the container
                                                process. Defaults to the user specified
                                                in image metadata if unspecified.
                                                May also be set in PodSecurityContext.
                                                If set in both SecurityContext and
                                                PodSecurityContext, the value specified
                                                in SecurityContext takes precedence.
                                              type: string
                                          type: object
                                      type: object
                                    startupProbe:
                                      description: 'StartupProbe indicates that the
                                        Pod has successfully initialized. If specified,
                                        no other probes are executed until this completes
                                        successfully. If this probe fails, the Pod
                                        will be restarted, just as if the livenessProbe
                                        failed. This can be used to provide different
                                        probe parameters at the beginning of a Pod''s
                                        lifecycle, when it might take a long time
                                        to load data or warm a cache, than during
                                        steady-state operation. This cannot be updated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: Command is the command
                                                line to execute inside the container,
                                                the working directory for the command  is
                                                root ('/') in the container's filesystem.
                                                The command is simply exec'd, it is
                                                not run inside a shell, so traditional
                                                shell instructions ('|', etc) won't
                                                work. To use a shell, you need to
                                                explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy
                                                and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        failureThreshold:
                                          description: Minimum consecutive failures
                                            for the probe to be considered failed
                                            after having succeeded. Defaults to 3.
                                            Minimum value is 1.
                                          format: int32
                                          type: integer
                                        grpc:
                                          description: GRPC specifies an action involving
                                            a GRPC port. This is a beta field and
                                            requires enabling GRPCContainerProbe feature
                                            gate.
                                          properties:
                                            port:
                                              description: Port number of the gRPC
                                                service. Number must be in the range
                                                1 to 65535.
                                              format: int32
                                              type: integer
                                            service:
                                              description: "Service is the name of
                                                the service to place in the gRPC HealthCheckRequest
                                                (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).
                                                \n If this is not specified, the default
                                                behavior is defined by gRPC."
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: Host name to connect to,
                                                defaults to the pod IP. You probably
                                                want to set "Host" in httpHeaders
                                                instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: The header field
                                                      name
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Name or number of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: Scheme to use for connecting
                                                to the host. Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        initialDelaySeconds:
                                          description: 'Number of seconds after the
                                            container has started before liveness
                                            probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                        periodSeconds:
                                          description: How often (in seconds) to perform
                                            the probe. Default to 10 seconds. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        successThreshold:
                                          description: Minimum consecutive successes
                                            for the probe to be considered successful
                                            after having failed. Defaults to 1. Must
                                            be 1 for liveness and startup. Minimum
                                            value is 1.
                                          format: int32
                                          type: integer
                                        tcpSocket:
                                          description: TCPSocket specifies an action
                                            involving a TCP port.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Number or name of the port
                                                to access on the container. Number
                                                must be in the range 1 to 65535. Name
                                                must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                        terminationGracePeriodSeconds:
                                          description: Optional duration in seconds
                                            the pod needs to terminate gracefully
                                            upon probe failure. The grace period is
                                            the duration in seconds after the processes
                                            running in the pod are sent a termination
                                            signal and the time when the processes
                                            are forcibly halted with a kill signal.
                                            Set this value longer than the expected
                                            cleanup time for your process. If this
                                            value is nil, the pod's terminationGracePeriodSeconds
                                            will be used. Otherwise, this value overrides
                                            the value provided by the pod spec. Value
                                            must be non-negative integer. The value
                                            zero indicates stop immediately via the
                                            kill signal (no opportunity to shut down).
                                            This is a beta field and requires enabling
                                            ProbeTerminationGracePeriod feature gate.
                                            Minimum value is 1. spec.terminationGracePeriodSeconds
                                            is used if unset.
                                          format: int64
                                          type: integer
                                        timeoutSeconds:
                                          description: 'Number of seconds after which
                                            the probe times out. Defaults to 1 second.
                                            Minimum value is 1. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes'
                                          format: int32
                                          type: integer
                                      type: object
                                    stdin:
                                      description: Whether this container should allocate
                                        a buffer for stdin in the container runtime.
                                        If this is not set, reads from stdin in the
                                        container will always result in EOF. Default
                                        is false.
                                      type: boolean
                                    stdinOnce:
                                      description: Whether the container runtime should
                                        close the stdin channel after it has been
                                        opened by a single attach. When stdin is true
                                        the stdin stream will remain open across multiple
                                        attach sessions. If stdinOnce is set to true,
                                        stdin is opened on container start, is empty
                                        until the first client attaches to stdin,
                                        and then remains open and accepts data until
                                        the client disconnects, at which time stdin
                                        is closed and remains closed until the container
                                        is restarted. If this flag is false, a container
                                        processes that reads from stdin will never
                                        receive an EOF. Default is false
                                      type: boolean
                                    terminationMessagePath:
                                      description: 'Optional: Path at which the file
                                        to which the container''s termination message
                                        will be written is mounted into the container''s
                                        filesystem. Message written is intended to
                                        be brief final status, such as an assertion
                                        failure message. Will be truncated by the
                                        node if greater than 4096 bytes. The total
                                        message length across all containers will
                                        be limited to 12kb. Defaults to /dev/termination-log.
                                        Cannot be updated.'
                                      type: string
                                    terminationMessagePolicy:
                                      description: Indicate how the termination message
                                        should be populated. File will use the contents
                                        of terminationMessagePath to populate the
                                        container status message on both success and
                                        failure. FallbackToLogsOnError will use the
                                        last chunk of container log output if the
                                        termination message file is empty and the
                                        container exited with an error. The log output
                                        is limited to 2048 bytes or 80 lines, whichever
                                        is smaller. Defaults to File. Cannot be updated.
                                      type: string
                                    tty:
                                      description: Whether this container should allocate
                                        a TTY for itself, also requires 'stdin' to
                                        be true. Default is false.
                                      type: boolean
                                    volumeDevices:
                                      description: volumeDevices is the list of block
                                        devices to be used by the container.
                                      items:
                                        description: volumeDevice describes a mapping
                                          of a raw block device within a container.
                                        properties:
                                          devicePath:
                                            description: devicePath is the path inside
                                              of the container that the device will
                                              be mapped to.
                                            type: string
                                          name:
                                            description: name must match the name
                                              of a persistentVolumeClaim in the pod
                                            type: string
                                        required:
                                        - devicePath
                                        - name
                                        type: object
                                      type: array
                                    volumeMounts:
                                      description: Pod volumes to mount into the container's
                                        filesystem. Cannot be updated.
                                      items:
                                        description: VolumeMount describes a mounting
                                          of a Volume within a container.
                                        properties:
                                          mountPath:
                                            description: Path within the container
                                              at which the volume should be mounted.  Must
                                              not contain ':'.
                                            type: string
                                          mountPropagation:
                                            description: mountPropagation determines
                                              how mounts are propagated from the host
                                              to container and the other way around.
                                              When not set, MountPropagationNone is
                                              used. This field is beta in 1.10.
                                            type: string
                                          name:
                                            description: This must match the Name
                                              of a Volume.
                                            type: string
                                          readOnly:
                                            description: Mounted read-only if true,
                                              read-write otherwise (false or unspecified).
                                              Defaults to false.
                                            type: boolean
                                          subPath:
                                            description: Path within the volume from
                                              which the container's volume should
                                              be mounted. Defaults to "" (volume's
                                              root).
                                            type: string
                                          subPathExpr:
                                            description: Expanded path within the
                                              volume from which the container's volume
                                              should be mounted. Behaves similarly
                                              to SubPath but environment variable
                                              references $(VAR_NAME) are expanded
                                              using the container's environment. Defaults
                                              to "" (volume's root). SubPathExpr and
                                              SubPath are mutually exclusive.
                                            type: string
                                        required:
                                        - mountPath
                                        - name
                                        type: object
                                      type: array
                                    workingDir:
                                      description: Container's working directory.
                                        If not specified, the container runtime's
                                        default will be used, which might be configured
                                        in the container image. Cannot be updated.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                              nodeName:
                                description: NodeName is a request to schedule this
                                  pod onto a specific node. If it is non-empty, the
                                  scheduler simply schedules this pod onto that node,
                                  assuming that it fits resource requirements.
                                type: string
                              nodeSelector:
                                additionalProperties:
                                  type: string
                                description: 'NodeSelector is a selector which must
                                  be true for the pod to fit on a node. Selector which
                                  must match a node''s labels for the pod to be scheduled
                                  on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                type: object
                                x-kubernetes-map-type: atomic
                              os:
                                description: "Specifies the OS of the containers in
                                  the pod. Some pod and container fields are restricted
                                  if this is set. \n If the OS field is set to linux,
                                  the following fields must be unset: -securityContext.windowsOptions
                                  \n If the OS field is set to windows, following
                                  fields must be unset: - spec.hostPID - spec.hostIPC
                                  - spec.hostUsers - spec.securityContext.seLinuxOptions
                                  - spec.securityContext.seccompProfile - spec.securityContext.fsGroup
                                  - spec.securityContext.fsGroupChangePolicy - spec.securityContext.sysctls
                                  - spec.shareProcessNamespace - spec.securityContext.runAsUser
                                  - spec.securityContext.runAsGroup - spec.securityContext.supplementalGroups
                                  - spec.containers[*].securityContext.seLinuxOptions
                                  - spec.containers[*].securityContext.seccompProfile
                                  - spec.containers[*].securityContext.capabilities
                                  - spec.containers[*].securityContext.readOnlyRootFilesystem
                                  - spec.containers[*].securityContext.privileged
                                  - spec.containers[*].securityContext.allowPrivilegeEscalation
                                  - spec.containers[*].securityContext.procMount -
                                  spec.containers[*].securityContext.runAsUser - spec.containers[*].securityContext.runAsGroup"
                                properties:
                                  name:
                                    description: 'Name is the name of the operating
                                      system. The currently supported values are linux
                                      and windows. Additional value may be defined
                                      in future and can be one of: https://github.com/opencontainers/runtime-spec/blob/master/config.md#platform-specific-configuration
                                      Clients should expect to handle additional values
                                      and treat unrecognized values in this field
                                      as os: null'
                                    type: string
                                required:
                                - name
                                type: object
                              overhead:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: 'Overhead represents the resource overhead
                                  associated with running a pod for a given RuntimeClass.
                                  This field will be autopopulated at admission time
                                  by the RuntimeClass admission controller. If the
                                  RuntimeClass admission controller is enabled, overhead
                                  must not be set in Pod create requests. The RuntimeClass
                                  admission controller will reject Pod create requests
                                  which have the overhead already set. If RuntimeClass
                                  is configured and selected in the PodSpec, Overhead
                                  will be set to the value defined in the corresponding
                                  RuntimeClass, otherwise it will remain unset and
                                  treated as zero. More info: https://git.k8s.io/enhancements/keps/sig-node/688-pod-overhead/README.md'
                                type: object
                              preemptionPolicy:
                                description: PreemptionPolicy is the Policy for preempting
                                  pods with lower priority. One of Never, PreemptLowerPriority.
                                  Defaults to PreemptLowerPriority if unset.
                                type: string
                              priority:
                                description: The priority value. Various system components
                                  use this field to find the priority of the pod.
                                  When Priority Admission Controller is enabled, it
                                  prevents users from setting this field. The admission
                                  controller populates this field from PriorityClassName.
                                  The higher the value, the higher the priority.
                                format: int32
                                type: integer
                              priorityClassName:
                                description: If specified, indicates the pod's priority.
                                  "system-node-critical" and "system-cluster-critical"
                                  are two special keywords which indicate the highest
                                  priorities with the former being the highest priority.
                                  Any other name must be defined by creating a PriorityClass
                                  object with that name. If not specified, the pod
                                  priority will be default or zero if there is no
                                  default.
                                type: string
                              readinessGates:
                                description: 'If specified, all readiness gates will
                                  be evaluated for pod readiness. A pod is ready when
                                  all its containers are ready AND all conditions
                                  specified in the readiness gates have status equal
                                  to "True" More info: https://git.k8s.io/enhancements/keps/sig-network/580-pod-readiness-gates'
                                items:
                                  description: PodReadinessGate contains the reference
                                    to a pod condition
                                  properties:
                                    conditionType:
                                      description: ConditionType refers to a condition
                                        in the pod's condition list with matching
                                        type.
                                      type: string
                                  required:
                                  - conditionType
                                  type: object
                                type: array
                              restartPolicy:
                                description: RestartPolicy describes how the container
                                  should be restarted. Only one of the following restart
                                  policies may be specified. If none of the following
                                  policies is specified, the default one is RestartPolicyAlways.
                                type: string
                              runtimeClassName:
                                description: 'RuntimeClassName refers to a RuntimeClass
                                  object in the node.k8s.io group, which should be
                                  used to run this pod.  If no RuntimeClass resource
                                  matches the named class, the pod will not be run.
                                  If unset or empty, the "legacy" RuntimeClass will
                                  be used, which is an implicit class with an empty
                                  definition that uses the default runtime handler.
                                  More info: https://git.k8s.io/enhancements/keps/sig-node/585-runtime-class'
                                type: string
                              schedulerName:
                                description: If specified, the pod will be dispatched
                                  by specified scheduler. If not specified, the pod
                                  will be dispatched by default scheduler.
                                type: string
                              securityContext:
                                description: 'SecurityContext holds pod-level security
                                  attributes and common container settings. Optional:
                                  Defaults to empty.  See type description for default
                                  values of each field.'
                                properties:
                                  fsGroup:
                                    description: "A special supplemental group that
                                      applies to all containers in a pod. Some volume
                                      types allow the Kubelet to change the ownership
                                      of that volume to be owned by the pod: \n 1.
                                      The owning GID will be the FSGroup 2. The setgid
                                      bit is set (new files created in the volume
                                      will be owned by FSGroup) 3. The permission
                                      bits are OR'd with rw-rw---- \n If unset, the
                                      Kubelet will not modify the ownership and permissions
                                      of any volume. Note that this field cannot be
                                      set when spec.os.name is windows."
                                    format: int64
                                    type: integer
                                  fsGroupChangePolicy:
                                    description: 'fsGroupChangePolicy defines behavior
                                      of changing ownership and permission of the
                                      volume before being exposed inside Pod. This
                                      field will only apply to volume types which
                                      support fsGroup based ownership(and permissions).
                                      It will have no effect on ephemeral volume types
                                      such as: secret, configmaps and emptydir. Valid
                                      values are "OnRootMismatch" and "Always". If
                                      not specified, "Always" is used. Note that this
                                      field cannot be set when spec.os.name is windows.'
                                    type: string
                                  runAsGroup:
                                    description: The GID to run the entrypoint of
                                      the container process. Uses runtime default
                                      if unset. May also be set in SecurityContext.  If
                                      set in both SecurityContext and PodSecurityContext,
                                      the value specified in SecurityContext takes
                                      precedence for that container. Note that this
                                      field cannot be set when spec.os.name is windows.
                                    format: int64
                                    type: integer
                                  runAsNonRoot:
                                    description: Indicates that the container must
                                      run as a non-root user. If true, the Kubelet
                                      will validate the image at runtime to ensure
                                      that it does not run as UID 0 (root) and fail
                                      to start the container if it does. If unset
                                      or false, no such validation will be performed.
                                      May also be set in SecurityContext.  If set
                                      in both SecurityContext and PodSecurityContext,
                                      the value specified in SecurityContext takes
                                      precedence.
                                    type: boolean
                                  runAsUser:
                                    description: The UID to run the entrypoint of
                                      the container process. Defaults to user specified
                                      in image metadata if unspecified. May also be
                                      set in SecurityContext.  If set in both SecurityContext
                                      and PodSecurityContext, the value specified
                                      in SecurityContext takes precedence for that
                                      container. Note that this field cannot be set
                                      when spec.os.name is windows.
                                    format: int64
                                    type: integer
                                  seLinuxOptions:
                                    description: The SELinux context to be applied
                                      to all containers. If unspecified, the container
                                      runtime will allocate a random SELinux context
                                      for each container.  May also be set in SecurityContext.  If
                                      set in both SecurityContext and PodSecurityContext,
                                      the value specified in SecurityContext takes
                                      precedence for that container. Note that this
                                      field cannot be set when spec.os.name is windows.
                                    properties:
                                      level:
                                        description: Level is SELinux level label
                                          that applies to the container.
                                        type: string
                                      role:
                                        description: Role is a SELinux role label
                                          that applies to the container.
                                        type: string
                                      type:
                                        description: Type is a SELinux type label
                                          that applies to the container.
                                        type: string
                                      user:
                                        description: User is a SELinux user label
                                          that applies to the container.
                                        type: string
                                    type: object
                                  seccompProfile:
                                    description: The seccomp options to use by the
                                      containers in this pod. Note that this field
                                      cannot be set when spec.os.name is windows.
                                    properties:
                                      localhostProfile:
                                        description: localhostProfile indicates a
                                          profile defined in a file on the node should
                                          be used. The profile must be preconfigured
                                          on the node to work. Must be a descending
                                          path, relative to the kubelet's configured
                                          seccomp profile location. Must only be set
                                          if type is "Localhost".
                                        type: string
                                      type:
                                        description: "type indicates which kind of
                                          seccomp profile will be applied. Valid options
                                          are: \n Localhost - a profile defined in
                                          a file on the node should be used. RuntimeDefault
                                          - the container runtime default profile
                                          should be used. Unconfined - no profile
                                          should be applied."
                                        type: string
                                    required:
                                    - type
                                    type: object
                                  supplementalGroups:
                                    description: A list of groups applied to the first
                                      process run in each container, in addition to
                                      the container's primary GID.  If unspecified,
                                      no groups will be added to any container. Note
                                      that this field cannot be set when spec.os.name
                                      is windows.
                                    items:
                                      format: int64
                                      type: integer
                                    type: array
                                  sysctls:
                                    description: Sysctls hold a list of namespaced
                                      sysctls used for the pod. Pods with unsupported
                                      sysctls (by the container runtime) might fail
                                      to launch. Note that this field cannot be set
                                      when spec.os.name is windows.
                                    items:
                                      description: Sysctl defines a kernel parameter
                                        to be set
                                      properties:
                                        name:
                                          description: Name of a property to set
                                          type: string
                                        value:
                                          description: Value of a property to set
                                          type: string
                                      required:
                                      - name
                                      - value
                                      type: object
                                    type: array
                                  windowsOptions:
                                    description: The Windows specific settings applied
                                      to all containers. If unspecified, the options
                                      within a container's SecurityContext will be
                                      used. If set in both SecurityContext and PodSecurityContext,
                                      the value specified in SecurityContext takes
                                      precedence. Note that this field cannot be set
                                      when spec.os.name is linux.
                                    properties:
                                      gmsaCredentialSpec:
                                        description: GMSACredentialSpec is where the
                                          GMSA admission webhook (https://github.com/kubernetes-sigs/windows-gmsa)
                                          inlines the contents of the GMSA credential
                                          spec named by the GMSACredentialSpecName
                                          field.
                                        type: string
                                      gmsaCredentialSpecName:
                                        description: GMSACredentialSpecName is the
                                          name of the GMSA credential spec to use.
                                        type: string
                                      hostProcess:
                                        description: HostProcess determines if a container
                                          should be run as a 'Host Process' container.
                                          This field is alpha-level and will only
                                          be honored by components that enable the
                                          WindowsHostProcessContainers feature flag.
                                          Setting this field without the feature flag
                                          will result in errors when validating the
                                          Pod. All of a Pod's containers must have
                                          the same effective HostProcess value (it
                                          is not allowed to have a mix of HostProcess
                                          containers and non-HostProcess containers).  In
                                          addition, if HostProcess is true then HostNetwork
                                          must also be set to true.
                                        type: boolean
                                      runAsUserName:
                                        description: The UserName in Windows to run
                                          the entrypoint of the container process.
                                          Defaults to the user specified in image
                                          metadata if unspecified. May also be set
                                          in PodSecurityContext. If set in both SecurityContext
                                          and PodSecurityContext, the value specified
                                          in SecurityContext takes precedence.
                                        type: string
                                    type: object
                                type: object
                              serviceAccount:
                                description: 'DeprecatedServiceAccount is a depreciated
                                  alias for ServiceAccountName. Deprecated: Use serviceAccountName
                                  instead.'
                                type: string
                              serviceAccountName:
                                description: 'ServiceAccountName is the name of the
                                  ServiceAccount to use to run this pod. More info:
                                  https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/'
                                type: string
                              setHostnameAsFQDN:
                                description: If true the pod's hostname will be configured
                                  as the pod's FQDN, rather than the leaf name (the
                                  default). In Linux containers, this means setting
                                  the FQDN in the hostname field of the kernel (the
                                  nodename field of struct utsname). In Windows containers,
                                  this means setting the registry value of hostname
                                  for the registry key HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters
                                  to FQDN. If a pod does not have FQDN, this has no
                                  effect. Default to false.
                                type: boolean
                              shareProcessNamespace:
                                description: 'Share a single process namespace between
                                  all of the containers in a pod. When this is set
                                  containers will be able to view and signal processes
                                  from other containers in the same pod, and the first
                                  process in each container will not be assigned PID
                                  1. HostPID and ShareProcessNamespace cannot both
                                  be set. Optional: Default to false.'
                                type: boolean
                              subdomain:
                                description: If specified, the fully qualified Pod
                                  hostname will be "<hostname>.<subdomain>.<pod namespace>.svc.<cluster
                                  domain>". If not specified, the pod will not have
                                  a domainname at all.
                                type: string
                              terminationGracePeriodSeconds:
                                format: int64
                                type: integer
                              tolerations:
                                description: If specified, the pod's tolerations.
                                items:
                                  description: The pod this Toleration is attached
                                    to tolerates any taint that matches the triple
                                    <key,value,effect> using the matching operator
                                    <operator>.
                                  properties:
                                    effect:
                                      description: Effect indicates the taint effect
                                        to match. Empty means match all taint effects.
                                        When specified, allowed values are NoSchedule,
                                        PreferNoSchedule and NoExecute.
                                      type: string
                                    key:
                                      description: Key is the taint key that the toleration
                                        applies to. Empty means match all taint keys.
                                        If the key is empty, operator must be Exists;
                                        this combination means to match all values
                                        and all keys.
                                      type: string
                                    operator:
                                      description: Operator represents a key's relationship
                                        to the value. Valid operators are Exists and
                                        Equal. Defaults to Equal. Exists is equivalent
                                        to wildcard for value, so that a pod can tolerate
                                        all taints of a particular category.
                                      type: string
                                    tolerationSeconds:
                                      description: TolerationSeconds represents the
                                        period of time the toleration (which must
                                        be of effect NoExecute, otherwise this field
                                        is ignored) tolerates the taint. By default,
                                        it is not set, which means tolerate the taint
                                        forever (do not evict). Zero and negative
                                        values will be treated as 0 (evict immediately)
                                        by the system.
                                      format: int64
                                      type: integer
                                    value:
                                      description: Value is the taint value the toleration
                                        matches to. If the operator is Exists, the
                                        value should be empty, otherwise just a regular
                                        string.
                                      type: string
                                  type: object
                                type: array
                              topologySpreadConstraints:
                                description: TopologySpreadConstraints describes how
                                  a group of pods ought to spread across topology
                                  domains. Scheduler will schedule pods in a way which
                                  abides by the constraints. All topologySpreadConstraints
                                  are ANDed.
                                items:
                                  description: TopologySpreadConstraint specifies
                                    how to spread matching pods among the given topology.
                                  properties:
                                    labelSelector:
                                      description: LabelSelector is used to find matching
                                        pods. Pods that match this label selector
                                        are counted to determine the number of pods
                                        in their corresponding topology domain.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: A label selector requirement
                                              is a selector that contains values,
                                              a key, and an operator that relates
                                              the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: operator represents a
                                                  key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists
                                                  and DoesNotExist.
                                                type: string
                                              values:
                                                description: values is an array of
                                                  string values. If the operator is
                                                  In or NotIn, the values array must
                                                  be non-empty. If the operator is
                                                  Exists or DoesNotExist, the values
                                                  array must be empty. This array
                                                  is replaced during a strategic merge
                                                  patch.
                                                items:
                                                  type: string
                                                type: array
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: matchLabels is a map of {key,value}
                                            pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions,
                                            whose key field is "key", the operator
                                            is "In", and the values array contains
                                            only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    matchLabelKeys:
                                      description: MatchLabelKeys is a set of pod
                                        label keys to select the pods over which spreading
                                        will be calculated. The keys are used to lookup
                                        values from the incoming pod labels, those
                                        key-value labels are ANDed with labelSelector
                                        to select the group of existing pods over
                                        which spreading will be calculated for the
                                        incoming pod. Keys that don't exist in the
                                        incoming pod labels will be ignored. A null
                                        or empty list means only match against labelSelector.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    maxSkew:
                                      description: 'MaxSkew describes the degree to
                                        which pods may be unevenly distributed. When
                                        `whenUnsatisfiable=DoNotSchedule`, it is the
                                        maximum permitted difference between the number
                                        of matching pods in the target topology and
                                        the global minimum. The global minimum is
                                        the minimum number of matching pods in an
                                        eligible domain or zero if the number of eligible
                                        domains is less than MinDomains. For example,
                                        in a 3-zone cluster, MaxSkew is set to 1,
                                        and pods with the same labelSelector spread
                                        as 2/2/1: In this case, the global minimum
                                        is 1. | zone1 | zone2 | zone3 | |  P P  |  P
                                        P  |   P   | - if MaxSkew is 1, incoming pod
                                        can only be scheduled to zone3 to become 2/2/2;
                                        scheduling it onto zone1(zone2) would make
                                        the ActualSkew(3-1) on zone1(zone2) violate
                                        MaxSkew(1). - if MaxSkew is 2, incoming pod
                                        can be scheduled onto any zone. When `whenUnsatisfiable=ScheduleAnyway`,
                                        it is used to give higher precedence to topologies
                                        that satisfy it. It''s a required field. Default
                                        value is 1 and 0 is not allowed.'
                                      format: int32
                                      type: integer
                                    minDomains:
                                      description: "MinDomains indicates a minimum
                                        number of eligible domains. When the number
                                        of eligible domains with matching topology
                                        keys is less than minDomains, Pod Topology
                                        Spread treats \"global minimum\" as 0, and
                                        then the calculation of Skew is performed.
                                        And when the number of eligible domains with
                                        matching topology keys equals or greater than
                                        minDomains, this value has no effect on scheduling.
                                        As a result, when the number of eligible domains
                                        is less than minDomains, scheduler won't schedule
                                        more than maxSkew Pods to those domains. If
                                        value is nil, the constraint behaves as if
                                        MinDomains is equal to 1. Valid values are
                                        integers greater than 0. When value is not
                                        nil, WhenUnsatisfiable must be DoNotSchedule.
                                        \n For example, in a 3-zone cluster, MaxSkew
                                        is set to 2, MinDomains is set to 5 and pods
                                        with the same labelSelector spread as 2/2/2:
                                        | zone1 | zone2 | zone3 | |  P P  |  P P  |
                                        \ P P  | The number of domains is less than
                                        5(MinDomains), so \"global minimum\" is treated
                                        as 0. In this situation, new pod with the
                                        same labelSelector cannot be scheduled, because
                                        computed skew will be 3(3 - 0) if new Pod
                                        is scheduled to any of the three zones, it
                                        will violate MaxSkew. \n This is a beta field
                                        and requires the MinDomainsInPodTopologySpread
                                        feature gate to be enabled (enabled by default)."
                                      format: int32
                                      type: integer
                                    nodeAffinityPolicy:
                                      description: "NodeAffinityPolicy indicates how
                                        we will treat Pod's nodeAffinity/nodeSelector
                                        when calculating pod topology spread skew.
                                        Options are: - Honor: only nodes matching
                                        nodeAffinity/nodeSelector are included in
                                        the calculations. - Ignore: nodeAffinity/nodeSelector
                                        are ignored. All nodes are included in the
                                        calculations. \n If this value is nil, the
                                        behavior is equivalent to the Honor policy.
                                        This is a alpha-level feature enabled by the
                                        NodeInclusionPolicyInPodTopologySpread feature
                                        flag."
                                      type: string
                                    nodeTaintsPolicy:
                                      description: "NodeTaintsPolicy indicates how
                                        we will treat node taints when calculating
                                        pod topology spread skew. Options are: - Honor:
                                        nodes without taints, along with tainted nodes
                                        for which the incoming pod has a toleration,
                                        are included. - Ignore: node taints are ignored.
                                        All nodes are included. \n If this value is
                                        nil, the behavior is equivalent to the Ignore
                                        policy. This is a alpha-level feature enabled
                                        by the NodeInclusionPolicyInPodTopologySpread
                                        feature flag."
                                      type: string
                                    topologyKey:
                                      description: TopologyKey is the key of node
                                        labels. Nodes that have a label with this
                                        key and identical values are considered to
                                        be in the same topology. We consider each
                                        <key, value> as a "bucket", and try to put
                                        balanced number of pods into each bucket.
                                        We define a domain as a particular instance
                                        of a topology. Also, we define an eligible
                                        domain as a domain whose nodes meet the requirements
                                        of nodeAffinityPolicy and nodeTaintsPolicy.
                                        e.g. If TopologyKey is "kubernetes.io/hostname",
                                        each Node is a domain of that topology. And,
                                        if TopologyKey is "topology.kubernetes.io/zone",
                                        each zone is a domain of that topology. It's
                                        a required field.
                                      type: string
                                    whenUnsatisfiable:
                                      description: 'WhenUnsatisfiable indicates how
                                        to deal with a pod if it doesn''t satisfy
                                        the spread constraint. - DoNotSchedule (default)
                                        tells the scheduler not to schedule it. -
                                        ScheduleAnyway tells the scheduler to schedule
                                        the pod in any location, but giving higher
                                        precedence to topologies that would help reduce
                                        the skew. A constraint is considered "Unsatisfiable"
                                        for an incoming pod if and only if every possible
                                        node assignment for that pod would violate
                                        "MaxSkew" on some topology. For example, in
                                        a 3-zone cluster, MaxSkew is set to 1, and
                                        pods with the same labelSelector spread as
                                        3/1/1: | zone1 | zone2 | zone3 | | P P P |   P   |   P   |
                                        If WhenUnsatisfiable is set to DoNotSchedule,
                                        incoming pod can only be scheduled to zone2(zone3)
                                        to become 3/2/1(3/1/2) as ActualSkew(2-1)
                                        on zone2(zone3) satisfies MaxSkew(1). In other
                                        words, the cluster can still be imbalanced,
                                        but scheduler won''t make it *more* imbalanced.
                                        It''s a required field.'
                                      type: string
                                  required:
                                  - maxSkew
                                  - topologyKey
                                  - whenUnsatisfiable
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - topologyKey
                                - whenUnsatisfiable
                                x-kubernetes-list-type: map
                              volumes:
                                items:
                                  description: Volume represents a named volume in
                                    a pod that may be accessed by any container in
                                    the pod.
                                  properties:
                                    awsElasticBlockStore:
                                      description: 'awsElasticBlockStore represents
                                        an AWS Disk resource that is attached to a
                                        kubelet''s host machine and then exposed to
                                        the pod. More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore'
                                      properties:
                                        fsType:
                                          description: 'fsType is the filesystem type
                                            of the volume that you want to mount.
                                            Tip: Ensure that the filesystem type is
                                            supported by the host operating system.
                                            Examples: "ext4", "xfs", "ntfs". Implicitly
                                            inferred to be "ext4" if unspecified.
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore
                                            TODO: how do we prevent errors in the
                                            filesystem from compromising the machine'
                                          type: string
                                        partition:
                                          description: 'partition is the partition
                                            in the volume that you want to mount.
                                            If omitted, the default is to mount by
                                            volume name. Examples: For volume /dev/sda1,
                                            you specify the partition as "1". Similarly,
                                            the volume partition for /dev/sda is "0"
                                            (or you can leave the property empty).'
                                          format: int32
                                          type: integer
                                        readOnly:
                                          description: 'readOnly value true will force
                                            the readOnly setting in VolumeMounts.
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore'
                                          type: boolean
                                        volumeID:
                                          description: 'volumeID is unique ID of the
                                            persistent disk resource in AWS (Amazon
                                            EBS volume). More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore'
                                          type: string
                                      required:
                                      - volumeID
                                      type: object
                                    azureDisk:
                                      description: azureDisk represents an Azure Data
                                        Disk mount on the host and bind mount to the
                                        pod.
                                      properties:
                                        cachingMode:
                                          description: 'cachingMode is the Host Caching
                                            mode: None, Read Only, Read Write.'
                                          type: string
                                        diskName:
                                          description: diskName is the Name of the
                                            data disk in the blob storage
                                          type: string
                                        diskURI:
                                          description: diskURI is the URI of data
                                            disk in the blob storage
                                          type: string
                                        fsType:
                                          description: fsType is Filesystem type to
                                            mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Implicitly inferred to
                                            be "ext4" if unspecified.
                                          type: string
                                        kind:
                                          description: 'kind expected values are Shared:
                                            multiple blob disks per storage account  Dedicated:
                                            single blob disk per storage account  Managed:
                                            azure managed data disk (only in managed
                                            availability set). defaults to shared'
                                          type: string
                                        readOnly:
                                          description: readOnly Defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                          type: boolean
                                      required:
                                      - diskName
                                      - diskURI
                                      type: object
                                    azureFile:
                                      description: azureFile represents an Azure File
                                        Service mount on the host and bind mount to
                                        the pod.
                                      properties:
                                        readOnly:
                                          description: readOnly defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                          type: boolean
                                        secretName:
                                          description: secretName is the  name of
                                            secret that contains Azure Storage Account
                                            Name and Key
                                          type: string
                                        shareName:
                                          description: shareName is the azure share
                                            Name
                                          type: string
                                      required:
                                      - secretName
                                      - shareName
                                      type: object
                                    cephfs:
                                      description: cephFS represents a Ceph FS mount
                                        on the host that shares a pod's lifetime
                                      properties:
                                        monitors:
                                          description: 'monitors is Required: Monitors
                                            is a collection of Ceph monitors More
                                            info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it'
                                          items:
                                            type: string
                                          type: array
                                        path:
                                          description: 'path is Optional: Used as
                                            the mounted root, rather than the full
                                            Ceph tree, default is /'
                                          type: string
                                        readOnly:
                                          description: 'readOnly is Optional: Defaults
                                            to false (read/write). ReadOnly here will
                                            force the ReadOnly setting in VolumeMounts.
                                            More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it'
                                          type: boolean
                                        secretFile:
                                          description: 'secretFile is Optional: SecretFile
                                            is the path to key ring for User, default
                                            is /etc/ceph/user.secret More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it'
                                          type: string
                                        secretRef:
                                          description: 'secretRef is Optional: SecretRef
                                            is reference to the authentication secret
                                            for User, default is empty. More info:
                                            https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it'
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        user:
                                          description: 'user is optional: User is
                                            the rados user name, default is admin
                                            More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it'
                                          type: string
                                      required:
                                      - monitors
                                      type: object
                                    cinder:
                                      description: 'cinder represents a cinder volume
                                        attached and mounted on kubelets host machine.
                                        More info: https://examples.k8s.io/mysql-cinder-pd/README.md'
                                      properties:
                                        fsType:
                                          description: 'fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Examples:
                                            "ext4", "xfs", "ntfs". Implicitly inferred
                                            to be "ext4" if unspecified. More info:
                                            https://examples.k8s.io/mysql-cinder-pd/README.md'
                                          type: string
                                        readOnly:
                                          description: 'readOnly defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                            More info: https://examples.k8s.io/mysql-cinder-pd/README.md'
                                          type: boolean
                                        secretRef:
                                          description: 'secretRef is optional: points
                                            to a secret object containing parameters
                                            used to connect to OpenStack.'
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        volumeID:
                                          description: 'volumeID used to identify
                                            the volume in cinder. More info: https://examples.k8s.io/mysql-cinder-pd/README.md'
                                          type: string
                                      required:
                                      - volumeID
                                      type: object
                                    configMap:
                                      description: configMap represents a configMap
                                        that should populate this volume
                                      properties:
                                        defaultMode:
                                          description: 'defaultMode is optional: mode
                                            bits used to set permissions on created
                                            files by default. Must be an octal value
                                            between 0000 and 0777 or a decimal value
                                            between 0 and 511. YAML accepts both octal
                                            and decimal values, JSON requires decimal
                                            values for mode bits. Defaults to 0644.
                                            Directories within the path are not affected
                                            by this setting. This might be in conflict
                                            with other options that affect the file
                                            mode, like fsGroup, and the result can
                                            be other mode bits set.'
                                          format: int32
                                          type: integer
                                        items:
                                          description: items if unspecified, each
                                            key-value pair in the Data field of the
                                            referenced ConfigMap will be projected
                                            into the volume as a file whose name is
                                            the key and content is the value. If specified,
                                            the listed keys will be projected into
                                            the specified paths, and unlisted keys
                                            will not be present. If a key is specified
                                            which is not present in the ConfigMap,
                                            the volume setup will error unless it
                                            is marked optional. Paths must be relative
                                            and may not contain the '..' path or start
                                            with '..'.
                                          items:
                                            description: Maps a string key to a path
                                              within a volume.
                                            properties:
                                              key:
                                                description: key is the key to project.
                                                type: string
                                              mode:
                                                description: 'mode is Optional: mode
                                                  bits used to set permissions on
                                                  this file. Must be an octal value
                                                  between 0000 and 0777 or a decimal
                                                  value between 0 and 511. YAML accepts
                                                  both octal and decimal values, JSON
                                                  requires decimal values for mode
                                                  bits. If not specified, the volume
                                                  defaultMode will be used. This might
                                                  be in conflict with other options
                                                  that affect the file mode, like
                                                  fsGroup, and the result can be other
                                                  mode bits set.'
                                                format: int32
                                                type: integer
                                              path:
                                                description: path is the relative
                                                  path of the file to map the key
                                                  to. May not be an absolute path.
                                                  May not contain the path element
                                                  '..'. May not start with the string
                                                  '..'.
                                                type: string
                                            required:
                                            - key
                                            - path
                                            type: object
                                          type: array
                                        name:
                                          description: 'Name of the referent. More
                                            info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion,
                                            kind, uid?'
                                          type: string
                                        optional:
                                          description: optional specify whether the
                                            ConfigMap or its keys must be defined
                                          type: boolean
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    csi:
                                      description: csi (Container Storage Interface)
                                        represents ephemeral storage that is handled
                                        by certain external CSI drivers (Beta feature).
                                      properties:
                                        driver:
                                          description: driver is the name of the CSI
                                            driver that handles this volume. Consult
                                            with your admin for the correct name as
                                            registered in the cluster.
                                          type: string
                                        fsType:
                                          description: fsType to mount. Ex. "ext4",
                                            "xfs", "ntfs". If not provided, the empty
                                            value is passed to the associated CSI
                                            driver which will determine the default
                                            filesystem to apply.
                                          type: string
                                        nodePublishSecretRef:
                                          description: nodePublishSecretRef is a reference
                                            to the secret object containing sensitive
                                            information to pass to the CSI driver
                                            to complete the CSI NodePublishVolume
                                            and NodeUnpublishVolume calls. This field
                                            is optional, and  may be empty if no secret
                                            is required. If the secret object contains
                                            more than one secret, all secret references
                                            are passed.
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        readOnly:
                                          description: readOnly specifies a read-only
                                            configuration for the volume. Defaults
                                            to false (read/write).
                                          type: boolean
                                        volumeAttributes:
                                          additionalProperties:
                                            type: string
                                          description: volumeAttributes stores driver-specific
                                            properties that are passed to the CSI
                                            driver. Consult your driver's documentation
                                            for supported values.
                                          type: object
                                      required:
                                      - driver
                                      type: object
                                    downwardAPI:
                                      description: downwardAPI represents downward
                                        API about the pod that should populate this
                                        volume
                                      properties:
                                        defaultMode:
                                          description: 'Optional: mode bits to use
                                            on created files by default. Must be a
                                            Optional: mode bits used to set permissions
                                            on created files by default. Must be an
                                            octal value between 0000 and 0777 or a
                                            decimal value between 0 and 511. YAML
                                            accepts both octal and decimal values,
                                            JSON requires decimal values for mode
                                            bits. Defaults to 0644. Directories within
                                            the path are not affected by this setting.
                                            This might be in conflict with other options
                                            that affect the file mode, like fsGroup,
                                            and the result can be other mode bits
                                            set.'
                                          format: int32
                                          type: integer
                                        items:
                                          description: Items is a list of downward
                                            API volume file
                                          items:
                                            description: DownwardAPIVolumeFile represents
                                              information to create the file containing
                                              the pod field
                                            properties:
                                              fieldRef:
                                                description: 'Required: Selects a
                                                  field of the pod: only annotations,
                                                  labels, name and namespace are supported.'
                                                properties:
                                                  apiVersion:
                                                    description: Version of the schema
                                                      the FieldPath is written in
                                                      terms of, defaults to "v1".
                                                    type: string
                                                  fieldPath:
                                                    description: Path of the field
                                                      to select in the specified API
                                                      version.
                                                    type: string
                                                required:
                                                - fieldPath
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              mode:
                                                description: 'Optional: mode bits
                                                  used to set permissions on this
                                                  file, must be an octal value between
                                                  0000 and 0777 or a decimal value
                                                  between 0 and 511. YAML accepts
                                                  both octal and decimal values, JSON
                                                  requires decimal values for mode
                                                  bits. If not specified, the volume
                                                  defaultMode will be used. This might
                                                  be in conflict with other options
                                                  that affect the file mode, like
                                                  fsGroup, and the result can be other
                                                  mode bits set.'
                                                format: int32
                                                type: integer
                                              path:
                                                description: 'Required: Path is  the
                                                  relative path name of the file to
                                                  be created. Must not be absolute
                                                  or contain the ''..'' path. Must
                                                  be utf-8 encoded. The first item
                                                  of the relative path must not start
                                                  with ''..'''
                                                type: string
                                              resourceFieldRef:
                                                description: 'Selects a resource of
                                                  the container: only resources limits
                                                  and requests (limits.cpu, limits.memory,
                                                  requests.cpu and requests.memory)
                                                  are currently supported.'
                                                properties:
                                                  containerName:
                                                    description: 'Container name:
                                                      required for volumes, optional
                                                      for env vars'
                                                    type: string
                                                  divisor:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    description: Specifies the output
                                                      format of the exposed resources,
                                                      defaults to "1"
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  resource:
                                                    description: 'Required: resource
                                                      to select'
                                                    type: string
                                                required:
                                                - resource
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - path
                                            type: object
                                          type: array
                                      type: object
                                    emptyDir:
                                      description: 'emptyDir represents a temporary
                                        directory that shares a pod''s lifetime. More
                                        info: https://kubernetes.io/docs/concepts/storage/volumes#emptydir'
                                      properties:
                                        medium:
                                          description: 'medium represents what type
                                            of storage medium should back this directory.
                                            The default is "" which means to use the
                                            node''s default medium. Must be an empty
                                            string (default) or Memory. More info:
                                            https://kubernetes.io/docs/concepts/storage/volumes#emptydir'
                                          type: string
                                        sizeLimit:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: 'sizeLimit is the total amount
                                            of local storage required for this EmptyDir
                                            volume. The size limit is also applicable
                                            for memory medium. The maximum usage on
                                            memory medium EmptyDir would be the minimum
                                            value between the SizeLimit specified
                                            here and the sum of memory limits of all
                                            containers in a pod. The default is nil
                                            which means that the limit is undefined.
                                            More info: http://kubernetes.io/docs/user-guide/volumes#emptydir'
                                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                          x-kubernetes-int-or-string: true
                                      type: object
                                    ephemeral:
                                      description: "ephemeral represents a volume
                                        that is handled by a cluster storage driver.
                                        The volume's lifecycle is tied to the pod
                                        that defines it - it will be created before
                                        the pod starts, and deleted when the pod is
                                        removed. \n Use this if: a) the volume is
                                        only needed while the pod runs, b) features
                                        of normal volumes like restoring from snapshot
                                        or capacity tracking are needed, c) the storage
                                        driver is specified through a storage class,
                                        and d) the storage driver supports dynamic
                                        volume provisioning through a PersistentVolumeClaim
                                        (see EphemeralVolumeSource for more information
                                        on the connection between this volume type
                                        and PersistentVolumeClaim). \n Use PersistentVolumeClaim
                                        or one of the vendor-specific APIs for volumes
                                        that persist for longer than the lifecycle
                                        of an individual pod. \n Use CSI for light-weight
                                        local ephemeral volumes if the CSI driver
                                        is meant to be used that way - see the documentation
                                        of the driver for more information. \n A pod
                                        can use both types of ephemeral volumes and
                                        persistent volumes at the same time."
                                      properties:
                                        volumeClaimTemplate:
                                          description: "Will be used to create a stand-alone
                                            PVC to provision the volume. The pod in
                                            which this EphemeralVolumeSource is embedded
                                            will be the owner of the PVC, i.e. the
                                            PVC will be deleted together with the
                                            pod.  The name of the PVC will be `<pod
                                            name>-<volume name>` where `<volume name>`
                                            is the name from the `PodSpec.Volumes`
                                            array entry. Pod validation will reject
                                            the pod if the concatenated name is not
                                            valid for a PVC (for example, too long).
                                            \n An existing PVC with that name that
                                            is not owned by the pod will *not* be
                                            used for the pod to avoid using an unrelated
                                            volume by mistake. Starting the pod is
                                            then blocked until the unrelated PVC is
                                            removed. If such a pre-created PVC is
                                            meant to be used by the pod, the PVC has
                                            to updated with an owner reference to
                                            the pod once the pod exists. Normally
                                            this should not be necessary, but it may
                                            be useful when manually reconstructing
                                            a broken cluster. \n This field is read-only
                                            and no changes will be made by Kubernetes
                                            to the PVC after it has been created.
                                            \n Required, must not be nil."
                                          properties:
                                            metadata:
                                              description: May contain labels and
                                                annotations that will be copied into
                                                the PVC when creating it. No other
                                                fields are allowed and will be rejected
                                                during validation.
                                              type: object
                                            spec:
                                              description: The specification for the
                                                PersistentVolumeClaim. The entire
                                                content is copied unchanged into the
                                                PVC that gets created from this template.
                                                The same fields as in a PersistentVolumeClaim
                                                are also valid here.
                                              properties:
                                                accessModes:
                                                  description: 'accessModes contains
                                                    the desired access modes the volume
                                                    should have. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#access-modes-1'
                                                  items:
                                                    type: string
                                                  type: array
                                                dataSource:
                                                  description: 'dataSource field can
                                                    be used to specify either: * An
                                                    existing VolumeSnapshot object
                                                    (snapshot.storage.k8s.io/VolumeSnapshot)
                                                    * An existing PVC (PersistentVolumeClaim)
                                                    If the provisioner or an external
                                                    controller can support the specified
                                                    data source, it will create a
                                                    new volume based on the contents
                                                    of the specified data source.
                                                    If the AnyVolumeDataSource feature
                                                    gate is enabled, this field will
                                                    always have the same contents
                                                    as the DataSourceRef field.'
                                                  properties:
                                                    apiGroup:
                                                      description: APIGroup is the
                                                        group for the resource being
                                                        referenced. If APIGroup is
                                                        not specified, the specified
                                                        Kind must be in the core API
                                                        group. For any other third-party
                                                        types, APIGroup is required.
                                                      type: string
                                                    kind:
                                                      description: Kind is the type
                                                        of resource being referenced
                                                      type: string
                                                    name:
                                                      description: Name is the name
                                                        of resource being referenced
                                                      type: string
                                                  required:
                                                  - kind
                                                  - name
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                dataSourceRef:
                                                  description: 'dataSourceRef specifies
                                                    the object from which to populate
                                                    the volume with data, if a non-empty
                                                    volume is desired. This may be
                                                    any local object from a non-empty
                                                    API group (non core object) or
                                                    a PersistentVolumeClaim object.
                                                    When this field is specified,
                                                    volume binding will only succeed
                                                    if the type of the specified object
                                                    matches some installed volume
                                                    populator or dynamic provisioner.
                                                    This field will replace the functionality
                                                    of the DataSource field and as
                                                    such if both fields are non-empty,
                                                    they must have the same value.
                                                    For backwards compatibility, both
                                                    fields (DataSource and DataSourceRef)
                                                    will be set to the same value
                                                    automatically if one of them is
                                                    empty and the other is non-empty.
                                                    There are two important differences
                                                    between DataSource and DataSourceRef:
                                                    * While DataSource only allows
                                                    two specific types of objects,
                                                    DataSourceRef allows any non-core
                                                    object, as well as PersistentVolumeClaim
                                                    objects. * While DataSource ignores
                                                    disallowed values (dropping them),
                                                    DataSourceRef preserves all values,
                                                    and generates an error if a disallowed
                                                    value is specified. (Beta) Using
                                                    this field requires the AnyVolumeDataSource
                                                    feature gate to be enabled.'
                                                  properties:
                                                    apiGroup:
                                                      description: APIGroup is the
                                                        group for the resource being
                                                        referenced. If APIGroup is
                                                        not specified, the specified
                                                        Kind must be in the core API
                                                        group. For any other third-party
                                                        types, APIGroup is required.
                                                      type: string
                                                    kind:
                                                      description: Kind is the type
                                                        of resource being referenced
                                                      type: string
                                                    name:
                                                      description: Name is the name
                                                        of resource being referenced
                                                      type: string
                                                  required:
                                                  - kind
                                                  - name
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                resources:
                                                  description: 'resources represents
                                                    the minimum resources the volume
                                                    should have. If RecoverVolumeExpansionFailure
                                                    feature is enabled users are allowed
                                                    to specify resource requirements
                                                    that are lower than previous value
                                                    but must still be higher than
                                                    capacity recorded in the status
                                                    field of the claim. More info:
                                                    https://kubernetes.io/docs/concepts/storage/persistent-volumes#resources'
                                                  properties:
                                                    limits:
                                                      additionalProperties:
                                                        anyOf:
                                                        - type: integer
                                                        - type: string
                                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                        x-kubernetes-int-or-string: true
                                                      description: 'Limits describes
                                                        the maximum amount of compute
                                                        resources allowed. More info:
                                                        https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                                      type: object
                                                    requests:
                                                      additionalProperties:
                                                        anyOf:
                                                        - type: integer
                                                        - type: string
                                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                        x-kubernetes-int-or-string: true
                                                      description: 'Requests describes
                                                        the minimum amount of compute
                                                        resources required. If Requests
                                                        is omitted for a container,
                                                        it defaults to Limits if that
                                                        is explicitly specified, otherwise
                                                        to an implementation-defined
                                                        value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                                                      type: object
                                                  type: object
                                                selector:
                                                  description: selector is a label
                                                    query over volumes to consider
                                                    for binding.
                                                  properties:
                                                    matchExpressions:
                                                      description: matchExpressions
                                                        is a list of label selector
                                                        requirements. The requirements
                                                        are ANDed.
                                                      items:
                                                        description: A label selector
                                                          requirement is a selector
                                                          that contains values, a
                                                          key, and an operator that
                                                          relates the key and values.
                                                        properties:
                                                          key:
                                                            description: key is the
                                                              label key that the selector
                                                              applies to.
                                                            type: string
                                                          operator:
                                                            description: operator
                                                              represents a key's relationship
                                                              to a set of values.
                                                              Valid operators are
                                                              In, NotIn, Exists and
                                                              DoesNotExist.
                                                            type: string
                                                          values:
                                                            description: values is
                                                              an array of string values.
                                                              If the operator is In
                                                              or NotIn, the values
                                                              array must be non-empty.
                                                              If the operator is Exists
                                                              or DoesNotExist, the
                                                              values array must be
                                                              empty. This array is
                                                              replaced during a strategic
                                                              merge patch.
                                                            items:
                                                              type: string
                                                            type: array
                                                        required:
                                                        - key
                                                        - operator
                                                        type: object
                                                      type: array
                                                    matchLabels:
                                                      additionalProperties:
                                                        type: string
                                                      description: matchLabels is
                                                        a map of {key,value} pairs.
                                                        A single {key,value} in the
                                                        matchLabels map is equivalent
                                                        to an element of matchExpressions,
                                                        whose key field is "key",
                                                        the operator is "In", and
                                                        the values array contains
                                                        only "value". The requirements
                                                        are ANDed.
                                                      type: object
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                                storageClassName:
                                                  description: 'storageClassName is
                                                    the name of the StorageClass required
                                                    by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1'
                                                  type: string
                                                volumeMode:
                                                  description: volumeMode defines
                                                    what type of volume is required
                                                    by the claim. Value of Filesystem
                                                    is implied when not included in
                                                    claim spec.
                                                  type: string
                                                volumeName:
                                                  description: volumeName is the binding
                                                    reference to the PersistentVolume
                                                    backing this claim.
                                                  type: string
                                              type: object
                                          required:
                                          - spec
                                          type: object
                                      type: object
                                    fc:
                                      description: fc represents a Fibre Channel resource
                                        that is attached to a kubelet's host machine
                                        and then exposed to the pod.
                                      properties:
                                        fsType:
                                          description: 'fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Implicitly inferred to
                                            be "ext4" if unspecified. TODO: how do
                                            we prevent errors in the filesystem from
                                            compromising the machine'
                                          type: string
                                        lun:
                                          description: 'lun is Optional: FC target
                                            lun number'
                                          format: int32
                                          type: integer
                                        readOnly:
                                          description: 'readOnly is Optional: Defaults
                                            to false (read/write). ReadOnly here will
                                            force the ReadOnly setting in VolumeMounts.'
                                          type: boolean
                                        targetWWNs:
                                          description: 'targetWWNs is Optional: FC
                                            target worldwide names (WWNs)'
                                          items:
                                            type: string
                                          type: array
                                        wwids:
                                          description: 'wwids Optional: FC volume
                                            world wide identifiers (wwids) Either
                                            wwids or combination of targetWWNs and
                                            lun must be set, but not both simultaneously.'
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    flexVolume:
                                      description: flexVolume represents a generic
                                        volume resource that is provisioned/attached
                                        using an exec based plugin.
                                      properties:
                                        driver:
                                          description: driver is the name of the driver
                                            to use for this volume.
                                          type: string
                                        fsType:
                                          description: fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". The default filesystem
                                            depends on FlexVolume script.
                                          type: string
                                        options:
                                          additionalProperties:
                                            type: string
                                          description: 'options is Optional: this
                                            field holds extra command options if any.'
                                          type: object
                                        readOnly:
                                          description: 'readOnly is Optional: defaults
                                            to false (read/write). ReadOnly here will
                                            force the ReadOnly setting in VolumeMounts.'
                                          type: boolean
                                        secretRef:
                                          description: 'secretRef is Optional: secretRef
                                            is reference to the secret object containing
                                            sensitive information to pass to the plugin
                                            scripts. This may be empty if no secret
                                            object is specified. If the secret object
                                            contains more than one secret, all secrets
                                            are passed to the plugin scripts.'
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                      required:
                                      - driver
                                      type: object
                                    flocker:
                                      description: flocker represents a Flocker volume
                                        attached to a kubelet's host machine. This
                                        depends on the Flocker control service being
                                        running
                                      properties:
                                        datasetName:
                                          description: datasetName is Name of the
                                            dataset stored as metadata -> name on
                                            the dataset for Flocker should be considered
                                            as deprecated
                                          type: string
                                        datasetUUID:
                                          description: datasetUUID is the UUID of
                                            the dataset. This is unique identifier
                                            of a Flocker dataset
                                          type: string
                                      type: object
                                    gcePersistentDisk:
                                      description: 'gcePersistentDisk represents a
                                        GCE Disk resource that is attached to a kubelet''s
                                        host machine and then exposed to the pod.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk'
                                      properties:
                                        fsType:
                                          description: 'fsType is filesystem type
                                            of the volume that you want to mount.
                                            Tip: Ensure that the filesystem type is
                                            supported by the host operating system.
                                            Examples: "ext4", "xfs", "ntfs". Implicitly
                                            inferred to be "ext4" if unspecified.
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                            TODO: how do we prevent errors in the
                                            filesystem from compromising the machine'
                                          type: string
                                        partition:
                                          description: 'partition is the partition
                                            in the volume that you want to mount.
                                            If omitted, the default is to mount by
                                            volume name. Examples: For volume /dev/sda1,
                                            you specify the partition as "1". Similarly,
                                            the volume partition for /dev/sda is "0"
                                            (or you can leave the property empty).
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk'
                                          format: int32
                                          type: integer
                                        pdName:
                                          description: 'pdName is unique name of the
                                            PD resource in GCE. Used to identify the
                                            disk in GCE. More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk'
                                          type: string
                                        readOnly:
                                          description: 'readOnly here will force the
                                            ReadOnly setting in VolumeMounts. Defaults
                                            to false. More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk'
                                          type: boolean
                                      required:
                                      - pdName
                                      type: object
                                    gitRepo:
                                      description: 'gitRepo represents a git repository
                                        at a particular revision. DEPRECATED: GitRepo
                                        is deprecated. To provision a container with
                                        a git repo, mount an EmptyDir into an InitContainer
                                        that clones the repo using git, then mount
                                        the EmptyDir into the Pod''s container.'
                                      properties:
                                        directory:
                                          description: directory is the target directory
                                            name. Must not contain or start with '..'.  If
                                            '.' is supplied, the volume directory
                                            will be the git repository.  Otherwise,
                                            if specified, the volume will contain
                                            the git repository in the subdirectory
                                            with the given name.
                                          type: string
                                        repository:
                                          description: repository is the URL
                                          type: string
                                        revision:
                                          description: revision is the commit hash
                                            for the specified revision.
                                          type: string
                                      required:
                                      - repository
                                      type: object
                                    glusterfs:
                                      description: 'glusterfs represents a Glusterfs
                                        mount on the host that shares a pod''s lifetime.
                                        More info: https://examples.k8s.io/volumes/glusterfs/README.md'
                                      properties:
                                        endpoints:
                                          description: 'endpoints is the endpoint
                                            name that details Glusterfs topology.
                                            More info: https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod'
                                          type: string
                                        path:
                                          description: 'path is the Glusterfs volume
                                            path. More info: https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod'
                                          type: string
                                        readOnly:
                                          description: 'readOnly here will force the
                                            Glusterfs volume to be mounted with read-only
                                            permissions. Defaults to false. More info:
                                            https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod'
                                          type: boolean
                                      required:
                                      - endpoints
                                      - path
                                      type: object
                                    hostPath:
                                      description: 'hostPath represents a pre-existing
                                        file or directory on the host machine that
                                        is directly exposed to the container. This
                                        is generally used for system agents or other
                                        privileged things that are allowed to see
                                        the host machine. Most containers will NOT
                                        need this. More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath
                                        --- TODO(jonesdl) We need to restrict who
                                        can use host directory mounts and who can/can
                                        not mount host directories as read/write.'
                                      properties:
                                        path:
                                          description: 'path of the directory on the
                                            host. If the path is a symlink, it will
                                            follow the link to the real path. More
                                            info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath'
                                          type: string
                                        type:
                                          description: 'type for HostPath Volume Defaults
                                            to "" More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath'
                                          type: string
                                      required:
                                      - path
                                      type: object
                                    iscsi:
                                      description: 'iscsi represents an ISCSI Disk
                                        resource that is attached to a kubelet''s
                                        host machine and then exposed to the pod.
                                        More info: https://examples.k8s.io/volumes/iscsi/README.md'
                                      properties:
                                        chapAuthDiscovery:
                                          description: chapAuthDiscovery defines whether
                                            support iSCSI Discovery CHAP authentication
                                          type: boolean
                                        chapAuthSession:
                                          description: chapAuthSession defines whether
                                            support iSCSI Session CHAP authentication
                                          type: boolean
                                        fsType:
                                          description: 'fsType is the filesystem type
                                            of the volume that you want to mount.
                                            Tip: Ensure that the filesystem type is
                                            supported by the host operating system.
                                            Examples: "ext4", "xfs", "ntfs". Implicitly
                                            inferred to be "ext4" if unspecified.
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#iscsi
                                            TODO: how do we prevent errors in the
                                            filesystem from compromising the machine'
                                          type: string
                                        initiatorName:
                                          description: initiatorName is the custom
                                            iSCSI Initiator Name. If initiatorName
                                            is specified with iscsiInterface simultaneously,
                                            new iSCSI interface <target portal>:<volume
                                            name> will be created for the connection.
                                          type: string
                                        iqn:
                                          description: iqn is the target iSCSI Qualified
                                            Name.
                                          type: string
                                        iscsiInterface:
                                          description: iscsiInterface is the interface
                                            Name that uses an iSCSI transport. Defaults
                                            to 'default' (tcp).
                                          type: string
                                        lun:
                                          description: lun represents iSCSI Target
                                            Lun number.
                                          format: int32
                                          type: integer
                                        portals:
                                          description: portals is the iSCSI Target
                                            Portal List. The portal is either an IP
                                            or ip_addr:port if the port is other than
                                            default (typically TCP ports 860 and 3260).
                                          items:
                                            type: string
                                          type: array
                                        readOnly:
                                          description: readOnly here will force the
                                            ReadOnly setting in VolumeMounts. Defaults
                                            to false.
                                          type: boolean
                                        secretRef:
                                          description: secretRef is the CHAP Secret
                                            for iSCSI target and initiator authentication
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        targetPortal:
                                          description: targetPortal is iSCSI Target
                                            Portal. The Portal is either an IP or
                                            ip_addr:port if the port is other than
                                            default (typically TCP ports 860 and 3260).
                                          type: string
                                      required:
                                      - iqn
                                      - lun
                                      - targetPortal
                                      type: object
                                    name:
                                      description: 'name of the volume. Must be a
                                        DNS_LABEL and unique within the pod. More
                                        info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                    nfs:
                                      description: 'nfs represents an NFS mount on
                                        the host that shares a pod''s lifetime More
                                        info: https://kubernetes.io/docs/concepts/storage/volumes#nfs'
                                      properties:
                                        path:
                                          description: 'path that is exported by the
                                            NFS server. More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs'
                                          type: string
                                        readOnly:
                                          description: 'readOnly here will force the
                                            NFS export to be mounted with read-only
                                            permissions. Defaults to false. More info:
                                            https://kubernetes.io/docs/concepts/storage/volumes#nfs'
                                          type: boolean
                                        server:
                                          description: 'server is the hostname or
                                            IP address of the NFS server. More info:
                                            https://kubernetes.io/docs/concepts/storage/volumes#nfs'
                                          type: string
                                      required:
                                      - path
                                      - server
                                      type: object
                                    persistentVolumeClaim:
                                      description: 'persistentVolumeClaimVolumeSource
                                        represents a reference to a PersistentVolumeClaim
                                        in the same namespace. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistentvolumeclaims'
                                      properties:
                                        claimName:
                                          description: 'claimName is the name of a
                                            PersistentVolumeClaim in the same namespace
                                            as the pod using this volume. More info:
                                            https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistentvolumeclaims'
                                          type: string
                                        readOnly:
                                          description: readOnly Will force the ReadOnly
                                            setting in VolumeMounts. Default false.
                                          type: boolean
                                      required:
                                      - claimName
                                      type: object
                                    photonPersistentDisk:
                                      description: photonPersistentDisk represents
                                        a PhotonController persistent disk attached
                                        and mounted on kubelets host machine
                                      properties:
                                        fsType:
                                          description: fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Implicitly inferred to
                                            be "ext4" if unspecified.
                                          type: string
                                        pdID:
                                          description: pdID is the ID that identifies
                                            Photon Controller persistent disk
                                          type: string
                                      required:
                                      - pdID
                                      type: object
                                    portworxVolume:
                                      description: portworxVolume represents a portworx
                                        volume attached and mounted on kubelets host
                                        machine
                                      properties:
                                        fsType:
                                          description: fSType represents the filesystem
                                            type to mount Must be a filesystem type
                                            supported by the host operating system.
                                            Ex. "ext4", "xfs". Implicitly inferred
                                            to be "ext4" if unspecified.
                                          type: string
                                        readOnly:
                                          description: readOnly defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                          type: boolean
                                        volumeID:
                                          description: volumeID uniquely identifies
                                            a Portworx volume
                                          type: string
                                      required:
                                      - volumeID
                                      type: object
                                    projected:
                                      description: projected items for all in one
                                        resources secrets, configmaps, and downward
                                        API
                                      properties:
                                        defaultMode:
                                          description: defaultMode are the mode bits
                                            used to set permissions on created files
                                            by default. Must be an octal value between
                                            0000 and 0777 or a decimal value between
                                            0 and 511. YAML accepts both octal and
                                            decimal values, JSON requires decimal
                                            values for mode bits. Directories within
                                            the path are not affected by this setting.
                                            This might be in conflict with other options
                                            that affect the file mode, like fsGroup,
                                            and the result can be other mode bits
                                            set.
                                          format: int32
                                          type: integer
                                        sources:
                                          description: sources is the list of volume
                                            projections
                                          items:
                                            description: Projection that may be projected
                                              along with other supported volume types
                                            properties:
                                              configMap:
                                                description: configMap information
                                                  about the configMap data to project
                                                properties:
                                                  items:
                                                    description: items if unspecified,
                                                      each key-value pair in the Data
                                                      field of the referenced ConfigMap
                                                      will be projected into the volume
                                                      as a file whose name is the
                                                      key and content is the value.
                                                      If specified, the listed keys
                                                      will be projected into the specified
                                                      paths, and unlisted keys will
                                                      not be present. If a key is
                                                      specified which is not present
                                                      in the ConfigMap, the volume
                                                      setup will error unless it is
                                                      marked optional. Paths must
                                                      be relative and may not contain
                                                      the '..' path or start with
                                                      '..'.
                                                    items:
                                                      description: Maps a string key
                                                        to a path within a volume.
                                                      properties:
                                                        key:
                                                          description: key is the
                                                            key to project.
                                                          type: string
                                                        mode:
                                                          description: 'mode is Optional:
                                                            mode bits used to set
                                                            permissions on this file.
                                                            Must be an octal value
                                                            between 0000 and 0777
                                                            or a decimal value between
                                                            0 and 511. YAML accepts
                                                            both octal and decimal
                                                            values, JSON requires
                                                            decimal values for mode
                                                            bits. If not specified,
                                                            the volume defaultMode
                                                            will be used. This might
                                                            be in conflict with other
                                                            options that affect the
                                                            file mode, like fsGroup,
                                                            and the result can be
                                                            other mode bits set.'
                                                          format: int32
                                                          type: integer
                                                        path:
                                                          description: path is the
                                                            relative path of the file
                                                            to map the key to. May
                                                            not be an absolute path.
                                                            May not contain the path
                                                            element '..'. May not
                                                            start with the string
                                                            '..'.
                                                          type: string
                                                      required:
                                                      - key
                                                      - path
                                                      type: object
                                                    type: array
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: optional specify
                                                      whether the ConfigMap or its
                                                      keys must be defined
                                                    type: boolean
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              downwardAPI:
                                                description: downwardAPI information
                                                  about the downwardAPI data to project
                                                properties:
                                                  items:
                                                    description: Items is a list of
                                                      DownwardAPIVolume file
                                                    items:
                                                      description: DownwardAPIVolumeFile
                                                        represents information to
                                                        create the file containing
                                                        the pod field
                                                      properties:
                                                        fieldRef:
                                                          description: 'Required:
                                                            Selects a field of the
                                                            pod: only annotations,
                                                            labels, name and namespace
                                                            are supported.'
                                                          properties:
                                                            apiVersion:
                                                              description: Version
                                                                of the schema the
                                                                FieldPath is written
                                                                in terms of, defaults
                                                                to "v1".
                                                              type: string
                                                            fieldPath:
                                                              description: Path of
                                                                the field to select
                                                                in the specified API
                                                                version.
                                                              type: string
                                                          required:
                                                          - fieldPath
                                                          type: object
                                                          x-kubernetes-map-type: atomic
                                                        mode:
                                                          description: 'Optional:
                                                            mode bits used to set
                                                            permissions on this file,
                                                            must be an octal value
                                                            between 0000 and 0777
                                                            or a decimal value between
                                                            0 and 511. YAML accepts
                                                            both octal and decimal
                                                            values, JSON requires
                                                            decimal values for mode
                                                            bits. If not specified,
                                                            the volume defaultMode
                                                            will be used. This might
                                                            be in conflict with other
                                                            options that affect the
                                                            file mode, like fsGroup,
                                                            and the result can be
                                                            other mode bits set.'
                                                          format: int32
                                                          type: integer
                                                        path:
                                                          description: 'Required:
                                                            Path is  the relative
                                                            path name of the file
                                                            to be created. Must not
                                                            be absolute or contain
                                                            the ''..'' path. Must
                                                            be utf-8 encoded. The
                                                            first item of the relative
                                                            path must not start with
                                                            ''..'''
                                                          type: string
                                                        resourceFieldRef:
                                                          description: 'Selects a
                                                            resource of the container:
                                                            only resources limits
                                                            and requests (limits.cpu,
                                                            limits.memory, requests.cpu
                                                            and requests.memory) are
                                                            currently supported.'
                                                          properties:
                                                            containerName:
                                                              description: 'Container
                                                                name: required for
                                                                volumes, optional
                                                                for env vars'
                                                              type: string
                                                            divisor:
                                                              anyOf:
                                                              - type: integer
                                                              - type: string
                                                              description: Specifies
                                                                the output format
                                                                of the exposed resources,
                                                                defaults to "1"
                                                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                              x-kubernetes-int-or-string: true
                                                            resource:
                                                              description: 'Required:
                                                                resource to select'
                                                              type: string
                                                          required:
                                                          - resource
                                                          type: object
                                                          x-kubernetes-map-type: atomic
                                                      required:
                                                      - path
                                                      type: object
                                                    type: array
                                                type: object
                                              secret:
                                                description: secret information about
                                                  the secret data to project
                                                properties:
                                                  items:
                                                    description: items if unspecified,
                                                      each key-value pair in the Data
                                                      field of the referenced Secret
                                                      will be projected into the volume
                                                      as a file whose name is the
                                                      key and content is the value.
                                                      If specified, the listed keys
                                                      will be projected into the specified
                                                      paths, and unlisted keys will
                                                      not be present. If a key is
                                                      specified which is not present
                                                      in the Secret, the volume setup
                                                      will error unless it is marked
                                                      optional. Paths must be relative
                                                      and may not contain the '..'
                                                      path or start with '..'.
                                                    items:
                                                      description: Maps a string key
                                                        to a path within a volume.
                                                      properties:
                                                        key:
                                                          description: key is the
                                                            key to project.
                                                          type: string
                                                        mode:
                                                          description: 'mode is Optional:
                                                            mode bits used to set
                                                            permissions on this file.
                                                            Must be an octal value
                                                            between 0000 and 0777
                                                            or a decimal value between
                                                            0 and 511. YAML accepts
                                                            both octal and decimal
                                                            values, JSON requires
                                                            decimal values for mode
                                                            bits. If not specified,
                                                            the volume defaultMode
                                                            will be used. This might
                                                            be in conflict with other
                                                            options that affect the
                                                            file mode, like fsGroup,
                                                            and the result can be
                                                            other mode bits set.'
                                                          format: int32
                                                          type: integer
                                                        path:
                                                          description: path is the
                                                            relative path of the file
                                                            to map the key to. May
                                                            not be an absolute path.
                                                            May not contain the path
                                                            element '..'. May not
                                                            start with the string
                                                            '..'.
                                                          type: string
                                                      required:
                                                      - key
                                                      - path
                                                      type: object
                                                    type: array
                                                  name:
                                                    description: 'Name of the referent.
                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                      TODO: Add other useful fields.
                                                      apiVersion, kind, uid?'
                                                    type: string
                                                  optional:
                                                    description: optional field specify
                                                      whether the Secret or its key
                                                      must be defined
                                                    type: boolean
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              serviceAccountToken:
                                                description: serviceAccountToken is
                                                  information about the serviceAccountToken
                                                  data to project
                                                properties:
                                                  audience:
                                                    description: audience is the intended
                                                      audience of the token. A recipient
                                                      of a token must identify itself
                                                      with an identifier specified
                                                      in the audience of the token,
                                                      and otherwise should reject
                                                      the token. The audience defaults
                                                      to the identifier of the apiserver.
                                                    type: string
                                                  expirationSeconds:
                                                    description: expirationSeconds
                                                      is the requested duration of
                                                      validity of the service account
                                                      token. As the token approaches
                                                      expiration, the kubelet volume
                                                      plugin will proactively rotate
                                                      the service account token. The
                                                      kubelet will start trying to
                                                      rotate the token if the token
                                                      is older than 80 percent of
                                                      its time to live or if the token
                                                      is older than 24 hours.Defaults
                                                      to 1 hour and must be at least
                                                      10 minutes.
                                                    format: int64
                                                    type: integer
                                                  path:
                                                    description: path is the path
                                                      relative to the mount point
                                                      of the file to project the token
                                                      into.
                                                    type: string
                                                required:
                                                - path
                                                type: object
                                            type: object
                                          type: array
                                      type: object
                                    quobyte:
                                      description: quobyte represents a Quobyte mount
                                        on the host that shares a pod's lifetime
                                      properties:
                                        group:
                                          description: group to map volume access
                                            to Default is no group
                                          type: string
                                        readOnly:
                                          description: readOnly here will force the
                                            Quobyte volume to be mounted with read-only
                                            permissions. Defaults to false.
                                          type: boolean
                                        registry:
                                          description: registry represents a single
                                            or multiple Quobyte Registry services
                                            specified as a string as host:port pair
                                            (multiple entries are separated with commas)
                                            which acts as the central registry for
                                            volumes
                                          type: string
                                        tenant:
                                          description: tenant owning the given Quobyte
                                            volume in the Backend Used with dynamically
                                            provisioned Quobyte volumes, value is
                                            set by the plugin
                                          type: string
                                        user:
                                          description: user to map volume access to
                                            Defaults to serivceaccount user
                                          type: string
                                        volume:
                                          description: volume is a string that references
                                            an already created Quobyte volume by name.
                                          type: string
                                      required:
                                      - registry
                                      - volume
                                      type: object
                                    rbd:
                                      description: 'rbd represents a Rados Block Device
                                        mount on the host that shares a pod''s lifetime.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md'
                                      properties:
                                        fsType:
                                          description: 'fsType is the filesystem type
                                            of the volume that you want to mount.
                                            Tip: Ensure that the filesystem type is
                                            supported by the host operating system.
                                            Examples: "ext4", "xfs", "ntfs". Implicitly
                                            inferred to be "ext4" if unspecified.
                                            More info: https://kubernetes.io/docs/concepts/storage/volumes#rbd
                                            TODO: how do we prevent errors in the
                                            filesystem from compromising the machine'
                                          type: string
                                        image:
                                          description: 'image is the rados image name.
                                            More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          type: string
                                        keyring:
                                          description: 'keyring is the path to key
                                            ring for RBDUser. Default is /etc/ceph/keyring.
                                            More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          type: string
                                        monitors:
                                          description: 'monitors is a collection of
                                            Ceph monitors. More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          items:
                                            type: string
                                          type: array
                                        pool:
                                          description: 'pool is the rados pool name.
                                            Default is rbd. More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          type: string
                                        readOnly:
                                          description: 'readOnly here will force the
                                            ReadOnly setting in VolumeMounts. Defaults
                                            to false. More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          type: boolean
                                        secretRef:
                                          description: 'secretRef is name of the authentication
                                            secret for RBDUser. If provided overrides
                                            keyring. Default is nil. More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        user:
                                          description: 'user is the rados user name.
                                            Default is admin. More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it'
                                          type: string
                                      required:
                                      - image
                                      - monitors
                                      type: object
                                    scaleIO:
                                      description: scaleIO represents a ScaleIO persistent
                                        volume attached and mounted on Kubernetes
                                        nodes.
                                      properties:
                                        fsType:
                                          description: fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Default is "xfs".
                                          type: string
                                        gateway:
                                          description: gateway is the host address
                                            of the ScaleIO API Gateway.
                                          type: string
                                        protectionDomain:
                                          description: protectionDomain is the name
                                            of the ScaleIO Protection Domain for the
                                            configured storage.
                                          type: string
                                        readOnly:
                                          description: readOnly Defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                          type: boolean
                                        secretRef:
                                          description: secretRef references to the
                                            secret for ScaleIO user and other sensitive
                                            information. If this is not provided,
                                            Login operation will fail.
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        sslEnabled:
                                          description: sslEnabled Flag enable/disable
                                            SSL communication with Gateway, default
                                            false
                                          type: boolean
                                        storageMode:
                                          description: storageMode indicates whether
                                            the storage for a volume should be ThickProvisioned
                                            or ThinProvisioned. Default is ThinProvisioned.
                                          type: string
                                        storagePool:
                                          description: storagePool is the ScaleIO
                                            Storage Pool associated with the protection
                                            domain.
                                          type: string
                                        system:
                                          description: system is the name of the storage
                                            system as configured in ScaleIO.
                                          type: string
                                        volumeName:
                                          description: volumeName is the name of a
                                            volume already created in the ScaleIO
                                            system that is associated with this volume
                                            source.
                                          type: string
                                      required:
                                      - gateway
                                      - secretRef
                                      - system
                                      type: object
                                    secret:
                                      description: 'secret represents a secret that
                                        should populate this volume. More info: https://kubernetes.io/docs/concepts/storage/volumes#secret'
                                      properties:
                                        defaultMode:
                                          description: 'defaultMode is Optional: mode
                                            bits used to set permissions on created
                                            files by default. Must be an octal value
                                            between 0000 and 0777 or a decimal value
                                            between 0 and 511. YAML accepts both octal
                                            and decimal values, JSON requires decimal
                                            values for mode bits. Defaults to 0644.
                                            Directories within the path are not affected
                                            by this setting. This might be in conflict
                                            with other options that affect the file
                                            mode, like fsGroup, and the result can
                                            be other mode bits set.'
                                          format: int32
                                          type: integer
                                        items:
                                          description: items If unspecified, each
                                            key-value pair in the Data field of the
                                            referenced Secret will be projected into
                                            the volume as a file whose name is the
                                            key and content is the value. If specified,
                                            the listed keys will be projected into
                                            the specified paths, and unlisted keys
                                            will not be present. If a key is specified
                                            which is not present in the Secret, the
                                            volume setup will error unless it is marked
                                            optional. Paths must be relative and may
                                            not contain the '..' path or start with
                                            '..'.
                                          items:
                                            description: Maps a string key to a path
                                              within a volume.
                                            properties:
                                              key:
                                                description: key is the key to project.
                                                type: string
                                              mode:
                                                description: 'mode is Optional: mode
                                                  bits used to set permissions on
                                                  this file. Must be an octal value
                                                  between 0000 and 0777 or a decimal
                                                  value between 0 and 511. YAML accepts
                                                  both octal and decimal values, JSON
                                                  requires decimal values for mode
                                                  bits. If not specified, the volume
                                                  defaultMode will be used. This might
                                                  be in conflict with other options
                                                  that affect the file mode, like
                                                  fsGroup, and the result can be other
                                                  mode bits set.'
                                                format: int32
                                                type: integer
                                              path:
                                                description: path is the relative
                                                  path of the file to map the key
                                                  to. May not be an absolute path.
                                                  May not contain the path element
                                                  '..'. May not start with the string
                                                  '..'.
                                                type: string
                                            required:
                                            - key
                                            - path
                                            type: object
                                          type: array
                                        optional:
                                          description: optional field specify whether
                                            the Secret or its keys must be defined
                                          type: boolean
                                        secretName:
                                          description: 'secretName is the name of
                                            the secret in the pod''s namespace to
                                            use. More info: https://kubernetes.io/docs/concepts/storage/volumes#secret'
                                          type: string
                                      type: object
                                    storageos:
                                      description: storageOS represents a StorageOS
                                        volume attached and mounted on Kubernetes
                                        nodes.
                                      properties:
                                        fsType:
                                          description: fsType is the filesystem type
                                            to mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Implicitly inferred to
                                            be "ext4" if unspecified.
                                          type: string
                                        readOnly:
                                          description: readOnly defaults to false
                                            (read/write). ReadOnly here will force
                                            the ReadOnly setting in VolumeMounts.
                                          type: boolean
                                        secretRef:
                                          description: secretRef specifies the secret
                                            to use for obtaining the StorageOS API
                                            credentials.  If not specified, default
                                            values will be attempted.
                                          properties:
                                            name:
                                              description: 'Name of the referent.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                TODO: Add other useful fields. apiVersion,
                                                kind, uid?'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        volumeName:
                                          description: volumeName is the human-readable
                                            name of the StorageOS volume.  Volume
                                            names are only unique within a namespace.
                                          type: string
                                        volumeNamespace:
                                          description: volumeNamespace specifies the
                                            scope of the volume within StorageOS.  If
                                            no namespace is specified then the Pod's
                                            namespace will be used.  This allows the
                                            Kubernetes name scoping to be mirrored
                                            within StorageOS for tighter integration.
                                            Set VolumeName to any name to override
                                            the default behaviour. Set to "default"
                                            if you are not using namespaces within
                                            StorageOS. Namespaces that do not pre-exist
                                            within StorageOS will be created.
                                          type: string
                                      type: object
                                    vsphereVolume:
                                      description: vsphereVolume represents a vSphere
                                        volume attached and mounted on kubelets host
                                        machine
                                      properties:
                                        fsType:
                                          description: fsType is filesystem type to
                                            mount. Must be a filesystem type supported
                                            by the host operating system. Ex. "ext4",
                                            "xfs", "ntfs". Implicitly inferred to
                                            be "ext4" if unspecified.
                                          type: string
                                        storagePolicyID:
                                          description: storagePolicyID is the storage
                                            Policy Based Management (SPBM) profile
                                            ID associated with the StoragePolicyName.
                                          type: string
                                        storagePolicyName:
                                          description: storagePolicyName is the storage
                                            Policy Based Management (SPBM) profile
                                            name.
                                          type: string
                                        volumePath:
                                          description: volumePath is the path that
                                            identifies vSphere volume vmdk
                                          type: string
                                      required:
                                      - volumePath
                                      type: object
                                  required:
                                  - name
                                  type: object
                                type: array
                            type: object
                        type: object
                    type: object
                type: object
              external:
                description: External enables you to configure external grafana instances
                  that is not managed by the operator.
                properties:
                  adminPassword:
                    description: AdminPassword key to talk to the external grafana
                      instance.
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          TODO: Add other useful fields. apiVersion, kind, uid?'
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  adminUser:
                    description: AdminUser key to talk to the external grafana instance.
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          TODO: Add other useful fields. apiVersion, kind, uid?'
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  apiKey:
                    description: The API key to talk to the external grafana instance,
                      you need to define ether apiKey or adminUser/adminPassword.
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          TODO: Add other useful fields. apiVersion, kind, uid?'
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  url:
                    description: URL of the external grafana instance you want to
                      manage.
                    type: string
                required:
                - url
                type: object
              ingress:
                description: Ingress sets how the ingress object should look like
                  with your grafana instance.
                properties:
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    description: IngressSpec describes the Ingress the user wishes
                      to exist.
                    properties:
                      defaultBackend:
                        description: DefaultBackend is the backend that should handle
                          requests that don't match any rule. If Rules are not specified,
                          DefaultBackend must be specified. If DefaultBackend is not
                          set, the handling of requests that do not match any of the
                          rules will be up to the Ingress controller.
                        properties:
                          resource:
                            description: Resource is an ObjectRef to another Kubernetes
                              resource in the namespace of the Ingress object. If
                              resource is specified, a service.Name and service.Port
                              must not be specified. This is a mutually exclusive
                              setting with "Service".
                            properties:
                              apiGroup:
                                description: APIGroup is the group for the resource
                                  being referenced. If APIGroup is not specified,
                                  the specified Kind must be in the core API group.
                                  For any other third-party types, APIGroup is required.
                                type: string
                              kind:
                                description: Kind is the type of resource being referenced
                                type: string
                              name:
                                description: Name is the name of resource being referenced
                                type: string
                            required:
                            - kind
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          service:
                            description: Service references a Service as a Backend.
                              This is a mutually exclusive setting with "Resource".
                            properties:
                              name:
                                description: Name is the referenced service. The service
                                  must exist in the same namespace as the Ingress
                                  object.
                                type: string
                              port:
                                description: Port of the referenced service. A port
                                  name or port number is required for a IngressServiceBackend.
                                properties:
                                  name:
                                    description: Name is the name of the port on the
                                      Service. This is a mutually exclusive setting
                                      with "Number".
                                    type: string
                                  number:
                                    description: Number is the numerical port number
                                      (e.g. 80) on the Service. This is a mutually
                                      exclusive setting with "Name".
                                    format: int32
                                    type: integer
                                type: object
                            required:
                            - name
                            type: object
                        type: object
                      ingressClassName:
                        description: IngressClassName is the name of an IngressClass
                          cluster resource. Ingress controller implementations use
                          this field to know whether they should be serving this Ingress
                          resource, by a transitive connection (controller -> IngressClass
                          -> Ingress resource). Although the `kubernetes.io/ingress.class`
                          annotation (simple constant name) was never formally defined,
                          it was widely supported by Ingress controllers to create
                          a direct binding between Ingress controller and Ingress
                          resources. Newly created Ingress resources should prefer
                          using the field. However, even though the annotation is
                          officially deprecated, for backwards compatibility reasons,
                          ingress controllers should still honor that annotation if
                          present.
                        type: string
                      rules:
                        description: A list of host rules used to configure the Ingress.
                          If unspecified, or no rule matches, all traffic is sent
                          to the default backend.
                        items:
                          description: IngressRule represents the rules mapping the
                            paths under a specified host to the related backend services.
                            Incoming requests are first evaluated for a host match,
                            then routed to the backend associated with the matching
                            IngressRuleValue.
                          properties:
                            host:
                              description: "Host is the fully qualified domain name
                                of a network host, as defined by RFC 3986. Note the
                                following deviations from the \"host\" part of the
                                URI as defined in RFC 3986: 1. IPs are not allowed.
                                Currently an IngressRuleValue can only apply to the
                                IP in the Spec of the parent Ingress. 2. The `:` delimiter
                                is not respected because ports are not allowed. Currently
                                the port of an Ingress is implicitly :80 for http
                                and :443 for https. Both these may change in the future.
                                Incoming requests are matched against the host before
                                the IngressRuleValue. If the host is unspecified,
                                the Ingress routes all traffic based on the specified
                                IngressRuleValue. \n Host can be \"precise\" which
                                is a domain name without the terminating dot of a
                                network host (e.g. \"foo.bar.com\") or \"wildcard\",
                                which is a domain name prefixed with a single wildcard
                                label (e.g. \"*.foo.com\"). The wildcard character
                                '*' must appear by itself as the first DNS label and
                                matches only a single label. You cannot have a wildcard
                                label by itself (e.g. Host == \"*\"). Requests will
                                be matched against the Host field in the following
                                way: 1. If Host is precise, the request matches this
                                rule if the http host header is equal to Host. 2.
                                If Host is a wildcard, then the request matches this
                                rule if the http host header is to equal to the suffix
                                (removing the first label) of the wildcard rule."
                              type: string
                            http:
                              description: 'HTTPIngressRuleValue is a list of http
                                selectors pointing to backends. In the example: http://<host>/<path>?<searchpart>
                                -> backend where where parts of the url correspond
                                to RFC 3986, this resource will be used to match against
                                everything after the last ''/'' and before the first
                                ''?'' or ''#''.'
                              properties:
                                paths:
                                  description: A collection of paths that map requests
                                    to backends.
                                  items:
                                    description: HTTPIngressPath associates a path
                                      with a backend. Incoming urls matching the path
                                      are forwarded to the backend.
                                    properties:
                                      backend:
                                        description: Backend defines the referenced
                                          service endpoint to which the traffic will
                                          be forwarded to.
                                        properties:
                                          resource:
                                            description: Resource is an ObjectRef
                                              to another Kubernetes resource in the
                                              namespace of the Ingress object. If
                                              resource is specified, a service.Name
                                              and service.Port must not be specified.
                                              This is a mutually exclusive setting
                                              with "Service".
                                            properties:
                                              apiGroup:
                                                description: APIGroup is the group
                                                  for the resource being referenced.
                                                  If APIGroup is not specified, the
                                                  specified Kind must be in the core
                                                  API group. For any other third-party
                                                  types, APIGroup is required.
                                                type: string
                                              kind:
                                                description: Kind is the type of resource
                                                  being referenced
                                                type: string
                                              name:
                                                description: Name is the name of resource
                                                  being referenced
                                                type: string
                                            required:
                                            - kind
                                            - name
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          service:
                                            description: Service references a Service
                                              as a Backend. This is a mutually exclusive
                                              setting with "Resource".
                                            properties:
                                              name:
                                                description: Name is the referenced
                                                  service. The service must exist
                                                  in the same namespace as the Ingress
                                                  object.
                                                type: string
                                              port:
                                                description: Port of the referenced
                                                  service. A port name or port number
                                                  is required for a IngressServiceBackend.
                                                properties:
                                                  name:
                                                    description: Name is the name
                                                      of the port on the Service.
                                                      This is a mutually exclusive
                                                      setting with "Number".
                                                    type: string
                                                  number:
                                                    description: Number is the numerical
                                                      port number (e.g. 80) on the
                                                      Service. This is a mutually
                                                      exclusive setting with "Name".
                                                    format: int32
                                                    type: integer
                                                type: object
                                            required:
                                            - name
                                            type: object
                                        type: object
                                      path:
                                        description: Path is matched against the path
                                          of an incoming request. Currently it can
                                          contain characters disallowed from the conventional
                                          "path" part of a URL as defined by RFC 3986.
                                          Paths must begin with a '/' and must be
                                          present when using PathType with value "Exact"
                                          or "Prefix".
                                        type: string
                                      pathType:
                                        description: 'PathType determines the interpretation
                                          of the Path matching. PathType can be one
                                          of the following values: * Exact: Matches
                                          the URL path exactly. * Prefix: Matches
                                          based on a URL path prefix split by ''/''.
                                          Matching is done on a path element by element
                                          basis. A path element refers is the list
                                          of labels in the path split by the ''/''
                                          separator. A request is a match for path
                                          p if every p is an element-wise prefix of
                                          p of the request path. Note that if the
                                          last element of the path is a substring
                                          of the last element in request path, it
                                          is not a match (e.g. /foo/bar matches /foo/bar/baz,
                                          but does not match /foo/barbaz). * ImplementationSpecific:
                                          Interpretation of the Path matching is up
                                          to the IngressClass. Implementations can
                                          treat this as a separate PathType or treat
                                          it identically to Prefix or Exact path types.
                                          Implementations are required to support
                                          all path types.'
                                        type: string
                                    required:
                                    - backend
                                    - pathType
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                              required:
                              - paths
                              type: object
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                      tls:
                        description: TLS configuration. Currently the Ingress only
                          supports a single TLS port, 443. If multiple members of
                          this list specify different hosts, they will be multiplexed
                          on the same port according to the hostname specified through
                          the SNI TLS extension, if the ingress controller fulfilling
                          the ingress supports SNI.
                        items:
                          description: IngressTLS describes the transport layer security
                            associated with an Ingress.
                          properties:
                            hosts:
                              description: Hosts are a list of hosts included in the
                                TLS certificate. The values in this list must match
                                the name/s used in the tlsSecret. Defaults to the
                                wildcard host setting for the loadbalancer controller
                                fulfilling this Ingress, if left unspecified.
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            secretName:
                              description: SecretName is the name of the secret used
                                to terminate TLS traffic on port 443. Field is left
                                optional to allow TLS routing based on SNI hostname
                                alone. If the SNI host in a listener conflicts with
                                the "Host" header field used by an IngressRule, the
                                SNI host is used for termination and value of the
                                Host header is used for routing.
                              type: string
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                    type: object
                type: object
              jsonnet:
                properties:
                  libraryLabelSelector:
                    description: A label selector is a label query over a set of resources.
                      The result of matchLabels and matchExpressions are ANDed. An
                      empty label selector matches all objects. A null label selector
                      matches no objects.
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: A label selector requirement is a selector
                            that contains values, a key, and an operator that relates
                            the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: operator represents a key's relationship
                                to a set of values. Valid operators are In, NotIn,
                                Exists and DoesNotExist.
                              type: string
                            values:
                              description: values is an array of string values. If
                                the operator is In or NotIn, the values array must
                                be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced
                                during a strategic merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: matchLabels is a map of {key,value} pairs. A
                          single {key,value} in the matchLabels map is equivalent
                          to an element of matchExpressions, whose key field is "key",
                          the operator is "In", and the values array contains only
                          "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                type: object
              persistentVolumeClaim:
                description: PersistentVolumeClaim creates a PVC if you need to attach
                  one to your grafana instance.
                properties:
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    properties:
                      accessModes:
                        items:
                          type: string
                        type: array
                      dataSource:
                        description: TypedLocalObjectReference contains enough information
                          to let you locate the typed referenced object inside the
                          same namespace.
                        properties:
                          apiGroup:
                            description: APIGroup is the group for the resource being
                              referenced. If APIGroup is not specified, the specified
                              Kind must be in the core API group. For any other third-party
                              types, APIGroup is required.
                            type: string
                          kind:
                            description: Kind is the type of resource being referenced
                            type: string
                          name:
                            description: Name is the name of resource being referenced
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      dataSourceRef:
                        description: TypedLocalObjectReference contains enough information
                          to let you locate the typed referenced object inside the
                          same namespace.
                        properties:
                          apiGroup:
                            description: APIGroup is the group for the resource being
                              referenced. If APIGroup is not specified, the specified
                              Kind must be in the core API group. For any other third-party
                              types, APIGroup is required.
                            type: string
                          kind:
                            description: Kind is the type of resource being referenced
                            type: string
                          name:
                            description: Name is the name of resource being referenced
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      resources:
                        description: ResourceRequirements describes the compute resource
                          requirements.
                        properties:
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: 'Limits describes the maximum amount of compute
                              resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: 'Requests describes the minimum amount of
                              compute resources required. If Requests is omitted for
                              a container, it defaults to Limits if that is explicitly
                              specified, otherwise to an implementation-defined value.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                            type: object
                        type: object
                      selector:
                        description: A label selector is a label query over a set
                          of resources. The result of matchLabels and matchExpressions
                          are ANDed. An empty label selector matches all objects.
                          A null label selector matches no objects.
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: A label selector requirement is a selector
                                that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: operator represents a key's relationship
                                    to a set of values. Valid operators are In, NotIn,
                                    Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: values is an array of string values.
                                    If the operator is In or NotIn, the values array
                                    must be non-empty. If the operator is Exists or
                                    DoesNotExist, the values array must be empty.
                                    This array is replaced during a strategic merge
                                    patch.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: matchLabels is a map of {key,value} pairs.
                              A single {key,value} in the matchLabels map is equivalent
                              to an element of matchExpressions, whose key field is
                              "key", the operator is "In", and the values array contains
                              only "value". The requirements are ANDed.
                            type: object
                        type: object
                        x-kubernetes-map-type: atomic
                      storageClassName:
                        type: string
                      volumeMode:
                        description: PersistentVolumeMode describes how a volume is
                          intended to be consumed, either Block or Filesystem.
                        type: string
                      volumeName:
                        description: VolumeName is the binding reference to the PersistentVolume
                          backing this claim.
                        type: string
                    type: object
                type: object
              route:
                description: Route sets how the ingress object should look like with
                  your grafana instance, this only works in Openshift.
                properties:
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    properties:
                      alternateBackends:
                        items:
                          description: RouteTargetReference specifies the target that
                            resolve into endpoints. Only the 'Service' kind is allowed.
                            Use 'weight' field to emphasize one over others.
                          properties:
                            kind:
                              description: The kind of target that the route is referring
                                to. Currently, only 'Service' is allowed
                              type: string
                            name:
                              description: name of the service/target that is being
                                referred to. e.g. name of the service
                              type: string
                            weight:
                              description: weight as an integer between 0 and 256,
                                default 100, that specifies the target's relative
                                weight against other target reference objects. 0 suppresses
                                requests to this backend.
                              format: int32
                              type: integer
                          required:
                          - kind
                          - name
                          - weight
                          type: object
                        type: array
                      host:
                        type: string
                      path:
                        type: string
                      port:
                        description: RoutePort defines a port mapping from a router
                          to an endpoint in the service endpoints.
                        properties:
                          targetPort:
                            anyOf:
                            - type: integer
                            - type: string
                            description: The target port on pods selected by the service
                              this route points to. If this is a string, it will be
                              looked up as a named port in the target endpoints port
                              list. Required
                            x-kubernetes-int-or-string: true
                        required:
                        - targetPort
                        type: object
                      tls:
                        description: TLSConfig defines config used to secure a route
                          and provide termination
                        properties:
                          caCertificate:
                            description: caCertificate provides the cert authority
                              certificate contents
                            type: string
                          certificate:
                            description: certificate provides certificate contents
                            type: string
                          destinationCACertificate:
                            description: destinationCACertificate provides the contents
                              of the ca certificate of the final destination.  When
                              using reencrypt termination this file should be provided
                              in order to have routers use it for health checks on
                              the secure connection. If this field is not specified,
                              the router may provide its own destination CA and perform
                              hostname validation using the short service name (service.namespace.svc),
                              which allows infrastructure generated certificates to
                              automatically verify.
                            type: string
                          insecureEdgeTerminationPolicy:
                            description: "insecureEdgeTerminationPolicy indicates
                              the desired behavior for insecure connections to a route.
                              While each router may make its own decisions on which
                              ports to expose, this is normally port 80. \n * Allow
                              - traffic is sent to the server on the insecure port
                              (default) * Disable - no traffic is allowed on the insecure
                              port. * Redirect - clients are redirected to the secure
                              port."
                            type: string
                          key:
                            description: key provides key file contents
                            type: string
                          termination:
                            description: termination indicates termination type.
                            type: string
                        required:
                        - termination
                        type: object
                      to:
                        description: RouteTargetReference specifies the target that
                          resolve into endpoints. Only the 'Service' kind is allowed.
                          Use 'weight' field to emphasize one over others.
                        properties:
                          kind:
                            description: The kind of target that the route is referring
                              to. Currently, only 'Service' is allowed
                            type: string
                          name:
                            description: name of the service/target that is being
                              referred to. e.g. name of the service
                            type: string
                          weight:
                            description: weight as an integer between 0 and 256, default
                              100, that specifies the target's relative weight against
                              other target reference objects. 0 suppresses requests
                              to this backend.
                            format: int32
                            type: integer
                        required:
                        - kind
                        - name
                        - weight
                        type: object
                      wildcardPolicy:
                        description: WildcardPolicyType indicates the type of wildcard
                          support needed by routes.
                        type: string
                    type: object
                type: object
              service:
                description: Service sets how the service object should look like
                  with your grafana instance, contains a number of defaults.
                properties:
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    description: ServiceSpec describes the attributes that a user
                      creates on a service.
                    properties:
                      allocateLoadBalancerNodePorts:
                        description: allocateLoadBalancerNodePorts defines if NodePorts
                          will be automatically allocated for services with type LoadBalancer.  Default
                          is "true". It may be set to "false" if the cluster load-balancer
                          does not rely on NodePorts.  If the caller requests specific
                          NodePorts (by specifying a value), those requests will be
                          respected, regardless of this field. This field may only
                          be set for services with type LoadBalancer and will be cleared
                          if the type is changed to any other type.
                        type: boolean
                      clusterIP:
                        description: 'clusterIP is the IP address of the service and
                          is usually assigned randomly. If an address is specified
                          manually, is in-range (as per system configuration), and
                          is not in use, it will be allocated to the service; otherwise
                          creation of the service will fail. This field may not be
                          changed through updates unless the type field is also being
                          changed to ExternalName (which requires this field to be
                          blank) or the type field is being changed from ExternalName
                          (in which case this field may optionally be specified, as
                          describe above).  Valid values are "None", empty string
                          (""), or a valid IP address. Setting this to "None" makes
                          a "headless service" (no virtual IP), which is useful when
                          direct endpoint connections are preferred and proxying is
                          not required.  Only applies to types ClusterIP, NodePort,
                          and LoadBalancer. If this field is specified when creating
                          a Service of type ExternalName, creation will fail. This
                          field will be wiped when updating a Service to type ExternalName.
                          More info: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies'
                        type: string
                      clusterIPs:
                        description: "ClusterIPs is a list of IP addresses assigned
                          to this service, and are usually assigned randomly.  If
                          an address is specified manually, is in-range (as per system
                          configuration), and is not in use, it will be allocated
                          to the service; otherwise creation of the service will fail.
                          This field may not be changed through updates unless the
                          type field is also being changed to ExternalName (which
                          requires this field to be empty) or the type field is being
                          changed from ExternalName (in which case this field may
                          optionally be specified, as describe above).  Valid values
                          are \"None\", empty string (\"\"), or a valid IP address.
                          \ Setting this to \"None\" makes a \"headless service\"
                          (no virtual IP), which is useful when direct endpoint connections
                          are preferred and proxying is not required.  Only applies
                          to types ClusterIP, NodePort, and LoadBalancer. If this
                          field is specified when creating a Service of type ExternalName,
                          creation will fail. This field will be wiped when updating
                          a Service to type ExternalName.  If this field is not specified,
                          it will be initialized from the clusterIP field.  If this
                          field is specified, clients must ensure that clusterIPs[0]
                          and clusterIP have the same value. \n This field may hold
                          a maximum of two entries (dual-stack IPs, in either order).
                          These IPs must correspond to the values of the ipFamilies
                          field. Both clusterIPs and ipFamilies are governed by the
                          ipFamilyPolicy field. More info: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies"
                        items:
                          type: string
                        type: array
                        x-kubernetes-list-type: atomic
                      externalIPs:
                        description: externalIPs is a list of IP addresses for which
                          nodes in the cluster will also accept traffic for this service.  These
                          IPs are not managed by Kubernetes.  The user is responsible
                          for ensuring that traffic arrives at a node with this IP.  A
                          common example is external load-balancers that are not part
                          of the Kubernetes system.
                        items:
                          type: string
                        type: array
                      externalName:
                        description: externalName is the external reference that discovery
                          mechanisms will return as an alias for this service (e.g.
                          a DNS CNAME record). No proxying will be involved.  Must
                          be a lowercase RFC-1123 hostname (https://tools.ietf.org/html/rfc1123)
                          and requires `type` to be "ExternalName".
                        type: string
                      externalTrafficPolicy:
                        description: externalTrafficPolicy describes how nodes distribute
                          service traffic they receive on one of the Service's "externally-facing"
                          addresses (NodePorts, ExternalIPs, and LoadBalancer IPs).
                          If set to "Local", the proxy will configure the service
                          in a way that assumes that external load balancers will
                          take care of balancing the service traffic between nodes,
                          and so each node will deliver traffic only to the node-local
                          endpoints of the service, without masquerading the client
                          source IP. (Traffic mistakenly sent to a node with no endpoints
                          will be dropped.) The default value, "Cluster", uses the
                          standard behavior of routing to all endpoints evenly (possibly
                          modified by topology and other features). Note that traffic
                          sent to an External IP or LoadBalancer IP from within the
                          cluster will always get "Cluster" semantics, but clients
                          sending to a NodePort from within the cluster may need to
                          take traffic policy into account when picking a node.
                        type: string
                      healthCheckNodePort:
                        description: healthCheckNodePort specifies the healthcheck
                          nodePort for the service. This only applies when type is
                          set to LoadBalancer and externalTrafficPolicy is set to
                          Local. If a value is specified, is in-range, and is not
                          in use, it will be used.  If not specified, a value will
                          be automatically allocated.  External systems (e.g. load-balancers)
                          can use this port to determine if a given node holds endpoints
                          for this service or not.  If this field is specified when
                          creating a Service which does not need it, creation will
                          fail. This field will be wiped when updating a Service to
                          no longer need it (e.g. changing type). This field cannot
                          be updated once set.
                        format: int32
                        type: integer
                      internalTrafficPolicy:
                        description: InternalTrafficPolicy describes how nodes distribute
                          service traffic they receive on the ClusterIP. If set to
                          "Local", the proxy will assume that pods only want to talk
                          to endpoints of the service on the same node as the pod,
                          dropping the traffic if there are no local endpoints. The
                          default value, "Cluster", uses the standard behavior of
                          routing to all endpoints evenly (possibly modified by topology
                          and other features).
                        type: string
                      ipFamilies:
                        description: "IPFamilies is a list of IP families (e.g. IPv4,
                          IPv6) assigned to this service. This field is usually assigned
                          automatically based on cluster configuration and the ipFamilyPolicy
                          field. If this field is specified manually, the requested
                          family is available in the cluster, and ipFamilyPolicy allows
                          it, it will be used; otherwise creation of the service will
                          fail. This field is conditionally mutable: it allows for
                          adding or removing a secondary IP family, but it does not
                          allow changing the primary IP family of the Service. Valid
                          values are \"IPv4\" and \"IPv6\".  This field only applies
                          to Services of types ClusterIP, NodePort, and LoadBalancer,
                          and does apply to \"headless\" services. This field will
                          be wiped when updating a Service to type ExternalName. \n
                          This field may hold a maximum of two entries (dual-stack
                          families, in either order).  These families must correspond
                          to the values of the clusterIPs field, if specified. Both
                          clusterIPs and ipFamilies are governed by the ipFamilyPolicy
                          field."
                        items:
                          description: IPFamily represents the IP Family (IPv4 or
                            IPv6). This type is used to express the family of an IP
                            expressed by a type (e.g. service.spec.ipFamilies).
                          type: string
                        type: array
                        x-kubernetes-list-type: atomic
                      ipFamilyPolicy:
                        description: IPFamilyPolicy represents the dual-stack-ness
                          requested or required by this Service. If there is no value
                          provided, then this field will be set to SingleStack. Services
                          can be "SingleStack" (a single IP family), "PreferDualStack"
                          (two IP families on dual-stack configured clusters or a
                          single IP family on single-stack clusters), or "RequireDualStack"
                          (two IP families on dual-stack configured clusters, otherwise
                          fail). The ipFamilies and clusterIPs fields depend on the
                          value of this field. This field will be wiped when updating
                          a service to type ExternalName.
                        type: string
                      loadBalancerClass:
                        description: loadBalancerClass is the class of the load balancer
                          implementation this Service belongs to. If specified, the
                          value of this field must be a label-style identifier, with
                          an optional prefix, e.g. "internal-vip" or "example.com/internal-vip".
                          Unprefixed names are reserved for end-users. This field
                          can only be set when the Service type is 'LoadBalancer'.
                          If not set, the default load balancer implementation is
                          used, today this is typically done through the cloud provider
                          integration, but should apply for any default implementation.
                          If set, it is assumed that a load balancer implementation
                          is watching for Services with a matching class. Any default
                          load balancer implementation (e.g. cloud providers) should
                          ignore Services that set this field. This field can only
                          be set when creating or updating a Service to type 'LoadBalancer'.
                          Once set, it can not be changed. This field will be wiped
                          when a service is updated to a non 'LoadBalancer' type.
                        type: string
                      loadBalancerIP:
                        description: 'Only applies to Service Type: LoadBalancer.
                          This feature depends on whether the underlying cloud-provider
                          supports specifying the loadBalancerIP when a load balancer
                          is created. This field will be ignored if the cloud-provider
                          does not support the feature. Deprecated: This field was
                          under-specified and its meaning varies across implementations,
                          and it cannot support dual-stack. As of Kubernetes v1.24,
                          users are encouraged to use implementation-specific annotations
                          when available. This field may be removed in a future API
                          version.'
                        type: string
                      loadBalancerSourceRanges:
                        description: 'If specified and supported by the platform,
                          this will restrict traffic through the cloud-provider load-balancer
                          will be restricted to the specified client IPs. This field
                          will be ignored if the cloud-provider does not support the
                          feature." More info: https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/'
                        items:
                          type: string
                        type: array
                      ports:
                        description: 'The list of ports that are exposed by this service.
                          More info: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies'
                        items:
                          description: ServicePort contains information on service's
                            port.
                          properties:
                            appProtocol:
                              description: The application protocol for this port.
                                This field follows standard Kubernetes label syntax.
                                Un-prefixed names are reserved for IANA standard service
                                names (as per RFC-6335 and https://www.iana.org/assignments/service-names).
                                Non-standard protocols should use prefixed names such
                                as mycompany.com/my-custom-protocol.
                              type: string
                            name:
                              description: The name of this port within the service.
                                This must be a DNS_LABEL. All ports within a ServiceSpec
                                must have unique names. When considering the endpoints
                                for a Service, this must match the 'name' field in
                                the EndpointPort. Optional if only one ServicePort
                                is defined on this service.
                              type: string
                            nodePort:
                              description: 'The port on each node on which this service
                                is exposed when type is NodePort or LoadBalancer.  Usually
                                assigned by the system. If a value is specified, in-range,
                                and not in use it will be used, otherwise the operation
                                will fail.  If not specified, a port will be allocated
                                if this Service requires one.  If this field is specified
                                when creating a Service which does not need it, creation
                                will fail. This field will be wiped when updating
                                a Service to no longer need it (e.g. changing type
                                from NodePort to ClusterIP). More info: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport'
                              format: int32
                              type: integer
                            port:
                              description: The port that will be exposed by this service.
                              format: int32
                              type: integer
                            protocol:
                              default: TCP
                              description: The IP protocol for this port. Supports
                                "TCP", "UDP", and "SCTP". Default is TCP.
                              type: string
                            targetPort:
                              anyOf:
                              - type: integer
                              - type: string
                              description: 'Number or name of the port to access on
                                the pods targeted by the service. Number must be in
                                the range 1 to 65535. Name must be an IANA_SVC_NAME.
                                If this is a string, it will be looked up as a named
                                port in the target Pod''s container ports. If this
                                is not specified, the value of the ''port'' field
                                is used (an identity map). This field is ignored for
                                services with clusterIP=None, and should be omitted
                                or set equal to the ''port'' field. More info: https://kubernetes.io/docs/concepts/services-networking/service/#defining-a-service'
                              x-kubernetes-int-or-string: true
                          required:
                          - port
                          type: object
                        type: array
                        x-kubernetes-list-map-keys:
                        - port
                        - protocol
                        x-kubernetes-list-type: map
                      publishNotReadyAddresses:
                        description: publishNotReadyAddresses indicates that any agent
                          which deals with endpoints for this Service should disregard
                          any indications of ready/not-ready. The primary use case
                          for setting this field is for a StatefulSet's Headless Service
                          to propagate SRV DNS records for its Pods for the purpose
                          of peer discovery. The Kubernetes controllers that generate
                          Endpoints and EndpointSlice resources for Services interpret
                          this to mean that all endpoints are considered "ready" even
                          if the Pods themselves are not. Agents which consume only
                          Kubernetes generated endpoints through the Endpoints or
                          EndpointSlice resources can safely assume this behavior.
                        type: boolean
                      selector:
                        additionalProperties:
                          type: string
                        description: 'Route service traffic to pods with label keys
                          and values matching this selector. If empty or not present,
                          the service is assumed to have an external process managing
                          its endpoints, which Kubernetes will not modify. Only applies
                          to types ClusterIP, NodePort, and LoadBalancer. Ignored
                          if type is ExternalName. More info: https://kubernetes.io/docs/concepts/services-networking/service/'
                        type: object
                        x-kubernetes-map-type: atomic
                      sessionAffinity:
                        description: 'Supports "ClientIP" and "None". Used to maintain
                          session affinity. Enable client IP based session affinity.
                          Must be ClientIP or None. Defaults to None. More info: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies'
                        type: string
                      sessionAffinityConfig:
                        description: sessionAffinityConfig contains the configurations
                          of session affinity.
                        properties:
                          clientIP:
                            description: clientIP contains the configurations of Client
                              IP based session affinity.
                            properties:
                              timeoutSeconds:
                                description: timeoutSeconds specifies the seconds
                                  of ClientIP type session sticky time. The value
                                  must be >0 && <=86400(for 1 day) if ServiceAffinity
                                  == "ClientIP". Default value is 10800(for 3 hours).
                                format: int32
                                type: integer
                            type: object
                        type: object
                      type:
                        description: 'type determines how the Service is exposed.
                          Defaults to ClusterIP. Valid options are ExternalName, ClusterIP,
                          NodePort, and LoadBalancer. "ClusterIP" allocates a cluster-internal
                          IP address for load-balancing to endpoints. Endpoints are
                          determined by the selector or if that is not specified,
                          by manual construction of an Endpoints object or EndpointSlice
                          objects. If clusterIP is "None", no virtual IP is allocated
                          and the endpoints are published as a set of endpoints rather
                          than a virtual IP. "NodePort" builds on ClusterIP and allocates
                          a port on every node which routes to the same endpoints
                          as the clusterIP. "LoadBalancer" builds on NodePort and
                          creates an external load-balancer (if supported in the current
                          cloud) which routes to the same endpoints as the clusterIP.
                          "ExternalName" aliases this service to the specified externalName.
                          Several other fields do not apply to ExternalName services.
                          More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types'
                        type: string
                    type: object
                type: object
              serviceAccount:
                description: ServiceAccount sets how the ServiceAccount object should
                  look like with your grafana instance, contains a number of defaults.
                properties:
                  automountServiceAccountToken:
                    type: boolean
                  imagePullSecrets:
                    items:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                      x-kubernetes-map-type: atomic
                    type: array
                  metadata:
                    description: ObjectMeta contains only a [subset of the fields
                      included in k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#objectmeta-v1-meta).
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  secrets:
                    items:
                      description: "ObjectReference contains enough information to
                        let you inspect or modify the referred object. --- New uses
                        of this type are discouraged because of difficulty describing
                        its usage when embedded in APIs. 1. Ignored fields.  It includes
                        many fields which are not generally honored.  For instance,
                        ResourceVersion and FieldPath are both very rarely valid in
                        actual usage. 2. Invalid usage help.  It is impossible to
                        add specific help for individual usage.  In most embedded
                        usages, there are particular restrictions like, \"must refer
                        only to types A and B\" or \"UID not honored\" or \"name must
                        be restricted\". Those cannot be well described when embedded.
                        3. Inconsistent validation.  Because the usages are different,
                        the validation rules are different by usage, which makes it
                        hard for users to predict what will happen. 4. The fields
                        are both imprecise and overly precise.  Kind is not a precise
                        mapping to a URL. This can produce ambiguity during interpretation
                        and require a REST mapping.  In most cases, the dependency
                        is on the group,resource tuple and the version of the actual
                        struct is irrelevant. 5. We cannot easily change it.  Because
                        this type is embedded in many locations, updates to this type
                        will affect numerous schemas.  Don't make new APIs embed an
                        underspecified API type they do not control. \n Instead of
                        using this type, create a locally provided and used type that
                        is well-focused on your reference. For example, ServiceReferences
                        for admission registration: https://github.com/kubernetes/api/blob/release-1.17/admissionregistration/v1/types.go#L533
                        ."
                      properties:
                        apiVersion:
                          description: API version of the referent.
                          type: string
                        fieldPath:
                          description: 'If referring to a piece of an object instead
                            of an entire object, this string should contain a valid
                            JSON/Go field access statement, such as desiredState.manifest.containers[2].
                            For example, if the object reference is to a container
                            within a pod, this would take on a value like: "spec.containers{name}"
                            (where "name" refers to the name of the container that
                            triggered the event) or if no container name is specified
                            "spec.containers[2]" (container with index 2 in this pod).
                            This syntax is chosen only to have some well-defined way
                            of referencing a part of an object. TODO: this design
                            is not final and this field is subject to change in the
                            future.'
                          type: string
                        kind:
                          description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                          type: string
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                        namespace:
                          description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                          type: string
                        resourceVersion:
                          description: 'Specific resourceVersion to which this reference
                            is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                          type: string
                        uid:
                          description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                          type: string
                      type: object
                      x-kubernetes-map-type: atomic
                    type: array
                type: object
            type: object
          status:
            description: GrafanaStatus defines the observed state of Grafana
            properties:
              adminUrl:
                type: string
              dashboards:
                items:
                  type: string
                type: array
              datasources:
                items:
                  type: string
                type: array
              folders:
                items:
                  type: string
                type: array
              lastMessage:
                type: string
              stage:
                type: string
              stageStatus:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: issuers.cert-manager.io
spec:
  group: cert-manager.io
  names:
    categories:
    - cert-manager
    kind: Issuer
    listKind: IssuerList
    plural: issuers
    singular: issuer
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].message
      name: Status
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: An Issuer represents a certificate issuing authority which can
          be referenced as part of `issuerRef` fields. It is scoped to a single namespace
          and can therefore only be referenced by resources within the same namespace.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Desired state of the Issuer resource.
            properties:
              acme:
                description: ACME configures this issuer to communicate with a RFC8555
                  (ACME) server to obtain signed x509 certificates.
                properties:
                  caBundle:
                    description: Base64-encoded bundle of PEM CAs which can be used
                      to validate the certificate chain presented by the ACME server.
                      Mutually exclusive with SkipTLSVerify; prefer using CABundle
                      to prevent various kinds of security vulnerabilities. If CABundle
                      and SkipTLSVerify are unset, the system certificate bundle inside
                      the container is used to validate the TLS connection.
                    format: byte
                    type: string
                  disableAccountKeyGeneration:
                    description: Enables or disables generating a new ACME account
                      key. If true, the Issuer resource will *not* request a new account
                      but will expect the account key to be supplied via an existing
                      secret. If false, the cert-manager system will generate a new
                      ACME account key for the Issuer. Defaults to false.
                    type: boolean
                  email:
                    description: Email is the email address to be associated with
                      the ACME account. This field is optional, but it is strongly
                      recommended to be set. It will be used to contact you in case
                      of issues with your account or certificates, including expiry
                      notification emails. This field may be updated after the account
                      is initially registered.
                    type: string
                  enableDurationFeature:
                    description: Enables requesting a Not After date on certificates
                      that matches the duration of the certificate. This is not supported
                      by all ACME servers like Let's Encrypt. If set to true when
                      the ACME server does not support it it will create an error
                      on the Order. Defaults to false.
                    type: boolean
                  externalAccountBinding:
                    description: ExternalAccountBinding is a reference to a CA external
                      account of the ACME server. If set, upon registration cert-manager
                      will attempt to associate the given external account credentials
                      with the registered ACME account.
                    properties:
                      keyAlgorithm:
                        description: 'Deprecated: keyAlgorithm field exists for historical
                          compatibility reasons and should not be used. The algorithm
                          is now hardcoded to HS256 in golang/x/crypto/acme.'
                        enum:
                        - HS256
                        - HS384
                        - HS512
                        type: string
                      keyID:
                        description: keyID is the ID of the CA key that the External
                          Account is bound to.
                        type: string
                      keySecretRef:
                        description: keySecretRef is a Secret Key Selector referencing
                          a data item in a Kubernetes Secret which holds the symmetric
                          MAC key of the External Account Binding. The `key` is the
                          index string that is paired with the key data in the Secret
                          and should not be confused with the key data itself, or
                          indeed with the External Account Binding keyID above. The
                          secret key stored in the Secret **must** be un-padded, base64
                          URL encoded data.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - keyID
                    - keySecretRef
                    type: object
                  preferredChain:
                    description: 'PreferredChain is the chain to use if the ACME server
                      outputs multiple. PreferredChain is no guarantee that this one
                      gets delivered by the ACME endpoint. For example, for Let''s
                      Encrypt''s DST crosssign you would use: "DST Root CA X3" or
                      "ISRG Root X1" for the newer Let''s Encrypt root CA. This value
                      picks the first certificate bundle in the ACME alternative chains
                      that has a certificate with this value as its issuer''s CN'
                    maxLength: 64
                    type: string
                  privateKeySecretRef:
                    description: PrivateKey is the name of a Kubernetes Secret resource
                      that will be used to store the automatically generated ACME
                      account private key. Optionally, a `key` may be specified to
                      select a specific entry within the named Secret resource. If
                      `key` is not specified, a default of `tls.key` will be used.
                    properties:
                      key:
                        description: The key of the entry in the Secret resource's
                          `data` field to be used. Some instances of this field may
                          be defaulted, in others it may be required.
                        type: string
                      name:
                        description: 'Name of the resource being referred to. More
                          info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                        type: string
                    required:
                    - name
                    type: object
                  server:
                    description: 'Server is the URL used to access the ACME server''s
                      ''directory'' endpoint. For example, for Let''s Encrypt''s staging
                      endpoint, you would use: "https://acme-staging-v02.api.letsencrypt.org/directory".
                      Only ACME v2 endpoints (i.e. RFC 8555) are supported.'
                    type: string
                  skipTLSVerify:
                    description: 'INSECURE: Enables or disables validation of the
                      ACME server TLS certificate. If true, requests to the ACME server
                      will not have the TLS certificate chain validated. Mutually
                      exclusive with CABundle; prefer using CABundle to prevent various
                      kinds of security vulnerabilities. Only enable this option in
                      development environments. If CABundle and SkipTLSVerify are
                      unset, the system certificate bundle inside the container is
                      used to validate the TLS connection. Defaults to false.'
                    type: boolean
                  solvers:
                    description: 'Solvers is a list of challenge solvers that will
                      be used to solve ACME challenges for the matching domains. Solver
                      configurations must be provided in order to obtain certificates
                      from an ACME server. For more information, see: https://cert-manager.io/docs/configuration/acme/'
                    items:
                      description: An ACMEChallengeSolver describes how to solve ACME
                        challenges for the issuer it is part of. A selector may be
                        provided to use different solving strategies for different
                        DNS names. Only one of HTTP01 or DNS01 must be provided.
                      properties:
                        dns01:
                          description: Configures cert-manager to attempt to complete
                            authorizations by performing the DNS01 challenge flow.
                          properties:
                            acmeDNS:
                              description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns)
                                API to manage DNS01 challenge records.
                              properties:
                                accountSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                host:
                                  type: string
                              required:
                              - accountSecretRef
                              - host
                              type: object
                            akamai:
                              description: Use the Akamai DNS zone management API
                                to manage DNS01 challenge records.
                              properties:
                                accessTokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                clientSecretSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                clientTokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                serviceConsumerDomain:
                                  type: string
                              required:
                              - accessTokenSecretRef
                              - clientSecretSecretRef
                              - clientTokenSecretRef
                              - serviceConsumerDomain
                              type: object
                            azureDNS:
                              description: Use the Microsoft Azure DNS API to manage
                                DNS01 challenge records.
                              properties:
                                clientID:
                                  description: if both this and ClientSecret are left
                                    unset MSI will be used
                                  type: string
                                clientSecretSecretRef:
                                  description: if both this and ClientID are left
                                    unset MSI will be used
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                environment:
                                  description: name of the Azure environment (default
                                    AzurePublicCloud)
                                  enum:
                                  - AzurePublicCloud
                                  - AzureChinaCloud
                                  - AzureGermanCloud
                                  - AzureUSGovernmentCloud
                                  type: string
                                hostedZoneName:
                                  description: name of the DNS zone that should be
                                    used
                                  type: string
                                managedIdentity:
                                  description: managed identity configuration, can
                                    not be used at the same time as clientID, clientSecretSecretRef
                                    or tenantID
                                  properties:
                                    clientID:
                                      description: client ID of the managed identity,
                                        can not be used at the same time as resourceID
                                      type: string
                                    resourceID:
                                      description: resource ID of the managed identity,
                                        can not be used at the same time as clientID
                                      type: string
                                  type: object
                                resourceGroupName:
                                  description: resource group the DNS zone is located
                                    in
                                  type: string
                                subscriptionID:
                                  description: ID of the Azure subscription
                                  type: string
                                tenantID:
                                  description: when specifying ClientID and ClientSecret
                                    then this field is also needed
                                  type: string
                              required:
                              - resourceGroupName
                              - subscriptionID
                              type: object
                            cloudDNS:
                              description: Use the Google Cloud DNS API to manage
                                DNS01 challenge records.
                              properties:
                                hostedZoneName:
                                  description: HostedZoneName is an optional field
                                    that tells cert-manager in which Cloud DNS zone
                                    the challenge record has to be created. If left
                                    empty cert-manager will automatically choose a
                                    zone.
                                  type: string
                                project:
                                  type: string
                                serviceAccountSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - project
                              type: object
                            cloudflare:
                              description: Use the Cloudflare API to manage DNS01
                                challenge records.
                              properties:
                                apiKeySecretRef:
                                  description: 'API key to use to authenticate with
                                    Cloudflare. Note: using an API token to authenticate
                                    is now the recommended method as it allows greater
                                    control of permissions.'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                apiTokenSecretRef:
                                  description: API token used to authenticate with
                                    Cloudflare.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                email:
                                  description: Email of the account, only required
                                    when using API key based authentication.
                                  type: string
                              type: object
                            cnameStrategy:
                              description: CNAMEStrategy configures how the DNS01
                                provider should handle CNAME records when found in
                                DNS zones.
                              enum:
                              - None
                              - Follow
                              type: string
                            digitalocean:
                              description: Use the DigitalOcean DNS API to manage
                                DNS01 challenge records.
                              properties:
                                tokenSecretRef:
                                  description: A reference to a specific 'key' within
                                    a Secret resource. In some instances, `key` is
                                    a required field.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - tokenSecretRef
                              type: object
                            rfc2136:
                              description: Use RFC2136 ("Dynamic Updates in the Domain
                                Name System") (https://datatracker.ietf.org/doc/rfc2136/)
                                to manage DNS01 challenge records.
                              properties:
                                nameserver:
                                  description: The IP address or hostname of an authoritative
                                    DNS server supporting RFC2136 in the form host:port.
                                    If the host is an IPv6 address it must be enclosed
                                    in square brackets (e.g [2001:db8::1]) ; port
                                    is optional. This field is required.
                                  type: string
                                tsigAlgorithm:
                                  description: 'The TSIG Algorithm configured in the
                                    DNS supporting RFC2136. Used only when ``tsigSecretSecretRef``
                                    and ``tsigKeyName`` are defined. Supported values
                                    are (case-insensitive): ``HMACMD5`` (default),
                                    ``HMACSHA1``, ``HMACSHA256`` or ``HMACSHA512``.'
                                  type: string
                                tsigKeyName:
                                  description: The TSIG Key name configured in the
                                    DNS. If ``tsigSecretSecretRef`` is defined, this
                                    field is required.
                                  type: string
                                tsigSecretSecretRef:
                                  description: The name of the secret containing the
                                    TSIG value. If ``tsigKeyName`` is defined, this
                                    field is required.
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - nameserver
                              type: object
                            route53:
                              description: Use the AWS Route53 API to manage DNS01
                                challenge records.
                              properties:
                                accessKeyID:
                                  description: 'The AccessKeyID is used for authentication.
                                    Cannot be set when SecretAccessKeyID is set. If
                                    neither the Access Key nor Key ID are set, we
                                    fall-back to using env vars, shared credentials
                                    file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  type: string
                                accessKeyIDSecretRef:
                                  description: 'The SecretAccessKey is used for authentication.
                                    If set, pull the AWS access key ID from a key
                                    within a Kubernetes Secret. Cannot be set when
                                    AccessKeyID is set. If neither the Access Key
                                    nor Key ID are set, we fall-back to using env
                                    vars, shared credentials file or AWS Instance
                                    metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                                hostedZoneID:
                                  description: If set, the provider will manage only
                                    this zone in Route53 and will not do an lookup
                                    using the route53:ListHostedZonesByName api call.
                                  type: string
                                region:
                                  description: Always set the region when using AccessKeyID
                                    and SecretAccessKey
                                  type: string
                                role:
                                  description: Role is a Role ARN which the Route53
                                    provider will assume using either the explicit
                                    credentials AccessKeyID/SecretAccessKey or the
                                    inferred credentials from environment variables,
                                    shared credentials file or AWS Instance metadata
                                  type: string
                                secretAccessKeySecretRef:
                                  description: 'The SecretAccessKey is used for authentication.
                                    If neither the Access Key nor Key ID are set,
                                    we fall-back to using env vars, shared credentials
                                    file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                  properties:
                                    key:
                                      description: The key of the entry in the Secret
                                        resource's `data` field to be used. Some instances
                                        of this field may be defaulted, in others
                                        it may be required.
                                      type: string
                                    name:
                                      description: 'Name of the resource being referred
                                        to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - region
                              type: object
                            webhook:
                              description: Configure an external webhook based DNS01
                                challenge solver to manage DNS01 challenge records.
                              properties:
                                config:
                                  description: Additional configuration that should
                                    be passed to the webhook apiserver when challenges
                                    are processed. This can contain arbitrary JSON
                                    data. Secret values should not be specified in
                                    this stanza. If secret values are needed (e.g.
                                    credentials for a DNS service), you should use
                                    a SecretKeySelector to reference a Secret resource.
                                    For details on the schema of this field, consult
                                    the webhook provider implementation's documentation.
                                  x-kubernetes-preserve-unknown-fields: true
                                groupName:
                                  description: The API group name that should be used
                                    when POSTing ChallengePayload resources to the
                                    webhook apiserver. This should be the same as
                                    the GroupName specified in the webhook provider
                                    implementation.
                                  type: string
                                solverName:
                                  description: The name of the solver to use, as defined
                                    in the webhook provider implementation. This will
                                    typically be the name of the provider, e.g. 'cloudflare'.
                                  type: string
                              required:
                              - groupName
                              - solverName
                              type: object
                          type: object
                        http01:
                          description: Configures cert-manager to attempt to complete
                            authorizations by performing the HTTP01 challenge flow.
                            It is not possible to obtain certificates for wildcard
                            domain names (e.g. `*.example.com`) using the HTTP01 challenge
                            mechanism.
                          properties:
                            gatewayHTTPRoute:
                              description: The Gateway API is a sig-network community
                                API that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/).
                                The Gateway solver will create HTTPRoutes with the
                                specified labels in the same namespace as the challenge.
                                This solver is experimental, and fields / behaviour
                                may change in the future.
                              properties:
                                labels:
                                  additionalProperties:
                                    type: string
                                  description: Custom labels that will be applied
                                    to HTTPRoutes created by cert-manager while solving
                                    HTTP-01 challenges.
                                  type: object
                                parentRefs:
                                  description: 'When solving an HTTP-01 challenge,
                                    cert-manager creates an HTTPRoute. cert-manager
                                    needs to know which parentRefs should be used
                                    when creating the HTTPRoute. Usually, the parentRef
                                    references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                                  items:
                                    description: "ParentReference identifies an API
                                      object (usually a Gateway) that can be considered
                                      a parent of this resource (usually a route).
                                      The only kind of parent resource with \"Core\"
                                      support is Gateway. This API may be extended
                                      in the future to support additional kinds of
                                      parent resources, such as HTTPRoute. \n The
                                      API object must be valid in the cluster; the
                                      Group and Kind must be registered in the cluster
                                      for this reference to be valid."
                                    properties:
                                      group:
                                        default: gateway.networking.k8s.io
                                        description: "Group is the group of the referent.
                                          When unspecified, \"gateway.networking.k8s.io\"
                                          is inferred. To set the core API group (such
                                          as for a \"Service\" kind referent), Group
                                          must be explicitly set to \"\" (empty string).
                                          \n Support: Core"
                                        maxLength: 253
                                        pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        type: string
                                      kind:
                                        default: Gateway
                                        description: "Kind is kind of the referent.
                                          \n Support: Core (Gateway) \n Support: Implementation-specific
                                          (Other Resources)"
                                        maxLength: 63
                                        minLength: 1
                                        pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                        type: string
                                      name:
                                        description: "Name is the name of the referent.
                                          \n Support: Core"
                                        maxLength: 253
                                        minLength: 1
                                        type: string
                                      namespace:
                                        description: "Namespace is the namespace of
                                          the referent. When unspecified, this refers
                                          to the local namespace of the Route. \n
                                          Note that there are specific rules for ParentRefs
                                          which cross namespace boundaries. Cross-namespace
                                          references are only valid if they are explicitly
                                          allowed by something in the namespace they
                                          are referring to. For example: Gateway has
                                          the AllowedRoutes field, and ReferenceGrant
                                          provides a generic way to enable any other
                                          kind of cross-namespace reference. \n Support:
                                          Core"
                                        maxLength: 63
                                        minLength: 1
                                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                        type: string
                                      port:
                                        description: "Port is the network port this
                                          Route targets. It can be interpreted differently
                                          based on the type of parent resource. \n
                                          When the parent resource is a Gateway, this
                                          targets all listeners listening on the specified
                                          port that also support this kind of Route(and
                                          select this Route). It's not recommended
                                          to set `Port` unless the networking behaviors
                                          specified in a Route must apply to a specific
                                          port as opposed to a listener(s) whose port(s)
                                          may be changed. When both Port and SectionName
                                          are specified, the name and port of the
                                          selected listener must match both specified
                                          values. \n Implementations MAY choose to
                                          support other parent resources. Implementations
                                          supporting other types of parent resources
                                          MUST clearly document how/if Port is interpreted.
                                          \n For the purpose of status, an attachment
                                          is considered successful as long as the
                                          parent resource accepts it partially. For
                                          example, Gateway listeners can restrict
                                          which Routes can attach to them by Route
                                          kind, namespace, or hostname. If 1 of 2
                                          Gateway listeners accept attachment from
                                          the referencing Route, the Route MUST be
                                          considered successfully attached. If no
                                          Gateway listeners accept attachment from
                                          this Route, the Route MUST be considered
                                          detached from the Gateway. \n Support: Extended
                                          \n <gateway:experimental>"
                                        format: int32
                                        maximum: 65535
                                        minimum: 1
                                        type: integer
                                      sectionName:
                                        description: "SectionName is the name of a
                                          section within the target resource. In the
                                          following resources, SectionName is interpreted
                                          as the following: \n * Gateway: Listener
                                          Name. When both Port (experimental) and
                                          SectionName are specified, the name and
                                          port of the selected listener must match
                                          both specified values. \n Implementations
                                          MAY choose to support attaching Routes to
                                          other resources. If that is the case, they
                                          MUST clearly document how SectionName is
                                          interpreted. \n When unspecified (empty
                                          string), this will reference the entire
                                          resource. For the purpose of status, an
                                          attachment is considered successful if at
                                          least one section in the parent resource
                                          accepts it. For example, Gateway listeners
                                          can restrict which Routes can attach to
                                          them by Route kind, namespace, or hostname.
                                          If 1 of 2 Gateway listeners accept attachment
                                          from the referencing Route, the Route MUST
                                          be considered successfully attached. If
                                          no Gateway listeners accept attachment from
                                          this Route, the Route MUST be considered
                                          detached from the Gateway. \n Support: Core"
                                        maxLength: 253
                                        minLength: 1
                                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  type: array
                                serviceType:
                                  description: Optional service type for Kubernetes
                                    solver service. Supported values are NodePort
                                    or ClusterIP. If unset, defaults to NodePort.
                                  type: string
                              type: object
                            ingress:
                              description: The ingress based HTTP01 challenge solver
                                will solve challenges by creating or modifying Ingress
                                resources in order to route requests for '/.well-known/acme-challenge/XYZ'
                                to 'challenge solver' pods that are provisioned by
                                cert-manager for each Challenge to be completed.
                              properties:
                                class:
                                  description: This field configures the annotation
                                    `kubernetes.io/ingress.class` when creating Ingress
                                    resources to solve ACME challenges that use this
                                    challenge solver. Only one of `class`, `name`
                                    or `ingressClassName` may be specified.
                                  type: string
                                ingressClassName:
                                  description: This field configures the field `ingressClassName`
                                    on the created Ingress resources used to solve
                                    ACME challenges that use this challenge solver.
                                    This is the recommended way of configuring the
                                    ingress class. Only one of `class`, `name` or
                                    `ingressClassName` may be specified.
                                  type: string
                                ingressTemplate:
                                  description: Optional ingress template used to configure
                                    the ACME challenge solver ingress used for HTTP01
                                    challenges.
                                  properties:
                                    metadata:
                                      description: ObjectMeta overrides for the ingress
                                        used to solve HTTP01 challenges. Only the
                                        'labels' and 'annotations' fields may be set.
                                        If labels or annotations overlap with in-built
                                        values, the values here will override the
                                        in-built values.
                                      properties:
                                        annotations:
                                          additionalProperties:
                                            type: string
                                          description: Annotations that should be
                                            added to the created ACME HTTP01 solver
                                            ingress.
                                          type: object
                                        labels:
                                          additionalProperties:
                                            type: string
                                          description: Labels that should be added
                                            to the created ACME HTTP01 solver ingress.
                                          type: object
                                      type: object
                                  type: object
                                name:
                                  description: The name of the ingress resource that
                                    should have ACME challenge solving routes inserted
                                    into it in order to solve HTTP01 challenges. This
                                    is typically used in conjunction with ingress
                                    controllers like ingress-gce, which maintains
                                    a 1:1 mapping between external IPs and ingress
                                    resources. Only one of `class`, `name` or `ingressClassName`
                                    may be specified.
                                  type: string
                                podTemplate:
                                  description: Optional pod template used to configure
                                    the ACME challenge solver pods used for HTTP01
                                    challenges.
                                  properties:
                                    metadata:
                                      description: ObjectMeta overrides for the pod
                                        used to solve HTTP01 challenges. Only the
                                        'labels' and 'annotations' fields may be set.
                                        If labels or annotations overlap with in-built
                                        values, the values here will override the
                                        in-built values.
                                      properties:
                                        annotations:
                                          additionalProperties:
                                            type: string
                                          description: Annotations that should be
                                            added to the create ACME HTTP01 solver
                                            pods.
                                          type: object
                                        labels:
                                          additionalProperties:
                                            type: string
                                          description: Labels that should be added
                                            to the created ACME HTTP01 solver pods.
                                          type: object
                                      type: object
                                    spec:
                                      description: PodSpec defines overrides for the
                                        HTTP01 challenge solver pod. Check ACMEChallengeSolverHTTP01IngressPodSpec
                                        to find out currently supported fields. All
                                        other fields will be ignored.
                                      properties:
                                        affinity:
                                          description: If specified, the pod's scheduling
                                            constraints
                                          properties:
                                            nodeAffinity:
                                              description: Describes node affinity
                                                scheduling rules for the pod.
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the affinity expressions
                                                    specified by this field, but it
                                                    may choose a node that violates
                                                    one or more of the expressions.
                                                    The node that is most preferred
                                                    is the one with the greatest sum
                                                    of weights, i.e. for each node
                                                    that meets all of the scheduling
                                                    requirements (resource request,
                                                    requiredDuringScheduling affinity
                                                    expressions, etc.), compute a
                                                    sum by iterating through the elements
                                                    of this field and adding "weight"
                                                    to the sum if the node matches
                                                    the corresponding matchExpressions;
                                                    the node(s) with the highest sum
                                                    are the most preferred.
                                                  items:
                                                    description: An empty preferred
                                                      scheduling term matches all
                                                      objects with implicit weight
                                                      0 (i.e. it's a no-op). A null
                                                      preferred scheduling term matches
                                                      no objects (i.e. is also a no-op).
                                                    properties:
                                                      preference:
                                                        description: A node selector
                                                          term, associated with the
                                                          corresponding weight.
                                                        properties:
                                                          matchExpressions:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's labels.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchFields:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's fields.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      weight:
                                                        description: Weight associated
                                                          with matching the corresponding
                                                          nodeSelectorTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - preference
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the affinity requirements
                                                    specified by this field are not
                                                    met at scheduling time, the pod
                                                    will not be scheduled onto the
                                                    node. If the affinity requirements
                                                    specified by this field cease
                                                    to be met at some point during
                                                    pod execution (e.g. due to an
                                                    update), the system may or may
                                                    not try to eventually evict the
                                                    pod from its node.
                                                  properties:
                                                    nodeSelectorTerms:
                                                      description: Required. A list
                                                        of node selector terms. The
                                                        terms are ORed.
                                                      items:
                                                        description: A null or empty
                                                          node selector term matches
                                                          no objects. The requirements
                                                          of them are ANDed. The TopologySelectorTerm
                                                          type implements a subset
                                                          of the NodeSelectorTerm.
                                                        properties:
                                                          matchExpressions:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's labels.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchFields:
                                                            description: A list of
                                                              node selector requirements
                                                              by node's fields.
                                                            items:
                                                              description: A node
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: The
                                                                    label key that
                                                                    the selector applies
                                                                    to.
                                                                  type: string
                                                                operator:
                                                                  description: Represents
                                                                    a key's relationship
                                                                    to a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists, DoesNotExist.
                                                                    Gt, and Lt.
                                                                  type: string
                                                                values:
                                                                  description: An
                                                                    array of string
                                                                    values. If the
                                                                    operator is In
                                                                    or NotIn, the
                                                                    values array must
                                                                    be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    If the operator
                                                                    is Gt or Lt, the
                                                                    values array must
                                                                    have a single
                                                                    element, which
                                                                    will be interpreted
                                                                    as an integer.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      type: array
                                                  required:
                                                  - nodeSelectorTerms
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                              type: object
                                            podAffinity:
                                              description: Describes pod affinity
                                                scheduling rules (e.g. co-locate this
                                                pod in the same node, zone, etc. as
                                                some other pod(s)).
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the affinity expressions
                                                    specified by this field, but it
                                                    may choose a node that violates
                                                    one or more of the expressions.
                                                    The node that is most preferred
                                                    is the one with the greatest sum
                                                    of weights, i.e. for each node
                                                    that meets all of the scheduling
                                                    requirements (resource request,
                                                    requiredDuringScheduling affinity
                                                    expressions, etc.), compute a
                                                    sum by iterating through the elements
                                                    of this field and adding "weight"
                                                    to the sum if the node has pods
                                                    which matches the corresponding
                                                    podAffinityTerm; the node(s) with
                                                    the highest sum are the most preferred.
                                                  items:
                                                    description: The weights of all
                                                      of the matched WeightedPodAffinityTerm
                                                      fields are added per-node to
                                                      find the most preferred node(s)
                                                    properties:
                                                      podAffinityTerm:
                                                        description: Required. A pod
                                                          affinity term, associated
                                                          with the corresponding weight.
                                                        properties:
                                                          labelSelector:
                                                            description: A label query
                                                              over a set of resources,
                                                              in this case pods.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaceSelector:
                                                            description: A label query
                                                              over the set of namespaces
                                                              that the term applies
                                                              to. The term is applied
                                                              to the union of the
                                                              namespaces selected
                                                              by this field and the
                                                              ones listed in the namespaces
                                                              field. null selector
                                                              and null or empty namespaces
                                                              list means "this pod's
                                                              namespace". An empty
                                                              selector ({}) matches
                                                              all namespaces.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaces:
                                                            description: namespaces
                                                              specifies a static list
                                                              of namespace names that
                                                              the term applies to.
                                                              The term is applied
                                                              to the union of the
                                                              namespaces listed in
                                                              this field and the ones
                                                              selected by namespaceSelector.
                                                              null or empty namespaces
                                                              list and null namespaceSelector
                                                              means "this pod's namespace".
                                                            items:
                                                              type: string
                                                            type: array
                                                          topologyKey:
                                                            description: This pod
                                                              should be co-located
                                                              (affinity) or not co-located
                                                              (anti-affinity) with
                                                              the pods matching the
                                                              labelSelector in the
                                                              specified namespaces,
                                                              where co-located is
                                                              defined as running on
                                                              a node whose value of
                                                              the label with key topologyKey
                                                              matches that of any
                                                              node on which any of
                                                              the selected pods is
                                                              running. Empty topologyKey
                                                              is not allowed.
                                                            type: string
                                                        required:
                                                        - topologyKey
                                                        type: object
                                                      weight:
                                                        description: weight associated
                                                          with matching the corresponding
                                                          podAffinityTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - podAffinityTerm
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the affinity requirements
                                                    specified by this field are not
                                                    met at scheduling time, the pod
                                                    will not be scheduled onto the
                                                    node. If the affinity requirements
                                                    specified by this field cease
                                                    to be met at some point during
                                                    pod execution (e.g. due to a pod
                                                    label update), the system may
                                                    or may not try to eventually evict
                                                    the pod from its node. When there
                                                    are multiple elements, the lists
                                                    of nodes corresponding to each
                                                    podAffinityTerm are intersected,
                                                    i.e. all terms must be satisfied.
                                                  items:
                                                    description: Defines a set of
                                                      pods (namely those matching
                                                      the labelSelector relative to
                                                      the given namespace(s)) that
                                                      this pod should be co-located
                                                      (affinity) or not co-located
                                                      (anti-affinity) with, where
                                                      co-located is defined as running
                                                      on a node whose value of the
                                                      label with key <topologyKey>
                                                      matches that of any node on
                                                      which a pod of the set of pods
                                                      is running
                                                    properties:
                                                      labelSelector:
                                                        description: A label query
                                                          over a set of resources,
                                                          in this case pods.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query
                                                          over the set of namespaces
                                                          that the term applies to.
                                                          The term is applied to the
                                                          union of the namespaces
                                                          selected by this field and
                                                          the ones listed in the namespaces
                                                          field. null selector and
                                                          null or empty namespaces
                                                          list means "this pod's namespace".
                                                          An empty selector ({}) matches
                                                          all namespaces.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies
                                                          a static list of namespace
                                                          names that the term applies
                                                          to. The term is applied
                                                          to the union of the namespaces
                                                          listed in this field and
                                                          the ones selected by namespaceSelector.
                                                          null or empty namespaces
                                                          list and null namespaceSelector
                                                          means "this pod's namespace".
                                                        items:
                                                          type: string
                                                        type: array
                                                      topologyKey:
                                                        description: This pod should
                                                          be co-located (affinity)
                                                          or not co-located (anti-affinity)
                                                          with the pods matching the
                                                          labelSelector in the specified
                                                          namespaces, where co-located
                                                          is defined as running on
                                                          a node whose value of the
                                                          label with key topologyKey
                                                          matches that of any node
                                                          on which any of the selected
                                                          pods is running. Empty topologyKey
                                                          is not allowed.
                                                        type: string
                                                    required:
                                                    - topologyKey
                                                    type: object
                                                  type: array
                                              type: object
                                            podAntiAffinity:
                                              description: Describes pod anti-affinity
                                                scheduling rules (e.g. avoid putting
                                                this pod in the same node, zone, etc.
                                                as some other pod(s)).
                                              properties:
                                                preferredDuringSchedulingIgnoredDuringExecution:
                                                  description: The scheduler will
                                                    prefer to schedule pods to nodes
                                                    that satisfy the anti-affinity
                                                    expressions specified by this
                                                    field, but it may choose a node
                                                    that violates one or more of the
                                                    expressions. The node that is
                                                    most preferred is the one with
                                                    the greatest sum of weights, i.e.
                                                    for each node that meets all of
                                                    the scheduling requirements (resource
                                                    request, requiredDuringScheduling
                                                    anti-affinity expressions, etc.),
                                                    compute a sum by iterating through
                                                    the elements of this field and
                                                    adding "weight" to the sum if
                                                    the node has pods which matches
                                                    the corresponding podAffinityTerm;
                                                    the node(s) with the highest sum
                                                    are the most preferred.
                                                  items:
                                                    description: The weights of all
                                                      of the matched WeightedPodAffinityTerm
                                                      fields are added per-node to
                                                      find the most preferred node(s)
                                                    properties:
                                                      podAffinityTerm:
                                                        description: Required. A pod
                                                          affinity term, associated
                                                          with the corresponding weight.
                                                        properties:
                                                          labelSelector:
                                                            description: A label query
                                                              over a set of resources,
                                                              in this case pods.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaceSelector:
                                                            description: A label query
                                                              over the set of namespaces
                                                              that the term applies
                                                              to. The term is applied
                                                              to the union of the
                                                              namespaces selected
                                                              by this field and the
                                                              ones listed in the namespaces
                                                              field. null selector
                                                              and null or empty namespaces
                                                              list means "this pod's
                                                              namespace". An empty
                                                              selector ({}) matches
                                                              all namespaces.
                                                            properties:
                                                              matchExpressions:
                                                                description: matchExpressions
                                                                  is a list of label
                                                                  selector requirements.
                                                                  The requirements
                                                                  are ANDed.
                                                                items:
                                                                  description: A label
                                                                    selector requirement
                                                                    is a selector
                                                                    that contains
                                                                    values, a key,
                                                                    and an operator
                                                                    that relates the
                                                                    key and values.
                                                                  properties:
                                                                    key:
                                                                      description: key
                                                                        is the label
                                                                        key that the
                                                                        selector applies
                                                                        to.
                                                                      type: string
                                                                    operator:
                                                                      description: operator
                                                                        represents
                                                                        a key's relationship
                                                                        to a set of
                                                                        values. Valid
                                                                        operators
                                                                        are In, NotIn,
                                                                        Exists and
                                                                        DoesNotExist.
                                                                      type: string
                                                                    values:
                                                                      description: values
                                                                        is an array
                                                                        of string
                                                                        values. If
                                                                        the operator
                                                                        is In or NotIn,
                                                                        the values
                                                                        array must
                                                                        be non-empty.
                                                                        If the operator
                                                                        is Exists
                                                                        or DoesNotExist,
                                                                        the values
                                                                        array must
                                                                        be empty.
                                                                        This array
                                                                        is replaced
                                                                        during a strategic
                                                                        merge patch.
                                                                      items:
                                                                        type: string
                                                                      type: array
                                                                  required:
                                                                  - key
                                                                  - operator
                                                                  type: object
                                                                type: array
                                                              matchLabels:
                                                                additionalProperties:
                                                                  type: string
                                                                description: matchLabels
                                                                  is a map of {key,value}
                                                                  pairs. A single
                                                                  {key,value} in the
                                                                  matchLabels map
                                                                  is equivalent to
                                                                  an element of matchExpressions,
                                                                  whose key field
                                                                  is "key", the operator
                                                                  is "In", and the
                                                                  values array contains
                                                                  only "value". The
                                                                  requirements are
                                                                  ANDed.
                                                                type: object
                                                            type: object
                                                            x-kubernetes-map-type: atomic
                                                          namespaces:
                                                            description: namespaces
                                                              specifies a static list
                                                              of namespace names that
                                                              the term applies to.
                                                              The term is applied
                                                              to the union of the
                                                              namespaces listed in
                                                              this field and the ones
                                                              selected by namespaceSelector.
                                                              null or empty namespaces
                                                              list and null namespaceSelector
                                                              means "this pod's namespace".
                                                            items:
                                                              type: string
                                                            type: array
                                                          topologyKey:
                                                            description: This pod
                                                              should be co-located
                                                              (affinity) or not co-located
                                                              (anti-affinity) with
                                                              the pods matching the
                                                              labelSelector in the
                                                              specified namespaces,
                                                              where co-located is
                                                              defined as running on
                                                              a node whose value of
                                                              the label with key topologyKey
                                                              matches that of any
                                                              node on which any of
                                                              the selected pods is
                                                              running. Empty topologyKey
                                                              is not allowed.
                                                            type: string
                                                        required:
                                                        - topologyKey
                                                        type: object
                                                      weight:
                                                        description: weight associated
                                                          with matching the corresponding
                                                          podAffinityTerm, in the
                                                          range 1-100.
                                                        format: int32
                                                        type: integer
                                                    required:
                                                    - podAffinityTerm
                                                    - weight
                                                    type: object
                                                  type: array
                                                requiredDuringSchedulingIgnoredDuringExecution:
                                                  description: If the anti-affinity
                                                    requirements specified by this
                                                    field are not met at scheduling
                                                    time, the pod will not be scheduled
                                                    onto the node. If the anti-affinity
                                                    requirements specified by this
                                                    field cease to be met at some
                                                    point during pod execution (e.g.
                                                    due to a pod label update), the
                                                    system may or may not try to eventually
                                                    evict the pod from its node. When
                                                    there are multiple elements, the
                                                    lists of nodes corresponding to
                                                    each podAffinityTerm are intersected,
                                                    i.e. all terms must be satisfied.
                                                  items:
                                                    description: Defines a set of
                                                      pods (namely those matching
                                                      the labelSelector relative to
                                                      the given namespace(s)) that
                                                      this pod should be co-located
                                                      (affinity) or not co-located
                                                      (anti-affinity) with, where
                                                      co-located is defined as running
                                                      on a node whose value of the
                                                      label with key <topologyKey>
                                                      matches that of any node on
                                                      which a pod of the set of pods
                                                      is running
                                                    properties:
                                                      labelSelector:
                                                        description: A label query
                                                          over a set of resources,
                                                          in this case pods.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query
                                                          over the set of namespaces
                                                          that the term applies to.
                                                          The term is applied to the
                                                          union of the namespaces
                                                          selected by this field and
                                                          the ones listed in the namespaces
                                                          field. null selector and
                                                          null or empty namespaces
                                                          list means "this pod's namespace".
                                                          An empty selector ({}) matches
                                                          all namespaces.
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions
                                                              is a list of label selector
                                                              requirements. The requirements
                                                              are ANDed.
                                                            items:
                                                              description: A label
                                                                selector requirement
                                                                is a selector that
                                                                contains values, a
                                                                key, and an operator
                                                                that relates the key
                                                                and values.
                                                              properties:
                                                                key:
                                                                  description: key
                                                                    is the label key
                                                                    that the selector
                                                                    applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator
                                                                    represents a key's
                                                                    relationship to
                                                                    a set of values.
                                                                    Valid operators
                                                                    are In, NotIn,
                                                                    Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values
                                                                    is an array of
                                                                    string values.
                                                                    If the operator
                                                                    is In or NotIn,
                                                                    the values array
                                                                    must be non-empty.
                                                                    If the operator
                                                                    is Exists or DoesNotExist,
                                                                    the values array
                                                                    must be empty.
                                                                    This array is
                                                                    replaced during
                                                                    a strategic merge
                                                                    patch.
                                                                  items:
                                                                    type: string
                                                                  type: array
                                                              required:
                                                              - key
                                                              - operator
                                                              type: object
                                                            type: array
                                                          matchLabels:
                                                            additionalProperties:
                                                              type: string
                                                            description: matchLabels
                                                              is a map of {key,value}
                                                              pairs. A single {key,value}
                                                              in the matchLabels map
                                                              is equivalent to an
                                                              element of matchExpressions,
                                                              whose key field is "key",
                                                              the operator is "In",
                                                              and the values array
                                                              contains only "value".
                                                              The requirements are
                                                              ANDed.
                                                            type: object
                                                        type: object
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies
                                                          a static list of namespace
                                                          names that the term applies
                                                          to. The term is applied
                                                          to the union of the namespaces
                                                          listed in this field and
                                                          the ones selected by namespaceSelector.
                                                          null or empty namespaces
                                                          list and null namespaceSelector
                                                          means "this pod's namespace".
                                                        items:
                                                          type: string
                                                        type: array
                                                      topologyKey:
                                                        description: This pod should
                                                          be co-located (affinity)
                                                          or not co-located (anti-affinity)
                                                          with the pods matching the
                                                          labelSelector in the specified
                                                          namespaces, where co-located
                                                          is defined as running on
                                                          a node whose value of the
                                                          label with key topologyKey
                                                          matches that of any node
                                                          on which any of the selected
                                                          pods is running. Empty topologyKey
                                                          is not allowed.
                                                        type: string
                                                    required:
                                                    - topologyKey
                                                    type: object
                                                  type: array
                                              type: object
                                          type: object
                                        imagePullSecrets:
                                          description: If specified, the pod's imagePullSecrets
                                          items:
                                            description: LocalObjectReference contains
                                              enough information to let you locate
                                              the referenced object inside the same
                                              namespace.
                                            properties:
                                              name:
                                                description: 'Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion,
                                                  kind, uid?'
                                                type: string
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          type: array
                                        nodeSelector:
                                          additionalProperties:
                                            type: string
                                          description: 'NodeSelector is a selector
                                            which must be true for the pod to fit
                                            on a node. Selector which must match a
                                            node''s labels for the pod to be scheduled
                                            on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                          type: object
                                        priorityClassName:
                                          description: If specified, the pod's priorityClassName.
                                          type: string
                                        serviceAccountName:
                                          description: If specified, the pod's service
                                            account
                                          type: string
                                        tolerations:
                                          description: If specified, the pod's tolerations.
                                          items:
                                            description: The pod this Toleration is
                                              attached to tolerates any taint that
                                              matches the triple <key,value,effect>
                                              using the matching operator <operator>.
                                            properties:
                                              effect:
                                                description: Effect indicates the
                                                  taint effect to match. Empty means
                                                  match all taint effects. When specified,
                                                  allowed values are NoSchedule, PreferNoSchedule
                                                  and NoExecute.
                                                type: string
                                              key:
                                                description: Key is the taint key
                                                  that the toleration applies to.
                                                  Empty means match all taint keys.
                                                  If the key is empty, operator must
                                                  be Exists; this combination means
                                                  to match all values and all keys.
                                                type: string
                                              operator:
                                                description: Operator represents a
                                                  key's relationship to the value.
                                                  Valid operators are Exists and Equal.
                                                  Defaults to Equal. Exists is equivalent
                                                  to wildcard for value, so that a
                                                  pod can tolerate all taints of a
                                                  particular category.
                                                type: string
                                              tolerationSeconds:
                                                description: TolerationSeconds represents
                                                  the period of time the toleration
                                                  (which must be of effect NoExecute,
                                                  otherwise this field is ignored)
                                                  tolerates the taint. By default,
                                                  it is not set, which means tolerate
                                                  the taint forever (do not evict).
                                                  Zero and negative values will be
                                                  treated as 0 (evict immediately)
                                                  by the system.
                                                format: int64
                                                type: integer
                                              value:
                                                description: Value is the taint value
                                                  the toleration matches to. If the
                                                  operator is Exists, the value should
                                                  be empty, otherwise just a regular
                                                  string.
                                                type: string
                                            type: object
                                          type: array
                                      type: object
                                  type: object
                                serviceType:
                                  description: Optional service type for Kubernetes
                                    solver service. Supported values are NodePort
                                    or ClusterIP. If unset, defaults to NodePort.
                                  type: string
                              type: object
                          type: object
                        selector:
                          description: Selector selects a set of DNSNames on the Certificate
                            resource that should be solved using this challenge solver.
                            If not specified, the solver will be treated as the 'default'
                            solver with the lowest priority, i.e. if any other solver
                            has a more specific match, it will be used instead.
                          properties:
                            dnsNames:
                              description: List of DNSNames that this solver will
                                be used to solve. If specified and a match is found,
                                a dnsNames selector will take precedence over a dnsZones
                                selector. If multiple solvers match with the same
                                dnsNames value, the solver with the most matching
                                labels in matchLabels will be selected. If neither
                                has more matches, the solver defined earlier in the
                                list will be selected.
                              items:
                                type: string
                              type: array
                            dnsZones:
                              description: List of DNSZones that this solver will
                                be used to solve. The most specific DNS zone match
                                specified here will take precedence over other DNS
                                zone matches, so a solver specifying sys.example.com
                                will be selected over one specifying example.com for
                                the domain www.sys.example.com. If multiple solvers
                                match with the same dnsZones value, the solver with
                                the most matching labels in matchLabels will be selected.
                                If neither has more matches, the solver defined earlier
                                in the list will be selected.
                              items:
                                type: string
                              type: array
                            matchLabels:
                              additionalProperties:
                                type: string
                              description: A label selector that is used to refine
                                the set of certificate's that this challenge solver
                                will apply to.
                              type: object
                          type: object
                      type: object
                    type: array
                required:
                - privateKeySecretRef
                - server
                type: object
              ca:
                description: CA configures this issuer to sign certificates using
                  a signing CA keypair stored in a Secret resource. This is used to
                  build internal PKIs that are managed by cert-manager.
                properties:
                  crlDistributionPoints:
                    description: The CRL distribution points is an X.509 v3 certificate
                      extension which identifies the location of the CRL from which
                      the revocation of this certificate can be checked. If not set,
                      certificates will be issued without distribution points set.
                    items:
                      type: string
                    type: array
                  ocspServers:
                    description: The OCSP server list is an X.509 v3 extension that
                      defines a list of URLs of OCSP responders. The OCSP responders
                      can be queried for the revocation status of an issued certificate.
                      If not set, the certificate will be issued with no OCSP servers
                      set. For example, an OCSP server URL could be "http://ocsp.int-x3.letsencrypt.org".
                    items:
                      type: string
                    type: array
                  secretName:
                    description: SecretName is the name of the secret used to sign
                      Certificates issued by this Issuer.
                    type: string
                required:
                - secretName
                type: object
              selfSigned:
                description: SelfSigned configures this issuer to 'self sign' certificates
                  using the private key used to create the CertificateRequest object.
                properties:
                  crlDistributionPoints:
                    description: The CRL distribution points is an X.509 v3 certificate
                      extension which identifies the location of the CRL from which
                      the revocation of this certificate can be checked. If not set
                      certificate will be issued without CDP. Values are strings.
                    items:
                      type: string
                    type: array
                type: object
              vault:
                description: Vault configures this issuer to sign certificates using
                  a HashiCorp Vault PKI backend.
                properties:
                  auth:
                    description: Auth configures how cert-manager authenticates with
                      the Vault server.
                    properties:
                      appRole:
                        description: AppRole authenticates with Vault using the App
                          Role auth mechanism, with the role and secret stored in
                          a Kubernetes Secret resource.
                        properties:
                          path:
                            description: 'Path where the App Role authentication backend
                              is mounted in Vault, e.g: "approle"'
                            type: string
                          roleId:
                            description: RoleID configured in the App Role authentication
                              backend when setting up the authentication backend in
                              Vault.
                            type: string
                          secretRef:
                            description: Reference to a key in a Secret that contains
                              the App Role secret used to authenticate with Vault.
                              The `key` field must be specified and denotes which
                              entry within the Secret resource is used as the app
                              role secret.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - path
                        - roleId
                        - secretRef
                        type: object
                      kubernetes:
                        description: Kubernetes authenticates with Vault by passing
                          the ServiceAccount token stored in the named Secret resource
                          to the Vault server.
                        properties:
                          mountPath:
                            description: The Vault mountPath here is the mount path
                              to use when authenticating with Vault. For example,
                              setting a value to `/v1/auth/foo`, will use the path
                              `/v1/auth/foo/login` to authenticate with Vault. If
                              unspecified, the default value "/v1/auth/kubernetes"
                              will be used.
                            type: string
                          role:
                            description: A required field containing the Vault Role
                              to assume. A Role binds a Kubernetes ServiceAccount
                              with a set of Vault policies.
                            type: string
                          secretRef:
                            description: The required Secret field containing a Kubernetes
                              ServiceAccount JWT used for authenticating with Vault.
                              Use of 'ambient credentials' is not supported.
                            properties:
                              key:
                                description: The key of the entry in the Secret resource's
                                  `data` field to be used. Some instances of this
                                  field may be defaulted, in others it may be required.
                                type: string
                              name:
                                description: 'Name of the resource being referred
                                  to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountRef:
                            description: A reference to a service account that will
                              be used to request a bound token (also known as "projected
                              token"). Compared to using "secretRef", using this field
                              means that you don't rely on statically bound tokens.
                              To use this field, you must configure an RBAC rule to
                              let cert-manager request a token.
                            properties:
                              name:
                                description: Name of the ServiceAccount used to request
                                  a token.
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - role
                        type: object
                      tokenSecretRef:
                        description: TokenSecretRef authenticates with Vault by presenting
                          a token.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                    type: object
                  caBundle:
                    description: Base64-encoded bundle of PEM CAs which will be used
                      to validate the certificate chain presented by Vault. Only used
                      if using HTTPS to connect to Vault and ignored for HTTP connections.
                      Mutually exclusive with CABundleSecretRef. If neither CABundle
                      nor CABundleSecretRef are defined, the certificate bundle in
                      the cert-manager controller container is used to validate the
                      TLS connection.
                    format: byte
                    type: string
                  caBundleSecretRef:
                    description: Reference to a Secret containing a bundle of PEM-encoded
                      CAs to use when verifying the certificate chain presented by
                      Vault when using HTTPS. Mutually exclusive with CABundle. If
                      neither CABundle nor CABundleSecretRef are defined, the certificate
                      bundle in the cert-manager controller container is used to validate
                      the TLS connection. If no key for the Secret is specified, cert-manager
                      will default to 'ca.crt'.
                    properties:
                      key:
                        description: The key of the entry in the Secret resource's
                          `data` field to be used. Some instances of this field may
                          be defaulted, in others it may be required.
                        type: string
                      name:
                        description: 'Name of the resource being referred to. More
                          info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                        type: string
                    required:
                    - name
                    type: object
                  namespace:
                    description: 'Name of the vault namespace. Namespaces is a set
                      of features within Vault Enterprise that allows Vault environments
                      to support Secure Multi-tenancy. e.g: "ns1" More about namespaces
                      can be found here https://www.vaultproject.io/docs/enterprise/namespaces'
                    type: string
                  path:
                    description: 'Path is the mount path of the Vault PKI backend''s
                      `sign` endpoint, e.g: "my_pki_mount/sign/my-role-name".'
                    type: string
                  server:
                    description: 'Server is the connection address for the Vault server,
                      e.g: "https://vault.example.com:8200".'
                    type: string
                required:
                - auth
                - path
                - server
                type: object
              venafi:
                description: Venafi configures this issuer to sign certificates using
                  a Venafi TPP or Venafi Cloud policy zone.
                properties:
                  cloud:
                    description: Cloud specifies the Venafi cloud configuration settings.
                      Only one of TPP or Cloud may be specified.
                    properties:
                      apiTokenSecretRef:
                        description: APITokenSecretRef is a secret key selector for
                          the Venafi Cloud API token.
                        properties:
                          key:
                            description: The key of the entry in the Secret resource's
                              `data` field to be used. Some instances of this field
                              may be defaulted, in others it may be required.
                            type: string
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                      url:
                        description: URL is the base URL for Venafi Cloud. Defaults
                          to "https://api.venafi.cloud/v1".
                        type: string
                    required:
                    - apiTokenSecretRef
                    type: object
                  tpp:
                    description: TPP specifies Trust Protection Platform configuration
                      settings. Only one of TPP or Cloud may be specified.
                    properties:
                      caBundle:
                        description: Base64-encoded bundle of PEM CAs which will be
                          used to validate the certificate chain presented by the
                          TPP server. Only used if using HTTPS; ignored for HTTP.
                          If undefined, the certificate bundle in the cert-manager
                          controller container is used to validate the chain.
                        format: byte
                        type: string
                      credentialsRef:
                        description: CredentialsRef is a reference to a Secret containing
                          the username and password for the TPP server. The secret
                          must contain two keys, 'username' and 'password'.
                        properties:
                          name:
                            description: 'Name of the resource being referred to.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - name
                        type: object
                      url:
                        description: 'URL is the base URL for the vedsdk endpoint
                          of the Venafi TPP instance, for example: "https://tpp.example.com/vedsdk".'
                        type: string
                    required:
                    - credentialsRef
                    - url
                    type: object
                  zone:
                    description: Zone is the Venafi Policy Zone to use for this issuer.
                      All requests made to the Venafi platform will be restricted
                      by the named zone policy. This field is required.
                    type: string
                required:
                - zone
                type: object
            type: object
          status:
            description: Status of the Issuer. This is set and managed automatically.
            properties:
              acme:
                description: ACME specific status options. This field should only
                  be set if the Issuer is configured to use an ACME server to issue
                  certificates.
                properties:
                  lastPrivateKeyHash:
                    description: LastPrivateKeyHash is a hash of the private key associated
                      with the latest registered ACME account, in order to track changes
                      made to registered account associated with the Issuer
                    type: string
                  lastRegisteredEmail:
                    description: LastRegisteredEmail is the email associated with
                      the latest registered ACME account, in order to track changes
                      made to registered account associated with the  Issuer
                    type: string
                  uri:
                    description: URI is the unique account identifier, which can also
                      be used to retrieve account details from the CA
                    type: string
                type: object
              conditions:
                description: List of status conditions to indicate the status of a
                  CertificateRequest. Known condition types are `Ready`.
                items:
                  description: IssuerCondition contains condition information for
                    an Issuer.
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the timestamp corresponding
                        to the last status change of this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human readable description of the
                        details of the last transition, complementing reason.
                      type: string
                    observedGeneration:
                      description: If set, this represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.condition[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the Issuer.
                      format: int64
                      type: integer
                    reason:
                      description: Reason is a brief machine readable explanation
                        for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of (`True`, `False`,
                        `Unknown`).
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Type of the condition, known values are (`Ready`).
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: orders.acme.cert-manager.io
spec:
  group: acme.cert-manager.io
  names:
    categories:
    - cert-manager
    - cert-manager-acme
    kind: Order
    listKind: OrderList
    plural: orders
    singular: order
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .spec.issuerRef.name
      name: Issuer
      priority: 1
      type: string
    - jsonPath: .status.reason
      name: Reason
      priority: 1
      type: string
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: Order is a type to represent an Order with an ACME server
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              commonName:
                description: CommonName is the common name as specified on the DER
                  encoded CSR. If specified, this value must also be present in `dnsNames`
                  or `ipAddresses`. This field must match the corresponding field
                  on the DER encoded CSR.
                type: string
              dnsNames:
                description: DNSNames is a list of DNS names that should be included
                  as part of the Order validation process. This field must match the
                  corresponding field on the DER encoded CSR.
                items:
                  type: string
                type: array
              duration:
                description: Duration is the duration for the not after date for the
                  requested certificate. this is set on order creation as pe the ACME
                  spec.
                type: string
              ipAddresses:
                description: IPAddresses is a list of IP addresses that should be
                  included as part of the Order validation process. This field must
                  match the corresponding field on the DER encoded CSR.
                items:
                  type: string
                type: array
              issuerRef:
                description: IssuerRef references a properly configured ACME-type
                  Issuer which should be used to create this Order. If the Issuer
                  does not exist, processing will be retried. If the Issuer is not
                  an 'ACME' Issuer, an error will be returned and the Order will be
                  marked as failed.
                properties:
                  group:
                    description: Group of the resource being referred to.
                    type: string
                  kind:
                    description: Kind of the resource being referred to.
                    type: string
                  name:
                    description: Name of the resource being referred to.
                    type: string
                required:
                - name
                type: object
              request:
                description: Certificate signing request bytes in DER encoding. This
                  will be used when finalizing the order. This field must be set on
                  the order.
                format: byte
                type: string
            required:
            - issuerRef
            - request
            type: object
          status:
            properties:
              authorizations:
                description: Authorizations contains data returned from the ACME server
                  on what authorizations must be completed in order to validate the
                  DNS names specified on the Order.
                items:
                  description: ACMEAuthorization contains data returned from the ACME
                    server on an authorization that must be completed in order validate
                    a DNS name on an ACME Order resource.
                  properties:
                    challenges:
                      description: Challenges specifies the challenge types offered
                        by the ACME server. One of these challenge types will be selected
                        when validating the DNS name and an appropriate Challenge
                        resource will be created to perform the ACME challenge process.
                      items:
                        description: Challenge specifies a challenge offered by the
                          ACME server for an Order. An appropriate Challenge resource
                          can be created to perform the ACME challenge process.
                        properties:
                          token:
                            description: Token is the token that must be presented
                              for this challenge. This is used to compute the 'key'
                              that must also be presented.
                            type: string
                          type:
                            description: Type is the type of challenge being offered,
                              e.g. 'http-01', 'dns-01', 'tls-sni-01', etc. This is
                              the raw value retrieved from the ACME server. Only 'http-01'
                              and 'dns-01' are supported by cert-manager, other values
                              will be ignored.
                            type: string
                          url:
                            description: URL is the URL of this challenge. It can
                              be used to retrieve additional metadata about the Challenge
                              from the ACME server.
                            type: string
                        required:
                        - token
                        - type
                        - url
                        type: object
                      type: array
                    identifier:
                      description: Identifier is the DNS name to be validated as part
                        of this authorization
                      type: string
                    initialState:
                      description: InitialState is the initial state of the ACME authorization
                        when first fetched from the ACME server. If an Authorization
                        is already 'valid', the Order controller will not create a
                        Challenge resource for the authorization. This will occur
                        when working with an ACME server that enables 'authz reuse'
                        (such as Let's Encrypt's production endpoint). If not set
                        and 'identifier' is set, the state is assumed to be pending
                        and a Challenge will be created.
                      enum:
                      - valid
                      - ready
                      - pending
                      - processing
                      - invalid
                      - expired
                      - errored
                      type: string
                    url:
                      description: URL is the URL of the Authorization that must be
                        completed
                      type: string
                    wildcard:
                      description: Wildcard will be true if this authorization is
                        for a wildcard DNS name. If this is true, the identifier will
                        be the *non-wildcard* version of the DNS name. For example,
                        if '*.example.com' is the DNS name being validated, this field
                        will be 'true' and the 'identifier' field will be 'example.com'.
                      type: boolean
                  required:
                  - url
                  type: object
                type: array
              certificate:
                description: Certificate is a copy of the PEM encoded certificate
                  for this Order. This field will be populated after the order has
                  been successfully finalized with the ACME server, and the order
                  has transitioned to the 'valid' state.
                format: byte
                type: string
              failureTime:
                description: FailureTime stores the time that this order failed. This
                  is used to influence garbage collection and back-off.
                format: date-time
                type: string
              finalizeURL:
                description: FinalizeURL of the Order. This is used to obtain certificates
                  for this order once it has been completed.
                type: string
              reason:
                description: Reason optionally provides more information about a why
                  the order is in the current state.
                type: string
              state:
                description: State contains the current state of this Order resource.
                  States 'success' and 'expired' are 'final'
                enum:
                - valid
                - ready
                - pending
                - processing
                - invalid
                - expired
                - errored
                type: string
              url:
                description: URL of the Order. This will initially be empty when the
                  resource is first created. The Order controller will populate this
                  field when the Order is first processed. This field will be immutable
                  after it is initially set.
                type: string
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: sealedsecrets.bitnami.com
spec:
  group: bitnami.com
  names:
    kind: SealedSecret
    listKind: SealedSecretList
    plural: sealedsecrets
    singular: sealedsecret
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: SealedSecret is the K8s representation of a "sealed Secret" -
          a regular k8s Secret that has been sealed (encrypted) using the controller's
          key.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: SealedSecretSpec is the specification of a SealedSecret
            properties:
              data:
                description: Data is deprecated and will be removed eventually. Use
                  per-value EncryptedData instead.
                format: byte
                type: string
              encryptedData:
                additionalProperties:
                  type: string
                type: object
                x-kubernetes-preserve-unknown-fields: true
              template:
                description: Template defines the structure of the Secret that will
                  be created from this sealed secret.
                properties:
                  data:
                    additionalProperties:
                      type: string
                    description: Keys that should be templated using decrypted data
                    nullable: true
                    type: object
                  metadata:
                    description: 'Standard object''s metadata. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata'
                    nullable: true
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      finalizers:
                        items:
                          type: string
                        type: array
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                      name:
                        type: string
                      namespace:
                        type: string
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  type:
                    description: Used to facilitate programmatic handling of secret
                      data.
                    type: string
                type: object
            required:
            - encryptedData
            type: object
          status:
            description: SealedSecretStatus is the most recently observed status of
              the SealedSecret.
            properties:
              conditions:
                description: Represents the latest available observations of a sealed
                  secret's current state.
                items:
                  description: SealedSecretCondition describes the state of a sealed
                    secret at a certain point.
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status
                        to another.
                      format: date-time
                      type: string
                    lastUpdateTime:
                      description: The last time this condition was updated.
                      format: date-time
                      type: string
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: 'Status of the condition for a sealed secret. Valid
                        values for "Synced": "True", "False", or "Unknown".'
                      type: string
                    type:
                      description: 'Type of condition for a sealed secret. Valid value:
                        "Synced"'
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              observedGeneration:
                description: ObservedGeneration reflects the generation most recently
                  observed by the sealed-secrets controller.
                format: int64
                type: integer
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: sensors.argoproj.io
spec:
  group: argoproj.io
  names:
    kind: Sensor
    listKind: SensorList
    plural: sensors
    shortNames:
    - sn
    singular: sensor
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: cloudwatch-agent
  namespace: amazon-cloudwatch
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: argo-events-sa
  namespace: argo-events
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager
  namespace: cert-manager
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector
  namespace: cert-manager
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
  namespace: cert-manager
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kube-downscaler
  namespace: default
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: enrichment
  name: enrichment
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: fluent-bit
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: logstash-elastic
  name: logstash-elastic
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: opensearch
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: opensearch-dashboards
  name: opensearch-dashboards
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: external-dns
  namespace: external-dns
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: cluster-healthcheck-serviceaccount
  namespace: health
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-private
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-public
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
  namespace: kube-system
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-node-sa
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-controller-sa
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-node-sa
  namespace: kube-system
---
apiVersion: v1
automountServiceAccountToken: false
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
  name: kube-state-metrics
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    name: sealed-secrets-controller
  name: sealed-secrets-controller
  namespace: kube-system
---
apiVersion: v1
imagePullSecrets: []
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-4.23.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-kube-state-metrics
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-newrelic-infrastructure
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-newrelic-infrastructure-controlplane
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync,PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-prometheus
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-prometheus-2.1.5
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-prometheus
  namespace: newrelic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
    role: pingone-configurator
  name: p1-config-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
    role: p14c-bom-service
  name: p14c-bom-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: p14c-bootstrap-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
    role: p14c-oauth-service
  name: p14c-oauth-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: ping-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingcloud-radsecproxy-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingdirectory-ops-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingdirectory-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-admin-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-serviceaccount
  namespace: ping-cloud
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: pod-reaper-service-account
  namespace: pod-reaper
---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  name: grafana-operator-controller-manager
  namespace: prometheus
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: prometheus
  namespace: prometheus
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: prometheus-job-exporter
  namespace: prometheus
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook:dynamic-serving
  namespace: cert-manager
rules:
- apiGroups:
  - ""
  resourceNames:
  - cert-manager-webhook-ca
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: enrichment
  name: enrichment
  namespace: elastic-stack-logging
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - update
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: opensearch-cluster-master
  namespace: elastic-stack-logging
rules:
- apiGroups:
  - extensions
  resourceNames:
  - opensearch-cluster-master
  resources:
  - podsecuritypolicies
  verbs:
  - use
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-role
  namespace: ingress-nginx-private
rules:
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  - endpoints
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/status
  verbs:
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - ingressclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resourceNames:
  - ingress-controller-leader
  resources:
  - leases
  verbs:
  - get
  - update
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-role
  namespace: ingress-nginx-public
rules:
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  - endpoints
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/status
  verbs:
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - ingressclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resourceNames:
  - ingress-controller-leader
  resources:
  - leases
  verbs:
  - get
  - update
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector:leaderelection
  namespace: kube-system
rules:
- apiGroups:
  - coordination.k8s.io
  resourceNames:
  - cert-manager-cainjector-leader-election
  - cert-manager-cainjector-leader-election-core
  resources:
  - leases
  verbs:
  - get
  - update
  - patch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager:leaderelection
  namespace: kube-system
rules:
- apiGroups:
  - coordination.k8s.io
  resourceNames:
  - cert-manager-controller
  resources:
  - leases
  verbs:
  - get
  - update
  - patch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
  namespace: kube-system
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - list
  - watch
- apiGroups:
  - ""
  resourceNames:
  - cluster-autoscaler-status
  - cluster-autoscaler-priority-expander
  resources:
  - configmaps
  verbs:
  - delete
  - get
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: ebs-csi-leases-role
  namespace: kube-system
rules:
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - watch
  - list
  - delete
  - update
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    name: sealed-secrets-key-admin
  name: sealed-secrets-key-admin
  namespace: kube-system
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - list
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    name: sealed-secrets-service-proxier
  name: sealed-secrets-service-proxier
  namespace: kube-system
rules:
- apiGroups:
  - ""
  resourceNames:
  - sealed-secrets-controller
  resources:
  - services
  verbs:
  - get
- apiGroups:
  - ""
  resourceNames:
  - 'http:sealed-secrets-controller:'
  - http:sealed-secrets-controller:http
  - sealed-secrets-controller
  resources:
  - services/proxy
  verbs:
  - create
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync,PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission
  namespace: newrelic
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
    role: pingone-configurator
  name: p1-config-role
  namespace: ping-cloud
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
    role: p14c-bom-service
  name: p14c-bom-role
  namespace: ping-cloud
rules:
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: p14c-bootstrap-role
  namespace: ping-cloud
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  - configmaps
  verbs:
  - create
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
    role: p14c-oauth-service
  name: p14c-oauth-role
  namespace: ping-cloud
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - watch
  - create
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
  name: ping-role
  namespace: ping-cloud
rules:
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - create
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  - pods/log
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - delete
  - get
  - create
- apiGroups:
  - ""
  - apps
  resources:
  - statefulsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods/exec
  verbs:
  - create
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: ping-cloud
  name: pingdirectory-ops-role
  namespace: ping-cloud
rules:
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - create
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  - pods/log
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - delete
  - get
  - create
- apiGroups:
  - ""
  - apps
  resources:
  - statefulsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods/exec
  verbs:
  - create
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: grafana-operator-permissions
  namespace: prometheus
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - configmaps
  - persistentvolumeclaims
  - secrets
  - serviceaccounts
  - services
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - get
  - list
  - patch
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadashboards
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadashboards/finalizers
  verbs:
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadashboards/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadatasources
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadatasources/finalizers
  verbs:
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanadatasources/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanafolders
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanafolders/finalizers
  verbs:
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanafolders/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanas
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanas/finalizers
  verbs:
  - update
- apiGroups:
  - grafana.integreatly.org
  resources:
  - grafanas/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - route.openshift.io
  resources:
  - routes
  verbs:
  - create
  - delete
  - get
  - list
  - update
  - watch
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
  name: argo-events-aggregate-to-admin
rules:
- apiGroups:
  - argoproj.io
  resources:
  - sensors
  - sensors/finalizers
  - sensors/status
  - eventsources
  - eventsources/finalizers
  - eventsources/status
  - eventbus
  - eventbus/finalizers
  - eventbus/status
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  name: argo-events-aggregate-to-edit
rules:
- apiGroups:
  - argoproj.io
  resources:
  - sensors
  - sensors/finalizers
  - sensors/status
  - eventsources
  - eventsources/finalizers
  - eventsources/status
  - eventbus
  - eventbus/finalizers
  - eventbus/status
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: argo-events-aggregate-to-view
rules:
- apiGroups:
  - argoproj.io
  resources:
  - sensors
  - sensors/finalizers
  - sensors/status
  - eventsources
  - eventsources/finalizers
  - eventsources/status
  - eventbus
  - eventbus/finalizers
  - eventbus/status
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: argo-events-role
rules:
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - argoproj.io
  resources:
  - sensors
  - sensors/finalizers
  - sensors/status
  - eventsources
  - eventsources/finalizers
  - eventsources/status
  - eventbus
  - eventbus/finalizers
  - eventbus/status
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  - pods/exec
  - configmaps
  - secrets
  - services
  - persistentvolumeclaims
  verbs:
  - create
  - get
  - list
  - watch
  - update
  - patch
  - delete
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs:
  - create
  - get
  - list
  - watch
  - update
  - patch
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - get
  - create
  - update
  - patch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - validatingwebhookconfigurations
  - mutatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - apiregistration.k8s.io
  resources:
  - apiservices
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - list
  - watch
  - update
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-approve:cert-manager-io
rules:
- apiGroups:
  - cert-manager.io
  resourceNames:
  - issuers.cert-manager.io/*
  - clusterissuers.cert-manager.io/*
  resources:
  - signers
  verbs:
  - approve
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-certificates
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificates/status
  - certificaterequests
  - certificaterequests/status
  verbs:
  - update
  - patch
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificaterequests
  - clusterissuers
  - issuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cert-manager.io
  resources:
  - certificates/finalizers
  - certificaterequests/finalizers
  verbs:
  - update
- apiGroups:
  - acme.cert-manager.io
  resources:
  - orders
  verbs:
  - create
  - delete
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
  - patch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-certificatesigningrequests
rules:
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests/status
  verbs:
  - update
  - patch
- apiGroups:
  - certificates.k8s.io
  resourceNames:
  - issuers.cert-manager.io/*
  - clusterissuers.cert-manager.io/*
  resources:
  - signers
  verbs:
  - sign
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-challenges
rules:
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges
  - challenges/status
  verbs:
  - update
  - patch
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cert-manager.io
  resources:
  - issuers
  - clusterissuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - pods
  - services
  verbs:
  - get
  - list
  - watch
  - create
  - delete
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
  - create
  - delete
  - update
- apiGroups:
  - gateway.networking.k8s.io
  resources:
  - httproutes
  verbs:
  - get
  - list
  - watch
  - create
  - delete
  - update
- apiGroups:
  - route.openshift.io
  resources:
  - routes/custom-host
  verbs:
  - create
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges/finalizers
  verbs:
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-clusterissuers
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - clusterissuers
  - clusterissuers/status
  verbs:
  - update
  - patch
- apiGroups:
  - cert-manager.io
  resources:
  - clusterissuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-ingress-shim
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificaterequests
  verbs:
  - create
  - update
  - delete
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificaterequests
  - issuers
  - clusterissuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/finalizers
  verbs:
  - update
- apiGroups:
  - gateway.networking.k8s.io
  resources:
  - gateways
  - httproutes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - gateway.networking.k8s.io
  resources:
  - gateways/finalizers
  - httproutes/finalizers
  verbs:
  - update
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-issuers
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - issuers
  - issuers/status
  verbs:
  - update
  - patch
- apiGroups:
  - cert-manager.io
  resources:
  - issuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-orders
rules:
- apiGroups:
  - acme.cert-manager.io
  resources:
  - orders
  - orders/status
  verbs:
  - update
  - patch
- apiGroups:
  - acme.cert-manager.io
  resources:
  - orders
  - challenges
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cert-manager.io
  resources:
  - clusterissuers
  - issuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges
  verbs:
  - create
  - delete
- apiGroups:
  - acme.cert-manager.io
  resources:
  - orders/finalizers
  verbs:
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  name: cert-manager-edit
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificaterequests
  - issuers
  verbs:
  - create
  - delete
  - deletecollection
  - patch
  - update
- apiGroups:
  - cert-manager.io
  resources:
  - certificates/status
  verbs:
  - update
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges
  - orders
  verbs:
  - create
  - delete
  - deletecollection
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: cert-manager-view
rules:
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  - certificaterequests
  - issuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - acme.cert-manager.io
  resources:
  - challenges
  - orders
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook:subjectaccessreviews
rules:
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cloudwatch-agent-role
rules:
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  - endpoints
  verbs:
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - replicasets
  verbs:
  - list
  - watch
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes/proxy
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - nodes/stats
  - configmaps
  - events
  verbs:
  - create
- apiGroups:
  - ""
  resourceNames:
  - cwagent-clusterleader
  resources:
  - configmaps
  verbs:
  - get
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
rules:
- apiGroups:
  - ""
  resources:
  - events
  - endpoints
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - pods/eviction
  verbs:
  - create
- apiGroups:
  - ""
  resources:
  - pods/status
  verbs:
  - update
- apiGroups:
  - ""
  resourceNames:
  - cluster-autoscaler
  resources:
  - endpoints
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - watch
  - list
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - pods
  - services
  - replicationcontrollers
  - persistentvolumeclaims
  - persistentvolumes
  verbs:
  - watch
  - list
  - get
- apiGroups:
  - extensions
  resources:
  - replicasets
  - daemonsets
  verbs:
  - watch
  - list
  - get
- apiGroups:
  - policy
  resources:
  - poddisruptionbudgets
  verbs:
  - watch
  - list
- apiGroups:
  - apps
  resources:
  - statefulsets
  - replicasets
  - daemonsets
  verbs:
  - watch
  - list
  - get
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  - csinodes
  - csidrivers
  - csistoragecapacities
  verbs:
  - watch
  - list
  - get
- apiGroups:
  - batch
  - extensions
  resources:
  - jobs
  verbs:
  - get
  - list
  - watch
  - patch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
- apiGroups:
  - coordination.k8s.io
  resourceNames:
  - cluster-autoscaler
  resources:
  - leases
  verbs:
  - get
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-healthcheck-role
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - pods
  - pods/log
  - secrets
  - configmaps
  - namespaces
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  - apps
  resources:
  - statefulsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods/exec
  verbs:
  - create
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: ping-cloud
  name: cluster-secrets-reader
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-node-role
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-external-attacher-role
rules:
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - csi.storage.k8s.io
  resources:
  - csinodeinfos
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - storage.k8s.io
  resources:
  - volumeattachments
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - storage.k8s.io
  resources:
  - volumeattachments/status
  verbs:
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-external-provisioner-role
rules:
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - get
  - list
  - watch
  - create
  - delete
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - snapshot.storage.k8s.io
  resources:
  - volumesnapshots
  verbs:
  - get
  - list
- apiGroups:
  - snapshot.storage.k8s.io
  resources:
  - volumesnapshotcontents
  verbs:
  - get
  - list
- apiGroups:
  - storage.k8s.io
  resources:
  - csinodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - storage.k8s.io
  resources:
  - volumeattachments
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-external-resizer-role
rules:
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims/status
  verbs:
  - update
  - patch
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-external-snapshotter-role
rules:
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - snapshot.storage.k8s.io
  resources:
  - volumesnapshotclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - snapshot.storage.k8s.io
  resources:
  - volumesnapshotcontents
  verbs:
  - create
  - get
  - list
  - watch
  - update
  - delete
  - patch
- apiGroups:
  - snapshot.storage.k8s.io
  resources:
  - volumesnapshotcontents/status
  verbs:
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-external-provisioner-role
rules:
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - get
  - list
  - watch
  - create
  - delete
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - list
  - watch
  - create
  - patch
- apiGroups:
  - storage.k8s.io
  resources:
  - csinodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - watch
  - list
  - delete
  - update
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: enrichment
  name: enrichment
rules:
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - get
  - list
  - watch
  - create
  - delete
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get
  - list
  - watch
  - create
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - create
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - create
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: external-dns
rules:
- apiGroups:
  - ""
  resources:
  - services
  - endpoints
  - pods
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - extensions
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: fluent-bit-role
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - namespaces
  - pods
  - pods/logs
  - nodes
  - nodes/proxy
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kube-downscaler
rules:
- apiGroups:
  - ""
  resources:
  - pods
  - namespaces
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - argoproj.io
  resources:
  - rollouts
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - batch
  resources:
  - cronjobs
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - keda.sh
  resources:
  - scaledobjects
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - zalando.org
  resources:
  - stacks
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - get
  - create
  - watch
  - list
  - update
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
  name: kube-state-metrics
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - secrets
  - nodes
  - pods
  - services
  - serviceaccounts
  - resourcequotas
  - replicationcontrollers
  - limitranges
  - persistentvolumeclaims
  - persistentvolumes
  - namespaces
  - endpoints
  verbs:
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - statefulsets
  - daemonsets
  - deployments
  - replicasets
  verbs:
  - list
  - watch
- apiGroups:
  - batch
  resources:
  - cronjobs
  - jobs
  verbs:
  - list
  - watch
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - list
  - watch
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
- apiGroups:
  - policy
  resources:
  - poddisruptionbudgets
  verbs:
  - list
  - watch
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  verbs:
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - list
  - watch
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  - volumeattachments
  verbs:
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  - ingressclasses
  - ingresses
  verbs:
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - list
  - watch
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  - rolebindings
  - roles
  verbs:
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: logstash-elastic
  name: logstash-elastic
rules:
- apiGroups:
  - ""
  - batch
  resources:
  - pods
  - namespaces
  - jobs
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-clusterrole-private
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - endpoints
  - nodes
  - pods
  - secrets
  - namespaces
  verbs:
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/status
  verbs:
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - ingressclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-clusterrole-public
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - endpoints
  - nodes
  - pods
  - namespaces
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - list
  - get
  - create
  - update
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/status
  verbs:
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - ingressclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-4.23.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-kube-state-metrics
rules:
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - list
  - watch
- apiGroups:
  - batch
  resources:
  - cronjobs
  verbs:
  - list
  - watch
- apiGroups:
  - extensions
  - apps
  resources:
  - daemonsets
  verbs:
  - list
  - watch
- apiGroups:
  - extensions
  - apps
  resources:
  - deployments
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - endpoints
  verbs:
  - list
  - watch
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - list
  - watch
- apiGroups:
  - extensions
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - list
  - watch
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - limitranges
  verbs:
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - persistentvolumes
  verbs:
  - list
  - watch
- apiGroups:
  - policy
  resources:
  - poddisruptionbudgets
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - list
  - watch
- apiGroups:
  - extensions
  - apps
  resources:
  - replicasets
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - replicationcontrollers
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - resourcequotas
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - statefulsets
  verbs:
  - list
  - watch
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - validatingwebhookconfigurations
  verbs:
  - list
  - watch
- apiGroups:
  - storage.k8s.io
  resources:
  - volumeattachments
  verbs:
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-newrelic-infrastructure
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - nodes/metrics
  - nodes/stats
  - nodes/proxy
  - pods
  - services
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - endpoints
  - services
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - create
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events
rules:
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync,PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission
rules:
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-prometheus
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-prometheus-2.1.5
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-prometheus
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - nodes/metrics
  - nodes/stats
  - nodes/proxy
  - pods
  - services
  - endpoints
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-controlplane
rules:
- apiGroups:
  - ""
  resources:
  - nodes/metrics
  - nodes/stats
  - nodes/proxy
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
  - head
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: pod-reaper-cluster-role
rules:
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - list
- apiGroups:
  - ""
  resources:
  - pods/eviction
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - nodes/proxy
  - services
  - endpoints
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
- nonResourceURLs:
  - /metrics
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - pods/exec
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus-job-exporter
rules:
- apiGroups:
  - ""
  resources:
  - pods
  - namespaces
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - pods/exec
  - pods/log
  verbs:
  - get
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    name: secrets-unsealer
  name: secrets-unsealer
rules:
- apiGroups:
  - bitnami.com
  resources:
  - sealedsecrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - bitnami.com
  resources:
  - sealedsecrets/status
  verbs:
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - create
  - update
  - delete
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: system:aggregated-metrics-reader
rules:
- apiGroups:
  - metrics.k8s.io
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
rules:
- apiGroups:
  - ""
  resources:
  - nodes/metrics
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook:dynamic-serving
  namespace: cert-manager
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: cert-manager-webhook:dynamic-serving
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: cert-manager-webhook
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: enrichment
  name: enrichment
  namespace: elastic-stack-logging
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: enrichment
subjects:
- kind: ServiceAccount
  name: enrichment
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: opensearch-cluster-master
  namespace: elastic-stack-logging
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: opensearch-cluster-master
subjects:
- kind: ServiceAccount
  name: opensearch
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: opensearch-dashboards
  name: opensearch-dashboards-rolebinding
  namespace: elastic-stack-logging
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: opensearch-dashboards
subjects:
- kind: ServiceAccount
  name: opensearch-dashboards
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-role-nisa-binding
  namespace: ingress-nginx-private
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nginx-ingress-role
subjects:
- kind: ServiceAccount
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-private
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-role-nisa-binding
  namespace: ingress-nginx-public
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nginx-ingress-role
subjects:
- kind: ServiceAccount
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-public
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector:leaderelection
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: cert-manager-cainjector:leaderelection
subjects:
- kind: ServiceAccount
  name: cert-manager-cainjector
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager:leaderelection
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: cert-manager:leaderelection
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: cluster-autoscaler
subjects:
- kind: ServiceAccount
  name: cluster-autoscaler
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-leases-rolebinding
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ebs-csi-leases-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    name: sealed-secrets-controller
  name: sealed-secrets-controller
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sealed-secrets-key-admin
subjects:
- kind: ServiceAccount
  name: sealed-secrets-controller
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    name: sealed-secrets-service-proxier
  name: sealed-secrets-service-proxier
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sealed-secrets-service-proxier
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: system:authenticated
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync,PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission
  namespace: newrelic
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nri-bundle-nri-metadata-injection-admission
subjects:
- kind: ServiceAccount
  name: nri-bundle-nri-metadata-injection-admission
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
    role: pingone-configurator
  name: p1-config-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: p1-config-role
subjects:
- kind: ServiceAccount
  name: p1-config-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
    role: p14c-bom-service
  name: p14c-bom-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: p14c-bom-role
subjects:
- kind: ServiceAccount
  name: p14c-bom-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: p14c-bootstrap-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: p14c-bootstrap-role
subjects:
- kind: ServiceAccount
  name: p14c-bootstrap-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
    role: p14c-oauth-service
  name: p14c-oauth-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: p14c-oauth-role
subjects:
- kind: ServiceAccount
  name: p14c-oauth-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: ping-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: ping-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: pingaccess-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingdirectory-ops-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: pingdirectory-ops-role
subjects:
- kind: ServiceAccount
  name: pingdirectory-ops-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingdirectory-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: pingdirectory-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-admin-ping-role
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: pingfederate-admin-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-role-binding
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: pingfederate-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: ping-cloud
  name: radsecproxy-ping-role
  namespace: ping-cloud
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: ping-role
subjects:
- kind: ServiceAccount
  name: pingcloud-radsecproxy-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: grafana-operator-permissions
  namespace: prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: grafana-operator-permissions
subjects:
- kind: ServiceAccount
  name: grafana-operator-controller-manager
  namespace: prometheus
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: argo-events-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: argo-events-role
subjects:
- kind: ServiceAccount
  name: argo-events-sa
  namespace: argo-events
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-cainjector
subjects:
- kind: ServiceAccount
  name: cert-manager-cainjector
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-approve:cert-manager-io
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-approve:cert-manager-io
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-certificates
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-certificates
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-certificatesigningrequests
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-certificatesigningrequests
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-challenges
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-challenges
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-clusterissuers
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-clusterissuers
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-ingress-shim
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-ingress-shim
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-issuers
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-issuers
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-controller-orders
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-controller-orders
subjects:
- kind: ServiceAccount
  name: cert-manager
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook:subjectaccessreviews
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-webhook:subjectaccessreviews
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: cert-manager-webhook
  namespace: cert-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cloudwatch-agent-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cloudwatch-agent-role
subjects:
- kind: ServiceAccount
  name: cloudwatch-agent
  namespace: amazon-cloudwatch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-autoscaler
subjects:
- kind: ServiceAccount
  name: cluster-autoscaler
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cluster-healthcheck-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-healthcheck-role
subjects:
- kind: ServiceAccount
  name: cluster-healthcheck-serviceaccount
  namespace: health
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-attacher-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ebs-external-attacher-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-node-getter-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ebs-csi-node-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-node-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-provisioner-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ebs-external-provisioner-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-resizer-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ebs-external-resizer-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-snapshotter-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ebs-external-snapshotter-role
subjects:
- kind: ServiceAccount
  name: ebs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-provisioner-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: efs-csi-external-provisioner-role
subjects:
- kind: ServiceAccount
  name: efs-csi-controller-sa
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: enrichment
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: enrichment
subjects:
- kind: ServiceAccount
  name: enrichment
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: external-dns-viewer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: external-dns
subjects:
- kind: ServiceAccount
  name: external-dns
  namespace: external-dns
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: fluent-bit-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: fluent-bit-role
subjects:
- kind: ServiceAccount
  name: fluent-bit
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kube-downscaler
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kube-downscaler
subjects:
- kind: ServiceAccount
  name: kube-downscaler
  namespace: default
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
  name: kube-state-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kube-state-metrics
subjects:
- kind: ServiceAccount
  name: kube-state-metrics
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: logstash-elastic
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: logstash-elastic
subjects:
- kind: ServiceAccount
  name: logstash-elastic
  namespace: elastic-stack-logging
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server:system:auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-clusterrole-nisa-binding-private
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nginx-ingress-clusterrole-private
subjects:
- kind: ServiceAccount
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-private
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-clusterrole-nisa-binding-public
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nginx-ingress-clusterrole-public
subjects:
- kind: ServiceAccount
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx-public
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-4.23.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-kube-state-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-kube-state-metrics
subjects:
- kind: ServiceAccount
  name: nri-bundle-kube-state-metrics
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-newrelic-infrastructure
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-newrelic-infrastructure
subjects:
- kind: ServiceAccount
  name: nri-bundle-newrelic-infrastructure
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-nri-kube-events
subjects:
- kind: ServiceAccount
  name: nri-bundle-nri-kube-events
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync,PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-nri-metadata-injection-admission
subjects:
- kind: ServiceAccount
  name: nri-bundle-nri-metadata-injection-admission
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-prometheus
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-prometheus-2.1.5
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-nri-prometheus
subjects:
- kind: ServiceAccount
  name: nri-bundle-nri-prometheus
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-controlplane
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nri-bundle-nrk8s-controlplane
subjects:
- kind: ServiceAccount
  name: nri-bundle-newrelic-infrastructure-controlplane
  namespace: newrelic
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-admin-cluster-secrets-reader
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-secrets-reader
subjects:
- kind: ServiceAccount
  name: pingfederate-admin-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: pod-reaper-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: pod-reaper-cluster-role
subjects:
- kind: ServiceAccount
  name: pod-reaper-service-account
  namespace: pod-reaper
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: prometheus
subjects:
- kind: ServiceAccount
  name: prometheus
  namespace: prometheus
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: prometheus-job-exporter
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: prometheus-job-exporter
subjects:
- kind: ServiceAccount
  name: prometheus-job-exporter
  namespace: prometheus
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: ping-cloud
  name: radsecproxy-cluster-secrets-reader
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-secrets-reader
subjects:
- kind: ServiceAccount
  name: pingcloud-radsecproxy-serviceaccount
  namespace: ping-cloud
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    name: sealed-secrets-controller
  name: sealed-secrets-controller
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: secrets-unsealer
subjects:
- kind: ServiceAccount
  name: sealed-secrets-controller
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:metrics-server
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: v1
data:
  cwagentconfig.json: |
    {
      "agent": {
        "region": "region_name"
      },
      "logs": {
        "metrics_collected": {
          "kubernetes": {
            "cluster_name": "cluster_name",
            "metrics_collection_interval": 60
          }
        },
        "force_flush_interval": 5
      }
    }
kind: ConfigMap
metadata:
  name: cwagentconfig
  namespace: amazon-cloudwatch
---
apiVersion: v1
data:
  controller-config.yaml: |
    eventBus:
      nats:
        versions:
        - version: 0.22.1
          natsStreamingImage: nats-streaming:0.22.1
          metricsExporterImage: natsio/prometheus-nats-exporter:0.8.0
      jetstream:
        # Default JetStream settings, could be overridden by EventBus JetStream specs
        settings: |
          # https://docs.nats.io/running-a-nats-service/configuration#jetstream
          # Only configure "max_memory_store" or "max_file_store", do not set "store_dir" as it has been hardcoded.
          # e.g. 1G. -1 means no limit, up to 75% of available memory
          max_memory_store: -1
          # e.g. 20G. -1 means no limit, Up to 1TB if available
          max_file_store: 1TB
        streamConfig: |
          # The default properties of the streams to be created in this JetStream service
          maxMsgs: 50000
          maxAge: 168h
          maxBytes: -1
          replicas: 3
          duplicates: 300s
        versions:
        - version: latest
          natsImage: nats:2.8.1
          metricsExporterImage: natsio/prometheus-nats-exporter:0.9.1
          configReloaderImage: natsio/nats-server-config-reloader:0.7.0
          startCommand: /nats-server
        - version: 2.8.1
          natsImage: nats:2.8.1
          metricsExporterImage: natsio/prometheus-nats-exporter:0.9.1
          configReloaderImage: natsio/nats-server-config-reloader:0.7.0
          startCommand: /nats-server
        - version: 2.8.1-alpine
          natsImage: nats:2.8.1-alpine
          metricsExporterImage: natsio/prometheus-nats-exporter:0.9.1
          configReloaderImage: natsio/nats-server-config-reloader:0.7.0
          startCommand: nats-server
        - version: 2.8.2
          natsImage: nats:2.8.2
          metricsExporterImage: natsio/prometheus-nats-exporter:0.9.1
          configReloaderImage: natsio/nats-server-config-reloader:0.7.0
          startCommand: /nats-server
        - version: 2.8.2-alpine
          natsImage: nats:2.8.2-alpine
          metricsExporterImage: natsio/prometheus-nats-exporter:0.9.1
          configReloaderImage: natsio/nats-server-config-reloader:0.7.0
          startCommand: nats-server
kind: ConfigMap
metadata:
  name: argo-events-controller-config
  namespace: argo-events
---
apiVersion: v1
data: null
kind: ConfigMap
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
  namespace: cert-manager
---
apiVersion: v1
data:
  DEFAULT_UPTIME: Mon-Fri 09:00-18:00 UTC
kind: ConfigMap
metadata:
  name: kube-downscaler-dk299b2ff7
  namespace: default
---
apiVersion: v1
data:
  cluster.name: cluster_name
  log.level: error
  logs.region: region_name
  newrelic_cluster_name: cluster_name
  primary_tenant_domain: tenant_domain
  read.head: "True"
  read.tail: "Off"
  tenant_domain: tenant_domain
kind: ConfigMap
metadata:
  name: cluster-info
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  LOG_LEVEL: warn
kind: ConfigMap
metadata:
  name: elk-environment-variables-dfk4bdbtkk
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  AlienVaultIP.yml: |
    "": "YES"
  KnownCountries.yml: |
    "United States": "YES"
    "Canada": "YES"
  MaliciousCountries.yml: |
    "Turkey": "YES"
    "Iran": "YES"
    "Iraq": "YES"
    "North Korea": "YES"
    "Ukraine": "YES"
  TorNodes.yml: |
    "": "YES"
kind: ConfigMap
metadata:
  name: enrichment-cache
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  fluent-bit.conf: |-
    [SERVICE]
        Flush                     1
        Daemon                    off
        Parsers_File              parsers.conf
        storage.path              /fluent-bit/state/flb-storage/
        storage.sync              normal
        storage.checksum          off
        storage.backlog.mem_limit 50M
        storage.max_chunks_up     256
        storage.metrics           on
        HTTP_Server  On
        HTTP_Listen  0.0.0.0
        HTTP_Port    2020
        Health_Check On

    @INCLUDE pipelines_*.conf
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-config-gbbk7dtckh
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  parsers.conf: |
    [PARSER]
        Name                docker
        Format              json
        Time_Key            time
        Time_Format         %Y-%m-%dT%H:%M:%S.%LZ

    [PARSER]
        Name                dmesg
        Format              regex
        Regex               ^\[.*?\](?<log>.*)$

    [PARSER]
        Name                syslog
        Format              regex
        Regex               ^(?<time>[^ ]* {1,2}[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\/\.\-]*)(?:\[(?<pid>[0-9]+)\])?(?:[^\:]*\:)? *(?<log>.*)$
        Time_Key            time
        Time_Format         %b %d %H:%M:%S

    [PARSER]
        Name                container_firstline
        Format              regex
        Regex               (?<log>(?<="log":")\S(?!\.).*?)(?<!\\)".*(?<stream>(?<="stream":").*?)".*(?<time>\d{4}-\d{1,2}-\d{1,2}T\d{2}:\d{2}:\d{2}\.\w*).*(?=})
        Time_Key            time
        Time_Format         %Y-%m-%dT%H:%M:%S.%LZ

    [PARSER]
        Name                cwagent_firstline
        Format              regex
        Regex               (?<log>(?<="log":")\d{4}[\/-]\d{1,2}[\/-]\d{1,2}[ T]\d{2}:\d{2}:\d{2}(?!\.).*?)(?<!\\)".*(?<stream>(?<="stream":").*?)".*(?<time>\d{4}-\d{1,2}-\d{1,2}T\d{2}:\d{2}:\d{2}\.\w*).*(?=})
        Time_Key            time
        Time_Format         %Y-%m-%dT%H:%M:%S.%LZ

    [MULTILINE_PARSER]
        Name multiline_system_log
        type regex
        parser json
        key_content log
        flush_timeout 500

        rule "start_state" "/^(\/.*\/log[s]?\/\w+(\.log)?)( \d{4}-\d{2}-\d{2}[T ]?\d{2}:\d{2}:\d{2}(,\d{3})?)\s+(\w+[: ]{1,2})(.*)/" "cont"
        rule "cont" "/^((?!INFO|WARN|ERROR|DEBUG|(admin-api|audit|jvm-garbage-collection|provisioner-audit|provisioner|request(2?)|transaction)\.log).)*$/" "cont"
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-parsers-9kt7db5k5c
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  customer.conf: |
    # Inputs

    [INPUT]
        Name                tail
        Tag                 customer.kube.general.*
        Path                /var/log/containers/*_ingress-nginx-*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_customer_ingress.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       200MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 customer.kube.general.*
        Path                /var/log/containers/*_ping-cloud_*.log
        Exclude_Path        /var/log/containers/p14c-*.log, *pingcloud-metadata*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_customer_ping.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       200MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 customer.kube.general.*
        Path                /var/log/containers/*_postgres-operator_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_customer_postgres.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       20MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    # Filters

    [FILTER]
        Name                  multiline
        match                 customer.kube.*_ping-cloud_*
        multiline.key_content log
        buffer                true
        flush_ms              500
        emitter_name          customer.multiline
        emitter_storage.type  filesystem
        emitter_mem_buf_limit 100M
        multiline.parser      multiline_system_log

    [FILTER]
        Name                kubernetes
        Match               customer.kube.general.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_Tag_Prefix     customer.kube.general.var.log.containers.
        K8S-Logging.Parser  On
        K8S-Logging.Exclude Off
        Annotations         Off
        Labels              On
        Buffer_Size         50Mb
        Cache_Use_Docker_Id On
        Kube_Meta_Cache_TTL 1800

    # Output
    [OUTPUT]
        Name                http
        Alias               logstash_out
        Match               customer.kube.*
        Host                logstash-elastic.elastic-stack-logging
        Port                8084
        Format              json
        Workers             5
        Retry_Limit         False
        compress            gzip
        net.keepalive_idle_timeout  10
        net.keepalive_max_recycle   100
        storage.total_limit_size    1000M
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-pipeline-customer-h29h8f4cfh
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  cw.conf: |
    # Kubernetes inputs
    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_argo-events_*.log, /var/log/containers/*_argocd*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_argo.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_cert-manager_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_cert.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_elastic-stack-logging_*.log
        Exclude_Path        *bootstrap*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_elastic.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_external-dns_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_dns.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_kube-system_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_system.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/p14c-*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_p14c.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_pod-reaper_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_reaper.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*alertmanager*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_alertmanager.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 cw.kube.*
        Path                /var/log/containers/*_karpenter_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_cw_karpenter.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    # Node log inputs
    [INPUT]
        Name                tail
        Tag                 cw.host.dmesg
        Path                /var/log/dmesg
        Parser              dmesg
        DB                  /fluent-bit/state/flb_cw_dmesg.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 cw.host.messages
        Path                /var/log/messages
        Parser              syslog
        DB                  /fluent-bit/state/flb_cw_messages.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 cw.host.secure
        Path                /var/log/secure
        Parser              syslog
        DB                  /fluent-bit/state/flb_cw_secure.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                systemd
        Tag                 cw.dataplane.systemd.*
        Systemd_Filter      _SYSTEMD_UNIT=kubelet.service
        DB                  /fluent-bit/state/flb_cw_systemd.db
        Path                /var/log/journal
        Read_From_Tail      ${READ_FROM_TAIL}

    # Kubernetes filters
    [FILTER]
        Name                kubernetes
        Match               cw.kube.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_Tag_Prefix     cw.kube.var.log.containers.
        K8S-Logging.Parser  On
        K8S-Logging.Exclude Off
        Annotations         Off
        Labels              Off
        Buffer_Size         1Mb
        Cache_Use_Docker_Id On
        Kube_Meta_Cache_TTL 1800

    # Node logs filters

    [FILTER]
        Name                modify
        Match               cw.dataplane.systemd.*
        Rename              _HOSTNAME                   hostname
        Rename              _SYSTEMD_UNIT               systemd_unit
        Rename              MESSAGE                     log
        Remove_regex        ^((?!hostname|systemd_unit|log).)*$

    [FILTER]
        Name                aws
        Match               cw.dataplane.*
        imds_version        v2

    [FILTER]
        Name                aws
        Match               cw.host.*
        private_ip          true
        imds_version        v2
        hostname            true

    [FILTER]
        Name                modify
        Match               cw.host.dmesg
        Add                 log_name                    dmesg

    [FILTER]
        Name                modify
        Match               cw.host.messages
        Add                 log_name                    messages

    [FILTER]
        Name                modify
        Match               cw.host.secure
        Add                 log_name                    secure

    # Outputs

    [OUTPUT]
        Name                http
        Alias               cw
        Match               cw.*
        Host                logstash-elastic.elastic-stack-logging
        Port                8082
        Format              json
        Retry_Limit         False
        compress            gzip
        net.keepalive_idle_timeout  10
        net.keepalive_max_recycle   100
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-pipeline-cw-k65k95kkfc
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  elk.conf: |
    # Inputs

    [INPUT]
        Name                tail
        Tag                 elk.kube.general.*
        Path                /var/log/containers/*_health*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_elk_health.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       20MB
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}


    [INPUT]
        Name                tail
        Tag                 elk.kube.general.*
        Path                /var/log/containers/*_ingress-nginx-*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_elk_ingress.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       200MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 elk.kube.general.*
        Path                /var/log/containers/*_ping-cloud_*.log
        Exclude_Path        /var/log/containers/p14c-*.log, *pingcloud-metadata*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_elk_ping.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       200MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 elk.kube.general.*
        Path                /var/log/containers/*_postgres-operator_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_elk_postgres.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       20MB
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    # Filters

    [FILTER]
        Name                  multiline
        match                 elk.kube.*_ping-cloud_*
        multiline.key_content log
        buffer                true
        flush_ms              500
        emitter_name          elk.multiline
        emitter_storage.type  filesystem
        emitter_mem_buf_limit 100M
        multiline.parser      multiline_system_log

    [FILTER]
        Name                kubernetes
        Match               elk.kube.general.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_Tag_Prefix     elk.kube.general.var.log.containers.
        K8S-Logging.Parser  On
        K8S-Logging.Exclude Off
        Annotations         Off
        Labels              On
        Buffer_Size         50Mb
        Cache_Use_Docker_Id On
        Kube_Meta_Cache_TTL 1800

    # Output
    [OUTPUT]
        Name                http
        Alias               logstash_out
        Match               elk.kube.*
        Host                logstash-elastic.elastic-stack-logging
        Port                8080
        Format              json
        Workers             5
        Retry_Limit         False
        compress            gzip
        net.keepalive_idle_timeout  10
        net.keepalive_max_recycle   100
        storage.total_limit_size    1000M
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-pipeline-elk-gtmf85g8k8
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  nr.conf: |
    # Kubernetes inputs
    [INPUT]
        Name                tail
        Tag                 nr.kube.*
        Path                /var/log/containers/*_external-dns_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_nr_dns.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 nr.kube.*
        Path                /var/log/containers/*_kube-system_*.log
        Exclude_Path        *kube-proxy*.log, *sealed-secrets-controller*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_nr_system.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    # Node log inputs
    [INPUT]
        Name                tail
        Tag                 nr.host.dmesg
        Path                /var/log/dmesg
        Parser              dmesg
        DB                  /fluent-bit/state/flb_nr_dmesg.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}


    [INPUT]
        Name                tail
        Tag                 nr.host.messages
        Path                /var/log/messages
        Parser              syslog
        DB                  /fluent-bit/state/flb_nr_messages.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 nr.host.secure
        Path                /var/log/secure
        Parser              syslog
        DB                  /fluent-bit/state/flb_nr_secure.db
        Mem_Buf_Limit       10MB
        Skip_Long_Lines     On
        Refresh_Interval    10
        Read_from_Head      ${READ_FROM_HEAD}

    # Kubernetes filters

    [FILTER]
        Name           kubernetes
        Match          nr.kube.*
        Kube_URL       https://kubernetes.default.svc:443
        Kube_Tag_Prefix nr.kube.var.log.containers.
        Buffer_Size    32k
        K8S-Logging.Exclude Off
        Labels         Off
        Annotations    Off
        Cache_Use_Docker_Id On
        Kube_Meta_Cache_TTL 1800

    [FILTER]
        Name           nest
        Match          nr.kube.*
        Operation      lift
        Nested_under   kubernetes

    [FILTER]
        Name           record_modifier
        Match          nr.kube.*
        Record         cluster_name ${NR_CLUSTER_NAME}
        Allowlist_key  container_name
        Allowlist_key  namespace_name
        Allowlist_key  pod_name
        Allowlist_key  stream
        Allowlist_key  message
        Allowlist_key  log

    # Node log filters

    [FILTER]
        Name                aws
        Match               nr.dataplane.*
        imds_version        v2

    [FILTER]
        Name                record_modifier
        Match               nr.dataplane.*
        Record              cluster_name ${NR_CLUSTER_NAME}

    [FILTER]
        Name                aws
        Match               nr.host.*
        private_ip          true
        imds_version        v2
        hostname            true

    [FILTER]
        Name                record_modifier
        Match               nr.host.*
        Record              cluster_name ${NR_CLUSTER_NAME}

    # Output

    [OUTPUT]
        Name                http
        Alias               nr_out
        Match               nr.*
        Host                logstash-elastic.elastic-stack-logging
        Port                8083
        Format              json
        Retry_Limit         False
        compress            gzip
        net.keepalive_idle_timeout  10
        net.keepalive_max_recycle   100
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-pipeline-nr-ff7c55h5fb
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  s3.conf: |
    # Inputs

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_amazon-cloudwatch_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_cw.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        Read_from_Head      ${READ_FROM_HEAD}
        storage.pause_on_chunks_overlimit on

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_health*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_health.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_ingress-nginx-*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_ingress.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_ping-cloud_*.log
        Exclude_Path        /var/log/containers/p14c-*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_ping.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        Mem_Buf_Limit       200MB
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_postgres-operator_*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_postgres.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}

    [INPUT]
        Name                tail
        Tag                 s3.kube.*
        Path                /var/log/containers/*_prometheus_*.log
        Exclude_Path        *alertmanager*.log
        multiline.parser    docker, cri
        DB                  /fluent-bit/state/flb_s3_prometheus.db
        Skip_Long_Lines     Off
        Refresh_Interval    10
        Rotate_Wait         30
        storage.type        filesystem
        storage.pause_on_chunks_overlimit on
        Read_from_Head      ${READ_FROM_HEAD}

    # Filters

    [FILTER]
        Name                  multiline
        match                 s3.kube.*_ping-cloud_*
        multiline.key_content log
        buffer                true
        flush_ms              500
        emitter_name          s3.multiline
        emitter_storage.type  filesystem
        emitter_mem_buf_limit 500M
        multiline.parser      multiline_system_log

    [FILTER]
        Name                kubernetes
        Match               s3.kube.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_Tag_Prefix     s3.kube.var.log.containers.
        K8S-Logging.Parser  On
        K8S-Logging.Exclude Off
        Annotations         Off
        Labels              On
        Buffer_Size         50Mb
        Cache_Use_Docker_Id On
        Kube_Meta_Cache_TTL 1800
        Use_Kubelet         On


    # Output

    [OUTPUT]
        Name                http
        Alias               s3_app_out
        Match               s3.kube.*
        Host                logstash-elastic.elastic-stack-logging
        Port                8081
        Format              json
        Retry_Limit         False
        compress            gzip
        net.keepalive_idle_timeout  10
        net.keepalive_max_recycle   100
kind: ConfigMap
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit-pipeline-s3-5k42bb26bf
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  REGION: ${REGION}
  SERVICE_SSM_PATH_PREFIX: /pcpt/service
kind: ConfigMap
metadata:
  name: logging-bootstrap-environment-variables
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  logging-bootstrap-resources.yaml: |
    storage/efs/uri:
      kind: StorageClass
      name: efs
      template:
      values_container_key: efsId
      ssm_type: string
      ssm_path_prefix: SERVICE_SSM_PATH_PREFIX
    storage/raw-logs/uri:
      kind: ConfigMap
      name: s3-raw-logs-bucket
      template:
      values_container_key: bucketName
      ssm_type: string
      ssm_path_prefix: SERVICE_SSM_PATH_PREFIX
kind: ConfigMap
metadata:
  name: logging-bootstrap-resources
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  01-input.conf: "input {\n  http {\n    port => 8084\n    add_field => { \"cluster_name\"
    => \"${CLUSTER_NAME}\" }\n    threads => 5\n    id => \"customer_in\"\n  }\n}\n###
    Remove unneeded fields came from fluent-bit\nfilter {\n\tmutate {\n\t    remove_field
    => [\"date\", \"headers\", \"time\"]\n\t}\n}"
  02-filters.conf: filter {}
  99-outputs.conf: output { }
kind: ConfigMap
metadata:
  name: logstash-pipeline-customer-97tc4thm7t
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  cloudwatch.conf: "input {\n  http {\n    port => 8082\n    id => \"cw_in\"\n  }\n}\nfilter
    {\n\t### Remove unneeded fields came from fluent-bit\n  mutate {\n          remove_field
    => [ \"headers\",\"host\",\"date\"]\n      }\n\n  if [kubernetes] {\n  ### Add
    temp field to specify correct stream name\n    mutate {\n        add_field =>
    { \"[@metadata][stream_name]\" => \"%{[kubernetes][pod_name]}_%{[kubernetes][namespace_name]}_%{[kubernetes][container_name]}\"
    }\n      }\n  }\n### Add temp field to have the correct host value in log\n  if
    [private_ip] {\n    mutate {\n        add_field => { \"[@metadata][transf_host]\"
    => \"%{private_ip}\" }\n      }\n    mutate {\n        gsub => [ \"[@metadata][transf_host]\",
    \"\\.\", \"-\" ]\n        add_field => { \"host\" => \"ip-%{[@metadata][transf_host]}\"
    }\n      }\n  }      \n}\noutput {\n  if [kubernetes] {\n    awslogs {\n        region
    => \"${AWS_REGION}\"\n        log_group_name => \"/aws/containerinsights/${CW_CLUSTER_NAME}/application\"\n
    \       log_stream_name => \"%{[@metadata][stream_name]}\"\n        id => \"cw_app_out\"\n
    \     }\n  }\n  if [log_name] {\n    awslogs {\n        region => \"${AWS_REGION}\"\n
    \       log_group_name => \"/aws/containerinsights/${CW_CLUSTER_NAME}/host\"\n
    \       log_stream_name => \"%{log_name}-%{host}\"\n        id => \"cw_host_out\"\n
    \     }\n  }\n  if [systemd_unit] {\n    awslogs {\n        region => \"${AWS_REGION}\"\n
    \       log_group_name => \"/aws/containerinsights/${CW_CLUSTER_NAME}/dataplane\"\n
    \       log_stream_name => \"%{systemd_unit}-%{hostname}\"\n        id => \"cw_data_out\"\n
    \     }\n  }    \n}"
kind: ConfigMap
metadata:
  name: logstash-pipeline-cw-8chtm622kh
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  01-input.conf: "input {\n\tdead_letter_queue {\n\t    path => \"/usr/share/logstash/data/queue/dead_letter\"\n\t
    \   clean_consumed => true\n\t    commit_offsets => true\n\t    add_field => {\"DLQ\"
    => \"true\"}\n\t}\n}"
  02-filters.conf: filter {}
  99-outputs.conf: "output {\n\topensearch {\n\t\tid => \"OS_logstash_index\"\n\t\thosts
    => [\"https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200\"]\n\t\tuser
    => \"${OS_USER}\"\n\t\tpassword => \"${OS_PASSWORD}\"\n\t\tssl => true\n\t\tssl_certificate_verification
    => false\n\t\tsniffing => false\n\t\tindex => \"logstash-%{+YYYY.MM.dd}\"\n\t}\n}"
kind: ConfigMap
metadata:
  name: logstash-pipeline-dlq-t7c6c88tfg
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  01-input.conf: |
    input {
      http {
        port => 8080
        add_field => { "cluster_name" => "${CLUSTER_NAME}" }
        id => 'main_in'
        threads => 10
      }
    }
  02-input-filters.conf: "filter {\n  ### Filter to not store logstash healthchecks\n
    \ ### Logstash will still return '200 OK' when readinessProbe tries to request
    the port,\n  ### but this request will not be stored anywhere\n  if ([headers][request_method]
    == \"GET\")\n  {\n    drop {}\n  }\n  ### Remove unneded fields coming from fluent-bit\n
    \ mutate {\n    remove_field => [\"date\", \"headers\", \"time\", \"_p\"]\n  }\n
    \ ### Fix ES\\OS issue with parsing dots in field names as nested objects\n  de_dot
    {\n    fields => [\"[kubernetes][labels][app.kubernetes.io]\",\n\t\t\t    \"[kubernetes][labels][app.kubernetes.io/name]\",\n\t\t\t
    \   \"[kubernetes][labels][app.kubernetes.io/version]\",\n\t\t\t    \"[kubernetes][labels][app.kubernetes.io/part-of]\",\n\t\t\t
    \   \"[kubernetes][labels][app.kubernetes.io/role]\",\n\t\t\t    \"[kubernetes][labels][app.kubernetes.io/component]\",\n\t\t\t
    \   \"[kubernetes][labels][app.kubernetes.io/instance]\",\n\t\t\t    \"[kubernetes][labels][statefulset.kubernetes.io/pod-name]\"\n
    \           ]\n  }\n  ### Backup jobs logs goes to separate index without parsing\n
    \ if ([kubernetes][pod_name] =~ \".*backup.*\" or [kubernetes][pod_name] =~ \".*repo1.*\")
    {\n      mutate {\n        rename => {\"log\" => \"message\"}\n        add_field
    => { \"[@metadata][index]\" => \"backup-jobs\"}\n      }\n  }\n  ### Healthchecks
    logs goes to separate index without parsing\n  else if ([kubernetes][pod_name]
    =~ \".*healthcheck.*\") {\n      mutate {\n        add_field => { \"[@metadata][index]\"
    => \"healthchecks\"}\n        rename => {\"log\" => \"message\"}\n      }\n  }\n}\n"
  03-ingress-filters.conf: |-
    filter {
      if ([kubernetes][container_name] == "nginx-ingress-controller"){
      ### Parsing for Nginx access logs
        if ([stream] == "stdout") {
          grok {
            match => {
              "log" => [ "%{IPORHOST:[nginx][access][remote_ip]} - %{USER:[nginx][access][user_name]} \[%{HTTPDATE:[nginx][access][time]}\] \"%{WORD:[nginx][access][method]} %{URIPATH:[nginx][access][url]} HTTP/%{NUMBER:[nginx][access][http_version]}\" %{NUMBER:[nginx][access][response_code]} %{NUMBER:[nginx][access][body_sent][bytes]} \"(?:-|%{URI:[nginx][access][referrer]})\" \"%{DATA:[nginx][access][agent]}\" %{NUMBER:[nginx][access][request_length]} %{NUMBER:[nginx][access][request_time]} \[%{NOTSPACE:[nginx][access][proxy_upstream_name]}\] \[\] (?:-|%{HOSTPORT:[nginx][access][upstream_addr]}) %{NOTSPACE:[nginx][access][upstream_response_length]} %{NOTSPACE:[nginx][access][upstream_response_time]} %{NOTSPACE:[nginx][access][upstream_response_code]} %{NOTSPACE:[nginx][access][req_id]}" ]
            }
            remove_field => ["log"]
            add_field => {"[@metadata][index]" => "ingress-access"}
          }
          date {
            match => [ "[nginx][access][time]", "dd/MMM/YYYY:H:m:s Z" ]
            remove_field => "[nginx][access][time]"
          }
          useragent {
            source => "[nginx][access][agent]"
            target => "[nginx][access][user_agent]"
            remove_field => "[nginx][access][agent]"
          }
          geoip {
            source => "[nginx][access][remote_ip]"
            target => "[nginx][access][geoip]"
          }
          mutate {
            gsub => ["[nginx][access][upstream_response_length]", "-", "0"]
          }
        }
        else if ([stream] == "stderr") {
        ### Parsing for Nginx error log
          if ([log] =~ /^[\d\/: ]+\[.+?\]/) {
            grok {
              match => { "log" => ["%{DATA:[nginx][error][time]} \[%{WORD:[nginx][error][level]}\] %{NUMBER:[nginx][error][pid]}#%{NUMBER:[nginx][error][tid]}: (\*%{NUMBER:[nginx][error][connection_id]} )?%{GREEDYDATA:[nginx][error][message]}"] }
              remove_field => ["log"]
              add_field => {"[@metadata][index]" => "ingress-error"}
            }
            date {
              match => [ "[nginx][error][time]", "YYYY/MM/dd H:m:s" ]
              remove_field => "[nginx][error][time]"
            }
          }
          ### Parsing for go Nginx-controller error log
          else if ([log] =~ /^\w{5} [\d:\.]{15}.[ \t]+.*?\]/) {
            grok {
              match => { "log" => ["[A-Z]%{DATA:timestamp} [ \t]+%{DATA}\:%{NUMBER}\] %{GREEDYDATA:[nginx][error][message]}"]}
              remove_field => ["log"]
              add_field => {"[@metadata][index]" => "ingress-error"}
            }
            date {
              match => ["timestamp", "MMdd HH:mm:ss.SSSSSS"]
              remove_field => ["timestamp"]
            }
          }
        }
      }
    }
  04-pa-filters.conf: |-
    filter {
        if ([kubernetes][container_name] =~ "pingaccess(-was)?(-admin)?") {
            ### Parse only logs starting from log path.
            ### Everything else(hooks, logs going directly to console, etc) goes to logstash index without any parsing
            if ([log] =~ /^\/opt\/out\/instance(\/\w+)?\/log[s]?/) {
                grok {
                    match => {
                        "log" => [ "^\/opt\/out\/instance(\/\w+)?\/log[s]?\/%{DATA:log_name}(\.log)?(\.out)? %{GREEDYDATA:log_string}" ]
                    }
                    remove_field => ["log"]
                }
                if ([log_string] == "") {
                    drop {}
                }
                if ([kubernetes][container_name] =~ "pingaccess-was(-admin)?"){
                    mutate {
                        add_field => {"[@metadata][app]" => "pa-was"}
                    }
                }
                else {
                    mutate {
                        add_field => {"[@metadata][app]" => "pa"}
                    }
                }
                if ([log_name] == "pingaccess_engine_audit") {
                  dissect {
                    mapping => {
                      "log_string" => "%{timestamp}| %{exchangeId}| %{trackingId}| %{roundTripMS} ms| %{proxyRoundTripMS} ms| %{resource}| %{subject}| %{authMech}| %{client}| %{method}| %{requestUri}| %{responseCode}| %{failedRuleType}| %{failedRuleName}| %{applicationName}| %{resourceName}| %{pathPrefix}"
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-engine-audit"}
                  }
                } else if ([log_name] == "pingaccess_api_audit") {
                  dissect {
                    mapping => {
                      "log_string" => "%{timestamp}| %{exchangeId}| %{trackingId}| %{roundTripMS} ms| %{subject}| %{authMech}| %{client}| %{method}| %{requestUri}| %{responseCode->}"
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-api-audit"}
                  }
                  mutate {
                    strip => ["responseCode"]
                  }
                }
                else if ([log_name] == "pingaccess_agent_audit") {
                  dissect {
                    mapping => {
                      "log_string" => "%{timestamp}| %{exchangeId}| %{trackingId}| %{roundTripMS} ms| %{resource}| %{client}| %{method}| %{requestUri}| %{responseCode}| %{applicationName}| %{resourceName}| %{pathPrefix}"
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-agent-audit"}
                  }
                }
                else if ([log_name] == "pingaccess_sideband_client_audit") {
                  dissect {
                    mapping => {
                      "log_string" => "%{timestamp}| %{exchangeId}| %{trackingId}| %{roundTripMS} ms| %{client}| %{method}| %{requestUri}| %{responseCode}| %{sidebandName}| %{sidebandDecision}"
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-sideband-client-audit"}
                  }
                }
                else if ([log_name] == "pingaccess_sideband_audit") {
                  dissect {
                    mapping => {
                      "log_string" => "%{timestamp}| %{exchangeId}| %{trackingId}| %{roundTripMS} ms| %{resource}| %{client}| %{method}| %{requestUri}| %{responseCode}| %{applicationName}| %{resourceName}| %{pathPrefix}| %{sidebandName}"
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-sideband-audit"}
                  }
                }
                else if ([log_name] == "pingaccess") {
                  grok {
                    match => {
                      "log_string" => [ "%{TIMESTAMP_ISO8601:timestamp}[ ]{1,2}%{WORD:logLevel} \[(?:|%{NOTSPACE:exchangeId})\] %{NOTSPACE:className} - %{GREEDYDATA:message}" ]
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-pingaccess"}
                  }
                }
                else if ([log_name] == "audit") {
                  grok {
                    match => {
                      "log_string" => [ "%{TIMESTAMP_ISO8601:timestamp} %{GREEDYDATA:message}"]
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-upgrade-audit"}
                  }
                }
                else if ([log_name] == "upgrade") {
                  grok {
                    match => {
                      "log_string" => [ "%{TIMESTAMP_ISO8601:timestamp}[ ]{1,2}%{WORD:logLevel} %{NOTSPACE:className}:%{NUMBER:position} - %{GREEDYDATA:message}"]
                    }
                    remove_field => ["log_string"]
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-upgrade-log"}
                  }
                }
                else if ([log_name] == "upgrade_status") {
                  mutate {
                    rename => { "log_string" => "message" }
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-upgrade-status"}
                  }
                }
                ### For log files we don't know right now - store in separate indices without parsing
                else {
                  mutate {
                    rename => { "log_string" => "message" }
                    add_field => {"[@metadata][index]" => "%{[@metadata][app]}-%{[log_name]}"}
                  }
                }
                if ([timestamp]) {
                  date {
                    match => [ "timestamp", "ISO8601", "yyyy-MM-dd HH:mm:ss"]
                    remove_field => ["timestamp"]
                  }
                }
                ### Security Enrichments begin here, ENRICH THE IP ADDRESS DETAIL
                if ([client]) {
                    geoip
                    {
                        source => "client"
                    }
                    translate {
                        source => "client"
                        target => "threat_intel"
                        fallback => "No"
                        dictionary_path => '/enrichment-cache-files/AlienVaultIP.yml'
                        refresh_behaviour => "replace"
                    }
                    translate {
                        source => "client"
                        target => "tor_intel"
                        fallback => "No"
                        dictionary_path => '/enrichment-cache-files/TorNodes.yml'
                        refresh_behaviour => "replace"
                    }
                    translate {
                        source => "[geoip][country_name]"
                        target => "malicious_country"
                        fallback => "No"
                        dictionary_path => '/enrichment-cache-files/MaliciousCountries.yml'
                        refresh_behaviour => "replace"
                    }
                    translate {
                        source => "[geoip][country_name]"
                        target => "known_country"
                        fallback => "No"
                        dictionary_path => '/enrichment-cache-files/KnownCountries.yml'
                        refresh_behaviour => "replace"
                    }
                    if([malicious_country] == "No" and [known_country] == "No"){
                        mutate {
                          add_field => { "suspicious_country" => "YES" }
                        }
                    }
                }
            }
        }
    }
  05-pd-filters.conf: "filter {\n    if ([kubernetes][container_name] =~ \"pingdirectory\")
    {\n    ### Parse only logs starting from log path.\n    ### Everything else(hooks,
    logs going directly to console, etc) goes to logstash index without any parsing\n
    \       if ([log] =~ /^\\/opt\\/out\\/instance\\/logs/) {\n            grok {\n
    \               match => {\n                  \"log\" => [ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\\/%{DATA:log_name}(\\.log)?(\\.out)?
    %{GREEDYDATA:log_string}\" ]\n                }\n                remove_field
    => [\"log\"]\n            }\n            if ([log_string] == \"\") {\n                drop
    {}\n            }\n            mutate {\n                add_field => {\"[@metadata][index]\"
    => \"pd-%{log_name}\"}\n            }\n            if ([log_name] == \"access\"
    ) {\n                kv {\n                  source => \"[log_string]\"\n                  value_split
    => \"=\"\n                  include_brackets => true\n                }\n                grok
    {\n                  match => { \"log_string\" => \"\\[%{DATA:timestamp}\\] %{DATA:ldapType}
    %{WORD}=%{GREEDYDATA}\" }\n                  remove_field => [\"log_string\"]\n
    \               }\n                date {\n                  match => [\"timestamp\",
    \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field
    => [\"timestamp\"]\n                }\n                mutate{\n                  gsub
    => [ \"filter\", '\"', \"\" ]\n                  gsub => [ \"dn\", '\"', \"\"
    ]\n                  gsub => [ \"requesterIP\", \"internal\", \"127.0.0.1\" ]\n
    \                 rename => { \"msg\" => \"message\" }\n                }\n                ###
    Security Enrichments begin here, ENRICH THE IP ADDRESS DETAIL\n                translate
    {\n                  source => \"requesterIP\"\n                  target => \"threat_intel\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/AlienVaultIP.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                translate
    {\n                  source => \"requesterIP\"\n                  target => \"tor_intel\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/TorNodes.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                translate
    {\n                  source => \"[geoip][country_name]\"\n                  target
    => \"malicious_country\"\n                  fallback => \"No\"\n                  dictionary_path
    => '/enrichment-cache-files/MaliciousCountries.yml'\n                  refresh_behaviour
    => \"replace\"\n                }\n                translate {\n                  source
    => \"[geoip][country_name]\"\n                  target => \"known_country\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/KnownCountries.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                if([malicious_country]
    == \"No\" and [known_country] == \"No\"){\n                    mutate {\n                        add_field
    => { \"suspicious_country\" => \"YES\" }\n                    }\n                }\n
    \           }\n            else if ([log_name] == \"server\" or [log_name] ==
    \"errors\" or [log_name] == \"replication\") {\n                grok {\n                    match
    => {\n                        \"log_string\" => [ \"\\[%{DATA:timestamp}\\] %{WORD:severity}
    %{GREEDYDATA:message}\",\"\\[%{DATA:timestamp}\\][ ]{1,2}%{WORD}=%{GREEDYDATA}\"]\n
    \                   }\n                    break_on_match => \"true\"\n                }\n
    \               if ![severity] {\n                    kv {\n                        source
    => \"[log_string]\"\n                        value_split => \"=\"\n                        field_split
    => \" \\n\"\n                        include_brackets => true\n                    }\n
    \               }\n                date {\n                  match => [\"timestamp\",
    \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field
    => [\"timestamp\"]\n                }\n                if \"_grokparsefailure\"
    not in [tags] {\n\t                mutate{\n\t                  remove_field =>
    [\"log_string\"]\n\t                }\n                }\n            }\n            else
    if ([log_name] == \"failed-ops\" or [log_name] == \"expensive-write-ops\"){\n
    \               kv {\n                  source => \"[log_string]\"\n                  value_split
    => \"=\"\n                  include_brackets => true\n                }\n                grok
    {\n                  match => { \"log_string\" => \"\\[%{DATA:timestamp}\\] %{DATA:ldapType}
    %{WORD}=%{GREEDYDATA}\" }\n                  remove_field => [\"log_string\"]\n
    \               }\n                date {\n                  match => [\"timestamp\",
    \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field
    => [\"timestamp\"]\n                }\n            }\n        }\n    }\n}"
  06-pds-filters.conf: "filter {\n    if ([kubernetes][container_name] =~ \"pingdatasync\")
    {\n    ### Parse only logs starting from log path.\n    ### Everything else(hooks,
    logs going directly to console, etc) goes to logstash index without any parsing\n
    \       if ([log] =~ /^\\/opt\\/out\\/instance\\/logs/) {\n            grok {\n
    \               match => {\n                  \"log\" => [ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\\/%{DATA:log_name}(\\.log)?(\\.out)?
    %{GREEDYDATA:log_string}\" ]\n                }\n                remove_field
    => [\"log\"]\n            }\n            if ([log_string] == \"\") {\n                drop
    {}\n            }\n            mutate {\n                add_field => {\"[@metadata][index]\"
    => \"pds-%{log_name}\"}\n            }\n            if ([log_name] == \"access\"
    ) {\n                kv {\n                  source => \"[log_string]\"\n                  value_split
    => \"=\"\n                  include_brackets => true\n                }\n                grok
    {\n                  match => { \"log_string\" => \"\\[%{DATA:timestamp}\\] %{DATA:ldapType}
    %{WORD}=%{GREEDYDATA}\" }\n                  remove_field => [\"log_string\"]\n
    \               }\n                date {\n                  match => [\"timestamp\",
    \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field
    => [\"timestamp\"]\n                }\n                mutate{\n                  gsub
    => [ \"filter\", '\"', \"\" ]\n                  gsub => [ \"dn\", '\"', \"\"
    ]\n                  gsub => [ \"requesterIP\", \"internal\", \"127.0.0.1\" ]\n
    \                 rename => { \"msg\" => \"message\" }\n                }\n                translate
    {\n                  source => \"requesterIP\"\n                  target => \"threat_intel\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/AlienVaultIP.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                translate
    {\n                  source => \"requesterIP\"\n                  target => \"tor_intel\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/TorNodes.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                translate
    {\n                  source => \"[geoip][country_name]\"\n                  target
    => \"malicious_country\"\n                  fallback => \"No\"\n                  dictionary_path
    => '/enrichment-cache-files/MaliciousCountries.yml'\n                  refresh_behaviour
    => \"replace\"\n                }\n                translate {\n                  source
    => \"[geoip][country_name]\"\n                  target => \"known_country\"\n
    \                 fallback => \"No\"\n                  dictionary_path => '/enrichment-cache-files/KnownCountries.yml'\n
    \                 refresh_behaviour => \"replace\"\n                }\n                if([malicious_country]
    == \"No\" and [known_country] == \"No\"){\n                    mutate {\n                        add_field
    => { \"suspicious_country\" => \"YES\" }\n                    }\n                }\n
    \           }\n            else if ([log_name] == \"server\" or [log_name] ==
    \"errors\") {\n                grok {\n                    match => {\n                        \"log_string\"
    => [ \"\\[%{DATA:timestamp}\\] %{WORD:severity} %{GREEDYDATA:message}\",\"\\[%{DATA:timestamp}\\]
    %{WORD}=%{GREEDYDATA}\"]\n                    }\n                    break_on_match
    => \"true\"\n                }\n                if ![severity] {\n\t                kv
    {\n\t                    source => \"[log_string]\"\n\t                    value_split
    => \"=\"\n\t                    field_split => \" \\n\"\n\t                    include_brackets
    => true\n\t                }\n\t            }\n                date {\n                  match
    => [\"timestamp\", \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n
    \                 remove_field => [\"timestamp\"]\n                }\n                if
    \"_grokparsefailure\" not in [tags] {\n\t                mutate{\n\t                  remove_field
    => [\"log_string\"]\n\t                }\n                }\n            }\n            else
    if ([log_name] == \"failed-ops\"){\n                kv {\n                  source
    => \"[log_string]\"\n                  value_split => \"=\"\n                  include_brackets
    => true\n                }\n                grok {\n                  match =>
    { \"log_string\" => \"\\[%{DATA:timestamp}\\] %{DATA:ldapType} %{WORD}=%{GREEDYDATA}\"
    }\n                  remove_field => [\"log_string\"]\n                }\n                date
    {\n                  match => [\"timestamp\", \"dd/MMM/yyyy:HH:mm:ss.SSS Z\",
    \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field => [\"timestamp\"]\n
    \               }\n            }\n            else if ([log_name] == \"sync-failed-ops\"){\n
    \               grok {\n                    match => {\"log_string\" => \"\\[%{DATA:timestamp}\\]
    %{GREEDYDATA:message}\"}\n                    remove_field => [\"log_string\"]\n
    \               }\n                date {\n                  match => [\"timestamp\",
    \"dd/MMM/yyyy:HH:mm:ss.SSS Z\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n                  remove_field
    => [\"timestamp\"]\n                }\n            }\n        }\n    }\n}"
  07-pf-filters.conf: "filter {\n    if ([kubernetes][container_name] =~ \"pingfederate(-admin)?\")
    {\n    ### Parse only logs starting from log path.\n    ### Everything else(hooks,
    logs going directly to console, etc) goes to logstash index without any parsing\n
    \       if ([log] =~ /^\\/opt\\/out\\/instance\\/log/) {\n            grok {\n
    \               match => {\n                    \"log\" => [ \"^\\/opt\\/out\\/instance\\/log\\/%{DATA:log_name}(\\.log)?(\\.out)?
    %{GREEDYDATA:log_string}\" ]\n                }\n                remove_field
    => [\"log\"]\n            }\n            if ([log_string] == \"\") {\n                drop
    {}\n            }\n            mutate {\n                add_field => {\"[@metadata][index]\"
    => \"pf-%{log_name}\"}\n            }\n            if ([log_name] == \"admin-api\"
    or [log_name] == \"runtime-api\") {\n              dissect {\n                mapping
    => {\n                  \"log_string\" => \"%{timestamp}| %{user}| %{authType}|
    %{clientIP}| %{httpMethod}| %{url}| %{status}\"\n                }\n                remove_field
    => [\"log_string\"]\n              }\n              mutate {\n                gsub
    => [\"clientIP\",\"[\\[\\]]\",\"\"]\n              }\n            }\n            else
    if ([log_name] == \"admin-event-detail\") {\n              dissect {\n                mapping
    => {\n                  \"log_string\" => \"%{eventDetailId} | %{filename} | %{delta}
    | %{position} | %{message}\"\n                }\n                remove_field
    => [\"log_string\"]\n              }\n            }\n            else if ([log_name]
    == \"admin\") {\n              dissect {\n                mapping => {\n                  \"log_string\"
    => \"%{timestamp} | %{user} | %{roles} | %{ip} | %{component} | %{event} | %{eventDetailId}
    | %{message}\"\n                }\n                remove_field => [\"log_string\"]\n
    \             }\n              mutate {\n                replace => {\"[@metadata][index]\"
    => \"pf-admin-log\"}\n                gsub => [\"ip\",\"[\\[\\]]\",\"\"]\n              }\n
    \           }\n            else if ([log_name] == \"transaction\") {\n              dissect
    {\n                mapping => {\n                  \"log_string\" => \"%{timestamp}
    \ | %{host} | %{log_level} | %{event} | Connection ID: %{connectionId} | Virtual
    Server ID: %{virtualServerId} | %{urn} | %{eventType} | SAML ID: %{samlId} | %{variable_part}\"\n
    \               }\n                remove_field => [\"log_string\"]\n              }\n
    \             grok {\n                match => {\n                  \"variable_part\"
    => \"(Endpoint: %{URI:endpoint})|(SAML Subject: %{DATA:samlSubject} \\| %{DATA:binding}
    \\| SignatureStatus: %{DATA:signatureStatus}( \\|%{DATA:xmlMessage})?)$\"\n                }\n
    \               remove_field => [\"variable_part\"]\n              }\n            }\n
    \           else if ([log_name] == \"audit\") {\n              dissect {\n                mapping
    => {\n                  \"log_string\" => \"%{timestamp}| %{trackingId}| %{event}|
    %{subject}| %{ip} | %{app}| %{connectionId}| %{protocol}| %{host}| %{role}| %{status}|
    %{adapterId}| %{description}| %{responseTime->}\"\n                }\n                remove_field
    => [\"log_string\"]\n              }\n              ruby {\n                code
    => '\n                    hash = event.to_hash\n                    hash.each
    do |k,v|\n\t                    if v == \"\" || v == nil\n\t                        event.remove(k)\n\t
    \                   end\n                    end\n                '\n              }\n
    \           }\n            else if ([log_name] == \"provisioner-audit\") {\n              dissect
    {\n                mapping => {\n                  \"log_string\" => \"%{timestamp}|
    %{cycleId}| %{channelId}| %{eventType}| %{sourceId}| %{targetId}| %{isSuccess}|
    %{nonSuccessCause}\"\n                }\n                remove_field => [\"log_string\"]\n
    \             }\n            }\n            else if ([log_name] == \"provisioner\")
    {\n              grok {\n                match => {\n                  \"log_string\"
    => \"%{DATA}[ ]{1,3}%{WORD:logLevel}[ ]{1,3}\\[%{NOTSPACE:className}\\] %{GREEDYDATA:message}\"\n
    \               }\n                remove_field => [\"log_string\"]\n              }\n\t
    \         mutate {\n\t            replace => {\"[@metadata][index]\" => \"pf-provisioner-log\"}\n\t
    \           gsub => [\"ip\",\"[\\[\\]]\",\"\"]\n\t          }\n            }\n
    \           else if ([log_name] == \"server\") {\n              grok {\n                match
    => {\n                  \"log_string\" => \"%{TIMESTAMP_ISO8601:timestamp}( %{DATA:trackingId})?
    %{WORD:logLevel}[ ]{1,3}\\[%{NOTSPACE:className}\\] %{GREEDYDATA:message}\"\n
    \               }\n                remove_field => [\"log_string\"]\n              }\n
    \           }\n            else if ([log_name] == \"init\") {\n              grok
    {\n                match => {\n                  \"log_string\" => \"%{TIMESTAMP_ISO8601:timestamp}
    %{GREEDYDATA:message}\"\n                }\n                remove_field => [\"log_string\"]\n
    \             }\n            }\n            else if ([log_name] == \"jvm-garbage-collection\")
    {\n              grok {\n                match => {\n                  \"log_string\"
    => \"\\[%{TIMESTAMP_ISO8601:timestamp}\\]\\[%{NUMBER:secondsFromStart}s\\]\\[%{WORD:logLevel}\\]\\[%{DATA:categories}\\]
    %{GREEDYDATA:message}\"\n                }\n                remove_field => [\"log_string\"]\n
    \             }\n            }\n            else if ([log_name] =~ \"request\")
    {\n              grok {\n                match => {\n                  \"log_string\"
    => \"(%{IPORHOST:clientip})? %{HTTPDUSER:ident} %{USER:auth} \\[%{HTTPDATE:timestamp}\\]
    \\\"(?:%{WORD:method} %{NOTSPACE:request}(?: HTTP/%{NUMBER:httpversion})?|%{DATA:rawrequest})\\\"
    %{NUMBER:response} (?:%{NUMBER:bytes}|- )( \\\"%{NOTSPACE:referer}\\\")?( \\\"%{NOTSPACE:useragent}\\\")?\"\n
    \               }\n                remove_field => [\"log_string\"]\n              }\n
    \             mutate {\n                replace => {\"[@metadata][index]\" =>
    \"pf-request\"}\n              }\n            }\n            if ([timestamp])
    {\n              date {\n                match => [ \"timestamp\", \"ISO8601\",
    \"yyyy-MM-dd HH:mm:ss\", \"HH:mm:ss,SSS\", \"dd/MMM/yyyy:HH:mm:ss Z\", \"yyyy-MM-dd
    HH:mm:ss,SSS\"]\n                remove_field => [\"timestamp\"]\n              }\n
    \           }\n            if ([ip]) {\n                geoip {\n                    source
    => \"ip\"\n                }\n              ### Security Enrichments begin here,
    ENRICH THE IP ADDRESS DETAIL\n                translate {\n                    source
    => \"ip\"\n                    target => \"threat_intel\"\n                    fallback
    => \"No\"\n                    dictionary_path => '/enrichment-cache-files/AlienVaultIP.yml'\n
    \                   refresh_behaviour => \"replace\"\n                }\n                translate
    {\n                    source => \"ip\"\n                    target => \"tor_intel\"\n
    \                   fallback => \"No\"\n                    dictionary_path =>
    '/enrichment-cache-files/TorNodes.yml'\n                    refresh_behaviour
    => \"replace\"\n                }\n                translate {\n                    source
    => \"[geoip][country_name]\"\n                    target => \"malicious_country\"\n
    \                   fallback => \"No\"\n                    dictionary_path =>
    '/enrichment-cache-files/MaliciousCountries.yml'\n                    refresh_behaviour
    => \"replace\"\n                }\n                translate {\n                    source
    => \"[geoip][country_name]\"\n                    target => \"known_country\"\n
    \                   fallback => \"No\"\n                    dictionary_path =>
    '/enrichment-cache-files/KnownCountries.yml'\n                    refresh_behaviour
    => \"replace\"\n                }\n                if([malicious_country] == \"No\"
    and [known_country] == \"No\"){\n                    mutate {\n                        add_field
    => { \"suspicious_country\" => \"YES\" }\n                    }\n                }\n
    \             #Query for previous logins in OpenSearch, if login is found append
    data to the log\n              #IF A SUCCESSFUL LOGIN OCCURS, Query OS to see
    if the the attempt was successful in the past to determine distance from previous
    login.\n                if([status] == \"success\" and [event] == \"AUTHN_ATTEMPT\"
    and \"_geoip_lookup_failure\" not in [tags]){\n                    opensearch
    {\n                        index => \"pf-audit-read\"\n                        query_template
    => \"/etc/logstash/templates/6hr-1200km-template.json\"\n                        hosts
    \      => [\"opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200\"]\n
    \                       user => \"${OS_USER}\"\n                        password
    => \"${OS_PASSWORD}\"\n                        ssl         => true\n                        add_field
    => {\"found_distance_alert\" => \"YES\"}\n                        fields => {\n
    \                           \"subject\" => \"found_subject\"\n                            \"ip\"
    => \"found_ip\"\n                            \"[geoip][country_name]\" => \"found_country\"\n
    \                           \"[geoip][city_name]\" => \"found_city_name\"\n                            \"[geoip][latitude]\"
    => \"[found_geoip][latitude]\"\n                            \"[geoip][longitude]\"
    => \"[found_geoip][longitude]\"\n                            \"[geoip][location]\"
    => \"[found_geoip][location]\"\n                        }\n                    }\n
    \                   ### transform geoip coordinates to geoshape line between two
    locations\n                    if ([found_distance_alert] == \"YES\") {\n                        mutate
    {\n                            add_field => {\"[found_geoip][line]\" => \"LINESTRING
    (%{[geoip][longitude]} %{[geoip][latitude]},%{[found_geoip][longitude]} %{[found_geoip][latitude]})\"}\n
    \                       }\n                    }\n                }\n            }\n
    \       }\n    }\n}"
  08-pc-filters.conf: "filter {\n\tif ([kubernetes][container_name] == \"pingcentral\")
    {\n    ### Parse only logs starting from log path.\n    ### Everything else(hooks,
    logs going directly to console, etc) goes to logstash index without any parsing\n\t\tif
    ([log] =~ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\") {\n\t\t\tgrok {\n\t\t\t\tmatch
    => {\n\t\t\t\t\t\"log\" => [ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\\/%{DATA:log_name}(\\.log)?(\\.out)?
    %{GREEDYDATA:log_string}\" ]\n\t\t\t\t}\n\t\t\t\tremove_field => [\"log\"]\n\t\t\t}\n
    \           if ([log_string] == \"\") {\n                drop {}\n            }\n\t\t\tmutate
    {\n\t\t\t\tadd_field => {\"[@metadata][index]\" => \"pc-%{log_name}\"}\n\t\t\t}\n\t\t\tif
    ([log_name] == \"application-ext\" or [log_name] == \"application\") {\n\t\t\t\tgrok
    {\n\t\t\t\t\tmatch => {\n\t\t\t\t\t\t\"log_string\" => \"%{TIMESTAMP_ISO8601:timestamp}[
    ]{1,3}%{WORD:logLevel}[ ]{1,3}%{NOTSPACE:className}:%{NUMBER:position} - %{GREEDYDATA:message}\"\n\t\t\t\t\t}\n\t\t\t\t\tremove_field
    => [\"log_string\"]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ([log_name] == \"monitor\")
    {\n\t\t\t\tgrok {\n\t\t\t\t\tmatch => {\n\t\t\t\t\t\t\"log_string\" => \"%{TIMESTAMP_ISO8601:timestamp}
    \\| %{NOTSPACE:className} %{GREEDYDATA:message}\"\n\t\t\t\t\t}\n\t\t\t\t\tremove_field
    => [\"log_string\"]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ([log_name] == \"application-api\")
    {\n\t\t\t\tdissect {\n\t\t\t\t\tmapping => {\n\t\t\t\t\t\t\"log_string\" => \"%{timestamp}
    | %{className} %{user} | %{method} | %{client} | %{requestUri} | %{responseCode}\"\n\t\t\t\t\t}\n\t\t\t\t\tremove_field
    => [\"log_string\"]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ([timestamp]) {\n\t\t\t\tdate
    {\n\t\t\t\t\tmatch => [ \"timestamp\", \"ISO8601\", \"yyyy-MM-dd HH:mm:ss\" ]\n\t\t\t\t\tremove_field
    => [\"timestamp\"]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"
  09-pdg-filters.conf: "filter {\nif ([kubernetes][container_name] == \"pingdelegator\")
    {\n    ### Parse only logs starting from log path.\n    ### Everything else(hooks,
    logs going directly to console, etc) goes to logstash index without any parsing\n\t\tif
    ([log] =~ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\") {\n\t\t\tgrok {\n\t\t\t\tmatch
    => {\n\t\t\t\t\t\"log\" => [ \"^\\/opt\\/out\\/instance(\\/\\w+)?\\/log[s]?\\/%{DATA:log_name}(\\.log)?(\\.out)?
    %{GREEDYDATA:log_string}\" ]\n\t\t\t\t}\n\t\t\t\tremove_field => [\"log\"]\n\t\t\t}\n
    \           if ([log_string] == \"\") {\n                drop {}\n            }\n\t\t\tmutate
    {\n\t\t\t\tadd_field => {\"[@metadata][index]\" => \"pdg-%{log_name}\"}\n\t\t\t}\n\t\t\tif
    ([log_name] == \"access\") {\n\t\t\t\tdissect {\n\t\t\t\t\tmapping => {\n\t\t\t\t\t\t\"log_string\"
    => '%{client} - %{user} [%{timestamp}] \"%{method} %{url} HTTP/%{httpVersion}\"
    %{responseCode} %{bodySentBytes} \"%{referrer}\" \"%{userAgent}\" \"%{httpForwardedFor}\"'\n\t\t\t\t\t}\n\t\t\t\t\tremove_field
    => [\"log_string\"]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ([log_name] == \"error\")
    {\n\t\t\t\tgrok {\n\t\t\t\t\tmatch => {\n\t\t\t\t\t\t\"log_string\" => [\"%{DATA:timestamp}
    \\[%{WORD:logLevel}\\] %{NUMBER:pid}#%{NUMBER:tid}: (\\*%{NUMBER:connectionId}
    )?%{GREEDYDATA:message}\"]\n\t\t\t\t\t}\n\t\t\t\t\tremove_field => [\"log_string\"]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif
    ([timestamp]){\n\t\t\t\tdate {\n\t\t\t\t\tmatch => [ \"timestamp\", \"dd/MMM/yyyy:H:m:s
    Z\", \"yyyy/MM/dd HH:mm:ss\" ]\n\t\t\t\t\tremove_field => [\"timestamp\"]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"
  10-outputs.conf: |-
    output {
        if ([@metadata][index]) {
            opensearch {
              id => "OS_specified_index"
              hosts => ["https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200"]
              user => "${OS_USER}"
              password => "${OS_PASSWORD}"
              ssl => true
              ssl_certificate_verification => false
              sniffing => false
              index => "%{[@metadata][index]}-%{+YYYY.MM.dd}"
            }
        }
        else {
            opensearch {
              id => "OS_everything"
              hosts => ["https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200"]
              user => "${OS_USER}"
              password => "${OS_PASSWORD}"
              ssl => true
              ssl_certificate_verification => false
              sniffing => false
              index => "logstash-%{+YYYY.MM.dd}"
            }
        }
    }
kind: ConfigMap
metadata:
  name: logstash-pipeline-main-ht5h988bg2
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  newrelic.conf: "input {\n  http {\n    port => 8083\n    id => \"NR_in\"\n  }\n}\nfilter
    {\n### Remove unneeded fields came from fluent-bit\n  mutate {\n          remove_field
    => [ \"headers\",\"host\",\"date\"]\n      }\n\n  if [private_ip] {\n    ### Add
    temp field to get the correct host field inside NR\n    mutate {\n        add_field
    => { \"[@metadata][transf_host]\" => \"%{private_ip}\" }\n      }\n    mutate
    {\n        gsub => [ \"[@metadata][transf_host]\", \"\\.\", \"-\" ]\n        add_field
    => { \"host\" => \"ip-%{[@metadata][transf_host]}\" }\n      }\n  }      \n}\noutput
    {\n  newrelic {\n    license_key => \"${NR_LICENSE_KEY}\"\n    id => \"NR_out\"\n
    \ }\n}"
kind: ConfigMap
metadata:
  name: logstash-pipeline-nr-6tcc6f926g
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  s3.conf: |-
    input {
      http {
        port => 8081
        id => "s3_in"
      }
    }
    filter {
          ### Remove unneeded fields came from fluent-bit and set appropriate directory for s3
          mutate {
            add_field => { "[@metadata][s3_key]" => "%{[kubernetes][pod_name]}_%{[kubernetes][namespace_name]}_%{[kubernetes][container_name]}" }
            remove_field => [ "headers", "host","date"]
          }
    }
    output {
          s3 {
            region => "${AWS_REGION}"
            bucket => "${S3_BUCKET_NAME}"
            prefix => "/application/%{[@metadata][s3_key]}/%{+YYYY}/%{+MM}/%{+dd}/%{+HH}/%{+mm}/%{+ss}"
            time_file => "1"
            codec => "json"
            id => "s3_out"
          }
    }
kind: ConfigMap
metadata:
  name: logstash-pipeline-s3-gc9t2khd28
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pipelines.yml: |-
    - pipeline.id: main
      path.config: "/usr/share/logstash/pipeline/main"
    - pipeline.id: customer
      path.config: "/usr/share/logstash/pipeline/customer"
    - pipeline.id: s3
      path.config: "/usr/share/logstash/pipeline/s3"
    - pipeline.id: cloudwatch
      path.config: "/usr/share/logstash/pipeline/cloudwatch"
    - pipeline.id: newrelic
      path.config: "/usr/share/logstash/pipeline/newrelic"
    - pipeline.id: dlq
      path.config: "/usr/share/logstash/pipeline/dlq"
      pipeline.workers: 1
kind: ConfigMap
metadata:
  labels:
    app: logstash-elastic
  name: logstash-pipelines
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  6hr-1200km-template.json: |-
    {
      "query": {
        "bool": {
          "must": [],
          "filter": [
            {
              "range": {
                "@timestamp": {
                  "gte": "now-6h/h",
                  "lte": "now"
                }
              }
            },
            {
              "match_phrase": {
                "status": "success"
              }
            },
            {
              "match_phrase": {
                "event": "AUTHN_ATTEMPT"
              }
            },
            {
              "match_phrase": {
                "subject": "%{subject}"
              }
            },
            {
              "exists": {
                "field": "geoip.ip"
              }
            }
          ],
          "should": [],
          "must_not": {
            "geo_distance": {
              "distance": "1200km",
              "geoip.location": {
                "lat": "%{[geoip][latitude]}",
                "lon": "%{[geoip][longitude]}"
              }
            }
          }
        }
      },
      "size": 1,
      "sort": [
        {
          "@timestamp": {
            "order": "desc"
          }
        }
      ],
      "_source": ["subject", "geoip.location", "geoip.latitude", "geoip.longitude", "geoip.country_name", "geoip.city_name", "protocol", "ip", "malicious_country", "suspicious_country", "_id"]
    }
kind: ConfigMap
metadata:
  name: logstash-search-template
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  opensearch.yml: |-
    cluster.name: opensearch-cluster
    network.host: 0.0.0.0
    reindex.remote.whitelist: "*:9200"
    cluster.max_shards_per_node: 10000
    node.search.cache.size: 500mb
    prometheus:
      indices: false

    plugins:
      security:
        ssl:
          transport:
            pemcert_filepath: certs/tls.crt
            pemkey_filepath: certs/tls.key
            pemtrustedcas_filepath: certs/ca.crt
            enforce_hostname_verification: false
          http:
            enabled: true
            pemcert_filepath: certs/tls.crt
            pemkey_filepath: certs/tls.key
            pemtrustedcas_filepath: certs/ca.crt
        allow_unsafe_democertificates: false
        allow_default_init_securityindex: true
        nodes_dn:
          - CN=elastic-stack-logging.svc.cluster.local
        audit.type: internal_opensearch
        enable_snapshot_restore_privilege: true
        check_snapshot_restore_write_privileges: true
        restapi:
          roles_enabled: ["all_access", "security_rest_api_access"]
        system_indices:
          enabled: true
          indices:
            [
              ".opendistro-alerting-config",
              ".opendistro-alerting-alert*",
              ".opendistro-anomaly-results*",
              ".opendistro-anomaly-detector*",
              ".opendistro-anomaly-checkpoints",
              ".opendistro-anomaly-detection-state",
              ".opendistro-reports-*",
              ".opendistro-notifications-*",
              ".opendistro-notebooks",
              ".opendistro-asynchronous-search-response*",
            ]
kind: ConfigMap
metadata:
  name: opensearch-config-kgm6kddf69
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  opensearch_dashboards.yml: |-
    opensearch.ssl.verificationMode: full
    opensearch.ssl.certificateAuthorities: /usr/share/opensearch-dashboards/config/certs/ca.crt
    opensearch.requestHeadersAllowlist: [authorization, securitytenant]
    opensearch_security.auth.anonymous_auth_enabled: true
    opensearch_security.multitenancy.enabled: false
    opensearch_security.readonly_mode.roles: [kibana_read_only]
    # Use this setting if you are running opensearch-dashboards without https
    opensearch_security.cookie.secure: false
    server.host: '0.0.0.0'
    # Use the consolidated menu and global header bar
    opensearchDashboards.branding.useExpandedHeader: false
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: opensearch-dashboards
  name: opensearch-dashboards-config
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pd_back_init_fail.json: |-
    {
       "name": "PingDirectory Backend Initialization Failed",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"*backend-initialization-failed*\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992641/ALERT+PingDirectory+Backend+Initialization+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992641/ALERT+PingDirectory+Backend+Initialization+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_backend_disabled.json: |-
    {
       "name": "PingDirectory Backend Disabled",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"backend-disabled\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154632299/ALERT+PingDirectory+Backend+Disabled+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154632299/ALERT+PingDirectory+Backend+Disabled+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_critical_alarm.json: |-
    {
      "name": "PingDirectory Critical Alarm",
      "type": "monitor",
      "monitor_type": "bucket_level_monitor",
      "enabled": true,
      "schedule": {
        "period": {
          "unit": "MINUTES",
          "interval": 1
        }
      },
      "inputs": [
        {
          "search": {
            "indices": [
              "pd-errors-*"
            ],
            "query": {
              "size": 0,
              "aggregations": {
                "composite_agg": {
                  "composite": {
                    "sources": [
                      {
                        "cluster_name": {
                          "terms": {
                            "field": "cluster_name.keyword"
                          }
                        }
                      }
                    ]
                  },
                  "aggs": {}
                }
              },
              "query": {
                "bool": {
                  "filter": [
                    {
                      "range": {
                        "@timestamp": {
                          "gte": "{{period_end}}||-90s",
                          "lte": "{{period_end}}",
                          "format": "epoch_millis"
                        }
                      }
                    },
                    {
                      "match_phrase": {
                        "kubernetes.container_name": "pingdirectory"
                      }
                    },
                    {
                      "match_phrase": {
                        "msg": "\"alert type=alarm-critical\""
                      }
                    },
                    {
                       "wildcard": {
                          "severity": {
                             "wildcard": "*error*",
                             "boost": 1
                          }
                       }
                    },
                    {
                      "bool": {
                        "must_not": {
                          "bool": {
                            "filter": [
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "Database Cache Full"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              },
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "Backend appintegrations"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "bool": {
                        "must_not": {
                          "bool": {
                            "filter": [
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "Database Cache Full"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              },
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "Backend userRoot"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "bool": {
                        "must_not": {
                          "bool": {
                            "filter": [
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "alert type=alarm-major"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              },
                              {
                                "bool": {
                                  "should": [
                                    {
                                      "match_phrase": {
                                        "msg": "License Expiration"
                                      }
                                    }
                                  ],
                                  "minimum_should_match": 1
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "bool": {
                        "must_not": {
                          "bool": {
                            "should": [
                              {
                                "match_phrase": {
                                  "msg": "Active Cleaner Threads"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Available File Descriptors"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Changelog Database Target Size"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "CPU Usage"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Database Cache Full"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Backend appintegrations"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Backend userRoot"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Disk Busy"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "HTTP Processing"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "JVM Memory Usage"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "License Expiration"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Purge Expired Data Backlog"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Replication Purge Delay"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Undeletable Database Files"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "Work Queue Size"
                                }
                              }
                            ],
                            "minimum_should_match": 1
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      ],
      "triggers": [
        {
          "bucket_level_trigger": {
            "name": "Count more than 0",
            "severity": "1",
            "condition": {
              "buckets_path": {
                "_count": "_count"
              },
              "parent_bucket_path": "composite_agg",
              "script": {
                "source": "params._count > 0",
                "lang": "painless"
              },
              "gap_policy": "skip"
            },
            "actions": [
              {
                "name": "SREAPPALERTS",
                "destination_id": "sns_sreappalerts",
                "message_template": {
                  "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154340442/ALERT+PingDirectory+Critical+Alarm+in+CDE\"\n}",
                  "lang": "mustache"
                },
                "throttle_enabled": false,
                "subject_template": {
                  "source": "ALERT: {{ctx.monitor.name}}",
                  "lang": "mustache"
                },
                "action_execution_policy": {
                  "action_execution_scope": {
                    "per_alert": {
                      "actionable_alerts": [
                        "DEDUPED",
                        "NEW"
                      ]
                    }
                  }
                }
              },
              {
                "name": "CUSTOMERHUB",
                "destination_id": "sns_customerhub",
                "message_template": {
                  "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154340442/ALERT+PingDirectory+Critical+Alarm+in+CDE\"\n}",
                  "lang": "mustache"
                },
                "throttle_enabled": false,
                "subject_template": {
                  "source": "ALERT: {{ctx.monitor.name}}",
                  "lang": "mustache"
                },
                "action_execution_policy": {
                  "action_execution_scope": {
                    "per_alert": {
                      "actionable_alerts": [
                        "DEDUPED",
                        "NEW"
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      ]
    }
  pd_deadlock.json: |-
    {
       "name": "PingDirectory Deadlock Detected",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"deadlock-detected\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796042/ALERT+PingDirectory+Deadlock+Detected+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796042/ALERT+PingDirectory+Deadlock+Detected+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_ext_init_fail.json: |-
    {
       "name": "PingDirectory External Server Initialization Failed",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"external-server-initialization-failed\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154665104/ALERT+PingDirectory+External+Server+Initialization+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154665104/ALERT+PingDirectory+External+Server+Initialization+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_fail_mirror_conf.json: |-
    {
       "name": "PingDirectory Failed Mirror Configuration",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=failed-to-apply-mirrored-configuration\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992659/ALERT+PingDirectory+Failed+Mirror+Configuration+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992659/ALERT+PingDirectory+Failed+Mirror+Configuration+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_garbage_collection.json: |-
    {
       "name": "PingDirectory Continuous Garbage Collection",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=continuous-garbage-collection-detected\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992650/ALERT+PingDirectory+Continuous+Garbage+Collection+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992650/ALERT+PingDirectory+Continuous+Garbage+Collection+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_index_corrupt.json: |-
    {
       "name": "PingDirectory Index Corrupt",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"index-corrupt\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992668/ALERT+PingDirectory+Index+Corrupt+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992668/ALERT+PingDirectory+Index+Corrupt+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_index_degrade.json: |-
    {
       "name": "PingDirectory Index Degraded",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"index-degraded\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796051/ALERT+PingDirectory+Index+Degraded+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796051/ALERT+PingDirectory+Index+Degraded+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_lockdown.json: |-
    {
       "name": "PingDirectory Entering Lockdown Mode",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"*entering-lockdown-mode*\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154632308/ALERT+PingDirectory+Entering+Lockdown+Mode+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154632308/ALERT+PingDirectory+Entering+Lockdown+Mode+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pd-1
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pd_je_recovery.json: |-
    {
       "name": "PingDirectory Je Recovery Required",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"je-recovery-required\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796060/ALERT+PingDirectory+Je+Recovery+Required+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796060/ALERT+PingDirectory+Je+Recovery+Required+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_large_attr_fail.json: |-
    {
       "name": "PingDirectory Large Attribute Update Failure",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"large-attribute-update-failure\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992677/ALERT+PingDirectory+Large+Attribute+Update+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992677/ALERT+PingDirectory+Large+Attribute+Update+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_ldap_conn_fails.json: |-
    {
       "name": "PingDirectory LDAP Connection Handler Consecutive Failure",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"ldap-connection-handler-consecutive-failures\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796078/ALERT+PingDirectory+LDAP+Connection+Handler+Consecutive+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796078/ALERT+PingDirectory+LDAP+Connection+Handler+Consecutive+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_ldap_start_err.json: |-
    {
       "name": "PingDirectory LDAP Connection Handler Startup Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=ldap-connection-handler-cannot-listen\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796069/ALERT+PingDirectory+LDAP+Connection+Handler+Startup+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796069/ALERT+PingDirectory+LDAP+Connection+Handler+Startup+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_ldap_uncaught_err.json: |-
    {
       "name": "PingDirectory LDAP Connection Handler Uncaught Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"ldap-connection-handler-uncaught-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992686/ALERT+PingDirectory+LDAP+Connection+Handler+Uncaught+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992686/ALERT+PingDirectory+LDAP+Connection+Handler+Uncaught+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_low_disk.json: |-
    {
       "name": "PingDirectory Low Disk Space Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"low-disk-space-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992695/ALERT+PingDirectory+Low+Disk+Space+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992695/ALERT+PingDirectory+Low+Disk+Space+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_low_disk_warn.json: |-
    {
       "name": "PingDirectory Low Disk Space Warning",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"low-disk-space-warning\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796087/ALERT+PingDirectory+Low+Disk+Space+Warning+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796087/ALERT+PingDirectory+Low+Disk+Space+Warning+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_major_alarm.json: |-
    {
      "name": "PingDirectory Major Alarm",
      "type": "monitor",
      "monitor_type": "bucket_level_monitor",
      "enabled": true,
      "schedule": {
        "period": {
          "unit": "MINUTES",
          "interval": 1
        }
      },
      "inputs": [
        {
          "search": {
            "indices": [
              "pd-errors-*"
            ],
            "query": {
              "size": 0,
              "query": {
                "bool": {
                  "filter": [
                    {
                      "range": {
                        "@timestamp": {
                          "from": "{{period_end}}||-90s",
                          "to": "{{period_end}}",
                          "include_lower": true,
                          "include_upper": true,
                          "format": "epoch_millis",
                          "boost": 1
                        }
                      }
                    },
                    {
                      "match_phrase": {
                        "kubernetes.container_name": {
                          "query": "pingdirectory",
                          "slop": 0,
                          "zero_terms_query": "NONE",
                          "boost": 1
                        }
                      }
                    },
                    {
                       "wildcard": {
                          "severity": {
                             "wildcard": "*warning*",
                             "boost": 1
                          }
                       }
                    },
                    {
                      "match_phrase": {
                        "msg": {
                          "query": "\"alert type=alarm-major\"",
                          "slop": 0,
                          "zero_terms_query": "NONE",
                          "boost": 1
                        }
                      }
                    },
                    {
                      "bool": {
                        "must_not": {
                          "bool": {
                            "should": [
                              {
                                "match_phrase": {
                                  "msg": "Certificate Expiration"
                                }
                              },
                              {
                                "match_phrase": {
                                  "msg": "License Expiration"
                                }
                              }
                            ],
                            "minimum_should_match": 1
                          }
                        }
                      }
                    }
                  ],
                  "adjust_pure_negative": true,
                  "boost": 1
                }
              },
              "aggregations": {
                "composite_agg": {
                  "composite": {
                    "size": 10,
                    "sources": [
                      {
                        "cluster_name": {
                          "terms": {
                            "field": "cluster_name.keyword",
                            "missing_bucket": false,
                            "order": "asc"
                          }
                        }
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      ],
      "triggers": [
        {
          "bucket_level_trigger": {
            "name": "Count more than 0",
            "severity": "1",
            "condition": {
              "buckets_path": {
                "_count": "_count"
              },
              "parent_bucket_path": "composite_agg",
              "script": {
                "source": "params._count > 0",
                "lang": "painless"
              },
              "gap_policy": "skip"
            },
            "actions": [
              {
                "name": "SREAPPALERTS",
                "destination_id": "sns_sreappalerts",
                "message_template": {
                  "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796033/ALERT+PingDirectory+Major+Alarm+in+CDE\"\n}",
                  "lang": "mustache"
                },
                "throttle_enabled": false,
                "subject_template": {
                  "source": "ALERT: {{ctx.monitor.name}}",
                  "lang": "mustache"
                },
                "action_execution_policy": {
                  "action_execution_scope": {
                    "per_alert": {
                      "actionable_alerts": [
                        "DEDUPED",
                        "NEW"
                      ]
                    }
                  }
                }
              },
              {
                "name": "CUSTOMERHUB",
                "destination_id": "sns_customerhub",
                "message_template": {
                  "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796033/ALERT+PingDirectory+Major+Alarm+in+CDE\"\n}",
                  "lang": "mustache"
                },
                "throttle_enabled": false,
                "subject_template": {
                  "source": "ALERT: {{ctx.monitor.name}}",
                  "lang": "mustache"
                },
                "action_execution_policy": {
                  "action_execution_scope": {
                    "per_alert": {
                      "actionable_alerts": [
                        "DEDUPED",
                        "NEW"
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      ]
    }
  pd_out_of_disk.json: |-
    {
       "name": "PingDirectory Out-of-disk Space Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"out-of-disk-space-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796096/ALERT+PingDirectory+Out-of-disk+Space+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796096/ALERT+PingDirectory+Out-of-disk+Space+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_priv_assign.json: |-
    {
       "name": "PingDirectory Privilege Assigned",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"privilege-assigned\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992704/ALERT+PingDirectory+Privilege+Assigned+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992704/ALERT+PingDirectory+Privilege+Assigned+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pd-2
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pd_3rd_party_ext.json: |-
    {
       "name": "PingDirectory Third Party Extension Exception",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=third-party-extension-exception\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796123/ALERT+PingDirectory+Third+Party+Extension+Exception+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796123/ALERT+PingDirectory+Third+Party+Extension+Exception+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_cert_replace_fail.json: |-
    {
       "name": "PingDirectory Replace Certificate Failed",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "replace-certificate-failed"
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992712/ALERT+PingDirectory+Replace+Certificate+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992712/ALERT+PingDirectory+Replace+Certificate+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_backlog.json: |-
    {
       "name": "PingDirectory Replication Backlogged",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-backlogged\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992720/ALERT+PingDirectory+Replication+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992720/ALERT+PingDirectory+Replication+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_changelog_fail.json: |-
    {
       "name": "PingDirectory Replication Changelog Failure",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-server-changelog-failure\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992737/ALERT+PingDirectory+Replication+Changelog+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992737/ALERT+PingDirectory+Replication+Changelog+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_genid_mismatch.json: |-
    {
       "name": "PingDirectory Replication Generation-id Mismatch",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"replication-generation-id-mismatch\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992728/ALERT+PingDirectory+Replication+Generation-id+Mismatch+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992728/ALERT+PingDirectory+Replication+Generation-id+Mismatch+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_missing_changes.json: |-
    {
       "name": "PingDirectory Replication Missing Changes",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-missing-changes\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796105/ALERT+PingDirectory+Replication+Missing+Changes+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796105/ALERT+PingDirectory+Replication+Missing+Changes+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_replay_fail.json: |-
    {
       "name": "PingDirectory Replication Replay Operation Failed",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-replay-failed\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796114/ALERT+PingDirectory+Replication+Replay+Operation+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796114/ALERT+PingDirectory+Replication+Replay+Operation+Failed+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_server_fail.json: |-
    {
       "name": "PingDirectory Replication Server Failure",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-server-listen-failure\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992745/ALERT+PingDirectory+Replication+Server+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992745/ALERT+PingDirectory+Replication+Server+Failure+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_uncaught.json: |-
    {
       "name": "PingDirectory Uncaught Exception",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"uncaught-exception\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796131/ALERT+PingDirectory+Uncaught+Exception+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796131/ALERT+PingDirectory+Uncaught+Exception+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_unresolved_repl_conflict.json: |-
    {
       "name": "PingDirectory Unresolved Replication Conflict",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=replication-unresolved-conflict\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992753/ALERT+PingDirectory+Unresolved+Replication+Conflict+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992753/ALERT+PingDirectory+Unresolved+Replication+Conflict+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pd-3
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pd_active_cleaner_threads.json: |-
    {
       "name": "PingDirectory Active Cleaner Threads",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Active Cleaner Threads\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_available_file_descriptors.json: |-
    {
       "name": "PingDirectory Available File Descriptors",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Available File Descriptors\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_changelog_database_target_size.json: |-
    {
       "name": "PingDirectory Changelog Database Target Size",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Changelog Database Target Size\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_cpu_usage.json: |-
    {
       "name": "PingDirectory CPU Usage",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"CPU Usage\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_db_cache_full_appintegrations.json: |-
    {
       "name": "PingDirectory Database Cache Full - Backend appintegrations",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Database Cache Full\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Backend appintegrations\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_user_err.json: |-
    {
       "name": "PingDirectory User-defined Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"user-defined-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796139/ALERT+PingDirectory+User-defined+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796139/ALERT+PingDirectory+User-defined+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_user_fatal.json: |-
    {
       "name": "PingDirectory User-defined Fatal",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"user-defined-fatal\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796147/ALERT+PingDirectory+User-defined+Fatal+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796147/ALERT+PingDirectory+User-defined+Fatal+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_work_queue_back.json: |-
    {
       "name": "PingDirectory Work Queue Backlogged",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"work-queue-backlogged\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992761/ALERT+PingDirectory+Work+Queue+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992761/ALERT+PingDirectory+Work+Queue+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_work_queue_full.json: |-
    {
       "name": "PingDirectory Work Queue Full",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"work-queue-full\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796155/ALERT+PingDirectory+Work+Queue+Full+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796155/ALERT+PingDirectory+Work+Queue+Full+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_worker_threads_termin.json: |-
    {
       "name": "PingDirectory Worker Threads Terminated",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"alert type=work-queue-no-threads-remaining\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992769/ALERT+PingDirectory+Worker+Threads+Terminated+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992769/ALERT+PingDirectory+Worker+Threads+Terminated+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pd-4
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pd_db_cache_full_userroot.json: |-
    {
       "name": "PingDirectory Database Cache Full - Backend userRoot",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Database Cache Full\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Backend userRoot\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_disk_busy.json: |-
    {
       "name": "PingDirectory Disk Busy",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Disk Busy\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_http_processing.json: |-
    {
       "name": "PingDirectory HTTP Processing",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"HTTP Processing\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_jvm_mem_usage.json: |-
    {
       "name": "PingDirectory JVM Memory Usage",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"JVM Memory Usage\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_license_exp_crit.json: |-
    {
       "name": "PingDirectory License Expiration - Critical",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"License Expiration\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_license_exp_major.json: |-
    {
       "name": "PingDirectory License Expiration - Major",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.labels.role": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-major\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"License Expiration\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_purge_expired_data_backlog.json: |-
    {
       "name": "PingDirectory Purge Expired Data Backlog",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Purge Expired Data Backlog\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_repl_purge_delay.json: |-
    {
       "name": "PingDirectory Replication Purge Delay",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Replication Purge Delay\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_undeletable_db_files.json: |-
    {
       "name": "PingDirectory Undeletable Database Files",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Undeletable Database Files\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pd_work_q_size.json: |-
    {
       "name": "PingDirectory Work Queue Size",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pd-errors-*"
                ],
                "query": {
                   "size": 0,
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "from": "{{period_end}}||-90s",
                                     "to": "{{period_end}}",
                                     "include_lower": true,
                                     "include_upper": true,
                                     "format": "epoch_millis",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdirectory"
                              }
                            },
                            {
                               "wildcard": {
                                  "severity": {
                                     "wildcard": "*error*",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"type=alarm-critical\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                  "msg": {
                                     "query": "\"Work Queue Size\"",
                                     "slop": 0,
                                     "zero_terms_query": "NONE",
                                     "boost": 1
                                  }
                               }
                            }
                         ],
                         "adjust_pure_negative": true,
                         "boost": 1
                      }
                   },
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "size": 10,
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword",
                                        "missing_bucket": false,
                                        "order": "asc"
                                     }
                                  }
                               }
                            ]
                         }
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pd-5
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pds_conn_error.json: |-
    {
       "name": "PingDataSync Sync Resource Connection Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"sync-resource-connection-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796163/ALERT+PingDataSync+Sync+Resource+Connection+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796163/ALERT+PingDataSync+Sync+Resource+Connection+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_ops_error.json: |-
    {
       "name": "PingDataSync Sync Resource Operation Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"sync-resource-operation-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992777/ALERT+PingDataSync+Sync+Resource+Operation+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992777/ALERT+PingDataSync+Sync+Resource+Operation+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_pipe_backlog.json: |-
    {
       "name": "PingDataSync Sync Pipe Backlog Above Threshold",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"sync-pipe-backlog-above-threshold\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796171/ALERT+PingDataSync+Sync+Pipe+Backlog+Above+Threshold+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796171/ALERT+PingDataSync+Sync+Pipe+Backlog+Above+Threshold+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_user_err.json: |-
    {
       "name": "PingDataSync User-defined Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"user-defined-error\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796187/ALERT+PingDataSync+User-defined+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796187/ALERT+PingDataSync+User-defined+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_user_fatal.json: |-
    {
       "name": "PingDataSync User-defined Fatal",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"user-defined-fatal\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992785/ALERT+PingDataSync+User-defined+Fatal+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992785/ALERT+PingDataSync+User-defined+Fatal+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_work_queue_back.json: |-
    {
       "name": "PingDataSync Work Queue Backlogged",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"work-queue-backlogged\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992793/ALERT+PingDataSync+Work+Queue+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992793/ALERT+PingDataSync+Work+Queue+Backlogged+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pds_work_queue_full.json: |-
    {
       "name": "PingDataSync Work Queue Full",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pds-errors-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "match_phrase": {
                                "kubernetes.container_name": "pingdatasync"
                              }
                            },
                            {
                              "match_phrase": {
                                "msg": "\"work-queue-full\""
                              }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796195/ALERT+PingDataSync+Work+Queue+Full+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796195/ALERT+PingDataSync+Work+Queue+Full+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pds
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  pf_authn_exception.json: |-
    {
       "name": "PingFederate Authn Exception",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "term": {
                                "className.keyword": "org.sourceid.saml20.profiles.idp.HandleAuthnRequest"
                              }
                            },
                            {
                               "match_phrase": {
                                 "message": "Exception"
                               }
                             },
                             {
                               "term": {
                                 "kubernetes.labels.role.keyword": "pingfederate-engine"
                               }
                             }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992810/ALERT+PingFederate+Authn+Exception+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_fatal.json: |-
    {
       "name": "PingFederate Fatal Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "term": {
                                "logLevel.keyword": "FATAL"
                              }
                            },
                            {
                               "term": {
                                 "kubernetes.labels.role.keyword": "pingfederate-engine"
                               }
                            }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 0",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 0",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                        "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992818/ALERT+PingFederate+Fatal+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                        "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992818/ALERT+PingFederate+Fatal+Error+in+CDE\"\n}",                     "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_invalid_req.json: |-
    {
       "name": "PingFederate Invalid Request Parameter",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "term": {
                                "className.keyword": "org.sourceid.websso.servlet.reqparam.InvalidRequestParameterException"
                              }
                            },
                            {
                              "term": {
                                "logLevel.keyword": "ERROR"
                               }
                             },
                             {
                               "term": {
                                 "kubernetes.labels.role.keyword": "pingfederate-engine"
                               }
                             }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796212/ALERT+PingFederate+Invalid+Request+Parameter+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_ldap_conn_lost.json: |-
    {
       "name": "PingFederate LDAP Connection Lost",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                              "term": {
                                "className.keyword": "javax.naming.NamingException"
                              }
                            },
                            {
                               "match_phrase": {
                                 "message": "error code 91"
                               }
                             },
                             {
                               "term": {
                                 "logLevel.keyword": "ERROR"
                               }
                             },
                             {
                               "term": {
                                 "kubernetes.labels.role.keyword": "pingfederate-engine"
                               }
                             }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992826/ALERT+PingFederate+LDAP+Connection+Lost+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992826/ALERT+PingFederate+LDAP+Connection+Lost+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_missing_id.json: |-
    {
       "name": "PingFederate Profile Message Missing ID",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                               "match_phrase": {
                                 "message": "Profile Message ID Missing"
                               }
                             },
                             {
                               "term": {
                                 "kubernetes.labels.role.keyword": "pingfederate-engine"
                               }
                             }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796228/ALERT+PingFederate+Profile+Message+Missing+ID+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796228/ALERT+PingFederate+Profile+Message+Missing+ID+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_pingid_conn_lost.json: |-
    {
       "name": "PingFederate PingID Connection Lost",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                               "term": {
                                 "className.keyword": "com.pingidentity.adapters.pingid.DefaultHeartbeatService"
                               }
                             },
                             {
                                "match_phrase": {
                                  "message": "Connection refused"
                                }
                              },
                              {
                                "term": {
                                  "logLevel.keyword": "ERROR"
                                }
                              },
                              {
                                "term": {
                                  "kubernetes.labels.role.keyword": "pingfederate-engine"
                                }
                              }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796220/ALERT+PingFederate+PingID+Connection+Lost+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154796220/ALERT+PingFederate+PingID+Connection+Lost+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
  pf_unexpected_runtime.json: |-
    {
       "name": "PingFederate Unexpected Runtime Error",
       "type": "monitor",
       "monitor_type": "bucket_level_monitor",
       "enabled": true,
       "schedule": {
          "period": {
             "unit": "MINUTES",
             "interval": 1
          }
       },
       "inputs": [
          {
             "search": {
                "indices": [
                   "pf-server-*"
                ],
                "query": {
                   "size": 0,
                   "aggregations": {
                      "composite_agg": {
                         "composite": {
                            "sources": [
                               {
                                  "cluster_name": {
                                     "terms": {
                                        "field": "cluster_name.keyword"
                                     }
                                  }
                               }
                            ]
                         },
                         "aggs": {}
                      }
                   },
                   "query": {
                      "bool": {
                         "filter": [
                            {
                               "range": {
                                  "@timestamp": {
                                     "gte": "{{period_end}}||-90s",
                                     "lte": "{{period_end}}",
                                     "format": "epoch_millis"
                                  }
                               }
                            },
                            {
                               "term": {
                                 "className.keyword": "org.sourceid.saml20.profiles.idp.HandleAuthnRequest"
                               }
                             },
                             {
                                "match_phrase": {
                                  "message": "Unexpected Runtime Authn Integration Problem"
                                }
                              },
                              {
                                "term": {
                                  "kubernetes.labels.role.keyword": "pingfederate-engine"
                                }
                              }
                         ]
                      }
                   }
                }
             }
          }
       ],
       "triggers": [
          {
             "bucket_level_trigger": {
                "name": "Count more than 1",
                "severity": "1",
                "condition": {
                   "buckets_path": {
                      "_count": "_count"
                   },
                   "parent_bucket_path": "composite_agg",
                   "script": {
                      "source": "params._count > 1",
                      "lang": "painless"
                   },
                   "gap_policy": "skip"
                },
                "actions": [
                  {
                        "name": "SREAPPALERTS",
                        "destination_id": "sns_sreappalerts",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992834/ALERT+PingFederate+Unexpected+Runtime+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      },
                   {
                        "name": "CUSTOMERHUB",
                        "destination_id": "sns_customerhub",
                        "message_template": {
                          "source": "{\n  \"alert\": \"{{ctx.monitor.name}}\",\n  \"documents\": {{ctx.results.0.hits.total.value}},\n  \"cluster\": \"{{#ctx.newAlerts}}{{bucket_keys}}{{/ctx.newAlerts}}{{#ctx.dedupedAlerts}}{{bucket_keys}}{{/ctx.dedupedAlerts}}\",\n  \"timestamp\": \"{{ctx.periodEnd}}\",\n  \"runbook\": \"https://pingidentity.atlassian.net/wiki/spaces/ST/pages/154992834/ALERT+PingFederate+Unexpected+Runtime+Error+in+CDE\"\n}",
                          "lang": "mustache"
                        },
                        "throttle_enabled": false,
                        "subject_template": {
                          "source": "ALERT: {{ctx.monitor.name}}",
                          "lang": "mustache"
                        },
                        "action_execution_policy": {
                          "action_execution_scope": {
                            "per_alert": {
                              "actionable_alerts": [
                                "DEDUPED",
                                "NEW"
                              ]
                            }
                          }
                        }
                      }
                  ]
             }
          }
       ]
    }
kind: ConfigMap
metadata:
  name: os-alerts-pf
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  backup-jobs.json: |-
    {
      "index_patterns": [
        "backup-jobs-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "0",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-uid": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "job-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "message": {
              "type": "text"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  general.json: |-
    {
      "index_patterns": [
        "*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 0
    }
  healthchecks.json: |-
    {
      "index_patterns": [
        "healthchecks-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "0",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-template-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "message": {
              "type": "text"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  ingress-access.json: |-
    {
      "index_patterns": [
        "ingress-access-*"
      ],
      "template": {
        "settings": {
          "index.routing.allocation.require.temp": "hot",
          "index.refresh_interval": "30s",
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1"
        },
        "mappings": {
          "properties": {
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app_kubernetes_io/role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "pod-template-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "app_kubernetes_io/part-of": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "app_kubernetes_io/version": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "app_kubernetes_io/name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "app_kubernetes_io/component": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "@timestamp": {
              "type": "date"
            },
            "nginx": {
              "properties": {
                "access": {
                  "properties": {
                    "response_code": {
                      "type": "integer"
                    },
                    "geoip": {
                      "properties": {
                        "timezone": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "ip": {
                          "type": "ip"
                        },
                        "latitude": {
                          "type": "float"
                        },
                        "continent_code": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "city_name": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "country_code2": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "country_name": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "dma_code": {
                          "type": "long"
                        },
                        "country_code3": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "location": {
                          "properties": {
                            "lon": {
                              "type": "float"
                            },
                            "lat": {
                              "type": "float"
                            }
                          }
                        },
                        "region_name": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "postal_code": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "longitude": {
                          "type": "float"
                        },
                        "region_code": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        }
                      }
                    },
                    "method": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "upstream_addr": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "upstream_response_length": {
                      "type": "integer"
                    },
                    "user_name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "http_version": {
                      "type": "float"
                    },
                    "url": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "req_id": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "referrer": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "upstream_response_code": {
                      "type": "integer"
                    },
                    "remote_ip": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "request_time": {
                      "type": "float"
                    },
                    "request_length": {
                      "type": "integer"
                    },
                    "body_sent": {
                      "properties": {
                        "bytes": {
                          "type": "integer"
                        }
                      }
                    },
                    "proxy_upstream_name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "upstream_response_time": {
                      "type": "float"
                    },
                    "user_agent": {
                      "properties": {
                        "minor": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_minor": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_major": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_version": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "version": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_patch": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "patch": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_full": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "major": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "name": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "os_name": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "device": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  ingress-errors.json: |-
    {
      "index_patterns": [
        "ingress-error-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app_kubernetes_io/component": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "app_kubernetes_io/name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "app_kubernetes_io/part-of": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "app_kubernetes_io/role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "app_kubernetes_io/version": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-template-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "nginx": {
              "properties": {
                "error": {
                  "properties": {
                    "connection_id": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "level": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "message": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pid": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "tid": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                }
              }
            },
            "message": {
              "type": "text"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  logstash.json: |-
    {
      "index_patterns": [
        "logstash-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "dynamic_templates": [
            {
              "message_field": {
                "path_match": "message",
                "mapping": {
                  "norms": false,
                  "type": "text"
                },
                "match_mapping_type": "string"
              }
            },
            {
              "string_fields": {
                "mapping": {
                  "norms": false,
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  },
                  "type": "text"
                },
                "match_mapping_type": "string",
                "match": "*"
              }
            }
          ],
          "date_detection": false,
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "geoip": {
              "dynamic": "true",
              "properties": {
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "half_float"
                },
                "location": {
                  "type": "geo_point"
                },
                "longitude": {
                  "type": "half_float"
                }
              }
            },
            "@version": {
              "type": "keyword"
            },
            "timestamp": {
              "type": "text"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-agent-audit.json: |-
    {
      "index_patterns": [
        "pa-agent-audit-*",
        "pa-was-agent-audit-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-api-audit.json: |-
    {
      "index_patterns": [
        "pa-api-audit-*"
      ],
      "template": {
        "settings": {
          "index.routing.allocation.require.temp": "hot",
          "index.refresh_interval": "30s",
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1"
        },
        "mappings": {
          "properties": {
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "geoip": {
              "type": "object",
              "properties": {
                "ip": {
                  "type": "ip"
                }
              }
            },
            "method": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "subject": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestUri": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "roundTripMS": {
              "type": "integer"
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "responseCode": {
              "type": "integer"
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "client": {
              "type": "ip"
            },
            "authMech": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "trackingId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            }
          }
        },
        "aliases":{
          "pa-audit-ro": {}
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-engine-audit.json: |-
    {
      "index_patterns": [
        "pa-engine-audit-*"
      ],
      "template": {
        "settings": {
          "index.routing.allocation.require.temp": "hot",
          "index.refresh_interval": "30s",
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1"
        },
        "mappings": {
          "properties": {
            "kubernetes": {
              "properties": {
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "malicious_country": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "subject": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "roundTripMS": {
              "type": "integer"
            },
            "pathPrefix": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "responseCode": {
              "type": "integer"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "client": {
              "type": "ip"
            },
            "proxyRoundTripMS": {
              "type": "integer"
            },
            "applicationName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authMech": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "failedRuleType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "trackingId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "geoip": {
              "properties": {
                "timezone": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "float"
                },
                "continent_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "city_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "country_code2": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "country_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "dma_code": {
                  "type": "long"
                },
                "country_code3": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "location": {
                  "properties": {
                    "lon": {
                      "type": "float"
                    },
                    "lat": {
                      "type": "float"
                    }
                  }
                },
                "region_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "postal_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "longitude": {
                  "type": "float"
                },
                "region_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "method": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "resource": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "resourceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestUri": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "failedRuleName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "known_country": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            }
          }
        },
        "aliases":{
          "pa-audit-ro": {}
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-pingaccess.json: |-
    {
      "index_patterns": [
        "pa-pingaccess-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "className": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "logLevel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-sideband-audit.json: |-
    {
      "index_patterns": [
        "pa-sideband-audit-*",
        "pa-was-sideband-audit-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-sideband-client-audit.json: |-
    {
      "index_patterns": [
        "pa-sideband-client-audit-*",
        "pa-was-sideband-client-audit-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-upgrade.json: |-
    {
      "index_patterns": [
        "pa-upgrade-log-*",
        "pa-was-upgrade-log-*",
        "pa-upgrade-audit-*",
        "pa-was-upgrade-audit-*",
        "pa-upgrade-status-*",
        "pa-was-upgrade-status-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-was-api-audit.json: |-
    {
      "index_patterns": [
        "pa-was-api-audit-*"
      ],
      "template": {
        "settings": {
          "index.routing.allocation.require.temp": "hot",
          "index.refresh_interval": "30s",
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1"
        },
        "mappings": {
          "properties": {
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "geoip": {
              "type": "object",
              "properties": {
                "ip": {
                  "type": "ip"
                }
              }
            },
            "method": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "subject": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestUri": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "roundTripMS": {
              "type": "integer"
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "responseCode": {
              "type": "integer"
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "client": {
              "type": "ip"
            },
            "authMech": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "trackingId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            }
          }
        },
        "aliases":{
          "pa-was-audit-ro": {}
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-was-engine-audit.json: |-
    {
      "index_patterns": [
        "pa-was-engine-audit-*"
      ],
      "template": {
        "settings": {
          "index.routing.allocation.require.temp": "hot",
          "index.refresh_interval": "30s",
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1"
        },
        "mappings": {
          "properties": {
            "kubernetes": {
              "properties": {
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "malicious_country": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "subject": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "roundTripMS": {
              "type": "integer"
            },
            "pathPrefix": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "responseCode": {
              "type": "integer"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "client": {
              "type": "ip"
            },
            "proxyRoundTripMS": {
              "type": "integer"
            },
            "applicationName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authMech": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "failedRuleType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "trackingId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "geoip": {
              "properties": {
                "timezone": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "float"
                },
                "continent_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "city_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "country_code2": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "country_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "dma_code": {
                  "type": "long"
                },
                "country_code3": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "location": {
                  "properties": {
                    "lon": {
                      "type": "float"
                    },
                    "lat": {
                      "type": "float"
                    }
                  }
                },
                "region_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "postal_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "longitude": {
                  "type": "float"
                },
                "region_code": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "method": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "resource": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "resourceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestUri": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "failedRuleName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "known_country": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            }
          }
        },
        "aliases":{
          "pa-was-audit-ro": {}
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pa-was-pingaccess.json: |-
    {
      "index_patterns": [
        "pa-was-pingaccess-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "className": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "exchangeId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "logLevel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pc-application.json: |-
    {
      "index_patterns": [
        "pc-application-*",
        "pc-application-ext-*",
        "pc-application-api-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pc-monitor.json: |-
    {
      "index_patterns": [
        "pc-monitor-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-access.json: |-
    {
      "index_patterns": [
        "pd-access-*",
        "pds-access-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "conn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "instanceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "ldapType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "resultCode": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "preAuthZUsedPrivileges": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "dn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "type": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestOID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "qtime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_type": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "entriesReturned": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "scope": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "additionalInfo": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "timestamp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authFailureReason": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "severity": {
              "type": "long"
            },
            "op": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requestType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "authFailureID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "msgID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "logsource": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "priority": {
              "type": "long"
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "attrs": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "filter": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "threadID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            },
            "resultCodeName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "clientConnectionPolicy": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "etime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "requesterIP": {
              "type": "ip",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "opPurpose": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "usingAdminSessionWorkerThread": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "facility": {
              "type": "long"
            },
            "severity_label": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "base": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "facility_label": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-errors.json: |-
    {
      "index_patterns": [
        "pd-errors-*",
        "pds-errors-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "category": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "instanceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "class": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "msgID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "severity": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "threadID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "timestamp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "triggeredByConn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "triggeredByOp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-expensive-write-ops.json: |-
    {
      "index_patterns": [
        "pd-expensive-write-ops-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "class": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-failed-ops.json: |-
    {
      "index_patterns": [
        "pd-failed-ops-*",
        "pds-failed-ops-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "attrs": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "base": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "conn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "entriesReturned": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "etime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "filter": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "geoip": {
              "dynamic": "true",
              "properties": {
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "half_float"
                },
                "location": {
                  "type": "geo_point"
                },
                "longitude": {
                  "type": "half_float"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "instanceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "class": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "ldapType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "matchedDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "msgID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "op": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "passwordUpdateBehaviorAllowPreEncodedPassword": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "preAuthZUsedPrivileges": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "qtime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestControls": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestOID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterIP": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "resultCode": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "resultCodeName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "scope": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "targetEntry": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "threadID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "timestamp": {
              "type": "text"
            },
            "usedPrivileges": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "usingAdminSessionWorkerThread": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-replication.json: |-
    {
      "index_patterns": [
        "pd-replication-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "attrs": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "base": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "conn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "entriesReturned": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "etime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "filter": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "geoip": {
              "dynamic": "true",
              "properties": {
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "half_float"
                },
                "location": {
                  "type": "geo_point"
                },
                "longitude": {
                  "type": "half_float"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "instanceName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "class": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "ldapType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "matchedDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "msgID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "op": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "passwordUpdateBehaviorAllowPreEncodedPassword": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "preAuthZUsedPrivileges": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "qtime": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestControls": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestOID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requestType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterIP": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "resultCode": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "resultCodeName": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "scope": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "targetEntry": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "threadID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "timestamp": {
              "type": "text"
            },
            "usedPrivileges": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "usingAdminSessionWorkerThread": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pd-server.json: |-
    {
      "index_patterns": [
        "pd-server-*",
        "pds-server-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "addedACIs": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "admin-user": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "category": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "conn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "class": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "msgID": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "op": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "removedACIs": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterDN": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "requesterIP": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "resource": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "severity": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "timestamp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "triggeredByConn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "triggeredByOp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "userdn": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pdg-access.json: |-
    {
      "index_patterns": [
        "pdg-access-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "bodySentBytes": {
              "type": "integer"
            },
            "client": {
              "type": "ip"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "httpForwardedFor": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "httpVersion": {
              "type": "float"
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-template-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "method": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "referrer": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "responseCode": {
              "type": "integer"
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "url": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "user": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "userAgent": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pdg-error.json: |-
    {
      "index_patterns": [
        "pdg-error-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pds-sync-failed-ops.json: |-
    {
      "index_patterns": [
        "pds-sync-failed-ops-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-admin-api.json: |-
    {
      "index_patterns": [
        "pf-admin-api-*",
        "pf-runtime-api-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "authType": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "clientIP": {
              "type": "ip"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "httpMethod": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "status": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "url": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "user": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-admin-event-detail.json: |-
    {
      "index_patterns": [
        "pf-admin-event-detail-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-admin-log.json: |-
    {
      "index_patterns": [
        "pf-admin-log-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "component": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "event": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "eventDetailId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "geoip": {
              "type": "object"
            },
            "ip": {
              "type": "ip"
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "roles": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "threat_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tor_intel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "user": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-audit.json: |-
    {
      "index_patterns": [
        "pf-audit-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "role": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "subject": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "long_log_timestamp": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "type": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "log_type": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "protocol": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "event": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "found_geoip": {
              "dynamic": true,
              "properties": {
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "half_float"
                },
                "location": {
                  "type": "geo_point"
                },
                "longitude": {
                  "type": "half_float"
                },
                "line": {
                  "type": "geo_shape"
                }
              }
            },
            "timestamp": {
              "type": "text"
            },
            "trackingId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "app": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "severity": {
              "type": "long"
            },
            "geoip": {
              "dynamic": true,
              "properties": {
                "ip": {
                  "type": "ip"
                },
                "latitude": {
                  "type": "half_float"
                },
                "country_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                },
                "location": {
                  "type": "geo_point"
                },
                "longitude": {
                  "type": "half_float"
                }
              }
            },
            "ip": {
              "type": "ip",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "found_country": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "priority": {
              "type": "long"
            },
            "product_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "@timestamp": {
              "type": "date"
            },
            "company_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "connectionId": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "adapterid": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "facility": {
              "type": "long"
            },
            "event_time": {
              "type": "text"
            },
            "host_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "severity_label": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "facility_label": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "status": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        },
          "aliases":{
            "pf-audit-read": {}
          }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-init.json: |-
    {
      "index_patterns": [
        "pf-init-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-jvm-garbage-collection.json: |-
    {
      "index_patterns": [
        "pf-jvm-garbage-collection-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "categories": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "host": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "logLevel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "secondsFromStart": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-provisioner-audit.json: |-
    {
      "index_patterns": [
        "pf-provisioner-audit-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "15m",
          "index.number_of_shards": "1",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-provisioner.json: |-
    {
      "index_patterns": [
        "pf-provisioner-log-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "className": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "logLevel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-requests.json: |-
    {
      "index_patterns": [
        "pf-request-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "timestamp": {
              "type": "text"
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-server.json: |-
    {
      "index_patterns": [
        "pf-server-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "className": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "kubernetes": {
              "properties": {
                "container_hash": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_image": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "container_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "docker_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "host": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "labels": {
                  "properties": {
                    "app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "cluster": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "controller-revision-hash": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "entitled-app": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "pod-reaper": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "role": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    },
                    "statefulset_kubernetes_io/pod-name": {
                      "type": "text",
                      "fields": {
                        "keyword": {
                          "type": "keyword",
                          "ignore_above": 256
                        }
                      }
                    }
                  }
                },
                "namespace_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_id": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "pod_name": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "logLevel": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "log_string": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "stream": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "tags": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  pf-transaction.json: |-
    {
      "index_patterns": [
        "pf-transaction-*"
      ],
      "template": {
        "settings": {
          "index.unassigned.node_left.delayed_timeout": "10m",
          "index.number_of_shards": "3",
          "index.number_of_replicas": "1",
          "index.refresh_interval": "30s",
          "index": {
            "routing": {
              "allocation": {
                "require": {
                  "temp": "hot"
                }
              }
            }
          }
        },
        "mappings": {
          "properties": {
            "@timestamp": {
              "type": "date"
            },
            "@version": {
              "type": "text",
              "fields": {
                "keyword": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "cluster_name": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      },
      "composed_of": [],
      "priority": 100
    }
  shrink-logstash.json: |-
    {
        "index_patterns": [
          "shrink-*-logstash-*"
        ],
        "template": {
          "settings": {
            "index.routing.allocation.require.temp": "hot",
            "index.refresh_interval": "30s",
            "index.unassigned.node_left.delayed_timeout": "10m",
            "index.number_of_shards": "3",
            "index.number_of_replicas": "1"
          },
          "mappings": {
            "dynamic_templates": [
              {
                "message_field": {
                  "path_match": "message",
                  "mapping": {
                    "norms": false,
                    "type": "text"
                  },
                  "match_mapping_type": "string"
                }
              },
              {
                "string_fields": {
                  "mapping": {
                    "norms": false,
                    "fields": {
                      "keyword": {
                        "ignore_above": 256,
                        "type": "keyword"
                      }
                    },
                    "type": "text"
                  },
                  "match_mapping_type": "string",
                  "match": "*"
                }
              }
            ],
            "date_detection": false,
            "properties": {
              "cluster_name": {
                "type": "text",
                "fields": {
                  "keyword": {
                    "ignore_above": 256,
                    "type": "keyword"
                  }
                }
              },
              "@timestamp": {
                "type": "date"
              },
              "geoip": {
                "dynamic": "true",
                "properties": {
                  "ip": {
                    "type": "ip"
                  },
                  "latitude": {
                    "type": "half_float"
                  },
                  "location": {
                    "type": "geo_point"
                  },
                  "longitude": {
                    "type": "half_float"
                  }
                }
              },
              "@version": {
                "type": "keyword"
              },
              "timestamp": {
                "type": "text"
              }
            }
          }
        },
        "composed_of": [],
        "priority": 100
      }
kind: ConfigMap
metadata:
  name: os-index-templates-gb8m7tkmc7
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  ping-general.json: |-
    {
        "policy": {
            "policy_id": "ping_standard_policy",
            "description": "Standard ping policy (after 7 days read-only, after 90 days shrunk and delete, shrunken index will be processed via shrunken policy)",
            "last_updated_time": 1684846142111,
            "schema_version": 17,
            "error_notification": null,
            "default_state": "hot",
            "states": [
                {
                    "name": "hot",
                    "actions": [],
                    "transitions": [
                        {
                            "state_name": "RO",
                            "conditions": {
                                "min_index_age": "7d"
                            }
                        }
                    ]
                },
                {
                    "name": "RO",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "read_only": {}
                        }
                    ],
                    "transitions": [
                        {
                            "state_name": "delete",
                            "conditions": {
                                "min_index_age": "90d"
                            }
                        }
                    ]
                },
                {
                    "name": "delete",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "shrink": {
                                "num_new_shards": 1,
                                "target_index_name_template": {
                                    "source": "{{ctx.index}}_shrunken",
                                    "lang": "mustache"
                                },
                                "force_unsafe": true
                            }
                        },
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "delete": {}
                        }
                    ],
                    "transitions": []
                }
            ],
            "ism_template": [
                {
                    "index_patterns": [
                        "pd-*",
                        "pf-*",
                        "pa-*",
                        "pc-*",
                        "pdg-*",
                        "ingress-*",
                        "logstash-*"
                    ],
                    "priority": 1,
                    "last_updated_time": 1684842823048
                }
            ]
        }
    }
  ping-healthchecks.json: |-
    {
        "policy": {
            "policy_id": "ping_7day_policy",
            "description": "Ping policy for healthcheck and backup logs(after 7 days delete)",
            "last_updated_time": 1684842849484,
            "schema_version": 17,
            "error_notification": null,
            "default_state": "hot",
            "states": [
                {
                    "name": "hot",
                    "actions": [],
                    "transitions": [
                        {
                            "state_name": "delete",
                            "conditions": {
                                "min_index_age": "7d"
                            }
                        }
                    ]
                },
                {
                    "name": "delete",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "delete": {}
                        }
                    ],
                    "transitions": []
                }
            ],
            "ism_template": [
                {
                    "index_patterns": [
                        "healthchecks-*",
                        "backup-*"
                    ],
                    "priority": 1,
                    "last_updated_time": 1678887761113
                }
            ]
        }
    }
  ping-imported.json: |-
    {
        "policy": {
            "policy_id": "ping_imported",
            "description": "Ping policy for everything imported from ES(after 7 days shrink to 1 shard and delete, shrunken index will be processed via shrunken policy)",
            "last_updated_time": 1684846188882,
            "schema_version": 17,
            "error_notification": null,
            "default_state": "init",
            "states": [
                {
                    "name": "init",
                    "actions": [],
                    "transitions": [
                        {
                            "state_name": "store",
                            "conditions": {
                                "min_index_age": "7d"
                            }
                        }
                    ]
                },
                {
                    "name": "store",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "read_only": {}
                        },
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "shrink": {
                                "num_new_shards": 1,
                                "target_index_name_template": {
                                    "source": "{{ctx.index}}_shrunken",
                                    "lang": "mustache"
                                },
                                "force_unsafe": true
                            }
                        }
                    ],
                    "transitions": [
                        {
                            "state_name": "delete"
                        }
                    ]
                },
                {
                    "name": "delete",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "delete": {}
                        }
                    ],
                    "transitions": []
                }
            ],
            "ism_template": [
                {
                    "index_patterns": [
                        "*-imported"
                    ],
                    "priority": 100,
                    "last_updated_time": 1684841250879
                }
            ]
        }
    }
  ping-shrunken.json: |-
    {
       "policy": {
            "policy_id": "ping_shrunken_policy",
            "description": "Ping policy for shrunken indices(immediately merge, set replica to 0, move to warm, after 180 days delete)",
            "last_updated_time": 1684846300784,
            "schema_version": 17,
            "error_notification": null,
            "default_state": "init",
            "states": [
                {
                    "name": "init",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "replica_count": {
                                "number_of_replicas": 0
                            }
                        },
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "force_merge": {
                                "max_num_segments": 1
                            }
                        },
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "read_only": {}
                        },
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "allocation": {
                                "require": {
                                    "temp": "warm"
                                },
                                "include": {},
                                "exclude": {},
                                "wait_for": false
                            }
                        }
                    ],
                    "transitions": [
                        {
                            "state_name": "delete",
                            "conditions": {
                                "min_index_age": "180d"
                            }
                        }
                    ]
                },
                {
                    "name": "delete",
                    "actions": [
                        {
                            "retry": {
                                "count": 3,
                                "backoff": "exponential",
                                "delay": "1m"
                            },
                            "delete": {}
                        }
                    ],
                    "transitions": []
                }
            ],
            "ism_template": [
                {
                    "index_patterns": [
                        "*_shrunken"
                    ],
                    "priority": 500,
                    "last_updated_time": 1684846300784
                }
            ]
        }
    }
kind: ConfigMap
metadata:
  name: os-ism-policies-745k24kdb4
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  sns.json: '[]'
kind: ConfigMap
metadata:
  name: os-notifications-channels-dc7547gk9b
  namespace: elastic-stack-logging
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-health-environment-variables
  namespace: health
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-configuration
  namespace: ingress-nginx-private
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: tcp-services
  namespace: ingress-nginx-private
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: udp-services
  namespace: ingress-nginx-private
---
apiVersion: v1
data:
  REGION: ${REGION}
  SSM_PATH_DHPARAM: /pcpt/beluga/ingress-keys/ingress-nginx-public"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: ingress-bootstrap-environment-variables-ff2m998476
  namespace: ingress-nginx-public
---
apiVersion: v1
data:
  main-snippet: load_module /usr/lib/nginx/modules/ngx_http_sigsci_module.so;
  max-worker-connections: "0"
  ssl-ciphers: ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
  ssl-dh-param: ingress-nginx-public/dhparam
  worker-processes: "4"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-configuration
  namespace: ingress-nginx-public
---
apiVersion: v1
data:
  "2083": ping-cloud/pingfederate:2083
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: tcp-services
  namespace: ingress-nginx-public
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: udp-services
  namespace: ingress-nginx-public
---
apiVersion: v1
data:
  copy-secret.sh: |-
    #!/bin/sh

    cd /tmp

    kubectl get secret ${SECRET_NAME} \
        -n ${SECRET_NAMESPACE} \
        -o jsonpath='{.data.NEW_RELIC_LICENSE_KEY}' |
    base64 -d > NEW_RELIC_LICENSE_KEY

    kubectl create secret generic ${SECRET_NAME} \
        -n ${CURRENT_NAMESPACE} \
        --from-file=NEW_RELIC_LICENSE_KEY

    rm -f NEW_RELIC_LICENSE_KEY
kind: ConfigMap
metadata:
  name: copy-secret
  namespace: newrelic
---
apiVersion: v1
data:
  newrelic-infra.yml: |-
    is_forward_only: true
    http_server_enabled: true
    http_server_port: 8001
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events-agent-config
  namespace: newrelic
---
apiVersion: v1
data:
  config.yaml: |-
    sinks:
    - name: newRelicInfra
      config:
        agentEndpoint: http://localhost:8001/v1/data
        clusterName: k8s-cluster-name
        agentHTTPTimeout: 30s
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events-config
  namespace: newrelic
---
apiVersion: v1
data:
  config.yaml: |
    cluster_name: k8s-cluster-name
    audit: false
    insecure_skip_verify: true
    require_scrape_enabled_label_for_nodes: true
    scrape_enabled_label: prometheus.io/scrape
    scrape_endpoints: false
    scrape_services: true
    transformations:
    - description: Low data mode defaults
      ignore_metrics:
      - prefixes:
        - kube_
        - container_
        - machine_
        - cadvisor_
    verbose: false
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: nri-prometheus
    app.kubernetes.io/version: 2.9.0
    helm.sh/chart: nri-prometheus-1.10.0
  name: nri-bundle-nri-prometheus-config
  namespace: newrelic
---
apiVersion: v1
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: k8s-cluster-name
    # Report metric data about all the operating system's processes (PDO-4178)
    enable_process_metrics: true
    http_server_enabled: true
    http_server_port: 8001
    is_forward_only: true
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-agent-controlplane
  namespace: newrelic
---
apiVersion: v1
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: k8s-cluster-name
    http_server_enabled: true
    http_server_port: 8002
    is_forward_only: true
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-agent-ksm
  namespace: newrelic
---
apiVersion: v1
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: k8s-cluster-name
    features:
      docker_enabled: false
    http_server_enabled: true
    http_server_port: 8003
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-agent-kubelet
  namespace: newrelic
---
apiVersion: v1
data:
  nri-kubernetes.yml: |-
    interval: 15s # Default value is 15s
    controlPlane:
      retries: 3
      timeout: 10s
      enabled: true
      etcd:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          - url: http://localhost:2381
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=etcd
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          matchNode: true
          namespace: kube-system
          selector: k8s-app=etcd-manager-main
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          matchNode: true
          namespace: kube-system
          selector: k8s-app=etcd
        enabled: true
      scheduler:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-scheduler
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-scheduler
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: app=openshift-kube-scheduler,scheduler=true
        enabled: true
      controllerManager:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-controller-manager
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-controller-manager
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: app=kube-controller-manager,kube-controller-manager=true
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: app=controller-manager,controller-manager=true
        enabled: true
      apiServer:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:6443
          - url: http://localhost:8080
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-apiserver
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          - url: http://localhost:8080
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-apiserver
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          matchNode: true
          namespace: kube-system
          selector: app=openshift-kube-apiserver,apiserver=true
        enabled: true
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-controlplane
  namespace: newrelic
---
apiVersion: v1
data:
  pixie-health-check.yaml: |
    ---
    # This Flex config performs periodic checks of the Pixie
    # /healthz and /statusz endpoints exposed by the Pixie Cloud Connector.
    # A status for each endpoint is sent to New Relic in a pixieHealthCheck event.
    #
    # If Pixie is not installed in the cluster, no events will be generated.
    # This can also be disabled with enablePixieHealthCheck: false in the values.yaml file.
    discovery:
      command:
        exec: /var/db/newrelic-infra/nri-discovery-kubernetes --tls --port 10250
        match:
          label.name: vizier-cloud-connector
    integrations:
      - name: nri-flex
        interval: 60s
        config:
          name: pixie-health-check
          apis:
            - event_type: pixieHealth
              commands:
                - run: curl --insecure -s https://${discovery.ip}:50800/healthz | xargs | awk '{print "cloud_connector_health:"$1}'
                  split_by: ":"
              merge: pixieHealthCheck
            - event_type: pixieStatus
              commands:
                - run: curl --insecure -s https://${discovery.ip}:50800/statusz | awk '{if($1 == ""){ print "cloud_connector_status:OK" } else { print "cloud_connector_status:"$1 }}'
                  split_by: ":"
              merge: pixieHealthCheck
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-integrations-cfg
  namespace: newrelic
---
apiVersion: v1
data:
  nri-kubernetes.yml: |-
    interval: 15s # Default value is 15s
    ksm:
      enabled: true
      retries: 3
      scheme: http
      selector: app.kubernetes.io/name=kube-state-metrics
      timeout: 10s
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.6.0
    helm.sh/chart: newrelic-infrastructure-3.12.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-ksm
  namespace: newrelic
---
apiVersion: v1
data:
  nri-kubernetes.yml: |
    interval: 15s # Default value is 15s
    kubelet:
      enabled: true
      retries: 3
      timeout: 10s
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-kubelet
  namespace: newrelic
---
apiVersion: v1
data:
  pingmetadata.yaml: |
    ---
    integrations:
      - name: nri-flex
        interval: 2m
        config:
          name: pingmetadata
          apis:
            - event_type: pingmetaDataOutputSample
              url: http://metadata.${PING_CLOUD_NAMESPACE}:5000
              jq: ".version"
kind: ConfigMap
metadata:
  name: pingmetadata
  namespace: newrelic
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: custom-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  get_ssm_env_vars.sh: |
    #!/bin/sh

    VERBOSE="${VERBOSE:-false}"

    # Configuration file to share environment variables with main container.
    CONFIG_FILE='/config/ds_env_vars'

    # Enable debug flag for aws cli if VERBOSE is true
    if "${VERBOSE}"; then
      AWS_DEBUG='--debug'
    fi

    # Verify that the mandatory variable is set.
    if test -z "${REGION}"; then
      echo "REGION environment variable must be set"
      exit 1
    fi

    echo "AWSCLI VERSON: $(aws --version)"
    echo "AWS_REGION: ${REGION}"

    # Query aws endpoint to get value associated with the key.
    get_ssm_val() {
      param_name="$1"
      if ! ssm_val="$(aws ${AWS_DEBUG} ssm --region "${REGION}" get-parameters \
                --names "${param_name%#*}" \
                --query 'Parameters[*].Value' \
                --with-decryption \
                --output text)"; then
        echo "$ssm_val"
        return 1
      fi
      if [[ "$param_name" == *"secretsmanager"* ]]; then
        # grep for the value of the secrets manager object's key
        # the object's key is the string following the '#' in the param_name variable
        # Using python 2.7 available in docker image to retrieve JSON value.
        # Retrieved value should not contain any special characters so quoting is not required.
        echo "$ssm_val" | python -c "import sys, json; print json.load(sys.stdin)['${param_name#*#}']"
      else
        echo "$ssm_val"
      fi
    }

    # Check all the environment variables
    get_ssm_key() {
      for i in $(printenv); do
        key=${i%=*}
        val=${i#*=}
        case "$val" in "ssm://"*)
          if ! ssm_rv=$(get_ssm_val "${val#ssm:/}"); then
            return 1
          fi
          echo "$key=$ssm_rv" >>"${CONFIG_FILE}"
        esac
      done
    }

    echo "# Start Discovery Service" >>"${CONFIG_FILE}"

    if ! get_ssm_key; then
      exit 1
    fi

    echo "# End Discovery Service" >>"${CONFIG_FILE}"

    exit 0
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: discovery-service
  namespace: ping-cloud
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: known-hosts-config
  namespace: ping-cloud
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: p14c-bom-service
  name: p14c-bom-service-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: p14c-oauth-service
  name: p14c-oauth-service-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  config.yml: |-
    ---
    metrics:
    - name: metric_pingaccess_response_concurrency_statistics_90_percentile
      path: '{.response\.concurrency\.statistics\.90\.percentile}'
      labels:
        environment: pingaccess
        source: heartbeat
    - name: metric_pingaccess_response_statistics_count
      path: '{.response\.statistics\.count}'
      labels:
        environment: pingaccess
        source: heartbeat
    - name: metric_pingaccess_response_time_statistics_90_percentile
      path: '{.response\.time\.statistics\.90\.percentile}'
      labels:
        environment: pingaccess
        source: heartbeat
    - name: metric_pingaccess_response_concurrency_statistics_mean
      path: '{.response\.concurrency\.statistics\.mean}'
      labels:
        environment: pingaccess
        source: heartbeat
    - name: metric_pingaccess_response_time_statistics_mean
      path: '{.response\.time\.statistics\.mean}'
      labels:
        environment: pingaccess
        source: heartbeat
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pa-exporter-config
  namespace: ping-cloud
---
apiVersion: v1
data:
  config.yml: |-
    ---
    metrics:
    - name: metric_pingfederate_idp_session_registry_session_map_size
      path: '{.idp\.session\.registry\.session\.map\.size}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_response_concurrency_statistics_90_percentile
      path: '{.response\.concurrency\.statistics\.90\.percentile}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_response_statistics_count
      path: '{.response\.statistics\.count}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_response_time_statistics_90_percentile
      path: '{.response\.time\.statistics\.90\.percentile}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_session_state_attribute_map_size
      path: '{.session\.state\.attribute\.map\.size}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_sp_session_registry_session_map_size
      path: '{.sp\.session\.registry\.session\.map\.size}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_total_failed_transactions
      path: '{.total\.failed\.transactions}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_total_transactions
      path: '{.total\.transactions}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_response_concurrency_statistics_mean
      path: '{.response\.concurrency\.statistics\.mean}'
      labels:
        environment: pingfederate
        source: heartbeat
    - name: metric_pingfederate_response_time_statistics_mean
      path: '{.response\.time\.statistics\.mean}'
      labels:
        environment: pingfederate
        source: heartbeat
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pf-exporter-config
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  CONFIG_QUERY_KP_VALID_DAYS: "365"
  JAVA_OPTS: -javaagent:/opt/staging/jmx_prometheus_javaagent-0.14.0.jar=8080:/opt/in/instance/conf/jmx_export_config.yaml
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_SERVICE_NAME_PINGACCESS_ADMIN: pingaccess-admin
  K8S_STATEFUL_SET_NAME_PINGACCESS: pingaccess-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/pingaccess_engine_audit.log /opt/out/instance/log/pingaccess_api_audit.log
    /opt/out/instance/log/pingaccess_agent_audit.log /opt/out/instance/log/pingaccess_sideband_audit.log
    /opt/out/instance/log/pingaccess_sideband_client_audit.log /opt/out/instance/log/pingaccess.log
    /opt/out/instance/upgrade/log/upgrade.log /opt/out/instance/upgrade/log/audit.log
    /opt/out/instance/upgrade/log/upgrade_status.log
  ORCHESTRATION_TYPE: kubernetes
  PA_ADMIN_API_RATE_LIMIT: "5000"
  PA_ADMIN_API_RATE_LIMIT_POLICY: ""
  PA_ADMIN_APPLICATIONS: ""
  PA_ADMIN_PORT: "9000"
  PA_ADMIN_SERVER: pingaccess-admin
  PA_ADMIN_USER_USERNAME: Administrator
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_ENGINE_PORT: "3000"
  PA_GCOPTION: -XX:-UseParallelGC -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40
    -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90
  PA_MAX_HEAP: 1024m
  PA_MAX_YGEN: 512m
  PA_MIN_HEAP: 1024m
  PA_MIN_YGEN: 512m
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingaccess
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-admin-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-archive-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    UPLOAD_FILES=
    SERVER="${K8S_STATEFUL_SET_NAME_PINGACCESS}-0"
    SCRIPT="${HOOKS_DIR}"/90-upload-backup-s3.sh
    LOG_FILE=/tmp/upload.log

    echo "Uploading pingaccess backup data on server ${SERVER}"
    /tmp/kubectl exec "${SERVER}" -- sh -c \
            "test -x ${SCRIPT} && \
            ${SCRIPT}"> "${LOG_FILE}"

    if test ${?} -eq 0; then
      # Sending logs to STDOUT
      cat ${LOG_FILE}
      UPLOAD_FILE=$(tail -1 "${LOG_FILE}")
      test -z "${UPLOAD_FILES}" && UPLOAD_FILES="${UPLOAD_FILE}" || UPLOAD_FILES="${UPLOAD_FILES} ${UPLOAD_FILE}"
    else
      echo "Upload script not found on server ${SERVER}"
    fi

    # Print the names of the uploaded files so callers know exactly what was uploaded
    echo "The following files were uploaded:"
    echo "${UPLOAD_FILES}"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-backup
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  CONFIG_QUERY_KP_VALID_DAYS: "365"
  JAVA_OPTS: -javaagent:/opt/staging/jmx_prometheus_javaagent-0.14.0.jar=8080:/opt/in/instance/conf/jmx_export_config.yaml
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_SERVICE_NAME_PINGACCESS_ADMIN: pingaccess-admin
  K8S_STATEFUL_SET_NAME_PINGACCESS: pingaccess-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/pingaccess_engine_audit.log /opt/out/instance/log/pingaccess_api_audit.log
    /opt/out/instance/log/pingaccess_agent_audit.log /opt/out/instance/log/pingaccess_sideband_audit.log
    /opt/out/instance/log/pingaccess_sideband_client_audit.log /opt/out/instance/log/pingaccess.log
    /opt/out/instance/upgrade/log/upgrade.log /opt/out/instance/upgrade/log/audit.log
    /opt/out/instance/upgrade/log/upgrade_status.log
  ORCHESTRATION_TYPE: kubernetes
  PA_ADMIN_API_RATE_LIMIT: "5000"
  PA_ADMIN_API_RATE_LIMIT_POLICY: ""
  PA_ADMIN_APPLICATIONS: ""
  PA_ADMIN_PORT: "9000"
  PA_ADMIN_SERVER: pingaccess-admin
  PA_ADMIN_USER_USERNAME: Administrator
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_ENGINE_PORT: "3000"
  PA_GCOPTION: -XX:-UseParallelGC -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40
    -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90
  PA_MAX_HEAP: 1024m
  PA_MAX_YGEN: 512m
  PA_MIN_HEAP: 1024m
  PA_MIN_YGEN: 512m
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingaccess
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-csd-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    REPLICAS=$(/tmp/kubectl get pods -l=role="${CSD_POD_ROLE}" -o name)

    CSD_FILES=
    for REPLICA in ${REPLICAS}; do
      SERVER=${REPLICA}
      SCRIPT="${HOOKS_DIR}"/82-upload-csd-s3.sh
      LOG_FILE=/tmp/upload.log

      echo "Uploading CSD on server ${SERVER}"
      /tmp/kubectl exec "${SERVER}" -c "${CSD_CONTAINER_NAME}" -- sh -c "test -x ${SCRIPT} && ${SCRIPT}" >"${LOG_FILE}"

      # Sending logs to STDOUT
      cat ${LOG_FILE}

      if test ${?} -eq 0; then
        CSD_FILE=$(tail -1 "${LOG_FILE}")
        test -z "${CSD_FILES}" && CSD_FILES="${CSD_FILE}" || CSD_FILES="${CSD_FILES} ${CSD_FILE}"

        # Print the names of the uploaded files so callers know exactly what was uploaded
        echo "The following files were uploaded:"
        echo "${CSD_FILES}"
      else
        exit_code=${?}
        echo "The kubectl command attempting to invoke the script exited with: ${exit_code}"
        echo "This may be because: "
        echo "1) The ${SCRIPT} script is not currently available on the ${SERVER}.  This is expected if ${SERVER} is not running yet."
        echo "2) The ${SCRIPT} script exited with an error.  Please review the logs above to determine if this is the case."
      fi
    done
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-periodic-csd-upload
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  CONFIG_QUERY_KP_VALID_DAYS: "365"
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_SERVICE_NAME_PINGACCESS_WAS_ADMIN: pingaccess-was-admin
  K8S_STATEFUL_SET_NAME_PINGACCESS_WAS: pingaccess-was-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/pingaccess_engine_audit.log /opt/out/instance/log/pingaccess_api_audit.log
    /opt/out/instance/log/pingaccess_sideband_audit.log /opt/out/instance/log/pingaccess_sideband_client_audit.log
    /opt/out/instance/log/pingaccess.log /opt/out/instance/upgrade/log/upgrade.log
    /opt/out/instance/upgrade/log/audit.log /opt/out/instance/upgrade/log/upgrade_status.log
  ORCHESTRATION_TYPE: kubernetes
  PA_ADMIN_API_RATE_LIMIT: "5000"
  PA_ADMIN_API_RATE_LIMIT_POLICY: ""
  PA_ADMIN_APPLICATIONS: ""
  PA_ADMIN_PORT: "9000"
  PA_ADMIN_SERVER: pingaccess-was-admin
  PA_ADMIN_USER_USERNAME: Administrator
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_ENGINE_PORT: "3000"
  PA_GCOPTION: -XX:-UseParallelGC -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40
    -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90
  PA_MAX_HEAP: 256m
  PA_MAX_YGEN: 128m
  PA_MIN_HEAP: 128m
  PA_MIN_YGEN: 128m
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingaccess
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-admin-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-archive-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    UPLOAD_FILES=
    SERVER="${K8S_STATEFUL_SET_NAME_PINGACCESS_WAS}-0"
    SCRIPT="${HOOKS_DIR}"/90-upload-backup-s3.sh
    LOG_FILE=/tmp/upload.log

    echo "Uploading pingaccess backup data on server ${SERVER}"
    /tmp/kubectl exec "${SERVER}" -- sh -c \
            "test -x ${SCRIPT} && \
            ${SCRIPT}"> "${LOG_FILE}"

    if test ${?} -eq 0; then
      # Sending logs to STDOUT
      cat ${LOG_FILE}
      UPLOAD_FILE=$(tail -1 "${LOG_FILE}")
      test -z "${UPLOAD_FILES}" && UPLOAD_FILES="${UPLOAD_FILE}" || UPLOAD_FILES="${UPLOAD_FILES} ${UPLOAD_FILE}"
    else
      echo "Upload script not found on server ${SERVER}"
    fi

    # Print the names of the uploaded files so callers know exactly what was uploaded
    echo "The following files were uploaded:"
    echo "${UPLOAD_FILES}"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-backup
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  CONFIG_QUERY_KP_VALID_DAYS: "365"
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_SERVICE_NAME_PINGACCESS_WAS_ADMIN: pingaccess-was-admin
  K8S_STATEFUL_SET_NAME_PINGACCESS_WAS: pingaccess-was-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/pingaccess_engine_audit.log /opt/out/instance/log/pingaccess_api_audit.log
    /opt/out/instance/log/pingaccess_sideband_audit.log /opt/out/instance/log/pingaccess_sideband_client_audit.log
    /opt/out/instance/log/pingaccess.log /opt/out/instance/upgrade/log/upgrade.log
    /opt/out/instance/upgrade/log/audit.log /opt/out/instance/upgrade/log/upgrade_status.log
  ORCHESTRATION_TYPE: kubernetes
  PA_ADMIN_API_RATE_LIMIT: "5000"
  PA_ADMIN_API_RATE_LIMIT_POLICY: ""
  PA_ADMIN_APPLICATIONS: ""
  PA_ADMIN_PORT: "9000"
  PA_ADMIN_SERVER: pingaccess-was-admin
  PA_ADMIN_USER_USERNAME: Administrator
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_ENGINE_PORT: "3000"
  PA_GCOPTION: -XX:-UseParallelGC -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40
    -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90
  PA_MAX_HEAP: 256m
  PA_MAX_YGEN: 128m
  PA_MIN_HEAP: 128m
  PA_MIN_YGEN: 128m
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingaccess
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-csd-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    REPLICAS=$(/tmp/kubectl get pods -l=role="${CSD_POD_ROLE}" -o name)

    CSD_FILES=
    for REPLICA in ${REPLICAS}; do
      SERVER=${REPLICA}
      SCRIPT="${HOOKS_DIR}"/82-upload-csd-s3.sh
      LOG_FILE=/tmp/upload.log

      echo "Uploading CSD on server ${SERVER}"
      /tmp/kubectl exec "${SERVER}" -c "${CSD_CONTAINER_NAME}" -- sh -c "test -x ${SCRIPT} && ${SCRIPT}" >"${LOG_FILE}"

      # Sending logs to STDOUT
      cat ${LOG_FILE}

      if test ${?} -eq 0; then
        CSD_FILE=$(tail -1 "${LOG_FILE}")
        test -z "${CSD_FILES}" && CSD_FILES="${CSD_FILE}" || CSD_FILES="${CSD_FILES} ${CSD_FILE}"

        # Print the names of the uploaded files so callers know exactly what was uploaded
        echo "The following files were uploaded:"
        echo "${CSD_FILES}"
      else
        exit_code=${?}
        echo "The kubectl command attempting to invoke the script exited with: ${exit_code}"
        echo "This may be because: "
        echo "1) The ${SCRIPT} script is not currently available on the ${SERVER}.  This is expected if ${SERVER} is not running yet."
        echo "2) The ${SCRIPT} script exited with an error.  Please review the logs above to determine if this is the case."
      fi
    done
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-periodic-csd-upload
  namespace: ping-cloud
---
apiVersion: v1
data:
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  DEV_ENDPOINTS_ENABLED: "false"
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/application-api.log /opt/out/instance/log/application-ext.log
    /opt/out/instance/log/application.log /opt/out/instance/log/monitor.log
  MYSQL_DATABASE: pingcentral
  MYSQL_PASSWORD: ssm://aws/reference/secretsmanager//pcpt/ping-central/dbserver#password
  MYSQL_SERVICE_HOST: beluga-ci-cd-mysql.cmpxy5bpieb9.us-west-2.rds.amazonaws.com
  MYSQL_SERVICE_PORT: "3306"
  MYSQL_USE_SSL: "true"
  MYSQL_USER: ssm://aws/reference/secretsmanager//pcpt/ping-central/dbserver#username
  ORCHESTRATION_TYPE: kubernetes
  PC_ADMIN_USER_USERNAME: administrator
  PING_CENTRAL_BLIND_TRUST: "true"
  PING_CENTRAL_LOG_LEVEL: ERROR
  PING_CENTRAL_SERVER_PORT: "9022"
  PING_CENTRAL_VERIFY_HOSTNAME: "true"
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingcentral
  TAIL_LOG_FILES: ""
  VERBOSE: "false"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  CUSTOMER_SSM_PATH_PREFIX: /pcpt/customer
  CUSTOMER_SSO_SSM_PATH_PREFIX: /pcpt/customer/sso
  PLATFORM_EVENT_QUEUE_NAME: v2_platform_event_queue.fifo
  PLATFORM_EVENT_QUEUE_POLL_BATCH_SIZE: "1"
  PLATFORM_EVENT_QUEUE_POLL_INTERVAL_SECONDS: "2"
  REGION: us-west-2
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: pingcloud-p14c-bootstrap-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  p14c-bootstrap-resources.yaml: |
    product-entitlements:
      kind: ConfigMap
      name: entitlements
      template:
      values_container_key: entitlements.json
      ssm_type: json
      ssm_path_prefix: CUSTOMER_SSM_PATH_PREFIX
    bootstrap-configuration:
      kind: Secret
      name: p14c-bootstrap-secret
      template: templates/p14c-bootstrap-secret.yaml
      values_container_key: bootstrapConfiguration
      ssm_type: json
      ssm_path_prefix: CUSTOMER_SSO_SSM_PATH_PREFIX
    environment-metadata:
      kind: ConfigMap
      name: p14c-environment-metadata
      template:
      values_container_key: information.json
      ssm_type: json
      ssm_path_prefix: CUSTOMER_SSO_SSM_PATH_PREFIX
    customer-id:
      kind: ConfigMap
      name: customer-id
      template:
      values_container_key: id
      ssm_type: string
      ssm_path_prefix: CUSTOMER_SSM_PATH_PREFIX
    customer-metadata:
      kind: ConfigMap
      name: customer-metadata
      template:
      values_container_key: customer-metadata.json
      ssm_type: json
      ssm_path_prefix: CUSTOMER_SSM_PATH_PREFIX
    is-myping:
      kind: ConfigMap
      name: is-pingone
      template:
      values_container_key: P1
      ssm_type: boolean
      ssm_path_prefix: CUSTOMER_SSO_SSM_PATH_PREFIX
    davinci-configuration:
      kind: Secret
      name: davinci-configuration
      template: templates/davinci-configuration.yaml
      values_container_key: davinciConfiguration
      ssm_type: json
      ssm_path_prefix: CUSTOMER_SSO_SSM_PATH_PREFIX
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: pingcloud-p14c-bootstrap-resources
  namespace: ping-cloud
---
apiVersion: v1
data:
  GRP_CA_FILE: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
  GRP_CERT_FILE: /usr/local/secrets/certs/tls.crt
  GRP_KEY_FILE: /usr/local/secrets/certs/tls.key
  GRP_PORT: "2083"
  GRP_RADIUS_ACCT_PORT: "1813"
  GRP_RADIUS_PORT: "1812"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingcloud-radsecproxy-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  APP_INTEGRATIONS_BACKEND_ID: appintegrations
  APP_INTEGRATIONS_BASE_DN: o=appintegrations
  DA_DEFAULT_GRANT_TYPE_CLIENT_ID: dadmin
  DA_EXCLUSIVE_SCOPE_NAME: urn:pingidentity:directory-delegated-admin
  DA_IDENTITY_MAPPER_NAME: DAEntryUUIDMatch
  DA_IDP_ADAPTER_HTML_FORM_ID: daidphtml
  DA_JWT_ID: dajwt
  DA_OAUTH_TOKEN_VALIDATOR_CLIENT_ID: dapingdirectory
  DA_OIDC_POLICY_ID: dapolicy
  DA_PCV_ID: dapcv
  DA_PCV_SEARCH_FILTER: uid=${username}
  DA_PINGFEDERATE_ATV_NAME: DAPingFederateValidator
  DA_PINGFEDERATE_INSTANCE_NAME: DAPingFederate
  ENABLE_DEL_ADMIN: "true"
  KUBECTL_VERSION: v1.24.0
  LDAP_CLIENT_MANAGER_SEARCH_BASE: ou=clients,o=appintegrations
  LDAP_DS_ID: LDAP-FA8D375DFAC589A222E13AA059319ABF9823B552
  NOTIFICATION_ENABLED: "true"
  NOTIFICATION_ENDPOINT: http://webhook-eventsource-svc.argo-events:12999/notification
  PC_ADMIN_USER_USERNAME: administrator
  PD_PCV_SEARCH_FILTER: (&(objectClass=person)(|(mail=${username})(cn=${username})(uid=${username})))
  PINGFEDERATE_ENGINE_PORT: "9031"
  PINGFEDERATE_ENGINE_SERVER: pingfederate
  PLATFORM_CONFIG_BACKEND_ID: platformconfig
  PLATFORM_CONFIG_BASE_DN: o=platformconfig
  SLACK_CHANNEL: p1as-application-oncall
  TOPOLOGY_DESCRIPTOR_JSON: /opt/staging/topology/descriptor.json
  TOPOLOGY_DESCRIPTOR_PROFILES_JSON: /opt/staging/topology/descriptor-profiles.json
  USER_BACKEND_ID: userRoot
  USER_BACKEND_ID_2: userRoot_2
  USER_BACKEND_ID_3: userRoot_3
  USER_BACKEND_ID_4: userRoot_4
  USER_BACKEND_ID_5: userRoot_5
  USER_BASE_DN: dc=example,dc=com
  USER_BASE_DN_2: ""
  USER_BASE_DN_3: ""
  USER_BASE_DN_4: ""
  USER_BASE_DN_5: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingcommon-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  API_RETRY_LIMIT: "15"
  API_TIMEOUT_WAIT: "10"
  EXT_PD_ADMIN_BIND_DN: cn=administrator
  EXT_PD_CHANGELOG_SYNC_MAX_AGE: 2h
  EXT_PD_HOST: example.com
  EXT_PD_HOST_INITIAL_CONNECTIONS: "1"
  EXT_PD_HOST_MAX_CONNECTIONS: "4"
  EXT_PD_HTTPS_PORT: "1443"
  EXT_PD_LDAP_PORT: "1389"
  EXT_PD_LDAPS_PORT: "443"
  EXT_PD_SERVER: external_pd_server
  EXT_PD_SYNC_BIND_DN: cn=sync
  EXT_PD_TO_P1AS_PD_PIPE: external_pd_to_p1as_pd
  HTTPS_PORT: "1443"
  IS_P1AS_TEST_MODE: "false"
  K8S_STATEFUL_SET_NAME: pingdatasync
  K8S_STATEFUL_SET_SERVICE_NAME: pingdatasync-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/logs/access /opt/out/instance/logs/errors
    /opt/out/instance/logs/failed-ops /opt/out/instance/logs/server.out /opt/out/instance/logs/sync-failed-ops
  LDAP_PORT: "1389"
  LDAPS_PORT: "1636"
  LOCATION: Austin
  MAX_HEAP_SIZE: 3g
  ORCHESTRATION_TYPE: kubernetes
  P1AS_PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  P1AS_PD_HOST_INITIAL_CONNECTIONS: "1"
  P1AS_PD_HOST_MAX_CONNECTIONS: "4"
  P1AS_PD_POD_NAME: pingdirectory-0
  P1AS_PD_SERVER: p1as_pd_server
  P1AS_PD_TO_EXT_PD_PIPE: p1as_pd_to_external_pd
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  ROOT_BIND_DN: cn=administrator
  ROOT_USER_PASSWORD_FILE: /usr/local/secrets/root-user-password
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingdatasync
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SYNC_SERVER_NAME: sync
  TAIL_LOG_FILES: ""
  VERBOSE: "false"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdatasync
  name: pingdatasync-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_TAIL_LOG_FILES: /opt/out/instance/logs/error.log /opt/out/instance/logs/access.log
  ORCHESTRATION_TYPE: kubernetes
  PD_DELEGATOR_DADMIN_API_NAMESPACE: ""
  PD_DELEGATOR_HEADER_BAR_LOGO: ""
  PD_DELEGATOR_HTTPS_PORT: "1443"
  PD_DELEGATOR_PROFILE_SCOPE_ENABLED: "false"
  PD_DELEGATOR_TIMEOUT_LENGTH_MINS: "30"
  PD_HTTP_PUBLIC_PORT: "443"
  PF_DELEGATOR_CLIENTID: dadmin
  PF_ENGINE_PUBLIC_PORT: ""
  REGION: us-west-2
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/delegator
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  TAIL_LOG_FILES: ""
  VERBOSE: "false"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingdelegator-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-cronjob.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl
    chmod +x /tmp/kubectl

    # Execute backup-ops.sh script (which kicks off the k8s pingdirectory-backup Job)
    SCRIPT="/opt/in/backup-ops.sh"
    test -x ${SCRIPT} && ${SCRIPT} "scheduled-cronjob"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-backup-cronjob
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-cm.yaml: |-
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name:  pingdirectory-backup-script
    data:
      backup.sh: |-
        #!/bin/sh

        delete_pvc() {
          /tmp/kubectl delete pvc pingdirectory-backup -n ${PING_CLOUD_NAMESPACE} --grace-period=0 --force
        }

        # This guarantees that delete_pvc method will always run, even if the backup job exits due to an error
        trap "delete_pvc" EXIT

        # Job will not be using /opt/out, therefore force it to use its own /opt/in directory
        export HOOKS_DIR="/opt/in/hooks"

        # Install kubectl
        curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
        -o /tmp/kubectl
        chmod +x /tmp/kubectl

        echo "Running backup script for PingDirectory"
        SCRIPT="/opt/in/hooks/90-upload-backup-s3.sh"
        test -x ${SCRIPT} && ${SCRIPT}
  backup-job.yaml: |-
    # A manual backup job - this does the same thing as the CronJob except it may be configured to be triggered in reaction
    # to a ClickOps event.
    apiVersion: batch/v1
    kind: Job
    metadata:
      name: pingdirectory-backup
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      ttlSecondsAfterFinished: 30
      backoffLimit: 5
      template:
        spec:
          serviceAccountName: pingdirectory-ops-serviceaccount
          affinity:
            # This podAffinity rule is designed to deploy Backup/restore job to the same AZ as its targeted PingDirectory server
            podAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: statefulset.kubernetes.io/pod-name
                    operator: In
                    values:
                    - ${BACKUP_RESTORE_POD}
                topologyKey: "kubernetes.io/hostname"
          tolerations:
            - key: "pingidentity.com/pd-only"
              operator: "Equal"
              value: "true"
              effect: "NoSchedule"
          restartPolicy: Never
          initContainers:
          - name: pingdirectory-discovery-service
            image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
            imagePullPolicy: IfNotPresent
            command:
            - /get_ssm_env_vars.sh
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            volumeMounts:
            - name: data-dir
              mountPath: /config
            - name: discovery-service
              mountPath: /get_ssm_env_vars.sh
              subPath: get_ssm_env_vars.sh
          containers:
          - name: pingdirectory-backup
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            securityContext:
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
              allowPrivilegeEscalation: false
            command:
            - /opt/in/backup.sh
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            - name: ROOT_USER_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: pingdirectory-passwords
                  key: root-user-password
            - name: PING_CLOUD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            volumeMounts:
            - name: pingdirectory-backup-script
              mountPath: /opt/in/backup.sh
              subPath: backup.sh
            - name: out-dir
              mountPath: /opt/out
            - name: pd-backup-volume
              mountPath: /opt/backup
            - name: pingdirectory-passwords
              mountPath: /usr/local/secrets
              readOnly: true
            - name: pingdirectory-init
              mountPath: /opt/in/hooks/logger.lib.sh
              subPath: logger.lib.sh
            - name: data-dir
              mountPath: /opt/staging/ds_env_vars
              subPath: ds_env_vars
          securityContext:
            fsGroup: 9999
          volumes:
          - name: pingdirectory-backup-script
            configMap:
              name: pingdirectory-backup-script
              defaultMode: 0555
          - name: pd-backup-volume
            persistentVolumeClaim:
              claimName: pingdirectory-backup
          - name: out-dir
            persistentVolumeClaim:
              claimName: out-dir-${BACKUP_RESTORE_POD}
          - name: data-dir
            emptyDir: {}
          - name: pingdirectory-passwords
            secret:
              secretName: pingdirectory-passwords
              optional: true
              defaultMode: 0400
          - name: pingdirectory-init
            configMap:
              name: pingcommon-init
              defaultMode: 0555
          - name: discovery-service
            configMap:
              name: discovery-service
              defaultMode: 0555
  backup-ops.sh: |
    #!/bin/bash

    # Set as a function for this script if kubectl isn't installed.
    # Assume kubectl is available for pod under /tmp/kubectl.
    if ! command -v kubectl >/dev/null 2>&1; then
      # Check and see if kubectl is installed under /tmp.
      # If so, then source kubectl method which will be used by pod
      test -f /tmp/kubectl || (echo "kubectl is not installed: exiting" && exit 1)
      function kubectl() {
        /tmp/kubectl "${@}"
      }
    fi

    execution_type=${1-"manual-job"}

    echo "Executed By: ${execution_type}"

    # Set ping-cloud PING_CLOUD_NAMESPACE
    # Note: The regular expression \bping-cloud\S* matches any string that starts with "ping-cloud" (\bping-cloud) and has zero or more non-space characters after it (\S*).
    # e.g.
    # A CDE with ping-cloud namespace will set the variable NAMESPACE as 'ping-cloud'
    # A CDE with ping-cloud-username namespace will set the variable NAMESPACE as 'ping-cloud-username'
    if [ -z "${PING_CLOUD_NAMESPACE}" ]; then
      export PING_CLOUD_NAMESPACE=$(kubectl get namespaces -o jsonpath='{.items[*].metadata.name}{"\n"}' | grep -o -E "\bping-cloud\S*")
    fi

    # Get desired PingDirectory pod name
    if [ -z "${BACKUP_RESTORE_POD}" ]; then
      export BACKUP_RESTORE_POD=$(kubectl get configmap pingdirectory-environment-variables -o jsonpath='{.data.BACKUP_RESTORE_POD}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Get desired PingDirectory PVC size
    # TODO- Ticket to dynamically get the PD size using kubemetrics/prometheus https://pingidentity.atlassian.net/browse/PDO-4958
    if [ -z "${PINGDIRECTORY_PVC_SIZE}" ]; then
      export PINGDIRECTORY_PVC_SIZE=$(kubectl get pvc "out-dir-${BACKUP_RESTORE_POD}" -o jsonpath='{.spec.resources.requests.storage}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Create ConfigMap and PersistentVolumeClaim first as the Job is dependent on these resources during the mounting stage of the pod.
    # However, the configmap and pvc are independent and can be created in any order.
    kubectl get configmap pingdirectory-backup-ops-template-files -o jsonpath='{.data.backup-cm\.yaml}' -n "${PING_CLOUD_NAMESPACE}" | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
    kubectl get configmap pingdirectory-backup-ops-template-files -o jsonpath='{.data.backup-pvc\.yaml}' -n "${PING_CLOUD_NAMESPACE}" | envsubst | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
    kubectl get configmap pingdirectory-backup-ops-template-files -o jsonpath='{.data.backup-job\.yaml}' -n "${PING_CLOUD_NAMESPACE}" | envsubst | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
  backup-pvc.yaml: |-
    # Persistent Volume to run backup process
    apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: pingdirectory-backup
      labels:
        class: pingdirectory-server
    spec:
      accessModes:
        - ReadWriteOnce
      storageClassName: pingdirectory-gp3
      resources:
        requests:
          storage: ${PINGDIRECTORY_PVC_SIZE}
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-backup-ops-template-files
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  ADMIN_BIND_DN: cn=admin
  ADMIN_USER_PASSWORD_FILE: /usr/local/secrets/admin-user-password
  ADS_CRT_FILE: /usr/local/secrets/ads.crt
  ADS_KEY_FILE: /usr/local/secrets/ads.key
  BACKENDS_TO_BACKUP: userRoot;appintegrations;platformconfig;userRoot_2;userRoot_3;userRoot_4;userRoot_5
  BACKENDS_TO_RESTORE: ""
  BACKUP_FILE_NAME: ""
  BACKUP_RESTORE_POD: pingdirectory-0
  CHANGELOG_SYNC_MAX_AGE: 2h
  DISABLE_ALL_OLDER_USER_BASE_DN: "true"
  DISABLE_SCHEMA_REPLICATION: "true"
  ENCRYPTION_PASSWORD_FILE: /usr/local/secrets/encryption-password
  HTTPS_PORT: "1443"
  INITIALIZE_REPLICATION_DATA: "false"
  JAVA_AGENT_OPTS: -javaagent:/opt/staging/jmx_prometheus_javaagent-0.14.0.jar=8080:/opt/in/instance/conf/jmx_export_config.yaml
  K8S_ACME_CERT_SECRET_NAME: acme-tls-cert
  K8S_STATEFUL_SET_NAME: pingdirectory
  K8S_STATEFUL_SET_SERVICE_NAME: pingdirectory
  K8S_TAIL_LOG_FILES: /opt/out/instance/logs/access /opt/out/instance/logs/errors
    /opt/out/instance/logs/failed-ops /opt/out/instance/logs/expensive-write-ops /opt/out/instance/logs/replication
    /opt/out/instance/logs/server.out
  LDAP_PORT: "1389"
  LDAPS_PORT: "1636"
  LEAVE_DISK_AFTER_SERVER_DELETE: "false"
  LOCATION: Austin
  MAX_HEAP_SIZE: 3g
  OPTIMIZE_REPLACE_PROFILE: "true"
  ORCHESTRATION_TYPE: kubernetes
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PAUSE_REPLICATION_BEFORE_RESTORE: "true"
  PD_BASE_DN_LIMIT_INDEX: "20"
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PD_POD_LIMIT_INDEX: "1000"
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PING_IDENTITY_ACCEPT_EULA: "YES"
  REGION: us-west-2
  REPLICATION_BASE_DNS: o=platformconfig;o=appintegrations
  REPLICATION_PORT: "8989"
  RETRY_TIMEOUT_SECONDS: "300"
  ROOT_USER_PASSWORD_FILE: /usr/local/secrets/root-user-password
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingdirectory
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_INDEX_BUILD: "false"
  SKIP_LIVENESS: "true"
  SYNC_BIND_DN: cn=sync
  TAIL_LOG_FILES: ""
  TLS_TUNNEL_CIPHER_LIST: "null"
  TLS_TUNNEL_VERSIONS: TLSv1.2
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  export-ldif-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl -o /tmp/kubectl
    chmod +x /tmp/kubectl

    ERROR_MSG=
    SERVER="${K8S_STATEFUL_SET_NAME}-1"
    SCRIPT="${HOOKS_DIR}"/90-export-ldif-s3.sh
    LOG_FILE=/tmp/upload.log

    echo "Uploading LDIF_FILE on server ${SERVER}"
    /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c "test -x ${SCRIPT} && ${SCRIPT}">"${LOG_FILE}"
    export_ldif_status=$?

    if test ${export_ldif_status} -eq 0; then
      # Sending successful logs to STDOUT
      cat ${LOG_FILE}
    else
      # Append last 10 lines to ERROR_MSG
      EXPORT_LDIF_ERROR=$(tail -10 "${LOG_FILE}")
      ERROR_MSG="${SERVER} failed - ${EXPORT_LDIF_ERROR}"
      exit 1
    fi

    # Fail script if the desired server failed during export-ldif upload to S3
    if [ -n "${ERROR_MSG}" ]; then
      echo "${ERROR_MSG}"
      echo "Script failed exiting"
      exit 1
    fi
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-export-ldif
  namespace: ping-cloud
---
apiVersion: v1
data:
  upload-csd-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl -o /tmp/kubectl
    chmod +x /tmp/kubectl

    NUM_REPLICAS=$(/tmp/kubectl get statefulset "${K8S_STATEFUL_SET_NAME}" -o jsonpath='{.spec.replicas}')

    START=0
    END=$((${NUM_REPLICAS} - 1))

    CSD_FILES=
    ERROR_MSG=
    for i in $(seq ${START} ${END}); do
      SERVER="${K8S_STATEFUL_SET_NAME}-${i}"
      SCRIPT="${HOOKS_DIR}"/82-upload-csd-s3.sh
      LOG_FILE=/tmp/upload.log

      echo "Uploading CSD on server ${SERVER}"
      /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c "test -x ${SCRIPT} && ${SCRIPT}"> "${LOG_FILE}"
      csd_status=$?

      if test ${csd_status} -eq 0; then
        # Sending logs to STDOUT
        cat ${LOG_FILE}
        CSD_FILE=$(tail -1 "${LOG_FILE}")
        test -z "${CSD_FILES}" && CSD_FILES="${CSD_FILE}" || CSD_FILES="${CSD_FILES} ${CSD_FILE}"
      else
        # Append last 10 lines to ERROR_MSG
        CSD_ERROR=$(tail -10 "${LOG_FILE}")
        ERROR_MSG="${ERROR_MSG} ${SERVER} failed - ${CSD_ERROR}"
      fi
    done

    # Fail script if any of the servers failed during CSD upload to S3
    if [ -n "${ERROR_MSG}" ]; then
      echo "${ERROR_MSG}"
      echo "Script failed exiting"
      exit 1
    fi

    # Print the names of the uploaded files so callers know exactly what was uploaded
    echo "The following files were uploaded:"
    echo "${CSD_FILES}"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-csd-upload
  namespace: ping-cloud
---
apiVersion: v1
data:
  monitor-log-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl -o /tmp/kubectl
    chmod +x /tmp/kubectl

    NUM_REPLICAS=$(/tmp/kubectl get statefulset "${K8S_STATEFUL_SET_NAME}" -o jsonpath='{.spec.replicas}')

    START=0
    END=$((${NUM_REPLICAS} - 1))

    MONITOR_LOG_FILES=
    ERROR_MSG=
    for i in $(seq ${START} ${END}); do
      SERVER="${K8S_STATEFUL_SET_NAME}-${i}"
      SCRIPT="${HOOKS_DIR}"/82-upload-monitor-s3.sh
      MONITOR_LOG_FILE=/tmp/upload.log

      echo "Uploading monitor logs on server ${SERVER}"
      /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c "test -x ${SCRIPT} && ${SCRIPT}" > "${MONITOR_LOG_FILE}"
      monitor_log_status=$?

      if test ${monitor_log_status} -eq 0; then
        # Sending logs to STDOUT
        cat ${MONITOR_LOG_FILE}
      else
        # Append last 10 lines to ERROR_MSG
        MONITOR_LOG_ERROR=$(tail -10 "${MONITOR_LOG_FILE}")
        ERROR_MSG="${ERROR_MSG} ${SERVER} failed - ${MONITOR_LOG_ERROR}"
      fi
    done

    # Fail script if any of the servers failed during monitor log upload to S3
    if [ -n "${ERROR_MSG}" ]; then
      echo "${ERROR_MSG}"
      echo "Script failed exiting"
      exit 1
    fi
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-monitor-log-upload
  namespace: ping-cloud
---
apiVersion: v1
data:
  restore-cm.yaml: |-
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: pingdirectory-restore
    data:
      restore.sh: |
        #!/bin/sh

        # Job will not be using /opt/out, therefore force it to use its own /opt/in directory
        export HOOKS_DIR="/opt/in/hooks"
        SCRIPT="/opt/in/hooks/90-restore-backup-s3.sh"
        test -z "${BACKUP_RESTORE_POD}" && export SERVER="${K8S_STATEFUL_SET_NAME}-0" || export SERVER="${BACKUP_RESTORE_POD}"

        pause_replication () {
          if "${PAUSE_REPLICATION_BEFORE_RESTORE}" && test ${NUM_REPLICAS} -gt 1; then
            echo "Executing pre-initialization from within ${SERVER} pod for DNs: ${DNS_LIST}"
            for DN in ${DNS_LIST}; do
            # redirect stdout to /dev/null and stderr to logs
              /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c \
                "dsreplication pre-external-initialization \
                  --retryTimeoutSeconds \"${RETRY_TIMEOUT_SECONDS}\" \
                  --baseDN \"${DN}\" \
                  --no-prompt --ignoreWarnings >/dev/null"
            done
          fi
        }

        resume_replication() {
          if "${PAUSE_REPLICATION_BEFORE_RESTORE}" && test ${NUM_REPLICAS} -gt 1; then
            echo "Initializing replication from within ${SERVER} pod for DNs: ${DN_LIST} "
            for DN in ${DNS_LIST}; do
            # redirect stdout to /dev/null and stderr to logs
              /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c \
                "dsreplication initialize-all \
                  --retryTimeoutSeconds \"${RETRY_TIMEOUT_SECONDS}\" \
                  --baseDN \"${DN}\" \
                  --no-prompt --ignoreWarnings >/dev/null"
            done

            echo "Executing post-initialization from within ${SERVER} pod for DNs: ${DNS_LIST}"
            for DN in ${DNS_LIST}; do
            # redirect stdout to /dev/null and stderr to logs
              /tmp/kubectl exec "${SERVER}" -c pingdirectory -- sh -c \
                "dsreplication post-external-initialization \
                  --retryTimeoutSeconds \"${RETRY_TIMEOUT_SECONDS}\" \
                  --baseDN \"${DN}\" \
                  --no-prompt --ignoreWarnings >/dev/null"
            done
          fi
        }

        delete_pvc() {
          /tmp/kubectl delete pvc pingdirectory-restore -n ${PING_CLOUD_NAMESPACE} --grace-period=0 --force
        }

        cleanup () {
          resume_replication
          delete_pvc
        }

        # This guarantees that cleanup method will always run, even if the restore job exits due to an error
        trap "cleanup" EXIT

        # Install kubectl
        curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
        -o /tmp/kubectl

        chmod +x /tmp/kubectl

        NUM_REPLICAS=$(/tmp/kubectl get statefulset "${K8S_STATEFUL_SET_NAME}" -o jsonpath='{.spec.replicas}')
        echo "restore: number of replicas: ${NUM_REPLICAS}"

        DN_LIST=
        BASE_DNS_LIST="${USER_BASE_DN} ${USER_BASE_DN_2} ${USER_BASE_DN_3} ${USER_BASE_DN_4} ${USER_BASE_DN_5}"
        # Separate each USER_BASE_DN with a ';'
        BASE_DNS_LIST=$(echo ${BASE_DNS_LIST} | tr '[[:blank:]]/' ';')

        if test -z "${REPLICATION_BASE_DNS}"; then
          DN_LIST="${BASE_DNS_LIST}"
        else
        # Separate each USER_BASE_DN with a '|' to grep with a regex pattern.
        # Example: grep -qE "dc=example,dc=com|dc=test,dc=com"

          GREP_BASE_DNS_LIST=$(echo ${BASE_DNS_LIST} | tr ';' '|')
          if echo "${REPLICATION_BASE_DNS}" | grep -qE "${GREP_BASE_DNS_LIST}"; then
            DN_LIST="${REPLICATION_BASE_DNS}"
          else
            DN_LIST="${REPLICATION_BASE_DNS};${BASE_DNS_LIST}"
          fi
        fi
        DNS_LIST=$(echo "${DN_LIST}" | tr ';' ' ')

        pause_replication

        echo "Running restore script"
        test -x ${SCRIPT} && sh "${SCRIPT}"
  restore-job.yaml: |-
    ---

    # A manual restore can be performed by deploying this job. It will restore
    # data that was backed up by the periodic backup job to desired pingdirectory pod using the variable BACKUP_RESTORE_POD. All other servers
    # must initialize the data from the desired BACKUP_RESTORE_POD pod via dsreplication initialize-all. This
    # job can also be used to load the data initially from a backup created in
    # another environment, e.g. dev.
    apiVersion: batch/v1
    kind: Job
    metadata:
      name: pingdirectory-restore
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      ttlSecondsAfterFinished: 30
      backoffLimit: 0
      template:
        spec:
          serviceAccountName: pingdirectory-ops-serviceaccount
          affinity:
            # This podAffinity rule is designed to deploy Backup/restore job to the same AZ as its targeted PingDirectory server
            podAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: statefulset.kubernetes.io/pod-name
                    operator: In
                    values:
                    - ${BACKUP_RESTORE_POD}
                topologyKey: "kubernetes.io/hostname"
          tolerations:
            - key: "pingidentity.com/pd-only"
              operator: "Equal"
              value: "true"
              effect: "NoSchedule"
          restartPolicy: Never
          initContainers:
          - name: pingdirectory-discovery-service
            image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
            imagePullPolicy: IfNotPresent
            command:
            - /get_ssm_env_vars.sh
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            volumeMounts:
            - name: data-dir
              mountPath: /config
            - name: discovery-service
              mountPath: /get_ssm_env_vars.sh
              subPath: get_ssm_env_vars.sh
          containers:
          - name: pingdirectory-restore
            securityContext:
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
              allowPrivilegeEscalation: false
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            command:
            - /opt/in/restore.sh
            ports:
              - containerPort: 1636
                name: ldaps
            volumeMounts:
            - name: restore-script
              mountPath: /opt/in/restore.sh
              subPath: restore.sh
            - name: pd-restore-volume
              mountPath: /opt/restore
            - name: out-dir
              mountPath: /opt/out
            - name: pingdirectory-passwords
              mountPath: /usr/local/secrets
              readOnly: true
            - name: pingdirectory-init
              mountPath: /opt/in/hooks/logger.lib.sh
              subPath: logger.lib.sh
            - name: pingdirectory-init
              mountPath: /opt/in/utils.lib.sh
              subPath: utils.lib.sh
            - name: data-dir
              mountPath: /opt/staging/ds_env_vars
              subPath: ds_env_vars
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            - name: BACKUP_FILE_NAME
              value: "${BACKUP_FILE_NAME}"
            - name: BACKENDS_TO_RESTORE
              value: "${BACKENDS_TO_RESTORE}"
            - name: ROOT_USER_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: pingdirectory-passwords
                  key: root-user-password
            - name: PING_CLOUD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          securityContext:
            fsGroup: 9999
          volumes:
          - name: restore-script
            configMap:
              name: pingdirectory-restore
              defaultMode: 0555
          - name: pd-restore-volume
            persistentVolumeClaim:
              claimName: pingdirectory-restore
          - name: out-dir
            persistentVolumeClaim:
              claimName: out-dir-${BACKUP_RESTORE_POD}
          - name: pingdirectory-passwords
            secret:
              secretName: pingdirectory-passwords
              optional: true
              defaultMode: 0400
          - name: pingdirectory-init
            configMap:
              name: pingcommon-init
              defaultMode: 0555
          - name: discovery-service
            configMap:
              name: discovery-service
              defaultMode: 0555
          - name: data-dir
            emptyDir: {}
  restore-ops.sh: |-
    #!/bin/bash

    # Set as a function for this script if kubectl isn't installed.
    # Assume kubectl is available for pod under /tmp/kubectl.
    if ! command -v kubectl >/dev/null 2>&1; then
      # Check and see if kubectl is installed under /tmp.
      # If so, then source kubectl method which will be used by pod
      test -f /tmp/kubectl || (echo "kubectl is not installed: exiting" && exit 1)
      function kubectl() {
        /tmp/kubectl "${@}"
      }
    fi

    # Set ping-cloud PING_CLOUD_NAMESPACE
    # Note: The regular expression \bping-cloud\S* matches any string that starts with "ping-cloud" (\bping-cloud) and has zero or more non-space characters after it (\S*).
    # e.g.
    # A CDE with ping-cloud namespace will set the variable NAMESPACE as 'ping-cloud'
    # A CDE with ping-cloud-username namespace will set the variable NAMESPACE as 'ping-cloud-username'
    if [ -z "${PING_CLOUD_NAMESPACE}" ]; then
      export PING_CLOUD_NAMESPACE=$(kubectl get namespaces -o jsonpath='{.items[*].metadata.name}{"\n"}' | grep -o -E "\bping-cloud\S*")
    fi

    # Get desired backends to restore in pingdirectory pod
    if [ -z "${BACKENDS_TO_RESTORE}" ]; then
      export BACKENDS_TO_RESTORE=$(kubectl get cm "pingdirectory-environment-variables" -o jsonpath='{.data.BACKENDS_TO_RESTORE}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Get desired PingDirectory pod name
    if [ -z "${BACKUP_RESTORE_POD}" ]; then
      export BACKUP_RESTORE_POD=$(kubectl get configmap pingdirectory-environment-variables -o jsonpath='{.data.BACKUP_RESTORE_POD}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Get desired PingDirectory PVC size
    if [ -z "${PINGDIRECTORY_PVC_SIZE}" ]; then
      export PINGDIRECTORY_PVC_SIZE=$(kubectl get pvc "out-dir-${BACKUP_RESTORE_POD}" -o jsonpath='{.spec.resources.requests.storage}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Get desired backup file name to restore in pingdirectory pod
    if [ -z "${BACKUP_FILE_NAME}" ]; then
      export BACKUP_FILE_NAME=$(kubectl get cm "pingdirectory-environment-variables" -o jsonpath='{.data.BACKUP_FILE_NAME}' -n "${PING_CLOUD_NAMESPACE}")
    fi

    # Create ConfigMap and PersistentVolumeClaim first as the Job is dependent on these resources during the mounting stage of the pod.
    # However, the configmap and pvc are independent and can be created in any order.
    kubectl get configmap pingdirectory-restore-ops-template-files -o jsonpath='{.data.restore-cm\.yaml}'  -n "${PING_CLOUD_NAMESPACE}" | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
    kubectl get configmap pingdirectory-restore-ops-template-files -o jsonpath='{.data.restore-pvc\.yaml}' -n "${PING_CLOUD_NAMESPACE}" | envsubst | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
    kubectl get configmap pingdirectory-restore-ops-template-files -o jsonpath='{.data.restore-job\.yaml}' -n "${PING_CLOUD_NAMESPACE}" | envsubst | kubectl apply -f - -n "${PING_CLOUD_NAMESPACE}"
  restore-pvc.yaml: |-
    # Persistent Volume to run restore process
    apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: pingdirectory-restore
      labels:
        class: pingdirectory-server
    spec:
      accessModes:
        - ReadWriteOnce
      storageClassName: pingdirectory-gp3
      resources:
        requests:
          storage: ${PINGDIRECTORY_PVC_SIZE}
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-restore-ops-template-files
  namespace: ping-cloud
---
apiVersion: v1
data:
  pingdirectory-statsd-mapping.yml: |-
    mappings:
        # operation response time and throughput
      - match: "*.*.response-time"
        name: "response_time"
        labels:
          operation: "$2"
      - match: "*.*.throughput"
        name: "throughput"
        labels:
          operation: "$2"
        # connection handler metrics
      - match: "*.*.*.*.ldap-conn-handler-bytes-read"
        name: "LDAP_connection_handler_bytes_read"
        labels:
          port: "$4"
      - match: "*.*.*.*.ldap-conn-handler-bytes-written"
        name: "LDAP_connection_handler_bytes_written"
        labels:
          port: "$4"
      - match: "*.*.*.*.ldap-conn-handler-messages-read"
        name: "LDAP_connection_handler_messages_read"
        labels:
          port: "$4"
      - match: "*.*.*.*.ldap-conn-handler-messages-written"
        name: "LDAP_connection_handler_messages_written"
        labels:
          port: "$4"
      - match: "*.*.*.*.ldap-conn-handler-search-requests"
        name: "LDAP_connection_handler_search_requests"
        labels:
          port: "$4"
      - match: "*.*.*.*.ldap-conn-handler-search-entries-returned"
        name: "LDAP_connection_handler_search_entries_returned"
        labels:
          port: "$4"
        # backend metrics
      - match: "*.backend-entry-count"
        name: "backend_entry_count"
        labels:
          backendID: "$1"
      - match: "*.backend-db-cache-percent-full"
        name: "backend_db_cache_percent_full"
        labels:
          backendID: "$1"
      - match: "*.backend-size-on-disk"
        name: "backend_size_on_disk"
        labels:
          backendID: "$1"
      - match: "*.backend-active-cleaner-threads"
        name: "backend_active_cleaner_threads"
        labels:
          backendID: "$1"
      - match: "*.backend-cleaner-backlog"
        name: "backend_cleaner_backlog"
        labels:
          backendID: "$1"
      - match: "*.backend-nodes-evicted"
        name: "backend_nodes_evicted"
        labels:
          backendID: "$1"
      - match: "*.backend-checkpoints"
        name: "backend_checkpoints"
        labels:
          backendID: "$1"
      - match: "*.backend-avg-checkpoint-duration"
        name: "backend_avg_checkpoint_duration"
        labels:
          backendID: "$1"
      - match: "*.backend-time-since-last-checkpoint"
        name: "backend_time_since_last_checkpoint"
        labels:
          backendID: "$1"
      - match: "*.backend-new-db-logs"
        name: "backend_new_db_logs"
        labels:
          backendID: "$1"
      - match: "*.backend-random-reads"
        name: "backend_random_reads"
        labels:
          backendID: "$1"
      - match: "*.backend-random-writes"
        name: "backend_random_writes"
        labels:
          backendID: "$1"
      - match: "*.backend-sequential-reads"
        name: "backend_sequential_reads"
        labels:
          backendID: "$1"
      - match: "*.backend-sequential-writes"
        name: "backend_sequential_writes"
        labels:
          backendID: "$1"
        # entry cache metrics
      - match: "*.entry-cache-hit-ratio"
        name: "entry_cache_hit_ratio"
        labels:
          entryCache: "$1"
      - match: "*.entry-cache-hit-count"
        name: "entry_cache_hit_count"
        labels:
          entryCache: "$1"
      - match: "*.entry-cache-attempts"
        name: "entry_cache_attempts"
        labels:
          entryCache: "$1"
      - match: "*.entry-cache-add-or-update"
        name: "entry_cache_add_or_update"
        labels:
          entryCache: "$1"
      - match: "*.entry-cache-size"
        name: "entry_cache_size"
        labels:
          entryCache: "$1"
      - match: "*.entry-cache-pct-full"
        name: "entry_cache_pct_full"
        labels:
          entryCache: "$1"
        # changelog metrics?
      - match: "changelog.*"
        name: "$1"
        lables:
          backendID: "changelog"
        # GC metrics
      - match: "*.*.*.garbage-collections"
        name: "garbage_collections"
        labels:
          gcType: "$1"
          size: "$2"
          cause: "$3"
      - match: "*.*.*.garbage-collection-duration"
        name: "garbage_collection_duration"
        labels:
          gcType: "$1"
          size: "$2"
          cause: "$3"
      - match: "*.garbage-collection-live-mbytes"
        name: "garbage_collection_live_megabytes"
        labels:
          region: "$1"
        #PD replicas
      - match: "^dc=(.*)_dc=(.*)\\.replica(.*)"
        match_type: regex
        name: "replica${3}"
        labels:
          UserBaseDN1: "$1"
          UserBaseDN2: "$2"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-statsd-mapping
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  JAVA_AGENT_OPTS: -javaagent:/opt/staging/jmx_prometheus_javaagent-0.14.0.jar=8080:/opt/in/instance/bin/jmx_export_config.yaml
  K8S_DEPLOYMENT_NAME_PINGFEDERATE_ADMIN: pingfederate-admin
  K8S_SERVICE_NAME_PINGFEDERATE_ADMIN: pingfederate-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/jvm-garbage-collection.log /opt/out/instance/log/server.log
    /opt/out/instance/log/init.log /opt/out/instance/log/admin.log /opt/out/instance/log/admin-event-detail.log
    /opt/out/instance/log/admin-api.log /opt/out/instance/log/runtime-api.log /opt/out/instance/log/transaction.log
    /opt/out/instance/log/audit.log /opt/out/instance/log/provisioner-audit.log /opt/out/instance/log/provisioner.log
    /opt/out/instance/log/request.log /opt/out/instance/log/request2.log
  LDAP_PORT: "1389"
  LDAPS_PORT: "1636"
  ORCHESTRATION_TYPE: kubernetes
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_ADMIN_CONSOLE_ENVIRONMENT: dev-us-west-2
  PF_ADMIN_CONSOLE_TITLE: Advanced SSO
  PF_ADMIN_PORT: "9999"
  PF_ADMIN_PUBLIC_HOSTNAME: ""
  PF_ADMIN_USER_USERNAME: administrator
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PF_CONSOLE_AUTHENTICATION: LDAP
  PF_DNS_PING_CLUSTER: pingfederate-cluster
  PF_DNS_PING_NAMESPACE: placeholder
  PF_LOG_LEVEL: INFO
  PF_MAX_HEAP: 512m
  PF_MAX_YGEN: 256m
  PF_MIN_HEAP: 256m
  PF_MIN_YGEN: 128m
  PF_PD_BIND_PORT: "1389"
  PF_PD_BIND_PROTOCOL: ldap
  PF_PD_BIND_USESSL: "false"
  PF_PROVISIONER_GRACE_PERIOD: "600"
  PF_PROVISIONER_SYNC_FREQ: "60"
  PING_IDENTITY_ACCEPT_EULA: "YES"
  PINGFEDERATE_ADMIN_SERVER: pingfederate-admin
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingfederate
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  SOCKET_HOST: logstash-elastic.elastic-stack-logging.svc.cluster.local
  SOCKET_PORT_AUDIT: "20514"
  SOCKET_PORT_PROVISIONER: "20512"
  SOCKET_PORT_SYSTEM: "20513"
  SOCKET_PROTOCOL: TCP
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-admin-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-archive-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    UPLOAD_FILES=
    SERVER=$(/tmp/kubectl get pod -l role=${K8S_DEPLOYMENT_NAME_PINGFEDERATE_ADMIN} | sed -n "/${K8S_DEPLOYMENT_NAME_PINGFEDERATE_ADMIN}/p" | awk '{print $1}')
    SCRIPT="${HOOKS_DIR}"/90-upload-backup-s3.sh
    LOG_FILE=/tmp/upload.log

    echo "Uploading pingfederate backup data on server ${SERVER}"
    /tmp/kubectl exec "${SERVER}" -c pingfederate-admin -- sh -c "test -x ${SCRIPT} && ${SCRIPT}" >"${LOG_FILE}"

    if test ${?} -eq 0; then
      # Sending logs to STDOUT
      cat ${LOG_FILE}
      UPLOAD_FILE=$(tail -1 "${LOG_FILE}")
      test -z "${UPLOAD_FILES}" && UPLOAD_FILES="${UPLOAD_FILE}" || UPLOAD_FILES="${UPLOAD_FILES} ${UPLOAD_FILE}"
    else
      echo "Upload script not found on server ${SERVER}"
    fi

    # Print the names of the uploaded files so callers know exactly what was uploaded
    echo "The following files were uploaded:"
    echo "${UPLOAD_FILES}"
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-backup
  namespace: ping-cloud
---
apiVersion: v1
data:
  ACCEPT_EULA: "YES"
  API_RETRY_LIMIT: "10"
  API_TIMEOUT_WAIT: "5"
  BACKUP_FILE_NAME: ""
  JAVA_AGENT_OPTS: -javaagent:/opt/staging/jmx_prometheus_javaagent-0.14.0.jar=8080:/opt/in/instance/bin/jmx_export_config.yaml
  K8S_DEPLOYMENT_NAME_PINGFEDERATE_ADMIN: pingfederate-admin
  K8S_SERVICE_NAME_PINGFEDERATE_ADMIN: pingfederate-admin
  K8S_TAIL_LOG_FILES: /opt/out/instance/log/jvm-garbage-collection.log /opt/out/instance/log/server.log
    /opt/out/instance/log/init.log /opt/out/instance/log/admin.log /opt/out/instance/log/admin-event-detail.log
    /opt/out/instance/log/admin-api.log /opt/out/instance/log/runtime-api.log /opt/out/instance/log/transaction.log
    /opt/out/instance/log/audit.log /opt/out/instance/log/provisioner-audit.log /opt/out/instance/log/provisioner.log
    /opt/out/instance/log/request.log /opt/out/instance/log/request2.log
  LDAP_PORT: "1389"
  LDAPS_PORT: "1636"
  ORCHESTRATION_TYPE: kubernetes
  PA_CLUSTER_PORT: "9090"
  PA_CLUSTER_PRIVATE_HOSTNAME: pingaccess-admin
  PA_WAS_CLUSTER_PORT: "9090"
  PA_WAS_CLUSTER_PRIVATE_HOSTNAME: pingaccess-was-admin
  PD_CLUSTER_PORT: "8989"
  PD_CLUSTER_PRIVATE_HOSTNAME: pingdirectory
  PF_ADMIN_CONSOLE_ENVIRONMENT: dev-us-west-2
  PF_ADMIN_CONSOLE_TITLE: Advanced SSO
  PF_ADMIN_PORT: "9999"
  PF_ADMIN_PUBLIC_HOSTNAME: ""
  PF_ADMIN_USER_USERNAME: administrator
  PF_CLUSTER_PORT: "7600"
  PF_CLUSTER_PRIVATE_HOSTNAME: pingfederate-cluster
  PF_CONSOLE_AUTHENTICATION: LDAP
  PF_DNS_PING_CLUSTER: pingfederate-cluster
  PF_DNS_PING_NAMESPACE: placeholder
  PF_LOG_LEVEL: INFO
  PF_MAX_HEAP: 512m
  PF_MAX_YGEN: 256m
  PF_MIN_HEAP: 256m
  PF_MIN_YGEN: 128m
  PF_PD_BIND_PORT: "1389"
  PF_PD_BIND_PROTOCOL: ldap
  PF_PD_BIND_USESSL: "false"
  PF_PROVISIONER_GRACE_PERIOD: "600"
  PF_PROVISIONER_SYNC_FREQ: "60"
  PING_IDENTITY_ACCEPT_EULA: "YES"
  PINGFEDERATE_ADMIN_SERVER: pingfederate-admin
  REGION: us-west-2
  RESTORE_BACKUP: "true"
  SECRETS_DIR: /usr/local/secrets
  SERVER_PROFILE_BRANCH: v1.19-release-branch
  SERVER_PROFILE_PATH: profiles/pingfederate
  SERVER_PROFILE_URL: https://github.com/pingidentity/ping-cloud-base.git
  SKIP_LIVENESS: "false"
  SOCKET_HOST: logstash-elastic.elastic-stack-logging.svc.cluster.local
  SOCKET_PORT_AUDIT: "20514"
  SOCKET_PORT_PROVISIONER: "20512"
  SOCKET_PORT_SYSTEM: "20513"
  SOCKET_PROTOCOL: TCP
  TAIL_LOG_FILES: ""
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-environment-variables
  namespace: ping-cloud
---
apiVersion: v1
data:
  backup-csd-data.sh: |-
    #!/bin/sh

    # Install kubectl
    curl -sS https://storage.googleapis.com/kubernetes-release/release/"${KUBECTL_VERSION}"/bin/linux/amd64/kubectl \
    -o /tmp/kubectl

    chmod +x /tmp/kubectl

    REPLICAS=$(/tmp/kubectl get pods -l=role="${CSD_POD_ROLE}" -o name)

    CSD_FILES=
    for REPLICA in ${REPLICAS}; do
      SERVER=${REPLICA}
      SCRIPT="${HOOKS_DIR}"/82-upload-csd-s3.sh
      LOG_FILE=/tmp/upload.log

      echo "Uploading CSD on server ${SERVER}"
      /tmp/kubectl exec "${SERVER}" -c "${CSD_CONTAINER_NAME}" -- sh -c "test -x ${SCRIPT} && ${SCRIPT}" >"${LOG_FILE}"

      # Sending logs to STDOUT
      cat ${LOG_FILE}

      if test ${?} -eq 0; then
        CSD_FILE=$(tail -1 "${LOG_FILE}")
        test -z "${CSD_FILES}" && CSD_FILES="${CSD_FILE}" || CSD_FILES="${CSD_FILES} ${CSD_FILE}"

        # Print the names of the uploaded files so callers know exactly what was uploaded
        echo "The following files were uploaded:"
        echo "${CSD_FILES}"
      else
        exit_code=${?}
        echo "The kubectl command attempting to invoke the script exited with: ${exit_code}"
        echo "This may be because: "
        echo "1) The ${SCRIPT} script is not currently available on the ${SERVER}.  This is expected if ${SERVER} is not running yet."
        echo "2) The ${SCRIPT} script exited with an error.  Please review the logs above to determine if this is the case."
      fi
    done
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-periodic-csd-upload
  namespace: ping-cloud
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: ping-cloud
  name: topology-descriptor
  namespace: ping-cloud
---
apiVersion: v1
data:
  LOG_LEVEL: Debug
  MAX_DURATION: 168h
  MAX_PODS: "1"
  SCHEDULE: '@every 4h'
kind: ConfigMap
metadata:
  name: pod-reaper-environment-variables-5cgh48ghhc
  namespace: pod-reaper
---
apiVersion: v1
data:
  config.yml: |-
    global:
    templates:
    - '/etc/alertmanager/*.tmpl'
    route:
      receiver: alert-webhook
      group_by: ['...']
      group_wait: 10s
      routes:
        - receiver: alert-webhook
          continue: true
          group_wait: 10s
          group_interval: 10s
          repeat_interval: 60m

    receivers:
    - name: alert-webhook
      webhook_configs:
      - url: http://webhook-eventsource-svc.argo-events:13000/notification
        send_resolved: true
kind: ConfigMap
metadata:
  name: alertmanager-config
  namespace: prometheus
---
apiVersion: v1
data:
  default-rule.yml: |+
    ## This is a test Prometheus alerting rule.
    ## For testing purpose uncoment alert, deploy changes, delete pingdirectory/pingfederate/pingacess pod and wait for alert.
    ---

    #groups:
    #- name: prom-default-rules
    #  rules:
    #  - alert: PrometheusTargetMissing
    #    expr: up == 0
    #    for: 0m
    #    labels:
    #      severity: critical
    #    annotations:
    #      summary: Prometheus target missing (instance {{ $labels.instance }})
    #      description: "A Prometheus target has disappeared. An exporter might be crashed.\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

  kube-alerts.yml: |-
    ---

    groups:
    - name: kube-alerts
      rules:
      # Trigger alert when there are 1 or more unscheduled pods for greater than 5+ mins
      - alert: ClusterAutoscalerNumberOfUnscheduledPods
        expr: sum(cluster_autoscaler_unschedulable_pods_count) > 0
        for: 5m
        labels:
          severity: alert
        annotations:
          summary: "Cluster Autoscaler has {{ $value }} unschedulable pods."
          description: "The cluster autoscaler is unable to scale up and is alerting that there are unschedulable pods because of this condition. This may be caused by the cluster autoscaler reaching its resources limits, or by Kubernetes waiting for new nodes to become ready."
          runbook: "https://pingidentity.atlassian.net/l/cp/1m9sGcLD"

      # Trigger warning alert (avoids PagerDuty) when 1 or more volumes are predicted to run out of space within a week.
      - alert: VolumesFullInWeekBasedOnDailyUseRate
        expr: |
          predict_linear(kubelet_volume_stats_available_bytes [1d], 7 * 24 * 60 * 60) <= 0
        for: 10m
        labels:
          severity: warning
        annotations:
          summary:  "PVCs could be full in week according to prediction based on Daily Use Rate. PVC \"{{ $labels.persistentvolumeclaim }}\" located in \"{{ $labels.namespace }}\" namespace."
          description: "To prevent ping-cloud/Infrastructure namespace volumes to become full unexpectedly, there is a prediction based on Daily Use Rate which count what exactly volumes could be full in week. This may be caused by initensive daily usage and needs to be checked to prevent any issues with applications using these volumes."
          runbook: "https://pingidentity.atlassian.net/l/cp/qDQbzSc1"

      # Trigger alert when 1 or more PVCs are using 80% or more of their capacity.
      - alert: RunningPVCsAboveUsedWarningThreshold
        expr: |
          (max by (persistentvolumeclaim,namespace) (kubelet_volume_stats_used_bytes)) / (max by (persistentvolumeclaim,namespace) (kubelet_volume_stats_capacity_bytes)) >= (80 / 100)
        for: 10m
        labels:
          severity: alert
        annotations:
          summary: "PVC running above 80% threshold. PVC \"{{ $labels.persistentvolumeclaim }}\" located in \"{{ $labels.namespace }}\" namespace."
          description: "Indicates which PVCs currently running above 80% threshold. To prevent any service interruption, these volumes have to be checked."
          runbook: "https://pingidentity.atlassian.net/l/cp/ttpWJDzW"
  logging.yml: |-
    ## This is a Prometheus alerting rules for the logging
    ---

    groups:
    - name: elastic-stack-logging
      rules:
      - alert: FluentBit dropping records
        expr: sum(increase(fluentbit_output_dropped_records_total[1m])) by (name) > 10
        for: 10m
        labels:
          severity: critical
        annotations:
          summary: FluentBit dropping records for output {{ $labels.name }}
          description: "A FluentBit outputs dropping records.\nVALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/1LNbK1h1"

      - alert: FluentBit retries is growing
        expr: sum(increase(fluentbit_output_retries_total[1m])) by (name) > 50
        for: 10m
        labels:
          severity: alert
        annotations:
          summary: FluentBit has many retries in the output {{ $labels.name }}
          description: "A FluentBit has many retries in the output. Possible {{ $labels.name }} output is down.\n  VALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/vQCAwBPs"

      - alert: Logstash pipeline is growing
        expr: delta(logstash_node_queue_events[1m]) > 10000
        for: 10m
        labels:
          severity: alert
        annotations:
          summary: Logstash pipeline {{ $labels.pipeline }} is growing on {{ $labels.instance }}.
          description: "A Logstash pipeline is growing. Possible {{ $labels.pipeline }} is overloaded or logs spike.\nVALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/fKEd3bpy"

      - alert: Logstash pipeline backlog alert
        expr: logstash_node_queue_events > 1000000
        for: 10m
        labels:
          severity: critical
        annotations:
          summary: Logstash Queue Backlog Alert for {{ $labels.pipeline }} on {{ $labels.instance }}
          description: "This alert is triggered when the length of the Logstash event queue for {{ $labels.pipeline }} on {{ $labels.instance }} exceeds a certain threshold.\nVALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/ARLdMfXF"

      - alert: Logstash has no outgoing events
        expr: sum(increase(logstash_node_pipeline_events_out_total{pipeline!~"alerts|dlq"}[1m])) by (pipeline) == 0
        for: 10m
        labels:
          severity: critical
        annotations:
          summary: Logstash pipeline {{ $labels.pipeline }} didn't produce any outgoing events.
          description: "An outgoing Logstash pipeline {{ $labels.pipeline }} is dead.\nVALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/2Y87TfgA"

      - alert: Logstash has no incoming events
        expr: sum(increase(logstash_node_pipeline_events_in_total{pipeline!~"alerts|dlq"}[1m])) by (pipeline) == 0
        for: 10m
        labels:
          severity: critical
        annotations:
          summary: Logstash pipeline {{ $labels.pipeline }} didn't recieve any incoming events.
          description: "An incoming Logstash pipeline {{ $labels.pipeline }} is dead.\nVALUE = {{ $value }}\nLABELS = {{ $labels }}"
          runbook: "https://pingidentity.atlassian.net/l/cp/RvB39RpB"

      - alert: Logstash pods count 0
        expr: sum(logstash_node_up) == 0 or absent(logstash_node_up) == 1
        for: 10m
        labels:
          severity: critical
        annotations:
          summary: Running logstash pods is count 0
          description: "Running logstash pods is 0. Looks like they're died or didn't return any metrics."
          runbook: "https://pingidentity.atlassian.net/l/cp/Rub1Qv6f"

    - name: opensearch.rules
      rules:
      - expr: |
          rate(opensearch_threadpool_threads_count{name="bulk", type="rejected"}[2m])
        record: bulk:rejected_requests:rate2m
      - expr: |
          rate(opensearch_threadpool_threads_count{name="bulk", type="completed"}[2m])
        record: bulk:completed_requests:rate2m
      - expr: |
          sum by (cluster, instance, node) (bulk:rejected_requests:rate2m) / on (cluster, instance, node) (bulk:completed_requests:rate2m)
        record: bulk:reject_ratio:rate2m

    - name: opensearch.alerts
      rules:
      - alert: OpenSearchClusterNotHealthy
        annotations:
          description: "Cluster {{ $labels.cluster }} health status has been RED for at least 2m. Cluster does not accept writes, shards may be missing or master node hasn't been elected yet."
          summary: "Cluster health status is RED"
          runbook: "https://pingidentity.atlassian.net/l/cp/s1hJ29Go"
        expr: |
          sum by (cluster) (opensearch_cluster_status == 2)
        for: 2m
        labels:
          severity: critical
      - alert: OpenSearchClusterNotHealthy
        annotations:
          description: "Cluster {{ $labels.cluster }} health status has been YELLOW for at least 20m. Some shard replicas are not allocated."
          summary: "Cluster health status is YELLOW"
          runbook: "https://pingidentity.atlassian.net/l/cp/s1hJ29Go"
        expr: |
          sum by (cluster) (opensearch_cluster_status == 1)
        for: 20m
        labels:
          severity: warning
      - alert: OpenSearchBulkRequestsRejectionJumps
        annotations:
          description: "High Bulk Rejection Ratio at {{ $labels.node }} node in {{ $labels.cluster }} cluster. This node may not be keeping up with the indexing speed."
          summary: "High Bulk Rejection Ratio - {{ $value }}%"
          runbook: "https://pingidentity.atlassian.net/l/cp/9HSdgGTX"
        expr: |
          round( bulk:reject_ratio:rate2m * 100, 0.001 ) > 5
        for: 10m
        labels:
          severity: warning
      - alert: OpenSearchNodeDiskWatermarkReached
        annotations:
          description: "Disk Low Watermark Reached at {{ $labels.node }} node in {{ $labels.cluster }} cluster. Shards can not be allocated to this node anymore. You should consider adding more disk to the node."
          summary: "Disk Low Watermark Reached - disk saturation is {{ $value }}%"
          runbook: "https://pingidentity.atlassian.net/l/cp/ceuvTPL0"
        expr: |
          sum by (cluster, instance, node) (
            round(
              (1 - (
                opensearch_fs_path_available_bytes /
                opensearch_fs_path_total_bytes
              )
            ) * 100, 0.001)
          ) > 85
        for: 5m
        labels:
          severity: alert
      - alert: OpenSearchNodeDiskWatermarkReached
        annotations:
          description: "Disk High Watermark Reached at {{ $labels.node }} node in {{ $labels.cluster }} cluster. Some shards will be re-allocated to different nodes if possible. Make sure more disk space is added to the node or drop old indices allocated to this node."
          summary: "Disk High Watermark Reached - disk saturation is {{ $value }}%"
          runbook: "https://pingidentity.atlassian.net/l/cp/ceuvTPL0"
        expr: |
          sum by (cluster, instance, node) (
            round(
              (1 - (
                opensearch_fs_path_available_bytes /
                opensearch_fs_path_total_bytes
              )
            ) * 100, 0.001)
          ) > 90
        for: 5m
        labels:
          severity: critical
      - alert: OpenSearchJVMHeapUseHigh
        annotations:
          description: "JVM Heap usage on the node {{ $labels.node }} in {{ $labels.cluster }} cluster is {{ $value }}%."
          summary: "JVM Heap usage on the node is high"
          runbook: "https://pingidentity.atlassian.net/l/cp/KMH9013e"
        expr: |
          sum by (cluster, instance, node) (opensearch_jvm_mem_heap_used_percent) > 75
        for: 10m
        labels:
          severity: alert
      - alert: OpenSearchHostSystemCPUHigh
        annotations:
          description: "System CPU usage on the node {{ $labels.node }} in {{ $labels.cluster }} cluster is {{ $value }}%"
          summary: "System CPU usage is high"
          runbook: "https://pingidentity.atlassian.net/l/cp/8qTf1caL"
        expr: |
          sum by (cluster, instance, node) (opensearch_os_cpu_percent) > 90
        for: 1m
        labels:
          severity: alert
      - alert: OpenSearchProcessCPUHigh
        annotations:
          description: "OSE process CPU usage on the node {{ $labels.node }} in {{ $labels.cluster }} cluster is {{ $value }}%"
          summary: "OSE process CPU usage is high"
          runbook: "https://pingidentity.atlassian.net/l/cp/8qTf1caL"
        expr: |
          sum by (cluster, instance, node) (opensearch_process_cpu_percent) > 90
        for: 1m
        labels:
          severity: alert
kind: ConfigMap
metadata:
  name: prom-alerts-4b8bg79c7b
  namespace: prometheus
---
apiVersion: v1
data:
  prometheus.yml: "global:\n  # How frequently to scrape targets by default.\n  scrape_interval:
    15s\n  # How long until a scrape request times out.\n  scrape_timeout: 5s\n  #
    How frequently to evaluate rules.\n  evaluation_interval: 5s\n  external_labels:\n
    \   k8s_cluster_name: ${CLUSTER_NAME}-${TENANT_NAME}-${REGION_NICK_NAME}\nremote_write:\n-
    url: 'http://prometheus:9090/api/v1/write'\n\nstorage:\n  tsdb:\n    out_of_order_time_window:
    1d\n\nscrape_configs:\n# Monitor prometheus itself\n- job_name: 'prometheus'\n
    \ scrape_interval: 10s\n  static_configs:\n  - targets: ['localhost:9090']\n#
    Monitor kube-state-metrics\n- job_name: 'kube-state-metrics'\n  static_configs:\n
    \ - targets: ['kube-state-metrics.kube-system.svc.cluster.local:8080']\n\n# Discover
    and monitor PD instances\n- job_name: 'pd-statsd-exporter'\n  kubernetes_sd_configs:\n
    \ - role: endpoints\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_endpoint_port_name,
    __meta_kubernetes_service_name]\n    action: keep\n    regex: metrics;pingdirectory\n
    \ - source_labels: [__meta_kubernetes_pod_name]\n    action: replace\n    target_label:
    instance\n  - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n
    \   target_label: namespace\n\n# Discover and monitor PD JMX instances\n- job_name:
    'pd-jmx-exporter'\n  scrape_interval: 10s\n  kubernetes_sd_configs:\n  - role:
    endpoints\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_endpoint_port_name,
    __meta_kubernetes_service_name]\n    action: keep\n    regex: jmx-metrics;pingdirectory\n
    \ - source_labels: [__meta_kubernetes_pod_name]\n    action: replace\n    target_label:
    instance\n  - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n
    \   target_label: namespace\n\n# Discover and monitor PD instances\n- job_name:
    'prometheus-job-exporter'\n  kubernetes_sd_configs:\n  - role: endpoints\n  relabel_configs:\n
    \ - source_labels: [__meta_kubernetes_endpoint_port_name, __meta_kubernetes_service_name]\n
    \   action: keep\n    regex: metrics;prometheus-job-exporter\n  - source_labels:
    [__meta_kubernetes_pod_name]\n    action: replace\n    target_label: instance\n
    \ - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n    target_label:
    namespace\n\n# Discover and monitor PF instances\n- job_name: 'pf-jmx-exporter'\n
    \ scrape_interval: 10s\n  kubernetes_sd_configs:\n  - role: endpoints\n  relabel_configs:\n
    \ - source_labels: [__meta_kubernetes_endpoint_port_name, __meta_kubernetes_service_name]\n
    \   action: keep\n    regex: metrics;pingfederate\n  - source_labels: [__meta_kubernetes_pod_name]\n
    \   action: replace\n    target_label: instance\n  - source_labels: [__meta_kubernetes_namespace]\n
    \   action: replace\n    target_label: namespace\n\n# Discover and monitor PF
    instances\n- job_name: 'pf-heartbeat-exporter'\n  scrape_interval: 10s\n  metrics_path:
    /\n  kubernetes_sd_configs:\n  - role: endpoints\n  relabel_configs:\n  - source_labels:
    [__meta_kubernetes_endpoint_port_name, __meta_kubernetes_service_name]\n    action:
    keep\n    regex: pf-heartbeat;pingfederate\n  - source_labels: [__meta_kubernetes_pod_name]\n
    \   action: replace\n    target_label: instance\n  - source_labels: [__meta_kubernetes_namespace]\n
    \   action: replace\n    target_label: namespace\n\n# Discover and monitor PA
    instances\n- job_name: 'pa-jmx-exporter'\n  scrape_interval: 10s\n  kubernetes_sd_configs:\n
    \ - role: endpoints\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_endpoint_port_name,
    __meta_kubernetes_service_name]\n    action: keep\n    regex: metrics;pingaccess\n
    \ - source_labels: [__meta_kubernetes_pod_name]\n    action: replace\n    target_label:
    instance\n  - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n
    \   target_label: namespace\n\n# Discover and monitor PA instances\n- job_name:
    'pa-heartbeat-exporter'\n  scrape_interval: 10s\n  metrics_path: /\n  kubernetes_sd_configs:\n
    \ - role: endpoints\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_endpoint_port_name,
    __meta_kubernetes_service_name]\n    action: keep\n    regex: pa-heartbeat;pingaccess\n
    \ - source_labels: [__meta_kubernetes_pod_name]\n    action: replace\n    target_label:
    instance\n  - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n
    \   target_label: namespace\n\n# Other k8s jobs to scrape - see https://devopscube.com/setup-prometheus-monitoring-on-kubernetes/\n-
    job_name: 'kubernetes-apiservers'\n  kubernetes_sd_configs:\n  - role: endpoints\n
    \ scheme: https\n  tls_config:\n    ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n
    \ bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\n  relabel_configs:\n
    \ - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name,
    __meta_kubernetes_endpoint_port_name]\n    action: keep\n    regex: default;kubernetes;https\n\n-
    job_name: 'kubernetes-nodes'\n  scheme: https\n  tls_config:\n    ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n
    \ bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\n  kubernetes_sd_configs:\n
    \ - role: node\n  relabel_configs:\n  - action: labelmap\n    regex: __meta_kubernetes_node_label_(.+)\n
    \ - target_label: __address__\n    replacement: kubernetes.default.svc:443\n  -
    source_labels: [__meta_kubernetes_node_name]\n    regex: (.+)\n    target_label:
    __metrics_path__\n    replacement: /api/v1/nodes/${1}/proxy/metrics\n    \n- job_name:
    'kubernetes-pods'\n  kubernetes_sd_configs:\n  - role: pod\n  relabel_configs:\n
    \ - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n    action:
    keep\n    regex: true\n  - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]\n
    \   action: replace\n    target_label: __metrics_path__\n    regex: (.+)\n  -
    source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]\n
    \   action: replace\n    regex: ([^:]+)(?::\\d+)?;(\\d+)\n    replacement: $1:$2\n
    \   target_label: __address__\n  - action: labelmap\n    regex: __meta_kubernetes_pod_label_(.+)\n
    \ - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n    target_label:
    kubernetes_namespace\n  - source_labels: [__meta_kubernetes_pod_name]\n    action:
    replace\n    target_label: instance\n\n- job_name: 'kubernetes-cadvisor'\n  scheme:
    https\n  tls_config:\n    ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n
    \ bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\n  kubernetes_sd_configs:\n
    \ - role: node\n  relabel_configs:\n  - action: labelmap\n    regex: __meta_kubernetes_node_label_(.+)\n
    \ - target_label: __address__\n    replacement: kubernetes.default.svc:443\n  -
    source_labels: [__meta_kubernetes_node_name]\n    regex: (.+)\n    target_label:
    __metrics_path__\n    replacement: /api/v1/nodes/${1}/proxy/metrics/cadvisor\n\n-
    job_name: 'kubernetes-service-endpoints'\n  kubernetes_sd_configs:\n  - role:
    endpoints\n  tls_config:\n    insecure_skip_verify: true\n  relabel_configs:\n
    \ - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]\n
    \   action: keep\n    regex: true\n  - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]\n
    \   action: replace\n    target_label: __scheme__\n    regex: (https?)\n  - source_labels:
    [__meta_kubernetes_service_annotation_prometheus_io_path]\n    action: replace\n
    \   target_label: __metrics_path__\n    regex: (.+)\n  - source_labels: [__address__,
    __meta_kubernetes_service_annotation_prometheus_io_port]\n    action: replace\n
    \   target_label: __address__\n    regex: ([^:]+)(?::\\d+)?;(\\d+)\n    replacement:
    $1:$2\n  - action: labelmap\n    regex: __meta_kubernetes_service_label_(.+)\n
    \ - source_labels: [__meta_kubernetes_namespace]\n    action: replace\n    target_label:
    kubernetes_namespace\n  - source_labels: [__meta_kubernetes_service_name]\n    action:
    replace\n    target_label: kubernetes_name\n  - source_labels: [__meta_kubernetes_pod_name]\n
    \   action: replace\n    target_label: instance\n\n- job_name: 'crunchy-postgres-exporter'\n
    \ kubernetes_sd_configs:\n  - role: pod\n  relabel_configs:\n  - source_labels:
    [__meta_kubernetes_pod_label_postgres_operator_crunchydata_com_crunchy_postgres_exporter,__meta_kubernetes_pod_label_crunchy_postgres_exporter]\n
    \   action: keep\n    regex: true\n    separator: \"\"\n  - source_labels: [__meta_kubernetes_pod_container_port_number]\n
    \   action: drop\n    regex: 5432\n  - source_labels: [__meta_kubernetes_pod_container_port_number]\n
    \   action: drop\n    regex: 10000\n  - source_labels: [__meta_kubernetes_pod_container_port_number]\n
    \   action: drop\n    regex: 8009\n  - source_labels: [__meta_kubernetes_pod_container_port_number]\n
    \   action: drop\n    regex: 2022\n  - source_labels: [__meta_kubernetes_pod_container_port_number]\n
    \   action: drop\n    regex: ^$\n  - source_labels: [__meta_kubernetes_namespace]\n
    \   action: replace\n    target_label: kubernetes_namespace\n  - source_labels:
    [__meta_kubernetes_pod_name]\n    target_label: pod\n  - source_labels: [__meta_kubernetes_pod_label_postgres_operator_crunchydata_com_cluster,__meta_kubernetes_pod_label_pg_cluster]\n
    \   target_label: cluster\n    separator: \"\"\n    replacement: '$1'\n  - source_labels:
    [__meta_kubernetes_namespace,cluster]\n    target_label: pg_cluster\n    separator:
    \":\"\n    replacement: '$1$2'\n  - source_labels: [__meta_kubernetes_pod_ip]\n
    \   target_label: ip\n    replacement: '$1'\n  - source_labels: [__meta_kubernetes_pod_label_postgres_operator_crunchydata_com_instance,__meta_kubernetes_pod_label_deployment_name]\n
    \   target_label: deployment\n    replacement: '$1'\n    separator: \"\"\n  -
    source_labels: [__meta_kubernetes_pod_label_postgres_operator_crunchydata_com_role]\n
    \   target_label: role\n  - source_labels: [dbname]\n    target_label: dbname\n
    \   replacement: '$1'\n  - source_labels: [relname]\n    target_label: relname\n
    \   replacement: '$1'\n  - source_labels: [schemaname]\n    target_label: schemaname\n
    \   replacement: '$1'"
kind: ConfigMap
metadata:
  annotations:
    argocd.argoproj.io/sync-options: Replace=true
  labels:
    name: prometheus-agent-config
  name: prometheus-agent-config
  namespace: prometheus
---
apiVersion: v1
data:
  prometheus.yml: |-
    global:
      # How frequently to scrape targets by default.
      scrape_interval: 15s
      # How long until a scrape request times out.
      scrape_timeout: 5s
      # How frequently to evaluate rules.
      evaluation_interval: 5s
      external_labels:
        slack_channel: ${PROM_SLACK_CHANNEL}
        notifications_enabled: ${PROM_NOTIFICATION_ENABLED}
        k8s_cluster_name: ${CLUSTER_NAME}-${TENANT_NAME}-${REGION_NICK_NAME}
    alerting:
      alertmanagers:
        - scheme: http
          static_configs:
          - targets: ['alertmanager:9093']

    rule_files:
      - /etc/prometheus/alert-rules.d/*.yml

    storage:
      tsdb:
        out_of_order_time_window: 1d
    scrape_configs:
    # Monitor prometheus itself
    - job_name: 'prometheus'
      scrape_interval: 10s
      static_configs:
      - targets: ['localhost:9090']
kind: ConfigMap
metadata:
  annotations:
    argocd.argoproj.io/sync-options: Replace=true
  labels:
    name: prometheus-config
  name: prometheus-config
  namespace: prometheus
---
apiVersion: v1
data:
  PROMETHEUS_RETENTION_TIME: 15d
  PROMETHEUS_USER_COUNT_1_COMMAND: '''echo 0'''
  PROMETHEUS_USER_COUNT_1_SCHEDULE: '''* * * * *'''
  PROMETHEUS_USER_COUNT_2_COMMAND: '''echo 0'''
  PROMETHEUS_USER_COUNT_2_SCHEDULE: '''* * * * *'''
  PROMETHEUS_USER_COUNT_3_COMMAND: '''echo 0'''
  PROMETHEUS_USER_COUNT_3_SCHEDULE: '''* * * * *'''
  PROMETHEUS_USER_COUNT_4_COMMAND: '''echo 0'''
  PROMETHEUS_USER_COUNT_4_SCHEDULE: '''* * * * *'''
kind: ConfigMap
metadata:
  name: prometheus-environment-variables-89d8mghhg8
  namespace: prometheus
---
apiVersion: v1
data:
  config.yaml: |
    metrics:
      users_count_1:
        command: ${PROMETHEUS_USER_COUNT_1_COMMAND}
        interval: ${PROMETHEUS_USER_COUNT_1_SCHEDULE}
        description: Count of users
        pod_name: pingdirectory-0
        container_name: pingdirectory
        namespace: '${PROMETHEUS_PING_NAMESPACE}'
      users_count_2:
        command: ${PROMETHEUS_USER_COUNT_2_COMMAND}
        interval: ${PROMETHEUS_USER_COUNT_2_SCHEDULE}
        description: Count of users
        pod_name: pingdirectory-0
        container_name: pingdirectory
        namespace: '${PROMETHEUS_PING_NAMESPACE}'
      users_count_3:
        command: ${PROMETHEUS_USER_COUNT_3_COMMAND}
        interval: ${PROMETHEUS_USER_COUNT_3_SCHEDULE}
        description: Count of users
        pod_name: pingdirectory-0
        container_name: pingdirectory
        namespace: '${PROMETHEUS_PING_NAMESPACE}'
      users_count_4:
        command: ${PROMETHEUS_USER_COUNT_4_COMMAND}
        interval: ${PROMETHEUS_USER_COUNT_4_SCHEDULE}
        description: Count of users
        pod_name: pingdirectory-0
        container_name: pingdirectory
        namespace: '${PROMETHEUS_PING_NAMESPACE}'
kind: ConfigMap
metadata:
  name: prometheus-job-exporter-config
  namespace: prometheus
---
apiVersion: v1
data:
  token: QkFTRTY0LUVOQ09ERUQtT0FVVEgtVE9LRU4=
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: slack-secret
  namespace: argo-events
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: nr-license-key
  namespace: elastic-stack-logging
type: Opaque
---
apiVersion: v1
data:
  action_groups.yml: X21ldGE6CiAgdHlwZTogImFjdGlvbmdyb3VwcyIKICBjb25maWdfdmVyc2lvbjogMg==
  audit.yml: |
    X21ldGE6CiAgdHlwZTogImF1ZGl0IgogIGNvbmZpZ192ZXJzaW9uOiAyCgpjb25maWc6Ci
    AgIyBlbmFibGUvZGlzYWJsZSBhdWRpdCBsb2dnaW5nCiAgZW5hYmxlZDogdHJ1ZQoKICBh
    dWRpdDoKICAgICMgRW5hYmxlL2Rpc2FibGUgUkVTVCBBUEkgYXVkaXRpbmcKICAgIGVuYW
    JsZV9yZXN0OiB0cnVlCgogICAgIyBDYXRlZ29yaWVzIHRvIGV4Y2x1ZGUgZnJvbSBSRVNU
    IEFQSSBhdWRpdGluZwogICAgZGlzYWJsZWRfcmVzdF9jYXRlZ29yaWVzOgogICAgICAtIE
    FVVEhFTlRJQ0FURUQKICAgICAgLSBHUkFOVEVEX1BSSVZJTEVHRVMKCiAgICAjIEVuYWJs
    ZS9kaXNhYmxlIFRyYW5zcG9ydCBBUEkgYXVkaXRpbmcKICAgIGVuYWJsZV90cmFuc3Bvcn
    Q6IHRydWUKCiAgICAjIENhdGVnb3JpZXMgdG8gZXhjbHVkZSBmcm9tIFRyYW5zcG9ydCBB
    UEkgYXVkaXRpbmcKICAgIGRpc2FibGVkX3RyYW5zcG9ydF9jYXRlZ29yaWVzOgogICAgIC
    AtIEFVVEhFTlRJQ0FURUQKICAgICAgLSBHUkFOVEVEX1BSSVZJTEVHRVMKCiAgICAjIFVz
    ZXJzIHRvIGJlIGV4Y2x1ZGVkIGZyb20gYXVkaXRpbmcuIFdpbGRjYXJkIHBhdHRlcm5zIG
    FyZSBzdXBwb3J0ZWQuIEVnOgogICAgIyBpZ25vcmVfdXNlcnM6IFsidGVzdC11c2VyIiwg
    ImVtcGxveWVlLSoiXQogICAgaWdub3JlX3VzZXJzOgogICAgICAtIGtpYmFuYXNlcnZlcg
    ogICAgICAtIGxvZ3N0YXNoCgogICAgIyBSZXF1ZXN0cyB0byBiZSBleGNsdWRlZCBmcm9t
    IGF1ZGl0aW5nLiBXaWxkY2FyZCBwYXR0ZXJucyBhcmUgc3VwcG9ydGVkLiBFZzoKICAgIC
    MgaWdub3JlX3JlcXVlc3RzOiBbImluZGljZXM6ZGF0YS9yZWFkLyoiLCAiU2VhcmNoUmVx
    dWVzdCJdCiAgICBpZ25vcmVfcmVxdWVzdHM6IFtdCgogICAgIyBMb2cgaW5kaXZpZHVhbC
    BvcGVyYXRpb25zIGluIGEgYnVsayByZXF1ZXN0CiAgICByZXNvbHZlX2J1bGtfcmVxdWVz
    dHM6IGZhbHNlCgogICAgIyBJbmNsdWRlIHRoZSBib2R5IG9mIHRoZSByZXF1ZXN0IChpZi
    BhdmFpbGFibGUpIGZvciBib3RoIFJFU1QgYW5kIHRoZSB0cmFuc3BvcnQgbGF5ZXIKICAg
    IGxvZ19yZXF1ZXN0X2JvZHk6IHRydWUKCiAgICAjIExvZ3MgYWxsIGluZGljZXMgYWZmZW
    N0ZWQgYnkgYSByZXF1ZXN0LiBSZXNvbHZlcyBhbGlhc2VzIGFuZCB3aWxkY2FyZHMvZGF0
    ZSBwYXR0ZXJucwogICAgcmVzb2x2ZV9pbmRpY2VzOiB0cnVlCgogICAgIyBFeGNsdWRlIH
    NlbnNpdGl2ZSBoZWFkZXJzIGZyb20gYmVpbmcgaW5jbHVkZWQgaW4gdGhlIGxvZ3MuIEVn
    OiBBdXRob3JpemF0aW9uCiAgICBleGNsdWRlX3NlbnNpdGl2ZV9oZWFkZXJzOiB0cnVlCg
    ogIGNvbXBsaWFuY2U6CiAgICAjIGVuYWJsZS9kaXNhYmxlIGNvbXBsaWFuY2UKICAgIGVu
    YWJsZWQ6IHRydWUKCiAgICAjIExvZyB1cGRhdGVzIHRvIGludGVybmFsIHNlY3VyaXR5IG
    NoYW5nZXMKICAgIGludGVybmFsX2NvbmZpZzogdHJ1ZQoKICAgICMgTG9nIGV4dGVybmFs
    IGNvbmZpZyBmaWxlcyBmb3IgdGhlIG5vZGUKICAgIGV4dGVybmFsX2NvbmZpZzogZmFsc2
    UKCiAgICAjIExvZyBvbmx5IG1ldGFkYXRhIG9mIHRoZSBkb2N1bWVudCBmb3IgcmVhZCBl
    dmVudHMKICAgIHJlYWRfbWV0YWRhdGFfb25seTogdHJ1ZQoKICAgICMgTWFwIG9mIGluZG
    V4ZXMgYW5kIGZpZWxkcyB0byBtb25pdG9yIGZvciByZWFkIGV2ZW50cy4gV2lsZGNhcmQg
    cGF0dGVybnMgYXJlIHN1cHBvcnRlZCBmb3IgYm90aCBpbmRleCBuYW1lcyBhbmQgZmllbG
    RzLiBFZzoKICAgICMgcmVhZF93YXRjaGVkX2ZpZWxkczogewogICAgIyAgICJ0d2l0dGVy
    IjogWyJtZXNzYWdlIl0KICAgICMgICAibG9ncy0qIjogWyJpZCIsICJhdHRyKiJdCiAgIC
    AjIH0KICAgIHJlYWRfd2F0Y2hlZF9maWVsZHM6IHt9CgogICAgIyBMaXN0IG9mIHVzZXJz
    IHRvIGlnbm9yZSBmb3IgcmVhZCBldmVudHMuIFdpbGRjYXJkIHBhdHRlcm5zIGFyZSBzdX
    Bwb3J0ZWQuIEVnOgogICAgIyByZWFkX2lnbm9yZV91c2VyczogWyJ0ZXN0LXVzZXIiLCAi
    ZW1wbG95ZWUtKiJdCiAgICByZWFkX2lnbm9yZV91c2VyczoKICAgICAgLSBraWJhbmFzZX
    J2ZXIKICAgICAgLSBsb2dzdGFzaAoKICAgICMgTG9nIG9ubHkgbWV0YWRhdGEgb2YgdGhl
    IGRvY3VtZW50IGZvciB3cml0ZSBldmVudHMKICAgIHdyaXRlX21ldGFkYXRhX29ubHk6IH
    RydWUKCiAgICAjIExvZyBvbmx5IGRpZmZzIGZvciBkb2N1bWVudCB1cGRhdGVzCiAgICB3
    cml0ZV9sb2dfZGlmZnM6IGZhbHNlCgogICAgIyBMaXN0IG9mIGluZGljZXMgdG8gd2F0Y2
    ggZm9yIHdyaXRlIGV2ZW50cy4gV2lsZGNhcmQgcGF0dGVybnMgYXJlIHN1cHBvcnRlZAog
    ICAgIyB3cml0ZV93YXRjaGVkX2luZGljZXM6IFsidHdpdHRlciIsICJsb2dzLSoiXQogIC
    Agd3JpdGVfd2F0Y2hlZF9pbmRpY2VzOiBbXQoKICAgICMgTGlzdCBvZiB1c2VycyB0byBp
    Z25vcmUgZm9yIHdyaXRlIGV2ZW50cy4gV2lsZGNhcmQgcGF0dGVybnMgYXJlIHN1cHBvcn
    RlZC4gRWc6CiAgICAjIHdyaXRlX2lnbm9yZV91c2VyczogWyJ0ZXN0LXVzZXIiLCAiZW1w
    bG95ZWUtKiJdCiAgICB3cml0ZV9pZ25vcmVfdXNlcnM6CiAgICAgIC0ga2liYW5hc2Vydm
    VyCiAgICAgIC0gbG9nc3Rhc2g=
  config.yml: |
    X21ldGE6CiAgdHlwZTogImNvbmZpZyIKICBjb25maWdfdmVyc2lvbjogMgoKY29uZmlnOg
    ogIGR5bmFtaWM6CiAgICAjIFNldCBmaWx0ZXJlZF9hbGlhc19tb2RlIHRvICdkaXNhbGxv
    dycgdG8gZm9yYmlkIG1vcmUgdGhhbiAyIGZpbHRlcmVkIGFsaWFzZXMgcGVyIGluZGV4Ci
    AgICAjIFNldCBmaWx0ZXJlZF9hbGlhc19tb2RlIHRvICd3YXJuJyB0byBhbGxvdyBtb3Jl
    IHRoYW4gMiBmaWx0ZXJlZCBhbGlhc2VzIHBlciBpbmRleCBidXQgd2FybnMgYWJvdXQgaX
    QgKGRlZmF1bHQpCiAgICAjIFNldCBmaWx0ZXJlZF9hbGlhc19tb2RlIHRvICdub3dhcm4n
    IHRvIGFsbG93IG1vcmUgdGhhbiAyIGZpbHRlcmVkIGFsaWFzZXMgcGVyIGluZGV4IHNpbG
    VudGx5CiAgICAjZmlsdGVyZWRfYWxpYXNfbW9kZTogd2FybgogICAgI2RvX25vdF9mYWls
    X29uX2ZvcmJpZGRlbjogZmFsc2UKICAgIGtpYmFuYToKICAgICAjS2liYW5hIG11bHRpdG
    VuYW5jeQogICAgICBtdWx0aXRlbmFuY3lfZW5hYmxlZDogZmFsc2UKICAgICAgc2VydmVy
    X3VzZXJuYW1lOiBraWJhbmFzZXJ2ZXIKICAgICAgaW5kZXg6ICcua2liYW5hJwogICAgaH
    R0cDoKICAgICAgYW5vbnltb3VzX2F1dGhfZW5hYmxlZDogdHJ1ZQogICAgICB4ZmY6CiAg
    ICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICBpbnRlcm5hbFByb3hpZXM6ICcxOTJcLj
    E2OFwuMFwuMTB8MTkyXC4xNjhcLjBcLjExJyAjIHJlZ2V4IHBhdHRlcm4KICAgICAgICAj
    aW50ZXJuYWxQcm94aWVzOiAnLionICMgdHJ1c3QgYWxsIGludGVybmFsIHByb3hpZXMsIH
    JlZ2V4IHBhdHRlcm4KICAgICAgICAjcmVtb3RlSXBIZWFkZXI6ICAneC1mb3J3YXJkZWQt
    Zm9yJwogICAgICAgICMjIyMjIyBzZWUgaHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YX
    NlLzcvZG9jcy9hcGkvamF2YS91dGlsL3JlZ2V4L1BhdHRlcm4uaHRtbCBmb3IgcmVnZXgg
    aGVscAogICAgICAgICMjIyMjIyBtb3JlIGluZm9ybWF0aW9uIGFib3V0IFhGRiBodHRwcz
    ovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9YLUZvcndhcmRlZC1Gb3IKICAgICAgICAjIyMj
    IyMgYW5kIGhlcmUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzkKICAgIC
    AgICAjIyMjIyMgYW5kIGh0dHBzOi8vdG9tY2F0LmFwYWNoZS5vcmcvdG9tY2F0LTguMC1k
    b2MvY29uZmlnL3ZhbHZlLmh0bWwjUmVtb3RlX0lQX1ZhbHZlCiAgICBhdXRoYzoKICAgIC
    Aga2VyYmVyb3NfYXV0aF9kb21haW46CiAgICAgICAgaHR0cF9lbmFibGVkOiBmYWxzZQog
    ICAgICAgIHRyYW5zcG9ydF9lbmFibGVkOiBmYWxzZQogICAgICAgIG9yZGVyOiA2CiAgIC
    AgICAgaHR0cF9hdXRoZW50aWNhdG9yOgogICAgICAgICAgdHlwZToga2VyYmVyb3MKICAg
    ICAgICAgIGNoYWxsZW5nZTogdHJ1ZQogICAgICAgICAgY29uZmlnOgogICAgICAgICAgIC
    AjIElmIHRydWUgYSBsb3Qgb2Yga2VyYmVyb3Mvc2VjdXJpdHkgcmVsYXRlZCBkZWJ1Z2dp
    bmcgb3V0cHV0IHdpbGwgYmUgbG9nZ2VkIHRvIHN0YW5kYXJkIG91dAogICAgICAgICAgIC
    BrcmJfZGVidWc6IGZhbHNlCiAgICAgICAgICAgICMgSWYgdHJ1ZSB0aGVuIHRoZSByZWFs
    bSB3aWxsIGJlIHN0cmlwcGVkIGZyb20gdGhlIHVzZXIgbmFtZQogICAgICAgICAgICBzdH
    JpcF9yZWFsbV9mcm9tX3ByaW5jaXBhbDogdHJ1ZQogICAgICAgIGF1dGhlbnRpY2F0aW9u
    X2JhY2tlbmQ6CiAgICAgICAgICB0eXBlOiBub29wCiAgICAgIGJhc2ljX2ludGVybmFsX2
    F1dGhfZG9tYWluOgogICAgICAgIGRlc2NyaXB0aW9uOiAiQXV0aGVudGljYXRlIHZpYSBI
    VFRQIEJhc2ljIGFnYWluc3QgaW50ZXJuYWwgdXNlcnMgZGF0YWJhc2UiCiAgICAgICAgaH
    R0cF9lbmFibGVkOiB0cnVlCiAgICAgICAgdHJhbnNwb3J0X2VuYWJsZWQ6IHRydWUKICAg
    ICAgICBvcmRlcjogNAogICAgICAgIGh0dHBfYXV0aGVudGljYXRvcjoKICAgICAgICAgIH
    R5cGU6IGJhc2ljCiAgICAgICAgICBjaGFsbGVuZ2U6IHRydWUKICAgICAgICBhdXRoZW50
    aWNhdGlvbl9iYWNrZW5kOgogICAgICAgICAgdHlwZTogaW50ZXJuCiAgICAgIHByb3h5X2
    F1dGhfZG9tYWluOgogICAgICAgIGRlc2NyaXB0aW9uOiAiQXV0aGVudGljYXRlIHZpYSBw
    cm94eSIKICAgICAgICBodHRwX2VuYWJsZWQ6IGZhbHNlCiAgICAgICAgdHJhbnNwb3J0X2
    VuYWJsZWQ6IGZhbHNlCiAgICAgICAgb3JkZXI6IDMKICAgICAgICBodHRwX2F1dGhlbnRp
    Y2F0b3I6CiAgICAgICAgICB0eXBlOiBwcm94eQogICAgICAgICAgY2hhbGxlbmdlOiBmYW
    xzZQogICAgICAgICAgY29uZmlnOgogICAgICAgICAgICB1c2VyX2hlYWRlcjogIngtcHJv
    eHktdXNlciIKICAgICAgICAgICAgcm9sZXNfaGVhZGVyOiAieC1wcm94eS1yb2xlcyIKIC
    AgICAgICBhdXRoZW50aWNhdGlvbl9iYWNrZW5kOgogICAgICAgICAgdHlwZTogbm9vcAog
    ICAgICBqd3RfYXV0aF9kb21haW46CiAgICAgICAgZGVzY3JpcHRpb246ICJBdXRoZW50aW
    NhdGUgdmlhIEpzb24gV2ViIFRva2VuIgogICAgICAgIGh0dHBfZW5hYmxlZDogZmFsc2UK
    ICAgICAgICB0cmFuc3BvcnRfZW5hYmxlZDogZmFsc2UKICAgICAgICBvcmRlcjogMAogIC
    AgICAgIGh0dHBfYXV0aGVudGljYXRvcjoKICAgICAgICAgIHR5cGU6IGp3dAogICAgICAg
    ICAgY2hhbGxlbmdlOiBmYWxzZQogICAgICAgICAgY29uZmlnOgogICAgICAgICAgICBzaW
    duaW5nX2tleTogImJhc2U2NCBlbmNvZGVkIEhNQUMga2V5IG9yIHB1YmxpYyBSU0EvRUNE
    U0EgcGVtIGtleSIKICAgICAgICAgICAgand0X2hlYWRlcjogIkF1dGhvcml6YXRpb24iCi
    AgICAgICAgICAgIGp3dF91cmxfcGFyYW1ldGVyOiBudWxsCiAgICAgICAgICAgIHJvbGVz
    X2tleTogbnVsbAogICAgICAgICAgICBzdWJqZWN0X2tleTogbnVsbAogICAgICAgIGF1dG
    hlbnRpY2F0aW9uX2JhY2tlbmQ6CiAgICAgICAgICB0eXBlOiBub29wCiAgICAgIGNsaWVu
    dGNlcnRfYXV0aF9kb21haW46CiAgICAgICAgZGVzY3JpcHRpb246ICJBdXRoZW50aWNhdG
    UgdmlhIFNTTCBjbGllbnQgY2VydGlmaWNhdGVzIgogICAgICAgIGh0dHBfZW5hYmxlZDog
    ZmFsc2UKICAgICAgICB0cmFuc3BvcnRfZW5hYmxlZDogZmFsc2UKICAgICAgICBvcmRlcj
    ogMgogICAgICAgIGh0dHBfYXV0aGVudGljYXRvcjoKICAgICAgICAgIHR5cGU6IGNsaWVu
    dGNlcnQKICAgICAgICAgIGNvbmZpZzoKICAgICAgICAgICAgdXNlcm5hbWVfYXR0cmlidX
    RlOiBjbiAjb3B0aW9uYWwsIGlmIG9taXR0ZWQgRE4gYmVjb21lcyB1c2VybmFtZQogICAg
    ICAgICAgY2hhbGxlbmdlOiBmYWxzZQogICAgICAgIGF1dGhlbnRpY2F0aW9uX2JhY2tlbm
    Q6CiAgICAgICAgICB0eXBlOiBub29wCiAgICAgIGxkYXA6CiAgICAgICAgZGVzY3JpcHRp
    b246ICJBdXRoZW50aWNhdGUgdmlhIExEQVAgb3IgQWN0aXZlIERpcmVjdG9yeSIKICAgIC
    AgICBodHRwX2VuYWJsZWQ6IGZhbHNlCiAgICAgICAgdHJhbnNwb3J0X2VuYWJsZWQ6IGZh
    bHNlCiAgICAgICAgb3JkZXI6IDUKICAgICAgICBodHRwX2F1dGhlbnRpY2F0b3I6CiAgIC
    AgICAgICB0eXBlOiBiYXNpYwogICAgICAgICAgY2hhbGxlbmdlOiBmYWxzZQogICAgICAg
    IGF1dGhlbnRpY2F0aW9uX2JhY2tlbmQ6CiAgICAgICAgICAjIExEQVAgYXV0aGVudGljYX
    Rpb24gYmFja2VuZCAoYXV0aGVudGljYXRlIHVzZXJzIGFnYWluc3QgYSBMREFQIG9yIEFj
    dGl2ZSBEaXJlY3RvcnkpCiAgICAgICAgICB0eXBlOiBsZGFwCiAgICAgICAgICBjb25maW
    c6CiAgICAgICAgICAgICMgZW5hYmxlIGxkYXBzCiAgICAgICAgICAgIGVuYWJsZV9zc2w6
    IGZhbHNlCiAgICAgICAgICAgICMgZW5hYmxlIHN0YXJ0IHRscywgZW5hYmxlX3NzbCBzaG
    91bGQgYmUgZmFsc2UKICAgICAgICAgICAgZW5hYmxlX3N0YXJ0X3RsczogZmFsc2UKICAg
    ICAgICAgICAgIyBzZW5kIGNsaWVudCBjZXJ0aWZpY2F0ZQogICAgICAgICAgICBlbmFibG
    Vfc3NsX2NsaWVudF9hdXRoOiBmYWxzZQogICAgICAgICAgICAjIHZlcmlmeSBsZGFwIGhv
    c3RuYW1lCiAgICAgICAgICAgIHZlcmlmeV9ob3N0bmFtZXM6IHRydWUKICAgICAgICAgIC
    AgaG9zdHM6CiAgICAgICAgICAgIC0gbG9jYWxob3N0OjgzODkKICAgICAgICAgICAgYmlu
    ZF9kbjogbnVsbAogICAgICAgICAgICBwYXNzd29yZDogbnVsbAogICAgICAgICAgICB1c2
    VyYmFzZTogJ291PXBlb3BsZSxkYz1leGFtcGxlLGRjPWNvbScKICAgICAgICAgICAgIyBG
    aWx0ZXIgdG8gc2VhcmNoIGZvciB1c2VycyAoY3VycmVudGx5IGluIHRoZSB3aG9sZSBzdW
    J0cmVlIGJlbmVhdGggdXNlcmJhc2UpCiAgICAgICAgICAgICMgezB9IGlzIHN1YnN0aXR1
    dGVkIHdpdGggdGhlIHVzZXJuYW1lCiAgICAgICAgICAgIHVzZXJzZWFyY2g6ICcoc0FNQW
    Njb3VudE5hbWU9ezB9KScKICAgICAgICAgICAgIyBVc2UgdGhpcyBhdHRyaWJ1dGUgZnJv
    bSB0aGUgdXNlciBhcyB1c2VybmFtZSAoaWYgbm90IHNldCB0aGVuIEROIGlzIHVzZWQpCi
    AgICAgICAgICAgIHVzZXJuYW1lX2F0dHJpYnV0ZTogbnVsbAogICAgYXV0aHo6CiAgICAg
    IHJvbGVzX2Zyb21fbXlsZGFwOgogICAgICAgIGRlc2NyaXB0aW9uOiAiQXV0aG9yaXplIH
    ZpYSBMREFQIG9yIEFjdGl2ZSBEaXJlY3RvcnkiCiAgICAgICAgaHR0cF9lbmFibGVkOiBm
    YWxzZQogICAgICAgIHRyYW5zcG9ydF9lbmFibGVkOiBmYWxzZQogICAgICAgIGF1dGhvcm
    l6YXRpb25fYmFja2VuZDoKICAgICAgICAgICMgTERBUCBhdXRob3JpemF0aW9uIGJhY2tl
    bmQgKGdhdGhlciByb2xlcyBmcm9tIGEgTERBUCBvciBBY3RpdmUgRGlyZWN0b3J5LCB5b3
    UgaGF2ZSB0byBjb25maWd1cmUgdGhlIGFib3ZlIExEQVAgYXV0aGVudGljYXRpb24gYmFj
    a2VuZCBzZXR0aW5ncyB0b28pCiAgICAgICAgICB0eXBlOiBsZGFwCiAgICAgICAgICBjb2
    5maWc6CiAgICAgICAgICAgICMgZW5hYmxlIGxkYXBzCiAgICAgICAgICAgIGVuYWJsZV9z
    c2w6IGZhbHNlCiAgICAgICAgICAgICMgZW5hYmxlIHN0YXJ0IHRscywgZW5hYmxlX3NzbC
    BzaG91bGQgYmUgZmFsc2UKICAgICAgICAgICAgZW5hYmxlX3N0YXJ0X3RsczogZmFsc2UK
    ICAgICAgICAgICAgIyBzZW5kIGNsaWVudCBjZXJ0aWZpY2F0ZQogICAgICAgICAgICBlbm
    FibGVfc3NsX2NsaWVudF9hdXRoOiBmYWxzZQogICAgICAgICAgICAjIHZlcmlmeSBsZGFw
    IGhvc3RuYW1lCiAgICAgICAgICAgIHZlcmlmeV9ob3N0bmFtZXM6IHRydWUKICAgICAgIC
    AgICAgaG9zdHM6CiAgICAgICAgICAgIC0gbG9jYWxob3N0OjgzODkKICAgICAgICAgICAg
    YmluZF9kbjogbnVsbAogICAgICAgICAgICBwYXNzd29yZDogbnVsbAogICAgICAgICAgIC
    Byb2xlYmFzZTogJ291PWdyb3VwcyxkYz1leGFtcGxlLGRjPWNvbScKICAgICAgICAgICAg
    IyBGaWx0ZXIgdG8gc2VhcmNoIGZvciByb2xlcyAoY3VycmVudGx5IGluIHRoZSB3aG9sZS
    BzdWJ0cmVlIGJlbmVhdGggcm9sZWJhc2UpCiAgICAgICAgICAgICMgezB9IGlzIHN1YnN0
    aXR1dGVkIHdpdGggdGhlIEROIG9mIHRoZSB1c2VyCiAgICAgICAgICAgICMgezF9IGlzIH
    N1YnN0aXR1dGVkIHdpdGggdGhlIHVzZXJuYW1lCiAgICAgICAgICAgICMgezJ9IGlzIHN1
    YnN0aXR1dGVkIHdpdGggYW4gYXR0cmlidXRlIHZhbHVlIGZyb20gdXNlcidzIGRpcmVjdG
    9yeSBlbnRyeSwgb2YgdGhlIGF1dGhlbnRpY2F0ZWQgdXNlci4gVXNlIHVzZXJyb2xlYXR0
    cmlidXRlIHRvIHNwZWNpZnkgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgICAgIC
    AgICByb2xlc2VhcmNoOiAnKG1lbWJlcj17MH0pJwogICAgICAgICAgICAjIFNwZWNpZnkg
    dGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB3aGljaCB2YWx1ZSBzaG91bGQgYmUgc3Vic3
    RpdHV0ZWQgd2l0aCB7Mn0gYWJvdmUKICAgICAgICAgICAgdXNlcnJvbGVhdHRyaWJ1dGU6
    IG51bGwKICAgICAgICAgICAgIyBSb2xlcyBhcyBhbiBhdHRyaWJ1dGUgb2YgdGhlIHVzZX
    IgZW50cnkKICAgICAgICAgICAgdXNlcnJvbGVuYW1lOiBkaXNhYmxlZAogICAgICAgICAg
    ICAjdXNlcnJvbGVuYW1lOiBtZW1iZXJPZgogICAgICAgICAgICAjIFRoZSBhdHRyaWJ1dG
    UgaW4gYSByb2xlIGVudHJ5IGNvbnRhaW5pbmcgdGhlIG5hbWUgb2YgdGhhdCByb2xlLCBE
    ZWZhdWx0IGlzICJuYW1lIi4KICAgICAgICAgICAgIyBDYW4gYWxzbyBiZSAiZG4iIHRvIH
    VzZSB0aGUgZnVsbCBETiBhcyByb2xlbmFtZS4KICAgICAgICAgICAgcm9sZW5hbWU6IGNu
    CiAgICAgICAgICAgICMgUmVzb2x2ZSBuZXN0ZWQgcm9sZXMgdHJhbnNpdGl2ZSAocm9sZX
    Mgd2hpY2ggYXJlIG1lbWJlcnMgb2Ygb3RoZXIgcm9sZXMgYW5kIHNvIG9uIC4uLikKICAg
    ICAgICAgICAgcmVzb2x2ZV9uZXN0ZWRfcm9sZXM6IHRydWUKICAgICAgICAgICAgdXNlcm
    Jhc2U6ICdvdT1wZW9wbGUsZGM9ZXhhbXBsZSxkYz1jb20nCiAgICAgICAgICAgICMgRmls
    dGVyIHRvIHNlYXJjaCBmb3IgdXNlcnMgKGN1cnJlbnRseSBpbiB0aGUgd2hvbGUgc3VidH
    JlZSBiZW5lYXRoIHVzZXJiYXNlKQogICAgICAgICAgICAjIHswfSBpcyBzdWJzdGl0dXRl
    ZCB3aXRoIHRoZSB1c2VybmFtZQogICAgICAgICAgICB1c2Vyc2VhcmNoOiAnKHVpZD17MH
    0pJwogICAgICAgICAgICAjIFNraXAgdXNlcnMgbWF0Y2hpbmcgYSB1c2VyIG5hbWUsIGEg
    d2lsZGNhcmQgb3IgYSByZWdleCBwYXR0ZXJuCiAgICAgICAgICAgICNza2lwX3VzZXJzOg
    ogICAgICAgICAgICAjICAtICdjbj1NaWNoYWVsIEphY2tzb24sb3UqcGVvcGxlLG89VEVT
    VCcKICAgICAgICAgICAgIyAgLSAnL1xTKi8nCiAgICAgIHJvbGVzX2Zyb21fYW5vdGhlcl
    9sZGFwOgogICAgICAgIGRlc2NyaXB0aW9uOiAiQXV0aG9yaXplIHZpYSBhbm90aGVyIEFj
    dGl2ZSBEaXJlY3RvcnkiCiAgICAgICAgaHR0cF9lbmFibGVkOiBmYWxzZQogICAgICAgIH
    RyYW5zcG9ydF9lbmFibGVkOiBmYWxzZQogICAgICAgIGF1dGhvcml6YXRpb25fYmFja2Vu
    ZDoKICAgICAgICAgIHR5cGU6IGxkYXA=
  internal_users.yml: |
    X21ldGE6CiAgdHlwZTogImludGVybmFsdXNlcnMiCiAgY29uZmlnX3ZlcnNpb246IDIKCi
    MgRGVmaW5lIHlvdXIgaW50ZXJuYWwgdXNlcnMgaGVyZQoKCmFkbWluOgogIGhhc2g6ICIk
    MnkkMTIkeDBXL2JiLnJDRXhudERzenpUUU1HTzQ2QmpoY2FiQmxZL2o0NGNMUWxRZ3BOQ1
    BJbWIwMG0iCiAgcmVzZXJ2ZWQ6IHRydWUKICBiYWNrZW5kX3JvbGVzOgogIC0gImFkbWlu
    IgogIGRlc2NyaXB0aW9uOiAiQWRtaW4gdXNlciIKCmtpYmFuYXNlcnZlcjoKICBoYXNoOi
    AiJDJ5JDEyJEtMaUNIbXRJaVhwb2pwc3JpcUZCQmVkbEh5dU9CNlFTV0ZLOTMyUzFERUx3
    ektkWjBpb0FxIgogIHJlc2VydmVkOiB0cnVlCiAgZGVzY3JpcHRpb246ICJPcGVuU2Vhcm
    NoIERhc2hib2FyZHMgdXNlciIKCmxvZ3N0YXNoOgogIGhhc2g6ICIkMnkkMTIkZVRDSVJX
    aXVzLkxpeDUvNXp3SndIT0pDcUlMUW1hV0RSeDZmbjNJRFI1NEs1OXNud2xVUmEiCiAgcm
    VzZXJ2ZWQ6IHRydWUKICBiYWNrZW5kX3JvbGVzOgogIC0gImxvZ3N0YXNoIgogIGRlc2Ny
    aXB0aW9uOiAiTG9nc3Rhc2ggdXNlciIKCgppbmRleG1pZ3JhdGlvbjoKICBoYXNoOiAiJD
    J5JDEyJG5uTnh1enBGY0JscE8vRmVzblVBN084b1pSRkYuekJaYUJwS0trMHplb2tZT3px
    Llk0cGx1IgogIHJlc2VydmVkOiB0cnVlCiAgZGVzY3JpcHRpb246ICJJbmRleCBtaWdyYX
    Rpb24gdXNlciIKCmJvb3RzdHJhcDoKICBoYXNoOiAiJDJ5JDEyJHJLYmoxZVZZcHREOXV3
    NUI3Q09YNHVPS2ZmQ29UTGFEd1pmdFc4VktWd1ptbVQ0bUpSV3N5IgogIHJlc2VydmVkOi
    B0cnVlCiAgZGVzY3JpcHRpb246ICJCb290c3RyYXAgdXNlciI=
  nodes_dn.yml: X21ldGE6CiAgdHlwZTogIm5vZGVzZG4iCiAgY29uZmlnX3ZlcnNpb246IDI=
  roles.yml: |
    X21ldGE6CiAgdHlwZTogInJvbGVzIgogIGNvbmZpZ192ZXJzaW9uOiAyCgojIFJlc3RyaW
    N0IHVzZXJzIHNvIHRoZXkgY2FuIG9ubHkgdmlldyB2aXN1YWxpemF0aW9uIGFuZCBkYXNo
    Ym9hcmQgb24gT3BlblNlYXJjaERhc2hib2FyZHMKa2liYW5hX3JlYWRfb25seToKICByZX
    NlcnZlZDogdHJ1ZQoKbG9nc3Rhc2hfd3JpdGU6CiAgcmVzZXJ2ZWQ6IHRydWUKICBpbmRl
    eF9wZXJtaXNzaW9uczoKICAgIC0gaW5kZXhfcGF0dGVybnM6CiAgICAgICAgLSAnKicKIC
    AgICAgYWxsb3dlZF9hY3Rpb25zOgogICAgICAgIC0gJ2NydWQnCiAgICAgICAgLSAnY3Jl
    YXRlX2luZGV4JwoKIyBUaGUgc2VjdXJpdHkgUkVTVCBBUEkgYWNjZXNzIHJvbGUgaXMgdX
    NlZCB0byBhc3NpZ24gc3BlY2lmaWMgdXNlcnMgYWNjZXNzIHRvIGNoYW5nZSB0aGUgc2Vj
    dXJpdHkgc2V0dGluZ3MgdGhyb3VnaCB0aGUgUkVTVCBBUEkuCnNlY3VyaXR5X3Jlc3RfYX
    BpX2FjY2VzczoKICByZXNlcnZlZDogdHJ1ZQoKIyBBbGxvd3MgdXNlcnMgdG8gdmlldyBt
    b25pdG9ycywgZGVzdGluYXRpb25zIGFuZCBhbGVydHMKYWxlcnRpbmdfcmVhZF9hY2Nlc3
    M6CiAgcmVzZXJ2ZWQ6IHRydWUKICBjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLSAnY2x1
    c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FsZXJ0aW5nL2FsZXJ0cy9nZXQnCiAgICAtICdjbH
    VzdGVyOmFkbWluL29wZW5kaXN0cm8vYWxlcnRpbmcvZGVzdGluYXRpb24vZ2V0JwogICAg
    LSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FsZXJ0aW5nL2Rlc3RpbmF0aW9uL2VtYW
    lsX2dyb3VwL3NlYXJjaCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9hbGVy
    dGluZy9kZXN0aW5hdGlvbi9lbWFpbF9hY2NvdW50L3NlYXJjaCcKICAgIC0gJ2NsdXN0ZX
    I6YWRtaW4vb3BlbmRpc3Ryby9hbGVydGluZy9tb25pdG9yL2dldCcKICAgIC0gJ2NsdXN0
    ZXI6YWRtaW4vb3BlbmRpc3Ryby9hbGVydGluZy9tb25pdG9yL3NlYXJjaCcKCiMgQWxsb3
    dzIHVzZXJzIHRvIHZpZXcgYW5kIGFja25vd2xlZGdlIGFsZXJ0cwphbGVydGluZ19hY2tf
    YWxlcnRzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW9uczoKICAgIC
    0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9hbGVydGluZy9hbGVydHMvKicKCiMgQWxs
    b3dzIHVzZXJzIHRvIHVzZSBhbGwgYWxlcnRpbmcgZnVuY3Rpb25hbGl0eQphbGVydGluZ1
    9mdWxsX2FjY2VzczoKICByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6
    CiAgICAtICdjbHVzdGVyX21vbml0b3InCiAgICAtICdjbHVzdGVyOmFkbWluL29wZW5kaX
    N0cm8vYWxlcnRpbmcvKicKICBpbmRleF9wZXJtaXNzaW9uczoKICAgIC0gaW5kZXhfcGF0
    dGVybnM6CiAgICAgICAgLSAnKicKICAgICAgYWxsb3dlZF9hY3Rpb25zOgogICAgICAgIC
    0gJ2luZGljZXNfbW9uaXRvcicKICAgICAgICAtICdpbmRpY2VzOmFkbWluL2FsaWFzZXMv
    Z2V0JwogICAgICAgIC0gJ2luZGljZXM6YWRtaW4vbWFwcGluZ3MvZ2V0JwoKIyBBbGxvdy
    B1c2VycyB0byByZWFkIEFub21hbHkgRGV0ZWN0aW9uIGRldGVjdG9ycyBhbmQgcmVzdWx0
    cwphbm9tYWx5X3JlYWRfYWNjZXNzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZX
    JtaXNzaW9uczoKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9hZC9kZXRlY3Rv
    ci9pbmZvJwogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FkL2RldGVjdG9yL3
    NlYXJjaCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9hZC9kZXRlY3RvcnMv
    Z2V0JwogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FkL3Jlc3VsdC9zZWFyY2
    gnCiAgICAtICdjbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vYWQvdGFza3Mvc2VhcmNoJwog
    ICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FkL2RldGVjdG9yL3ZhbGlkYXRlJw
    ogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FkL3Jlc3VsdC90b3BBbm9tYWxp
    ZXMnCgojIEFsbG93cyB1c2VycyB0byB1c2UgYWxsIEFub21hbHkgRGV0ZWN0aW9uIGZ1bm
    N0aW9uYWxpdHkKYW5vbWFseV9mdWxsX2FjY2VzczoKICByZXNlcnZlZDogdHJ1ZQogIGNs
    dXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbHVzdGVyX21vbml0b3InCiAgICAtICdjbH
    VzdGVyOmFkbWluL29wZW5kaXN0cm8vYWQvKicKICBpbmRleF9wZXJtaXNzaW9uczoKICAg
    IC0gaW5kZXhfcGF0dGVybnM6CiAgICAgICAgLSAnKicKICAgICAgYWxsb3dlZF9hY3Rpb2
    5zOgogICAgICAgIC0gJ2luZGljZXNfbW9uaXRvcicKICAgICAgICAtICdpbmRpY2VzOmFk
    bWluL2FsaWFzZXMvZ2V0JwogICAgICAgIC0gJ2luZGljZXM6YWRtaW4vbWFwcGluZ3MvZ2
    V0JwoKIyBBbGxvd3MgdXNlcnMgdG8gcmVhZCBOb3RlYm9va3MKbm90ZWJvb2tzX3JlYWRf
    YWNjZXNzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW9uczoKICAgIC
    0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9ub3RlYm9va3MvbGlzdCcKICAgIC0gJ2Ns
    dXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9ub3RlYm9va3MvZ2V0JwoKIyBBbGxvd3MgdXNlcn
    MgdG8gYWxsIE5vdGVib29rcyBmdW5jdGlvbmFsaXR5Cm5vdGVib29rc19mdWxsX2FjY2Vz
    czoKICByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbH
    VzdGVyOmFkbWluL29wZW5kaXN0cm8vbm90ZWJvb2tzL2NyZWF0ZScKICAgIC0gJ2NsdXN0
    ZXI6YWRtaW4vb3BlbmRpc3Ryby9ub3RlYm9va3MvdXBkYXRlJwogICAgLSAnY2x1c3Rlcj
    phZG1pbi9vcGVuZGlzdHJvL25vdGVib29rcy9kZWxldGUnCiAgICAtICdjbHVzdGVyOmFk
    bWluL29wZW5kaXN0cm8vbm90ZWJvb2tzL2dldCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3
    BlbmRpc3Ryby9ub3RlYm9va3MvbGlzdCcKCiMgQWxsb3dzIHVzZXJzIHRvIHJlYWQgb2Jz
    ZXJ2YWJpbGl0eSBvYmplY3RzCm9ic2VydmFiaWxpdHlfcmVhZF9hY2Nlc3M6CiAgcmVzZX
    J2ZWQ6IHRydWUKICBjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLSAnY2x1c3RlcjphZG1p
    bi9vcGVuc2VhcmNoL29ic2VydmFiaWxpdHkvZ2V0JwogICAgLSAnY2x1c3RlcjphZG1pbi
    9vcGVuc2VhcmNoL3BwbCcKCiMgQWxsb3dzIHVzZXJzIHRvIGFsbCBPYnNlcnZhYmlsaXR5
    IGZ1bmN0aW9uYWxpdHkKb2JzZXJ2YWJpbGl0eV9mdWxsX2FjY2VzczoKICByZXNlcnZlZD
    ogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbHVzdGVyOmFkbWluL29w
    ZW5zZWFyY2gvb2JzZXJ2YWJpbGl0eS9jcmVhdGUnCiAgICAtICdjbHVzdGVyOmFkbWluL2
    9wZW5zZWFyY2gvb2JzZXJ2YWJpbGl0eS91cGRhdGUnCiAgICAtICdjbHVzdGVyOmFkbWlu
    L29wZW5zZWFyY2gvb2JzZXJ2YWJpbGl0eS9kZWxldGUnCiAgICAtICdjbHVzdGVyOmFkbW
    luL29wZW5zZWFyY2gvb2JzZXJ2YWJpbGl0eS9nZXQnCgojIEFsbG93cyB1c2VycyB0byBy
    ZWFkIGFuZCBkb3dubG9hZCBSZXBvcnRzCnJlcG9ydHNfaW5zdGFuY2VzX3JlYWRfYWNjZX
    NzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW9uczoKICAgIC0gJ2Ns
    dXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9yZXBvcnRzL2luc3RhbmNlL2xpc3QnCiAgICAtIC
    djbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vcmVwb3J0cy9pbnN0YW5jZS9nZXQnCiAgICAt
    ICdjbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vcmVwb3J0cy9tZW51L2Rvd25sb2FkJwoKIy
    BBbGxvd3MgdXNlcnMgdG8gcmVhZCBhbmQgZG93bmxvYWQgUmVwb3J0cyBhbmQgUmVwb3J0
    LWRlZmluaXRpb25zCnJlcG9ydHNfcmVhZF9hY2Nlc3M6CiAgcmVzZXJ2ZWQ6IHRydWUKIC
    BjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJv
    L3JlcG9ydHMvZGVmaW5pdGlvbi9nZXQnCiAgICAtICdjbHVzdGVyOmFkbWluL29wZW5kaX
    N0cm8vcmVwb3J0cy9kZWZpbml0aW9uL2xpc3QnCiAgICAtICdjbHVzdGVyOmFkbWluL29w
    ZW5kaXN0cm8vcmVwb3J0cy9pbnN0YW5jZS9saXN0JwogICAgLSAnY2x1c3RlcjphZG1pbi
    9vcGVuZGlzdHJvL3JlcG9ydHMvaW5zdGFuY2UvZ2V0JwogICAgLSAnY2x1c3RlcjphZG1p
    bi9vcGVuZGlzdHJvL3JlcG9ydHMvbWVudS9kb3dubG9hZCcKCiMgQWxsb3dzIHVzZXJzIH
    RvIGFsbCBSZXBvcnRzIGZ1bmN0aW9uYWxpdHkKcmVwb3J0c19mdWxsX2FjY2VzczoKICBy
    ZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbHVzdGVyOm
    FkbWluL29wZW5kaXN0cm8vcmVwb3J0cy9kZWZpbml0aW9uL2NyZWF0ZScKICAgIC0gJ2Ns
    dXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9yZXBvcnRzL2RlZmluaXRpb24vdXBkYXRlJwogIC
    AgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL3JlcG9ydHMvZGVmaW5pdGlvbi9vbl9k
    ZW1hbmQnCiAgICAtICdjbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vcmVwb3J0cy9kZWZpbm
    l0aW9uL2RlbGV0ZScKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9yZXBvcnRz
    L2RlZmluaXRpb24vZ2V0JwogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL3JlcG
    9ydHMvZGVmaW5pdGlvbi9saXN0JwogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJv
    L3JlcG9ydHMvaW5zdGFuY2UvbGlzdCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3
    Ryby9yZXBvcnRzL2luc3RhbmNlL2dldCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRp
    c3Ryby9yZXBvcnRzL21lbnUvZG93bmxvYWQnCgojIEFsbG93cyB1c2VycyB0byB1c2UgYW
    xsIGFzeW5jaHJvbm91cy1zZWFyY2ggZnVuY3Rpb25hbGl0eQphc3luY2hyb25vdXNfc2Vh
    cmNoX2Z1bGxfYWNjZXNzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW
    9uczoKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9hc3luY2hyb25vdXNfc2Vh
    cmNoLyonCiAgaW5kZXhfcGVybWlzc2lvbnM6CiAgICAtIGluZGV4X3BhdHRlcm5zOgogIC
    AgICAgIC0gJyonCiAgICAgIGFsbG93ZWRfYWN0aW9uczoKICAgICAgICAtICdpbmRpY2Vz
    OmRhdGEvcmVhZC9zZWFyY2gqJwoKIyBBbGxvd3MgdXNlcnMgdG8gcmVhZCBzdG9yZWQgYX
    N5bmNocm9ub3VzLXNlYXJjaCByZXN1bHRzCmFzeW5jaHJvbm91c19zZWFyY2hfcmVhZF9h
    Y2Nlc3M6CiAgcmVzZXJ2ZWQ6IHRydWUKICBjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLS
    AnY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2FzeW5jaHJvbm91c19zZWFyY2gvZ2V0JwoK
    IyBBbGxvd3MgdXNlciB0byB1c2UgYWxsIGluZGV4X21hbmFnZW1lbnQgYWN0aW9ucyAtIG
    lzbSBwb2xpY2llcywgcm9sbHVwcywgdHJhbnNmb3JtcwppbmRleF9tYW5hZ2VtZW50X2Z1
    bGxfYWNjZXNzOgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW9uczoKIC
    AgIC0gImNsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9pc20vKiIKICAgIC0gImNsdXN0ZXI6
    YWRtaW4vb3BlbmRpc3Ryby9yb2xsdXAvKiIKICAgIC0gImNsdXN0ZXI6YWRtaW4vb3Blbm
    Rpc3Ryby90cmFuc2Zvcm0vKiIKICBpbmRleF9wZXJtaXNzaW9uczoKICAgIC0gaW5kZXhf
    cGF0dGVybnM6CiAgICAgICAgLSAnKicKICAgICAgYWxsb3dlZF9hY3Rpb25zOgogICAgIC
    AgIC0gJ2luZGljZXM6YWRtaW4vb3BlbnNlYXJjaC9pc20vKicKCiMgQWxsb3dzIHVzZXJz
    IHRvIHVzZSBhbGwgY3Jvc3MgY2x1c3RlciByZXBsaWNhdGlvbiBmdW5jdGlvbmFsaXR5IG
    F0IGxlYWRlciBjbHVzdGVyCmNyb3NzX2NsdXN0ZXJfcmVwbGljYXRpb25fbGVhZGVyX2Z1
    bGxfYWNjZXNzOgogIHJlc2VydmVkOiB0cnVlCiAgaW5kZXhfcGVybWlzc2lvbnM6CiAgIC
    AtIGluZGV4X3BhdHRlcm5zOgogICAgICAgIC0gJyonCiAgICAgIGFsbG93ZWRfYWN0aW9u
    czoKICAgICAgICAtICJpbmRpY2VzOmFkbWluL3BsdWdpbnMvcmVwbGljYXRpb24vaW5kZX
    gvc2V0dXAvdmFsaWRhdGUiCiAgICAgICAgLSAiaW5kaWNlczpkYXRhL3JlYWQvcGx1Z2lu
    cy9yZXBsaWNhdGlvbi9jaGFuZ2VzIgogICAgICAgIC0gImluZGljZXM6ZGF0YS9yZWFkL3
    BsdWdpbnMvcmVwbGljYXRpb24vZmlsZV9jaHVuayIKCiMgQWxsb3dzIHVzZXJzIHRvIHVz
    ZSBhbGwgY3Jvc3MgY2x1c3RlciByZXBsaWNhdGlvbiBmdW5jdGlvbmFsaXR5IGF0IGZvbG
    xvd2VyIGNsdXN0ZXIKY3Jvc3NfY2x1c3Rlcl9yZXBsaWNhdGlvbl9mb2xsb3dlcl9mdWxs
    X2FjY2VzczoKICByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgIC
    AtICJjbHVzdGVyOmFkbWluL3BsdWdpbnMvcmVwbGljYXRpb24vYXV0b2ZvbGxvdy91cGRh
    dGUiCiAgaW5kZXhfcGVybWlzc2lvbnM6CiAgICAtIGluZGV4X3BhdHRlcm5zOgogICAgIC
    AgIC0gJyonCiAgICAgIGFsbG93ZWRfYWN0aW9uczoKICAgICAgICAtICJpbmRpY2VzOmFk
    bWluL3BsdWdpbnMvcmVwbGljYXRpb24vaW5kZXgvc2V0dXAvdmFsaWRhdGUiCiAgICAgIC
    AgLSAiaW5kaWNlczpkYXRhL3dyaXRlL3BsdWdpbnMvcmVwbGljYXRpb24vY2hhbmdlcyIK
    ICAgICAgICAtICJpbmRpY2VzOmFkbWluL3BsdWdpbnMvcmVwbGljYXRpb24vaW5kZXgvc3
    RhcnQiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9wbHVnaW5zL3JlcGxpY2F0aW9uL2lu
    ZGV4L3BhdXNlIgogICAgICAgIC0gImluZGljZXM6YWRtaW4vcGx1Z2lucy9yZXBsaWNhdG
    lvbi9pbmRleC9yZXN1bWUiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9wbHVnaW5zL3Jl
    cGxpY2F0aW9uL2luZGV4L3N0b3AiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9wbHVnaW
    5zL3JlcGxpY2F0aW9uL2luZGV4L3VwZGF0ZSIKICAgICAgICAtICJpbmRpY2VzOmFkbWlu
    L3BsdWdpbnMvcmVwbGljYXRpb24vaW5kZXgvc3RhdHVzX2NoZWNrIgoKIyBBbGxvdyB1c2
    VycyB0byByZWFkIE1MIHN0YXRzL21vZGVscy90YXNrcwptbF9yZWFkX2FjY2VzczoKICBy
    ZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbHVzdGVyOm
    FkbWluL29wZW5zZXJhY2gvbWwvc3RhdHMnCiAgICAtICdjbHVzdGVyOmFkbWluL29wZW5z
    ZWFyY2gvbWwvbW9kZWxzL2dldCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbnNlYXJjaC
    9tbC9tb2RlbHMvc2VhcmNoJwogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuc2VhcmNoL21s
    L3Rhc2tzL2dldCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbnNlYXJjaC9tbC90YXNrcy
    9zZWFyY2gnCgojIEFsbG93cyB1c2VycyB0byByZWFkIE5vdGlmaWNhdGlvbnMgY29uZmln
    L2NoYW5uZWxzCm5vdGlmaWNhdGlvbnNfcmVhZF9hY2Nlc3M6CiAgcmVzZXJ2ZWQ6IHRydW
    UKICBjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLSAnY2x1c3RlcjphZG1pbi9vcGVuc2Vh
    cmNoL25vdGlmaWNhdGlvbnMvY29uZmlncy9nZXQnCiAgICAtICdjbHVzdGVyOmFkbWluL2
    9wZW5zZWFyY2gvbm90aWZpY2F0aW9ucy9mZWF0dXJlcycKICAgIC0gJ2NsdXN0ZXI6YWRt
    aW4vb3BlbnNlYXJjaC9ub3RpZmljYXRpb25zL2NoYW5uZWxzL2dldCcKCiMgQWxsb3dzIH
    VzZXJzIHRvIHNlZSBzbmFwc2hvdHMsIHJlcG9zaXRvcmllcywgYW5kIHNuYXBzaG90IG1h
    bmFnZW1lbnQgcG9saWNpZXMKc25hcHNob3RfbWFuYWdlbWVudF9yZWFkX2FjY2VzczoKIC
    ByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAgICAtICdjbHVzdGVy
    OmFkbWluL29wZW5zZWFyY2gvc25hcHNob3RfbWFuYWdlbWVudC9wb2xpY3kvZ2V0JwogIC
    AgLSAnY2x1c3RlcjphZG1pbi9vcGVuc2VhcmNoL3NuYXBzaG90X21hbmFnZW1lbnQvcG9s
    aWN5L3NlYXJjaCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbnNlYXJjaC9zbmFwc2hvdF
    9tYW5hZ2VtZW50L3BvbGljeS9leHBsYWluJwogICAgLSAnY2x1c3RlcjphZG1pbi9yZXBv
    c2l0b3J5L2dldCcKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vc25hcHNob3QvZ2V0JwoKIyBBbG
    xvd3MgdXNlcnMgdG8gdXNlIGFsbCBNTCBmdW5jdGlvbmFsaXR5Cm1sX2Z1bGxfYWNjZXNz
    OgogIHJlc2VydmVkOiB0cnVlCiAgY2x1c3Rlcl9wZXJtaXNzaW9uczoKICAgIC0gJ2NsdX
    N0ZXJfbW9uaXRvcicKICAgIC0gJ2NsdXN0ZXI6YWRtaW4vb3BlbnNlYXJjaC9tbC8qJwog
    IGluZGV4X3Blcm1pc3Npb25zOgogICAgLSBpbmRleF9wYXR0ZXJuczoKICAgICAgICAtIC
    cqJwogICAgICBhbGxvd2VkX2FjdGlvbnM6CiAgICAgICAgLSAnaW5kaWNlc19tb25pdG9y
    JwoKIyBBbm9ueW1vdXMgYWNjZXNzIHJvbGUKb3BlbmRpc3Ryb19zZWN1cml0eV9hbm9ueW
    1vdXNfcm9sZToKICByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlzc2lvbnM6CiAg
    ICAjIEZvciB1c2luZyBfY2F0L2luZGljZXMKICAgIC0gJ2NsdXN0ZXI6bW9uaXRvci9zdG
    F0ZScKICAgIC0gJ2NsdXN0ZXI6bW9uaXRvci9oZWFsdGgnCiAgICAtICdjbHVzdGVyOm1v
    bml0b3Ivbm9kZXMvaW5mbycKICAgICMgVG8gZW5hYmxlIHJlYWQgYWNjZXNzIHRvIElTTQ
    ogICAgLSBjbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vaXNtL3BvbGljeS9zZWFyY2gKICAg
    IC0gY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL2lzbS9tYW5hZ2VkaW5kZXgvZXhwbGFpbg
    ogICAgLSBjbHVzdGVyOmFkbWluL29wZW5kaXN0cm8vcm9sbHVwL3NlYXJjaAogICAgLSBj
    bHVzdGVyOmFkbWluL29wZW5kaXN0cm8vdHJhbnNmb3JtL2dldF90cmFuc2Zvcm1zCiAgIC
    AjIFRvIGVuYWJsZSByZWFkIGFjY2VzcyB0byB2YXJpb3VzIElTTSBKb2JzCiAgICAtIGNs
    dXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby9yb2xsdXAvZXhwbGFpbgogICAgLSBjbHVzdGVyOm
    FkbWluL29wZW5kaXN0cm8vaXNtL3BvbGljeS9nZXQKICAgIC0gY2x1c3RlcjphZG1pbi9v
    cGVuZGlzdHJvL3JvbGx1cC9nZXQKICAgIC0gY2x1c3RlcjphZG1pbi9vcGVuZGlzdHJvL3
    RyYW5zZm9ybS9leHBsYWluCiAgICAtIGNsdXN0ZXI6YWRtaW4vb3BlbmRpc3Ryby90cmFu
    c2Zvcm0vZ2V0CiAgICAjIFRvIGVuYWJsZSByZWFkIGFjY2VzcyB0byBzZWN1cml0eSBhbm
    FseXRpY3MKICAgIC0gY2x1c3RlcjphZG1pbi9vcGVuc2VhcmNoL3NlY3VyaXR5YW5hbHl0
    aWNzL3J1bGUvc2VhcmNoCiAgICAtIGNsdXN0ZXI6YWRtaW4vb3BlbnNlYXJjaC9zZWN1cm
    l0eWFuYWx5dGljcy9kZXRlY3Rvci9zZWFyY2gKICAgIC0gY2x1c3RlcjphZG1pbi9vcGVu
    c2VhcmNoL3NlY3VyaXR5YW5hbHl0aWNzL2ZpbmRpbmdzL2dldAogICAgLSBjbHVzdGVyOm
    FkbWluL29wZW5zZWFyY2gvc2VjdXJpdHlhbmFseXRpY3MvYWxlcnRzL2dldAogICAgLSBj
    bHVzdGVyOmFkbWluL29wZW5zZWFyY2gvc2VjdXJpdHlhbmFseXRpY3MvZGV0ZWN0b3IvZ2
    V0CiAgICAjIEZvciB1c2luZyBzcWwgam9pbiBxdWVyeQogICAgLSAiaW5kaWNlczpkYXRh
    L3JlYWQvc2Nyb2xsKiIKICBpbmRleF9wZXJtaXNzaW9uczoKICAgIC0gaW5kZXhfcGF0dG
    VybnM6CiAgICAgIC0gJyonCiAgICAgIGFsbG93ZWRfYWN0aW9uczoKICAgICAgICAtICJy
    ZWFkIgogICAgICAgIC0gImluZGljZXM6ZGF0YS9yZWFkL21nZXQiCiAgICAgICAgLSAiaW
    5kaWNlczpkYXRhL3JlYWQvbXNlYXJjaCIKICAgICAgICAtICJpbmRpY2VzOmRhdGEvcmVh
    ZC9tdHYiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9nZXQiCiAgICAgICAgLSAiaW5kaW
    NlczphZG1pbi9hbGlhc2VzL2V4aXN0cyoiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9h
    bGlhc2VzL2dldCoiCiAgICAgICAgLSAiaW5kaWNlczphZG1pbi9tYXBwaW5ncy9nZXQiCi
    AgICAgICAgLSAiaW5kaWNlczpkYXRhL3JlYWQvc2Nyb2xsIgogICAgICAgIC0gImluZGlj
    ZXM6bW9uaXRvci9zZXR0aW5ncy9nZXQiCiAgICAgICAgLSAiaW5kaWNlczptb25pdG9yL3
    N0YXRzIgogIHRlbmFudF9wZXJtaXNzaW9uczoKICAgIC0gdGVuYW50X3BhdHRlcm5zOgog
    ICAgICAtICcqJwogICAgICBhbGxvd2VkX2FjdGlvbnM6CiAgICAgICAgLSAia2liYW5hX2
    FsbF9yZWFkIgoKIyBBbGxvd3MgaW5kZXgtbWlncmF0aW9uLnB5IHNjcmlwdCB0byBwZXJm
    b3JtIGluZGljZXMgbWlncmF0aW9uIGZyb20gRWxhc3RpY1NlYXJjaCB0byBPcGVuU2Vhcm
    NoCmluZGV4X21pZ3JhdGlvbjoKICByZXNlcnZlZDogdHJ1ZQogIGNsdXN0ZXJfcGVybWlz
    c2lvbnM6CiAgICAgICAgLSAiY3JlYXRlX2luZGV4IgogICAgICAgIC0gImluZGljZXM6ZG
    F0YS93cml0ZS9yZWluZGV4IgogICAgICAgIC0gImluZGljZXM6ZGF0YS93cml0ZS9pbmRl
    eCIKICAgICAgICAtICJjbHVzdGVyOm1vbml0b3IvdGFzay9nZXQiCiAgICAgICAgLSAiaW
    5kaWNlczpkYXRhL3dyaXRlL2J1bGsqIgogIGluZGV4X3Blcm1pc3Npb25zOgogICAgLSBp
    bmRleF9wYXR0ZXJuczoKICAgICAgICAtICcqJwogICAgICBhbGxvd2VkX2FjdGlvbnM6Ci
    AgICAgICAgLSAiY3JlYXRlX2luZGV4IgogICAgICAgIC0gImluZGljZXM6ZGF0YS93cml0
    ZS9yZWluZGV4IgogICAgICAgIC0gImluZGljZXM6ZGF0YS93cml0ZS9pbmRleCIKICAgIC
    AgICAtICJpbmRpY2VzOmRhdGEvd3JpdGUvYnVsayoiCgpib290c3RyYXA6CiAgcmVzZXJ2
    ZWQ6IHRydWUKICBjbHVzdGVyX3Blcm1pc3Npb25zOgogICAgLSAnY2x1c3Rlcl9tb25pdG
    9yJwogICAgLSAnY2x1c3Rlcl9tYW5hZ2VfaW5kZXhfdGVtcGxhdGVzJwogICAgLSAiY2x1
    c3RlcjphZG1pbi9vcGVuZGlzdHJvL2lzbS8qIgogICAgLSAiY2x1c3RlcjphZG1pbi9vcG
    Vuc2VhcmNoL25vdGlmaWNhdGlvbnMvKiIKICAgIC0gImNsdXN0ZXI6YWRtaW4vb3BlbmRp
    c3Ryby9hbGVydGluZy8qIgogICAgLSAiY2x1c3RlcjphZG1pbi9yZXJvdXRlIgogICAgLS
    Aia2liYW5hX2FsbF93cml0ZSIKICAgIC0gImtpYmFuYV9hbGxfcmVhZCIKICAgIC0gJ2lu
    ZGljZXM6ZGF0YS93cml0ZS9idWxrJwogICAgLSAiaW5kaWNlczpkYXRhL3JlYWQvbWdldC
    IKICAgIC0gJ2luZGljZXM6ZGF0YS93cml0ZS9pbmRleCcKICAgIC0gJ2luZGljZXM6ZGF0
    YS93cml0ZS91cGRhdGUnCiAgICAtICdpbmRpY2VzOmRhdGEvd3JpdGUvZGVsZXRlJwogIG
    luZGV4X3Blcm1pc3Npb25zOgogICAgLSBpbmRleF9wYXR0ZXJuczoKICAgICAgICAtICcq
    JwogICAgICBhbGxvd2VkX2FjdGlvbnM6CiAgICAgICAgLSAnaW5kaWNlczphZG1pbi9vcG
    Vuc2VhcmNoL2lzbS8qJwogICAgICAgIC0gJ2luZGljZXM6YWRtaW4vaW5kZXhfdGVtcGxh
    dGUvKicKICAgICAgICAtICdpbmRpY2VzOmFkbWluL3RlbXBsYXRlLyonCiAgICAgICAgLS
    AnaW5kaWNlczphZG1pbi9zZXR0aW5ncy91cGRhdGUnCiAgICAgICAgLSAnaW5kaWNlczph
    ZG1pbi9kZWxldGUnCiAgICAgICAgLSAnaW5kaWNlczphZG1pbi9yZXNpemUnCiAgICAgIC
    AgLSAnaW5kaWNlczpkYXRhL3dyaXRlL2luZGV4JwogICAgICAgIC0gJ2luZGljZXM6ZGF0
    YS93cml0ZS9idWxrKicKICAgICAgICAtICdpbmRpY2VzOmRhdGEvd3JpdGUvdXBkYXRlJw
    ogICAgICAgIC0gJ2luZGljZXM6ZGF0YS93cml0ZS9kZWxldGUnCiAgICAgICAgLSAncmVh
    ZCcKICAgICAgICAtICdpbmRpY2VzX21vbml0b3InCiAgICAtIGluZGV4X3BhdHRlcm5zOg
    ogICAgICAgIC0gJy5raWJhbmEqJwogICAgICBhbGxvd2VkX2FjdGlvbnM6CiAgICAgICAg
    LSAnY3J1ZCcKICAgICAgICAtICdjcmVhdGVfaW5kZXgnCg==
  roles_mapping.yml: |
    X21ldGE6CiAgdHlwZTogInJvbGVzbWFwcGluZyIKICBjb25maWdfdmVyc2lvbjogMgoKIy
    BEZWZpbmUgeW91ciByb2xlcyBtYXBwaW5nIGhlcmUKCm9wZW5kaXN0cm9fc2VjdXJpdHlf
    YW5vbnltb3VzX3JvbGU6CiAgYmFja2VuZF9yb2xlczoKICAtICJvcGVuZGlzdHJvX3NlY3
    VyaXR5X2Fub255bW91c19iYWNrZW5kcm9sZSIKCmFsZXJ0aW5nX3JlYWRfYWNjZXNzOgog
    IGJhY2tlbmRfcm9sZXM6CiAgLSAib3BlbmRpc3Ryb19zZWN1cml0eV9hbm9ueW1vdXNfYm
    Fja2VuZHJvbGUiCgphbm9tYWx5X3JlYWRfYWNjZXNzOgogIGJhY2tlbmRfcm9sZXM6CiAg
    LSAib3BlbmRpc3Ryb19zZWN1cml0eV9hbm9ueW1vdXNfYmFja2VuZHJvbGUiCgpub3RlYm
    9va3NfcmVhZF9hY2Nlc3M6CiAgYmFja2VuZF9yb2xlczoKICAtICJvcGVuZGlzdHJvX3Nl
    Y3VyaXR5X2Fub255bW91c19iYWNrZW5kcm9sZSIKCm9ic2VydmFiaWxpdHlfcmVhZF9hY2
    Nlc3M6CiAgYmFja2VuZF9yb2xlczoKICAtICJvcGVuZGlzdHJvX3NlY3VyaXR5X2Fub255
    bW91c19iYWNrZW5kcm9sZSIKCnJlcG9ydHNfaW5zdGFuY2VzX3JlYWRfYWNjZXNzOgogIG
    JhY2tlbmRfcm9sZXM6CiAgLSAib3BlbmRpc3Ryb19zZWN1cml0eV9hbm9ueW1vdXNfYmFj
    a2VuZHJvbGUiCgpyZXBvcnRzX3JlYWRfYWNjZXNzOgogIGJhY2tlbmRfcm9sZXM6CiAgLS
    Aib3BlbmRpc3Ryb19zZWN1cml0eV9hbm9ueW1vdXNfYmFja2VuZHJvbGUiCgphc3luY2hy
    b25vdXNfc2VhcmNoX3JlYWRfYWNjZXNzOgogIGJhY2tlbmRfcm9sZXM6CiAgLSAib3Blbm
    Rpc3Ryb19zZWN1cml0eV9hbm9ueW1vdXNfYmFja2VuZHJvbGUiCgptbF9yZWFkX2FjY2Vz
    czoKICBiYWNrZW5kX3JvbGVzOgogIC0gIm9wZW5kaXN0cm9fc2VjdXJpdHlfYW5vbnltb3
    VzX2JhY2tlbmRyb2xlIgoKbm90aWZpY2F0aW9uc19yZWFkX2FjY2VzczoKICBiYWNrZW5k
    X3JvbGVzOgogIC0gIm9wZW5kaXN0cm9fc2VjdXJpdHlfYW5vbnltb3VzX2JhY2tlbmRyb2
    xlIgoKc25hcHNob3RfbWFuYWdlbWVudF9yZWFkX2FjY2VzczoKICBiYWNrZW5kX3JvbGVz
    OgogIC0gIm9wZW5kaXN0cm9fc2VjdXJpdHlfYW5vbnltb3VzX2JhY2tlbmRyb2xlIgoKYW
    xsX2FjY2VzczoKICByZXNlcnZlZDogZmFsc2UKICBiYWNrZW5kX3JvbGVzOgogIC0gImFk
    bWluIgogIC0gIm9wZW5kaXN0cm9fc2VjdXJpdHlfYW5vbnltb3VzX2JhY2tlbmRyb2xlIg
    ogIGRlc2NyaXB0aW9uOiAiTWFwcyBhZG1pbiB0byBhbGxfYWNjZXNzIgoKbG9nc3Rhc2g6
    CiAgcmVzZXJ2ZWQ6IGZhbHNlCiAgYmFja2VuZF9yb2xlczoKICAtICJsb2dzdGFzaCIKCm
    xvZ3N0YXNoX3dyaXRlOgogIHJlc2VydmVkOiBmYWxzZQogIGJhY2tlbmRfcm9sZXM6CiAg
    LSAibG9nc3Rhc2giCgpraWJhbmFfdXNlcjoKICByZXNlcnZlZDogZmFsc2UKICBiYWNrZW
    5kX3JvbGVzOgogIC0gImtpYmFuYXVzZXIiCiAgZGVzY3JpcHRpb246ICJNYXBzIGtpYmFu
    YXVzZXIgdG8ga2liYW5hX3VzZXIiCgpraWJhbmFfc2VydmVyOgogIHJlc2VydmVkOiB0cn
    VlCiAgdXNlcnM6CiAgLSAia2liYW5hc2VydmVyIgoKaW5kZXhfbWlncmF0aW9uOgogIHJl
    c2VydmVkOiB0cnVlCiAgdXNlcnM6CiAgLSAiaW5kZXhtaWdyYXRpb24iCgpib290c3RyYX
    A6CiAgcmVzZXJ2ZWQ6IHRydWUKICB1c2VyczoKICAtICJib290c3RyYXAiCiAg
  tenants.yml: |
    X21ldGE6CiAgdHlwZTogInRlbmFudHMiCiAgY29uZmlnX3ZlcnNpb246IDIKCiMgRGVmaW
    5lIHlvdXIgdGVuYW50cyBoZXJl
  whitelist.yml: |
    Y29uZmlnOgogIGVuYWJsZWQ6IGZhbHNlCiAgcmVxdWVzdHM6CiAgICAvX2NsdXN0ZXIvc2
    V0dGluZ3M6CiAgICAgIC0gR0VUCiAgICAvX2NhdC9ub2RlczoKICAgICAgLSBHRVQ=
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: opensearch-securityconfig-97tg8dm8g4
  namespace: elastic-stack-logging
type: Opaque
---
apiVersion: v1
data:
  password: eGFSYWUxeGFlbmdhaG5pZTBpZURvbzdub2htYWlyb2o=
  username: Ym9vdHN0cmFw
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: os-bootstrap-creds
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  password: eG9vYm9peGFpVmU2amFoeXV3b29KNXVvZ2g3ZWVzb28=
  username: a2liYW5hc2VydmVy
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: os-dashboard-creds
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  password: bWk3ZWl0ZTJvb25vbzhFa3UxdWZvbzRlZ2gxamFpajI=
  username: bG9nc3Rhc2g=
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: os-logstash-creds
  namespace: elastic-stack-logging
---
apiVersion: v1
data:
  HEALTHCHECK_USER_NAME: aGVhbHRoY2hlY2t1c2Vy
  HEALTHCHECK_USER_PASSWORD: aGVhbHRoY2hlY2twYXNzd29yZA==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  name: healthcheck-user
  namespace: health
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: newrelic-license-key
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingaccess-license
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  OLD_PA_ADMIN_USER_PASSWORD: MkFjY2Vzcw==
  PA_ADMIN_USER_PASSWORD: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingaccess-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingaccess-was-license
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  OLD_PA_ADMIN_USER_PASSWORD: MkFjY2Vzcw==
  P14C_CLIENT_ID: Mzc0ZGIwOWQtNjAyZS00MzZjLWEwMzYtMTUzMzM3ZTUyZWMw
  P14C_CLIENT_SECRET: d0NRRWVLfngzLWM3M0s2cmp5UnVrNTUwUEpWOGx3VlpEMFlPYVJlS2lYRHVtZGxuTkExc2dxLVRFekIuRVpSfg==
  P14C_ISSUER: aHR0cHM6Ly9hdXRoLnBpbmdvbmUuY29tL2MzZTM3MzU3LTUwNjItNDFiYy05OTcyLWE3ZWE5ZDE0YTVhMi9hcw==
  PA_ADMIN_USER_PASSWORD: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingaccess-was-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral-license
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  OLD_PC_ADMIN_USER_PASSWORD: MkZlZGVyYXRl
  PC_ADMIN_USER_PASSWORD: MkZlZGVyYXRl
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  ACME_CERT_KEYSTORE_PASSWORD: MkZlZGVyYXRlTTByZQ==
  DA_OAUTH_TOKEN_VALIDATOR_SECRET: MkZlZGVyYXRlTTByZQ==
  PC_ADMIN_USER_PASSWORD: MkZlZGVyYXRl
  PF_ADMIN_USER_PASSWORD: MkZlZGVyYXRlTTByZQ==
  PF_LDAP_PASSWORD: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingcommon-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  EXT_PD_ADMIN_BIND_DN_PASSWORD: MkZlZGVyYXRlTTByZQ==
  EXT_PD_SYNC_BIND_DN_PASSWORD: MkZlZGVyYXRlTTByZQ==
  root-user-password: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingdatasync
  name: pingdatasync-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  DMANAGER_PASSWORD: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-dmanager-password
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-license
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
data:
  P14C_CLIENT_ID: ODkwNzM2NTQtNGVkMy00YTViLWI4OWMtZmY2YjVlMWI3ZDFi
  P14C_CLIENT_SECRET: UXA4aTAudHg4U3dVSWphdnlYWn5KYTZLQlA5SzN+azljTUYuUWF4UTZYclBvdHpmOU5DbFk2bHRLLjBJUU42MA==
  P14C_ENVIRONMENT_ID: YzNlMzczNTctNTA2Mi00MWJjLTk5NzItYTdlYTlkMTRhNWEy
  admin-user-password: MkZlZGVyYXRlTTByZQ==
  ads.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN2akNDQWFZQ0NRQ3NMaEptdEYwQ3VEQU5CZ2txaGtpRzl3MEJBUXNGQURBZ01SNHdIQVlEVlFRRERCVnMKYjJOaGJHaHZjM1F1Ykc5allXeGtiMjFoYVc0d0lCY05NakF3TmpNd01UZ3hOekkwV2hnUE1qRXlNREEyTURZeApPREUzTWpSYU1DQXhIakFjQmdOVkJBTU1GV3h2WTJGc2FHOXpkQzVzYjJOaGJHUnZiV0ZwYmpDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUtmalRHZVgweHhubG5LbXBodFB1Z21jRjNXRHREZmsKOUgyWGh4aXpsTzliNzhPWlk3ZGRxZXVpRktBU3ZZZEtzSE80cUVLMXhtMitvTHZaa2RIandFYlc5dVJYQ2Zucgo3cUpRaHpiemZpemtFOXE2MVBHazJTNGNlcytyUlBDZVlFSEUrd1J5bUdnMnNabXgrdVNLb1RvQk5lMnNnQ2lWCkw0YmpBZ3NKdkdxUzI2T0ZleTF6WTVRYXRmUkI0QlFKSis1eFJ3Z3BCSXdJOExRN3ozS0pkQlVyTll3TDlUemYKSVc2UjcxMHlORVhWWkxqa0pwemJTeGtub3kxQlc3SFJwYmxxNFZaWEFEWDNSYlpuV2xKRWhubkRBVGxPcWtregp5cHBUSnhvaEtkK0pZYXRFRUxWNC9DajkyR3UwcEJtSXorazkrWnJob3J1RTBkSHM2T0tlYStVQ0F3RUFBVEFOCkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQVNVcUU1RUw1ZEttNDJWcmFEclpRM0prNXlTUUNtZE1HNGFoYmFndVUKNDk1aEV5NDlhNVhDL3NoS0hCUnJaVy95RTJiS1dTOTBKdzA2aVpUWkk0a3JXZnk5NUtxVlJhWkNYUHc4K0lWdwpLMjJZSTJ1MWVUNlpWYkpuL1dJL2VuMDBwNk1mRjhFTmF3STZTc081dzlVUnRhSFpRK2lhc1BSUERqeVljUC93CnNpbWlBeTB2a2hZSUM5Qmw1K0QxV3FwWm1PRnMvdW5EZC8xUFRxSXF5cHZINUcyYjBvUmdLTTUzQlBIZFBKajAKcEpObFBTblJFNThVNkM5RG5BcSt2cFlJZFE1UWdtQWVaMVA0T2E0cGdHY0NHNlBVYVRoalUxeFhFL01CQWFFRgpwV0pYT2pqWHUwdVpFbXE0bHFJakZEcmZDSkVISkliRmtzMUJjZVVQK3BkU2F3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  ads.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRQ240MHhubDlNY1o1WnkKcHFZYlQ3b0puQmQxZzdRMzVQUjlsNGNZczVUdlcrL0RtV08zWGFucm9oU2dFcjJIU3JCenVLaEN0Y1p0dnFDNwoyWkhSNDhCRzF2YmtWd241Nis2aVVJYzI4MzRzNUJQYXV0VHhwTmt1SEhyUHEwVHdubUJCeFBzRWNwaG9OckdaCnNmcmtpcUU2QVRYdHJJQW9sUytHNHdJTENieHFrdHVqaFhzdGMyT1VHclgwUWVBVUNTZnVjVWNJS1FTTUNQQzAKTzg5eWlYUVZLeldNQy9VODN5RnVrZTlkTWpSRjFXUzQ1Q2FjMjBzWko2TXRRVnV4MGFXNWF1RldWd0ExOTBXMgpaMXBTUklaNXd3RTVUcXBKTThxYVV5Y2FJU25maVdHclJCQzFlUHdvL2RocnRLUVppTS9wUGZtYTRhSzdoTkhSCjdPamlubXZsQWdNQkFBRUNnZ0VCQUp4NXMwcVNMUWM2WFBTNjhmSmVtb3crV1hjRHE4SzB1Rk1lR2FJaUxsdngKR2tUNkFBQjFZZHZta3NhbThOTGFBQis3S2NnVFY4QU5mZzNYT0p1aFpDSWlWTFo1a1NqSWh2L3RnampyTk54dQpMenNjQzBDMVhsNGwyU2tZL2dZdDlwVVdITWNHYjVvaDcrSEtDb2RiMWUwVUY4bFBqNXREZ0twOWhmZjN1UTZ5CkUxRWl0WHJ6Yk9qNzU4QllXRXc1cXdPS2orWGZIS3FJcDc2dGp6NEM3dlJPUDF5OFBaN1BuYUV2V3VSVXNIdkUKVTB1aXJVc3doYjZJSE10UUxGM21EUEo5Y2lEWmI3NWFjbmtEZTRHc1ZQSHJ5bDNKMGpnZnpNS2dtT1RKZWVFTAprcEsvUHI1eVNMTEZnNjloYVlDU0hLVEt6ME9OUjVXc3dmdjl2WnBjQXNFQ2dZRUEwNEZ3cjcwMitVK3R5d1NNCmlZM0JvNFZEeXVLVXlsQThxUE1COGlCK0cxaXdJenBWSk1hakNZR2dLcUhMZUpGWjM0RGNCUkNiVnZ0RlhpU0UKSW5NQ0taYStlOTh1UXVjcGJzV2tBM3oxT0hMN1dscFp3OTMwZlBkVkNVYW1KZEhYUTJjQ01udDFMRmwyWmVQTwpyVG1rMmdXMHMzYTNHMWRvNjFJM3NZamNHc2tDZ1lFQXl6VFhKa3RUVXZ6L1hqVDhrMDBoUFREWjZzR1RUOEt2CjBERzU0c1ZNYWRTb2hXYi9oUkZ6WHo4Q21YMWQyRDZSS3NaK3pVNjcydCtqY0pDdmd2L3phRWpBZ3M5cXVMTFIKd2s1S29qbmZGT2FobEN3TDladVA0c01kcHZwU2JUS0RPTGdzMXQ1TkcreTlkZEFiSzdMNDFkMTRSbEw4bHZ4OApzdnk4eitvR3VqMENnWUJaU1NGYTd0T1FONVMwU1gxU2JDYzhjbnVGNEZUVGV6L0FTcVdkb3gzWlNYMUJ3ZFJECnJCOFRXa2RVOSt3L1A0empEekRTYW9wSkU5WGF3aXVOcDJOWVR5eW1lamE3UTM1NEpyTHdUZ1h2Q0lzWFAyRDUKa0c4dmVmSEo4cXNjK0JLWmY1aXIydlpCL0pwQXRRU0FsLzhCa3JzUHI2UG94T09qdzVlRE9MVkNFUUtCZ1FDegptNExISURFSDJ3TEQrOFY3Vk9NYU9NR0VFNURuSU1kUkY0S2JnNVBrdnNndEVUcXNIUjZDZ3lrRERhSVM3a3BWCktwa05VcGdML3p0dzFSR3NraHBNaEhGVHJZMUFyeDFqeHR1RXcrMy9oVkl2cXpidTRZNnQrWk9OOFJkRjJTM08KeGtzcnA5VXo1MjRXWWRpQ0tYQnpaNHRWYlNoQk0rM3NMaU9kQ2Ria2FRS0JnUUN4b3ZCYXpjR2VEMXFsRjREUgo0eXZpYUpCeUNPM3ludEQwMXAvUGRCTDJNWHA2bjAzWVZEa1BHUytqamZtamt3QVV0ek9RU2pZUGViWWtlb21yClZMZ2N1YkN1VGZsNmNQbnRxUHZxM1pVT2ZqUlB1REI4MjZ0Rm82RDZEUHYwQ043WnE4Y3ZpK3h0RExqWjRDbG8KdFd3a3JWZ3JTeEljd1dyaTBMcXNXTExmV2c9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
  encryption-password: MkZlZGVyYXRlTTByZQ==
  encryption-settings.pin: MkZlZGVyYXRlTTByZQ==
  old-encryption-passwords: MkZlZGVyYXRlTTByZQ==
  root-user-password: MkZlZGVyYXRlTTByZQ==
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-truststore-certs
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingfederate-license
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: pingfederate-passwords
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    sealedsecrets.bitnami.com/managed: "true"
  labels:
    app: ping-cloud
  name: ssh-id-key-secret
  namespace: ping-cloud
type: Opaque
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager
  namespace: cert-manager
spec:
  ports:
  - name: tcp-prometheus-servicemonitor
    port: 9402
    protocol: TCP
    targetPort: 9402
  selector:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
  namespace: cert-manager
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: https
  selector:
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/path: /metrics
    prometheus.io/port: "9198"
    prometheus.io/scheme: http
    prometheus.io/scrape: "true"
  labels:
    app: logstash-elastic
  name: logstash-elastic
  namespace: elastic-stack-logging
spec:
  ports:
  - name: rest
    port: 9600
  - name: http-main-input
    port: 8080
  - name: metrics
    port: 9198
  - name: http-s3-input
    port: 8081
  - name: http-cw-input
    port: 8082
  - name: http-nr-input
    port: 8083
  - name: http-customer-input
    port: 8084
  selector:
    app: logstash-elastic
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: opensearch-dev.ping-demo.com
    prometheus.io/path: /_prometheus/metrics
    prometheus.io/port: "9200"
    prometheus.io/scheme: https
    prometheus.io/scrape: "true"
  labels:
    app.kubernetes.io/name: opensearch
  name: opensearch-cluster-headless
  namespace: elastic-stack-logging
spec:
  clusterIP: None
  ports:
  - name: http
    port: 9200
  - name: transport
    port: 9300
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/name: opensearch
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/instance: opensearch-cluster-hot
    app.kubernetes.io/name: opensearch
  name: opensearch-cluster-master
  namespace: elastic-stack-logging
spec:
  ports:
  - name: http
    port: 9200
    protocol: TCP
  - name: transport
    port: 9300
    protocol: TCP
  selector:
    app.kubernetes.io/instance: opensearch-cluster-hot
    app.kubernetes.io/name: opensearch
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/name: opensearch-dashboards
  name: opensearch-dashboards
  namespace: elastic-stack-logging
spec:
  ports:
  - name: http
    port: 5601
    protocol: TCP
    targetPort: 5601
  selector:
    app.kubernetes.io/name: opensearch-dashboards
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    role: healthcheck-httpbin
  name: healthcheck-httpbin
  namespace: health
spec:
  externalName: healthcheck-httpbin.health.svc.cluster.local
  ports:
  - port: 80
    targetPort: 80
  selector:
    role: healthcheck-httpbin
---
apiVersion: v1
kind: Service
metadata:
  labels:
    role: healthcheck-httpbin-pa
  name: healthcheck-httpbin-pa
  namespace: health
spec:
  externalName: healthcheck-httpbin-pa.health.svc.cluster.local
  ports:
  - port: 80
    targetPort: 80
  selector:
    role: healthcheck-httpbin-pa
---
apiVersion: v1
kind: Service
metadata:
  labels:
    role: healthcheck-httpbin-pa-was
  name: healthcheck-httpbin-pa-was
  namespace: health
spec:
  externalName: healthcheck-httpbin-pa-was.health.svc.cluster.local
  ports:
  - port: 80
    targetPort: 80
  selector:
    role: healthcheck-httpbin-pa-was
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: ingress-nginx
  namespace: ingress-nginx-private
spec:
  externalTrafficPolicy: Local
  ports:
  - appProtocol: http
    name: http
    port: 80
    protocol: TCP
    targetPort: 8080
  - appProtocol: https
    name: https
    port: 443
    protocol: TCP
    targetPort: 8443
  selector:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: ingress-nginx
  namespace: ingress-nginx-public
spec:
  externalTrafficPolicy: Local
  ports:
  - appProtocol: http
    name: http
    port: 80
    protocol: TCP
    targetPort: 8080
  - appProtocol: https
    name: https
    port: 443
    protocol: TCP
    targetPort: 8443
  - name: tcp
    port: 2083
    protocol: TCP
    targetPort: 2083
  selector:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
  name: kube-state-metrics
  namespace: kube-system
spec:
  ports:
  - name: http-metrics
    port: 8080
    targetPort: http-metrics
  - name: telemetry
    port: 8081
    targetPort: telemetry
  selector:
    app.kubernetes.io/name: kube-state-metrics
---
apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: https
  selector:
    k8s-app: metrics-server
---
apiVersion: v1
kind: Service
metadata:
  labels:
    name: sealed-secrets-controller
  name: sealed-secrets-controller
  namespace: kube-system
spec:
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    name: sealed-secrets-controller
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/scrape: "true"
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-4.23.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-kube-state-metrics
  namespace: newrelic
spec:
  ports:
  - name: http
    port: 8080
    protocol: TCP
    targetPort: 8080
  selector:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: kube-state-metrics
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection
  namespace: newrelic
spec:
  ports:
  - port: 443
    targetPort: 8443
  selector:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
  name: pingaccess
  namespace: ping-cloud
spec:
  ports:
  - name: pingaccess-engine
    port: 443
    targetPort: 3000
  - name: pingaccess-agent
    port: 3030
  - name: metrics
    port: 8080
  - name: pa-heartbeat
    port: 8079
  selector:
    app: ping-cloud
    role: pingaccess-engine
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingaccess-cluster-dev.ping-demo.com
  labels:
    app: ping-cloud
  name: pingaccess-admin
  namespace: ping-cloud
spec:
  clusterIP: None
  ports:
  - name: pingaccess-admin
    port: 9000
  - name: pingaccess-cluster
    port: 9090
  selector:
    app: ping-cloud
    role: pingaccess-admin
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was
  namespace: ping-cloud
spec:
  ports:
  - name: pingaccess-was-engine
    port: 443
    targetPort: 3000
  selector:
    app: ping-cloud
    role: pingaccess-was-engine
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingaccess-was-cluster-dev.ping-demo.com
  labels:
    app: ping-cloud
  name: pingaccess-was-admin
  namespace: ping-cloud
spec:
  clusterIP: None
  ports:
  - name: pingaccess-was-admin
    port: 9000
  - name: pingaccess-was-config-query
    port: 9090
  selector:
    app: ping-cloud
    role: pingaccess-was-admin
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral
  namespace: ping-cloud
spec:
  ports:
  - name: pingcentral
    port: 9022
    targetPort: https
  selector:
    app: ping-cloud
    role: pingcentral
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingdatasync-dev.ping-demo.com
    service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
  labels:
    app: ping-cloud
    role: pingdatasync
  name: pingdatasync-admin
  namespace: ping-cloud
spec:
  externalTrafficPolicy: Local
  ports:
  - name: ldap
    port: 1389
  - name: ldaps
    port: 1636
  - name: https
    port: 1443
  selector:
    app: ping-cloud
    class: pingdatasync-server
    role: pingdatasync
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
  name: pingdelegator
  namespace: ping-cloud
spec:
  ports:
  - name: pingdelegator
    port: 1443
    targetPort: https
  selector:
    app: ping-cloud
    role: pingdelegator
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingdirectory-cluster-dev.ping-demo.com
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory
  namespace: ping-cloud
spec:
  clusterIP: None
  ports:
  - name: ldap
    port: 1389
    targetPort: ldap
  - name: ldaps
    port: 1636
    targetPort: ldaps
  - name: repl
    port: 8989
    targetPort: repl
  - name: jmx-metrics
    port: 8080
  - name: metrics
    port: 9102
  selector:
    app: ping-cloud
    class: pingdirectory-server
    role: pingdirectory
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingdirectory-admin-dev.ping-demo.com
    service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-admin
  namespace: ping-cloud
spec:
  externalTrafficPolicy: Local
  ports:
  - name: ldaps
    port: 636
    targetPort: ldaps
  selector:
    app: ping-cloud
    class: pingdirectory-server
    role: pingdirectory
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-http
  namespace: ping-cloud
spec:
  ports:
  - name: https
    port: 1443
    targetPort: https
  selector:
    app: ping-cloud
    class: pingdirectory-server
    role: pingdirectory
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
  name: pingfederate
  namespace: ping-cloud
spec:
  ports:
  - name: radsec
    port: 2083
    targetPort: 2083
  - name: pingfederate-runtime
    port: 9031
  - name: metrics
    port: 8080
  - name: pf-heartbeat
    port: 8079
  - name: pf-radius-listener
    port: 1812
  - name: pf-radius-accounting
    port: 1813
  selector:
    app: ping-cloud
    role: pingfederate-engine
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: ping-cloud
    role: pingfederate-admin
  name: pingfederate-admin
  namespace: ping-cloud
spec:
  ports:
  - name: pf-admin
    port: 9999
    targetPort: pf-admin
  selector:
    app: ping-cloud
    role: pingfederate-admin
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingfederate-cluster-dev.ping-demo.com
  labels:
    app: ping-cloud
  name: pingfederate-cluster
  namespace: ping-cloud
spec:
  clusterIP: None
  ports:
  - name: pingfederate-cluster-bind
    port: 7600
    protocol: TCP
    targetPort: 7600
  - name: pingfederate-cluster-health
    port: 7700
    protocol: TCP
    targetPort: 7700
  publishNotReadyAddresses: true
  selector:
    app: ping-cloud
    cluster: pingfederate-cluster
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: pingfederate-radius-dev.ping-demo.com
    service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
  labels:
    app: ping-cloud
  name: udp-loadbalancer
  namespace: ping-cloud
spec:
  externalTrafficPolicy: Local
  ports:
  - name: radius-listener
    port: 1812
    protocol: UDP
    targetPort: 1812
  - name: radius-accounting
    port: 1813
    protocol: UDP
    targetPort: 1813
  selector:
    app: ping-cloud
    role: pingfederate-engine
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/port: "9093"
    prometheus.io/scrape: "true"
  name: alertmanager
  namespace: prometheus
spec:
  clusterIP: None
  ports:
  - name: alertmanager
    port: 9093
  selector:
    app: alertmanager
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: grafana
  name: grafana
  namespace: prometheus
spec:
  clusterIP: None
  ports:
  - name: grafana
    port: 3000
  selector:
    app: grafana
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: grafana-operator-controller-manager
  name: grafana-operator-metrics-service
  namespace: prometheus
spec:
  ports:
  - name: metrics
    port: 9090
    protocol: TCP
    targetPort: metrics
  selector:
    control-plane: grafana-operator-controller-manager
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    external-dns.alpha.kubernetes.io/hostname: prometheus-central-dev.ping-demo.com
  name: prometheus
  namespace: prometheus
spec:
  clusterIP: None
  ports:
  - name: prometheus
    port: 9090
  selector:
    app: prometheus
---
apiVersion: v1
kind: Service
metadata:
  name: prometheus-job-exporter
  namespace: prometheus
spec:
  clusterIP: None
  ports:
  - name: metrics
    port: 8000
  selector:
    app: prometheus-job-exporter
---
apiVersion: scheduling.k8s.io/v1
description: Flag for apps that remain in pending state
globalDefault: false
kind: PriorityClass
metadata:
  labels:
    app: ping-cloud
  name: high-priority-apps-to-avoid-pending-state
preemptionPolicy: PreemptLowerPriority
value: 1
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: controller-manager
  namespace: argo-events
spec:
  replicas: 1
  selector:
    matchLabels:
      app: controller-manager
  template:
    metadata:
      labels:
        app: controller-manager
    spec:
      containers:
      - args:
        - controller
        env:
        - name: ARGO_EVENTS_IMAGE
          value: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/argo/argo-events:v1.7.2
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/argo/argo-events:v1.7.2
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 3
          periodSeconds: 3
        name: controller-manager
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 3
          periodSeconds: 3
        volumeMounts:
        - mountPath: /etc/argo-events
          name: controller-config-volume
      securityContext:
        runAsNonRoot: true
        runAsUser: 9731
      serviceAccountName: argo-events-sa
      volumes:
      - configMap:
          name: argo-events-controller-config
        name: controller-config-volume
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: cert-manager
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/version: v1.12.1
  name: cert-manager
  namespace: cert-manager
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: controller
      app.kubernetes.io/name: cert-manager
  template:
    metadata:
      annotations:
        prometheus.io/path: /metrics
        prometheus.io/port: "9402"
        prometheus.io/scrape: "true"
      labels:
        app: cert-manager
        app.kubernetes.io/component: controller
        app.kubernetes.io/name: cert-manager
        app.kubernetes.io/version: v1.12.1
    spec:
      containers:
      - args:
        - --v=2
        - --cluster-resource-namespace=$(POD_NAMESPACE)
        - --leader-election-namespace=kube-system
        - --acme-http01-solver-image=public.ecr.aws/r2h3l6e4/pingcloud-clustertools/jetstack/cert-manager-acmesolver:v1.12.1
        - --max-concurrent-challenges=60
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/jetstack/cert-manager-controller:v1.12.1
        imagePullPolicy: IfNotPresent
        name: cert-manager-controller
        ports:
        - containerPort: 9402
          name: http-metrics
          protocol: TCP
        - containerPort: 9403
          name: http-healthz
          protocol: TCP
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 80Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
      nodeSelector:
        kubernetes.io/os: linux
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: cert-manager
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: cainjector
    app.kubernetes.io/component: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-cainjector
  namespace: cert-manager
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: cainjector
      app.kubernetes.io/name: cainjector
  template:
    metadata:
      labels:
        app: cainjector
        app.kubernetes.io/component: cainjector
        app.kubernetes.io/name: cainjector
        app.kubernetes.io/version: v1.12.1
    spec:
      containers:
      - args:
        - --v=2
        - --leader-election-namespace=kube-system
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/jetstack/cert-manager-cainjector:v1.12.1
        imagePullPolicy: IfNotPresent
        name: cert-manager-cainjector
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
      nodeSelector:
        kubernetes.io/os: linux
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: cert-manager-cainjector
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
  namespace: cert-manager
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: webhook
      app.kubernetes.io/name: webhook
  template:
    metadata:
      labels:
        app: webhook
        app.kubernetes.io/component: webhook
        app.kubernetes.io/name: webhook
        app.kubernetes.io/version: v1.12.1
    spec:
      containers:
      - args:
        - --v=2
        - --secure-port=10250
        - --dynamic-serving-ca-secret-namespace=$(POD_NAMESPACE)
        - --dynamic-serving-ca-secret-name=cert-manager-webhook-ca
        - --dynamic-serving-dns-names=cert-manager-webhook
        - --dynamic-serving-dns-names=cert-manager-webhook.$(POD_NAMESPACE)
        - --dynamic-serving-dns-names=cert-manager-webhook.$(POD_NAMESPACE).svc
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/jetstack/cert-manager-webhook:v1.12.1
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /livez
            port: 6080
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        name: cert-manager-webhook
        ports:
        - containerPort: 10250
          name: https
          protocol: TCP
        - containerPort: 6080
          name: healthcheck
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: 6080
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 5
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
      nodeSelector:
        kubernetes.io/os: linux
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: cert-manager-webhook
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    application: kube-downscaler
    version: v24.0.0
  name: kube-downscaler
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      application: kube-downscaler
  template:
    metadata:
      labels:
        application: kube-downscaler
        version: v24.0.0
    spec:
      containers:
      - args:
        - --matching-labels=.*
        - --include-resources=deployments,statefulsets,horizontalpodautoscalers,cronjobs
        - --exclude-namespaces=karpenter,kube-system
        - --interval=300
        envFrom:
        - configMapRef:
            name: kube-downscaler-dk299b2ff7
            optional: true
        image: public.ecr.aws/r2h3l6e4/kube-downscaler:24.0.0
        name: downscaler
        resources:
          limits:
            cpu: 100m
            memory: 100Mi
          requests:
            cpu: 5m
            memory: 100Mi
        securityContext:
          readOnlyRootFilesystem: true
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: kube-downscaler
      tolerations:
      - effect: NoSchedule
        key: CriticalAddonsOnly
        operator: Equal
        value: core
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: opensearch-dashboards
  name: opensearch-dashboards
  namespace: elastic-stack-logging
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: opensearch-dashboards
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: opensearch-dashboards
    spec:
      containers:
      - env:
        - name: OPENSEARCH_HOSTS
          value: https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200
        - name: SERVER_HOST
          value: 0.0.0.0
        - name: OPENSEARCH_USERNAME
          valueFrom:
            secretKeyRef:
              key: username
              name: os-dashboard-creds
        - name: OPENSEARCH_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: os-dashboard-creds
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/opensearchproject/opensearch-dashboards:2.8.0
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 10
          initialDelaySeconds: 10
          periodSeconds: 20
          successThreshold: 1
          tcpSocket:
            port: 5601
          timeoutSeconds: 5
        name: dashboards
        ports:
        - containerPort: 5601
          name: http
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          initialDelaySeconds: 10
          periodSeconds: 20
          successThreshold: 1
          tcpSocket:
            port: 5601
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 500m
            memory: 1024M
          requests:
            cpu: 100m
            memory: 512M
        securityContext:
          capabilities:
            drop:
            - ALL
          runAsNonRoot: true
          runAsUser: 1000
        startupProbe:
          failureThreshold: 20
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 5601
          timeoutSeconds: 5
        volumeMounts:
        - mountPath: /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
          name: config
          subPath: opensearch_dashboards.yml
        - mountPath: /usr/share/opensearch-dashboards/config/certs
          name: os-certs
      securityContext: {}
      serviceAccountName: opensearch-dashboards
      volumes:
      - configMap:
          name: opensearch-dashboards-config
        name: config
      - name: os-certs
        secret:
          secretName: opensearch-cert
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: external-dns
  namespace: external-dns
spec:
  selector:
    matchLabels:
      app: external-dns
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: external-dns
    spec:
      containers:
      - args:
        - --source=service
        - --source=ingress
        - --provider=aws
        - --policy=upsert-only
        - --aws-zone-type=public
        - --registry=txt
        - --publish-internal-services
        - --log-level=error
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/external-dns/external-dns:v0.13.1
        name: external-dns
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
      securityContext:
        fsGroup: 65534
      serviceAccountName: external-dns
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-cluster-health
  name: healthcheck-cluster-health
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-cluster-health
  template:
    metadata:
      labels:
        role: healthcheck-cluster-health
      name: healthcheck-cluster-health
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - eval CLUSTER_HEALTHCHECK_SCHEDULE="${CLUSTER_HEALTHCHECK_SCHEDULE}" && ./robot_wrapper.py
          --path tests/cluster-health --include clusterHealth --output clusterHealth.xml
          --cron "${CLUSTER_HEALTHCHECK_SCHEDULE}"
        envFrom:
        - configMapRef:
            name: cluster-health-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/robot-framework/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: healthcheck-cluster-health
        resources:
          limits:
            cpu: 400m
            memory: 600Mi
          requests:
            cpu: 200m
            memory: 400Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: cluster-healthcheck-serviceaccount
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-httpbin
  name: healthcheck-httpbin
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-httpbin
  template:
    metadata:
      labels:
        role: healthcheck-httpbin
      name: healthcheck-httpbin
    spec:
      containers:
      - image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/kennethreitz/httpbin
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        name: healthcheck-httpbin
        ports:
        - containerPort: 80
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        resources:
          limits:
            cpu: 200m
            memory: 60Mi
          requests:
            cpu: 100m
            memory: 10Mi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-httpbin-pa
  name: healthcheck-httpbin-pa
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-httpbin-pa
  template:
    metadata:
      labels:
        role: healthcheck-httpbin-pa
      name: healthcheck-httpbin-pa
    spec:
      containers:
      - image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/kennethreitz/httpbin
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        name: healthcheck-httpbin-pa
        ports:
        - containerPort: 80
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        resources:
          limits:
            cpu: 200m
            memory: 60Mi
          requests:
            cpu: 100m
            memory: 10Mi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-httpbin-pa-was
  name: healthcheck-httpbin-pa-was
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-httpbin-pa-was
  template:
    metadata:
      labels:
        role: healthcheck-httpbin-pa-was
      name: healthcheck-httpbin-pa-was
    spec:
      containers:
      - image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/kennethreitz/httpbin
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        name: healthcheck-httpbin-pa-was
        ports:
        - containerPort: 80
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 3
        resources:
          limits:
            cpu: 200m
            memory: 60Mi
          requests:
            cpu: 100m
            memory: 10Mi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-pingaccess
  name: healthcheck-pingaccess
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-pingaccess
  template:
    metadata:
      labels:
        role: healthcheck-pingaccess
      name: healthcheck-pingaccess
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - eval PINGACCESS_HEALTHCHECK_SCHEDULE="${PINGACCESS_HEALTHCHECK_SCHEDULE}"
          && ./robot_wrapper.py --path tests/pingaccess --include pingAccess --output
          pingAccess.xml --cron "${PINGACCESS_HEALTHCHECK_SCHEDULE}"
        envFrom:
        - configMapRef:
            name: cluster-health-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/robot-framework/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-health
        resources:
          limits:
            cpu: 400m
            memory: 600Mi
          requests:
            cpu: 200m
            memory: 400Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: cluster-healthcheck-serviceaccount
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-pingaccess-was
  name: healthcheck-pingaccess-was
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-pingaccess-was
  template:
    metadata:
      labels:
        role: healthcheck-pingaccess-was
      name: healthcheck-pingaccess-was
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - eval PINGACCESS_WAS_HEALTHCHECK_SCHEDULE="${PINGACCESS_WAS_HEALTHCHECK_SCHEDULE}"
          ./robot_wrapper.py --path tests/pingaccess-was --include pingAccessWas --output
          pingAccessWas.xml --cron "${PINGACCESS_WAS_HEALTHCHECK_SCHEDULE}"
        envFrom:
        - configMapRef:
            name: cluster-health-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/robot-framework/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-was-health
        resources:
          limits:
            cpu: 400m
            memory: 600Mi
          requests:
            cpu: 200m
            memory: 400Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: cluster-healthcheck-serviceaccount
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-pingdirectory
  name: healthcheck-pingdirectory
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-pingdirectory
  template:
    metadata:
      labels:
        role: healthcheck-pingdirectory
      name: healthcheck-pingdirectory
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - eval PINGDIRECTORY_HEALTHCHECK_SCHEDULE="${PINGDIRECTORY_HEALTHCHECK_SCHEDULE}"
          ./robot_wrapper.py --path tests/pingdirectory --include pingDirectory --output
          pingDirectory.xml --cron "${PINGDIRECTORY_HEALTHCHECK_SCHEDULE}"
        envFrom:
        - configMapRef:
            name: cluster-health-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/robot-framework/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingdirectory-health
        resources:
          limits:
            cpu: 400m
            memory: 600Mi
          requests:
            cpu: 200m
            memory: 400Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: cluster-healthcheck-serviceaccount
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    role: healthcheck-pingfederate
  name: healthcheck-pingfederate
  namespace: health
spec:
  selector:
    matchLabels:
      role: healthcheck-pingfederate
  template:
    metadata:
      labels:
        role: healthcheck-pingfederate
      name: healthcheck-pingfederate
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - eval PINGFEDERATE_HEALTHCHECK_SCHEDULE="${PINGFEDERATE_HEALTHCHECK_SCHEDULE}"
          ./robot_wrapper.py --path tests/pingfederate --include pingFederate --output
          pingFederate.xml --cron "${PINGFEDERATE_HEALTHCHECK_SCHEDULE}"
        envFrom:
        - configMapRef:
            name: cluster-health-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/robot-framework/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingfederate-health
        resources:
          limits:
            cpu: 400m
            memory: 600Mi
          requests:
            cpu: 200m
            memory: 400Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccountName: cluster-healthcheck-serviceaccount
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-controller
  namespace: ingress-nginx-private
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: controller
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/part-of: ingress-nginx
      app.kubernetes.io/role: ingress-nginx-private
      app.kubernetes.io/version: 1.8.0
  template:
    metadata:
      annotations:
        prometheus.io/port: "10254"
        prometheus.io/scrape: "true"
      labels:
        app.kubernetes.io/component: controller
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/part-of: ingress-nginx
        app.kubernetes.io/role: ingress-nginx-private
        app.kubernetes.io/version: 1.8.0
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - ingress-nginx
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - args:
        - /nginx-ingress-controller
        - --configmap=$(POD_NAMESPACE)/nginx-configuration
        - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services
        - --udp-services-configmap=$(POD_NAMESPACE)/udp-services
        - --publish-service=$(POD_NAMESPACE)/ingress-nginx
        - --annotations-prefix=nginx.ingress.kubernetes.io
        - --http-port=8080
        - --https-port=8443
        - --ingress-class=nginx-private
        - --controller-class=k8s.io/ingress-nginx-private
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: LD_PRELOAD
          value: /usr/local/lib/libmimalloc.so
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/sigsci-nginx-ingress-controller/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /wait-shutdown
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: 10254
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        name: nginx-ingress-controller
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        - containerPort: 8443
          name: https
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: 10254
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 2
            memory: 2Gi
          requests:
            cpu: 2
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            add:
            - NET_BIND_SERVICE
            drop:
            - ALL
          readOnlyRootFilesystem: false
          runAsGroup: 101
          runAsNonRoot: true
          runAsUser: 101
      securityContext:
        runAsNonRoot: true
      serviceAccountName: nginx-ingress-serviceaccount
      terminationGracePeriodSeconds: 300
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    nginx.ingress.kubernetes.io/enable-modsecurity: "true"
    nginx.ingress.kubernetes.io/enable-owasp-core-rules: "true"
    prometheus.io/port: "10254"
    prometheus.io/scrape: "true"
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-controller
  namespace: ingress-nginx-public
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: controller
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/part-of: ingress-nginx
      app.kubernetes.io/role: ingress-nginx-public
      app.kubernetes.io/version: 1.8.0
  template:
    metadata:
      annotations:
        prometheus.io/port: "10254"
        prometheus.io/scrape: "true"
      labels:
        app.kubernetes.io/component: controller
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/part-of: ingress-nginx
        app.kubernetes.io/role: ingress-nginx-public
        app.kubernetes.io/version: 1.8.0
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - ingress-nginx
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - args:
        - /nginx-ingress-controller
        - --configmap=$(POD_NAMESPACE)/nginx-configuration
        - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services
        - --udp-services-configmap=$(POD_NAMESPACE)/udp-services
        - --publish-service=$(POD_NAMESPACE)/ingress-nginx
        - --annotations-prefix=nginx.ingress.kubernetes.io
        - --http-port=8080
        - --https-port=8443
        - --ingress-class=nginx-public
        - --controller-class=k8s.io/ingress-nginx-public
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: LD_PRELOAD
          value: /usr/local/lib/libmimalloc.so
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/sigsci-nginx-ingress-controller/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /wait-shutdown
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: 10254
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        name: nginx-ingress-controller
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        - containerPort: 8443
          name: https
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: 10254
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 2
            memory: 2Gi
          requests:
            cpu: 2
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            add:
            - NET_BIND_SERVICE
            drop:
            - ALL
          readOnlyRootFilesystem: false
          runAsGroup: 101
          runAsNonRoot: true
          runAsUser: 101
        volumeMounts:
        - mountPath: /var/run/
          name: sigsci-socket
      - env:
        - name: AWS_REGION
          value: us-east-2
        - name: AGENT_NAME
          value: beluga-dev
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/sigsci-agent/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: sigsci-agent
        resources:
          limits:
            cpu: 2
            memory: 2Gi
          requests:
            cpu: 2
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /var/run/
          name: sigsci-socket
      initContainers:
      - env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: ingress-bootstrap-environment-variables-ff2m998476
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/ingress-bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: ingress-init
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
      securityContext:
        runAsNonRoot: true
      serviceAccountName: nginx-ingress-serviceaccount
      terminationGracePeriodSeconds: 300
      volumes:
      - emptyDir: {}
        name: sigsci-socket
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  labels:
    app: cluster-autoscaler
  name: cluster-autoscaler
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: cluster-autoscaler
  template:
    metadata:
      annotations:
        prometheus.io/port: "8085"
        prometheus.io/scrape: "true"
      labels:
        app: cluster-autoscaler
    spec:
      containers:
      - command:
        - ./cluster-autoscaler
        - --v=1
        - --stderrthreshold=info
        - --skip-nodes-with-local-storage=false
        - --expander=least-waste
        - --balancing-ignore-label=eks.amazonaws.com/sourceLaunchTemplateId
        - --balancing-ignore-label=eks.amazonaws.com/sourceLaunchTemplateVersion
        - --balancing-ignore-label=failure-domain.beta.kubernetes.io/zone
        - --balancing-ignore-label=topology.ebs.csi.aws.com/zone
        - --balancing-ignore-label=topology.kubernetes.io/zone
        - --cloud-provider=aws
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/autoscaling/cluster-autoscaler:v1.27.1
        imagePullPolicy: IfNotPresent
        name: cluster-autoscaler
        resources:
          limits:
            cpu: 100m
            memory: 600Mi
          requests:
            cpu: 100m
            memory: 600Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /etc/ssl/certs/ca-certificates.crt
          name: ssl-certs
          readOnly: true
      priorityClassName: system-cluster-critical
      securityContext:
        fsGroup: 65534
        runAsNonRoot: true
        runAsUser: 65534
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: cluster-autoscaler
      volumes:
      - hostPath:
          path: /etc/ssl/certs/ca-bundle.crt
        name: ssl-certs
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-controller
  namespace: kube-system
spec:
  replicas: 2
  selector:
    matchLabels:
      app: ebs-csi-controller
      app.kubernetes.io/name: aws-ebs-csi-driver
  strategy:
    rollingUpdate:
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: ebs-csi-controller
        app.kubernetes.io/name: aws-ebs-csi-driver
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: eks.amazonaws.com/compute-type
                operator: NotIn
                values:
                - fargate
            weight: 1
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app
                  operator: In
                  values:
                  - ebs-csi-controller
              topologyKey: kubernetes.io/hostname
            weight: 100
      containers:
      - args:
        - --endpoint=$(CSI_ENDPOINT)
        - --logging-format=text
        - --user-agent-extra=kustomize
        - --v=2
        env:
        - name: CSI_ENDPOINT
          value: unix:///var/lib/csi/sockets/pluginproxy/csi.sock
        - name: CSI_NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: AWS_ACCESS_KEY_ID
          valueFrom:
            secretKeyRef:
              key: key_id
              name: aws-secret
              optional: true
        - name: AWS_SECRET_ACCESS_KEY
          valueFrom:
            secretKeyRef:
              key: access_key
              name: aws-secret
              optional: true
        - name: AWS_EC2_ENDPOINT
          valueFrom:
            configMapKeyRef:
              key: endpoint
              name: aws-meta
              optional: true
        image: public.ecr.aws/ebs-csi-driver/aws-ebs-csi-driver:v1.20.0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: healthz
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 3
        name: ebs-plugin
        ports:
        - containerPort: 9808
          name: healthz
          protocol: TCP
        readinessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: healthz
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 3
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --v=2
        - --feature-gates=Topology=true
        - --extra-create-metadata
        - --leader-election=true
        - --default-fstype=ext4
        env:
        - name: ADDRESS
          value: /var/lib/csi/sockets/pluginproxy/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/external-provisioner:v3.5.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: csi-provisioner
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --v=2
        - --leader-election=true
        env:
        - name: ADDRESS
          value: /var/lib/csi/sockets/pluginproxy/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/external-attacher:v4.3.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: csi-attacher
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --leader-election=true
        - --extra-create-metadata
        env:
        - name: ADDRESS
          value: /var/lib/csi/sockets/pluginproxy/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/external-snapshotter/csi-snapshotter:v6.2.2-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: csi-snapshotter
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --v=2
        - --handle-volume-inuse-error=false
        - --leader-election=true
        env:
        - name: ADDRESS
          value: /var/lib/csi/sockets/pluginproxy/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/external-resizer:v1.8.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: csi-resizer
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=/csi/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/livenessprobe:v2.10.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: liveness-probe
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: socket-dir
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      securityContext:
        fsGroup: 1000
        runAsGroup: 1000
        runAsNonRoot: true
        runAsUser: 1000
      serviceAccountName: ebs-csi-controller-sa
      tolerations:
      - key: CriticalAddonsOnly
        operator: Exists
      - effect: NoExecute
        operator: Exists
        tolerationSeconds: 300
      volumes:
      - emptyDir: {}
        name: socket-dir
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-controller
  namespace: kube-system
spec:
  replicas: 2
  selector:
    matchLabels:
      app: efs-csi-controller
      app.kubernetes.io/instance: kustomize
      app.kubernetes.io/name: aws-efs-csi-driver
  template:
    metadata:
      labels:
        app: efs-csi-controller
        app.kubernetes.io/instance: kustomize
        app.kubernetes.io/name: aws-efs-csi-driver
    spec:
      containers:
      - args:
        - --endpoint=$(CSI_ENDPOINT)
        - --logtostderr
        - --v=2
        - --delete-access-point-root-dir=true
        - --vol-metrics-opt-in=false
        env:
        - name: CSI_ENDPOINT
          value: unix:///var/lib/csi/sockets/pluginproxy/csi.sock
        - name: CSI_NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        image: amazon/aws-efs-csi-driver:v1.5.7
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: healthz
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 3
        name: efs-plugin
        ports:
        - containerPort: 9909
          name: healthz
          protocol: TCP
        resources:
          limits:
            cpu: 800m
            memory: 1024Mi
          requests:
            cpu: 150m
            memory: 300Mi
        securityContext:
          privileged: false
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --v=2
        - --feature-gates=Topology=true
        - --extra-create-metadata
        - --leader-election
        env:
        - name: ADDRESS
          value: /var/lib/csi/sockets/pluginproxy/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/external-provisioner:v3.5.0-eks-1-27-3
        imagePullPolicy: IfNotPresent
        name: csi-provisioner
        resources:
          limits:
            cpu: 30m
            memory: 50Mi
          requests:
            cpu: 20m
            memory: 30Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/csi/sockets/pluginproxy/
          name: socket-dir
      - args:
        - --csi-address=/csi/csi.sock
        - --health-port=9909
        image: public.ecr.aws/eks-distro/kubernetes-csi/livenessprobe:v2.10.0-eks-1-27-3
        imagePullPolicy: IfNotPresent
        name: liveness-probe
        resources:
          limits:
            cpu: 20m
            memory: 50Mi
          requests:
            cpu: 10m
            memory: 30Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: socket-dir
      hostNetwork: true
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      securityContext:
        fsGroup: 0
        runAsGroup: 0
        runAsNonRoot: false
        runAsUser: 0
      serviceAccountName: efs-csi-controller-sa
      volumes:
      - emptyDir: {}
        name: socket-dir
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
  name: kube-state-metrics
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
  template:
    metadata:
      labels:
        app.kubernetes.io/component: exporter
        app.kubernetes.io/name: kube-state-metrics
        app.kubernetes.io/version: 2.9.2
    spec:
      automountServiceAccountToken: true
      containers:
      - image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/coreos/kube-state-metrics:v2.9.2
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
        name: kube-state-metrics
        ports:
        - containerPort: 8080
          name: http-metrics
        - containerPort: 8081
          name: telemetry
        readinessProbe:
          httpGet:
            path: /
            port: 8081
          initialDelaySeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 30m
            memory: 80Mi
          requests:
            cpu: 10m
            memory: 50Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
      nodeSelector:
        kubernetes.io/os: linux
      serviceAccountName: kube-state-metrics
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  selector:
    matchLabels:
      k8s-app: metrics-server
  strategy:
    rollingUpdate:
      maxUnavailable: 0
  template:
    metadata:
      labels:
        k8s-app: metrics-server
    spec:
      containers:
      - args:
        - --cert-dir=/tmp
        - --secure-port=4443
        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
        - --kubelet-use-node-status-port
        - --metric-resolution=15s
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/metrics-server/metrics-server:v0.6.4
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /livez
            port: https
            scheme: HTTPS
          periodSeconds: 10
        name: metrics-server
        ports:
        - containerPort: 4443
          name: https
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /readyz
            port: https
            scheme: HTTPS
          initialDelaySeconds: 20
          periodSeconds: 10
        resources:
          requests:
            cpu: 100m
            memory: 200Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /tmp
          name: tmp-dir
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      serviceAccountName: metrics-server
      volumes:
      - emptyDir: {}
        name: tmp-dir
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    name: sealed-secrets-controller
  name: sealed-secrets-controller
  namespace: kube-system
spec:
  minReadySeconds: 30
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      name: sealed-secrets-controller
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      annotations: {}
      labels:
        name: sealed-secrets-controller
    spec:
      containers:
      - args: []
        command:
        - controller
        env:
        - name: SEALED_SECRETS_KEY_RENEW_PERIOD
          value: "0"
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/bitnami/sealed-secrets-controller:v0.23.1
        imagePullPolicy: IfNotPresent
        livenessProbe:
          httpGet:
            path: /healthz
            port: http
        name: sealed-secrets-controller
        ports:
        - containerPort: 8080
          name: http
        readinessProbe:
          httpGet:
            path: /healthz
            port: http
        resources:
          limits:
            cpu: 500m
            memory: 100Mi
          requests:
            cpu: 500m
            memory: 100Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
        stdin: false
        tty: false
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      imagePullSecrets: []
      initContainers: []
      securityContext:
        fsGroup: 65534
        runAsNonRoot: true
        runAsUser: 1001
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: sealed-secrets-controller
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: tmp
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/version: 2.9.2
    helm.sh/chart: kube-state-metrics-4.23.0
    nri-bundle.version: 5.0.4
  name: nri-bundle-kube-state-metrics
  namespace: newrelic
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: kube-state-metrics
        nri-bundle.version: 5.0.4
    spec:
      containers:
      - args:
        - --resources=certificatesigningrequests
        - --resources=configmaps
        - --resources=cronjobs
        - --resources=daemonsets
        - --resources=deployments
        - --resources=endpoints
        - --resources=horizontalpodautoscalers
        - --resources=ingresses
        - --resources=jobs
        - --resources=leases
        - --resources=limitranges
        - --resources=mutatingwebhookconfigurations
        - --resources=namespaces
        - --resources=networkpolicies
        - --resources=nodes
        - --resources=persistentvolumeclaims
        - --resources=persistentvolumes
        - --resources=poddisruptionbudgets
        - --resources=pods
        - --resources=replicasets
        - --resources=replicationcontrollers
        - --resources=resourcequotas
        - --resources=secrets
        - --resources=services
        - --resources=statefulsets
        - --resources=storageclasses
        - --resources=validatingwebhookconfigurations
        - --resources=volumeattachments
        - --telemetry-port=8081
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/coreos/kube-state-metrics:v2.9.2
        imagePullPolicy: IfNotPresent
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
        name: kube-state-metrics
        ports:
        - containerPort: 8080
        readinessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 30m
            memory: 80Mi
          requests:
            cpu: 10m
            memory: 50Mi
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 65534
          runAsNonRoot: true
          runAsUser: 65534
      hostNetwork: false
      securityContext:
        fsGroup: 65534
        runAsGroup: 65534
        runAsUser: 65534
      serviceAccountName: nri-bundle-kube-state-metrics
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: newrelic-infrastructure
    chart: newrelic-infrastructure-1.6.2
    mode: privileged
    release: nri-bundle
  name: nri-bundle-newrelic-metadata
  namespace: newrelic
spec:
  replicas: 1
  selector:
    matchLabels:
      app: newrelic-infrastructure
      release: nri-bundle
  template:
    metadata:
      annotations: {}
      labels:
        app: newrelic-infrastructure
        mode: privileged
        release: nri-bundle
    spec:
      containers:
      - env:
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: CLUSTER_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        - name: NRIA_DISABLE_CLOUD_INSTANCE_ID
          value: "true"
        - name: NRIA_DISABLE_CLOUD_METADATA
          value: "true"
        - name: NRIA_ENABLE_PROCESS_METRICS
          value: "false"
        - name: NRIA_METRICS_PROCESS_SAMPLE_RATE
          value: "-1"
        - name: NRK8S_NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRIA_CUSTOM_ATTRIBUTES
          value: '{"clusterName":"$(CLUSTER_NAME)"}'
        - name: NRIA_PASSTHROUGH_ENVIRONMENT
          value: CLUSTER_NAME
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/infrastructure:1.37.2
        imagePullPolicy: IfNotPresent
        name: newrelic-infrastructure
        resources:
          limits:
            cpu: 200m
            memory: 300M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /dev
          name: dev
        - mountPath: /var/run/docker.sock
          name: host-docker-socket
        - mountPath: /var/log
          name: log
        - mountPath: /host
          name: host-volume
          readOnly: true
        - mountPath: /etc/newrelic-infra/integrations.d
          name: pingmetadata
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: true
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
      serviceAccountName: nri-bundle-newrelic-infrastructure
      tolerations:
      - effect: NoSchedule
        operator: Exists
      - effect: NoExecute
        operator: Exists
      volumes:
      - hostPath:
          path: /dev
        name: dev
      - hostPath:
          path: /var/run/docker.sock
        name: host-docker-socket
      - hostPath:
          path: /var/log
        name: log
      - hostPath:
          path: /
        name: host-volume
      - configMap:
          items:
          - key: pingmetadata.yaml
            path: pingmetadata.yaml
          name: pingmetadata
        name: pingmetadata
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 1.8.0
    helm.sh/chart: nri-kube-events-2.2.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-kube-events
  namespace: newrelic
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: nri-kube-events
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: nri-kube-events
        app.kubernetes.io/version: 1.8.0
        helm.sh/chart: nri-kube-events-2.2.4
        nri-bundle.version: 5.0.4
    spec:
      containers:
      - args:
        - -config
        - /app/config/config.yaml
        - -loglevel
        - debug
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/nri-kube-events:1.9.1
        imagePullPolicy: IfNotPresent
        name: kube-events
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /app/config
          name: config-volume
      - env:
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: NRIA_IS_SECURE_FORWARD_ONLY
          value: "false"
        - name: NRIA_IS_FORWARD_ONLY
          value: "true"
        - name: NRIA_OVERRIDE_HOSTNAME_SHORT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/k8s-events-forwarder:1.36.1
        imagePullPolicy: IfNotPresent
        name: forwarder
        ports:
        - containerPort: 8001
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /var/db/newrelic-infra/data
          name: tmpfs-data
        - mountPath: /var/db/newrelic-infra/user_data
          name: tmpfs-user-data
        - mountPath: /tmp
          name: tmpfs-tmp
        - mountPath: /etc/newrelic-infra.yml
          name: config
          subPath: newrelic-infra.yml
      hostNetwork: true
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
      serviceAccountName: nri-bundle-nri-kube-events
      volumes:
      - configMap:
          items:
          - key: newrelic-infra.yml
            path: newrelic-infra.yml
          name: nri-bundle-nri-kube-events-agent-config
        name: config
      - configMap:
          name: nri-bundle-nri-kube-events-config
        name: config-volume
      - emptyDir: {}
        name: tmpfs-data
      - emptyDir: {}
        name: tmpfs-user-data
      - emptyDir: {}
        name: tmpfs-tmp
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection
  namespace: newrelic
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: nri-metadata-injection
  template:
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: nri-metadata-injection
        app.kubernetes.io/version: 1.7.0
        helm.sh/chart: nri-metadata-injection-3.0.4
        nri-bundle.version: 5.0.4
    spec:
      containers:
      - env:
        - name: clusterName
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/k8s-metadata-injection:1.7.5
        imagePullPolicy: IfNotPresent
        name: nri-metadata-injection
        ports:
        - containerPort: 8443
          protocol: TCP
        readinessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 1
          periodSeconds: 1
        resources:
          limits:
            memory: 80M
          requests:
            cpu: 100m
            memory: 30M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 1001
          runAsNonRoot: true
          runAsUser: 1001
        volumeMounts:
        - mountPath: /etc/tls-key-cert-pair
          name: tls-key-cert-pair
      hostNetwork: false
      securityContext:
        fsGroup: 1001
        runAsGroup: 1001
        runAsUser: 1001
      serviceAccount: default
      volumes:
      - name: tls-key-cert-pair
        secret:
          secretName: nri-bundle-nri-metadata-injection-admission
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-prometheus
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-prometheus-2.1.5
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-prometheus
  namespace: newrelic
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: nri-prometheus
  template:
    metadata:
      annotations:
        checksum/config: ccb1eaf63851097c4abf7fd036baccf66b0979e728f14bbe687d21a691119c17
      labels:
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: nri-prometheus
        nri-bundle.version: 5.0.4
    spec:
      containers:
      - args:
        - --configfile=/etc/nri-prometheus/config.yaml
        env:
        - name: LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: BEARER_TOKEN_FILE
          value: /var/run/secrets/kubernetes.io/serviceaccount/token
        - name: CA_FILE
          value: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/nri-prometheus:2.17.0
        imagePullPolicy: IfNotPresent
        name: nri-prometheus
        ports:
        - containerPort: 8080
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 65534
          runAsNonRoot: true
          runAsUser: 65534
        volumeMounts:
        - mountPath: /etc/nri-prometheus/
          name: config-volume
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      serviceAccountName: nri-bundle-nri-prometheus
      volumes:
      - configMap:
          name: nri-bundle-nri-prometheus-config
        name: config-volume
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-ksm
  namespace: newrelic
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: ksm
      app.kubernetes.io/instance: nri-bundle
      app.kubernetes.io/name: newrelic-infrastructure
  strategy:
    type: Recreate
  template:
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/component: ksm
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: newrelic-infrastructure
        nri-bundle.version: 5.0.4
    spec:
      affinity:
        podAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchLabels:
                  app.kubernetes.io/name: kube-state-metrics
              topologyKey: kubernetes.io/hostname
            weight: 100
      containers:
      - env:
        - name: NRI_KUBERNETES_SINK_HTTP_PORT
          value: "8002"
        - name: NRI_KUBERNETES_CLUSTERNAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        - name: NRI_KUBERNETES_VERBOSE
          value: "false"
        - name: NRI_KUBERNETES_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/nri-kubernetes/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: ksm
        resources:
          limits:
            memory: 850M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /etc/newrelic-infra/nri-kubernetes.yml
          name: nri-kubernetes-config
          subPath: nri-kubernetes.yml
      - env:
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: NRIA_OVERRIDE_HOSTNAME_SHORT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: K8S_NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRIA_CUSTOM_ATTRIBUTES
          value: '{"clusterName":"$(CLUSTER_NAME)"}'
        - name: NRIA_PASSTHROUGH_ENVIRONMENT
          value: KUBERNETES_SERVICE_HOST,KUBERNETES_SERVICE_PORT,CLUSTER_NAME,CADVISOR_PORT,NRK8S_NODE_NAME,KUBE_STATE_METRICS_URL,KUBE_STATE_METRICS_POD_LABEL,TIMEOUT,ETCD_TLS_SECRET_NAME,ETCD_TLS_SECRET_NAMESPACE,API_SERVER_SECURE_PORT,KUBE_STATE_METRICS_SCHEME,KUBE_STATE_METRICS_PORT,SCHEDULER_ENDPOINT_URL,ETCD_ENDPOINT_URL,CONTROLLER_MANAGER_ENDPOINT_URL,API_SERVER_ENDPOINT_URL,DISABLE_KUBE_STATE_METRICS,DISCOVERY_CACHE_TTL
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/k8s-events-forwarder:1.36.1
        imagePullPolicy: IfNotPresent
        name: forwarder
        ports:
        - containerPort: 8002
        resources:
          limits:
            memory: 850M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /var/db/newrelic-infra/data
          name: forwarder-tmpfs-data
        - mountPath: /var/db/newrelic-infra/user_data
          name: forwarder-tmpfs-user-data
        - mountPath: /tmp
          name: forwarder-tmpfs-tmp
        - mountPath: /etc/newrelic-infra.yml
          name: config
          subPath: newrelic-infra.yml
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: true
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      serviceAccountName: nri-bundle-newrelic-infrastructure
      tolerations:
      - effect: NoSchedule
        operator: Exists
      - effect: NoExecute
        operator: Exists
      volumes:
      - configMap:
          items:
          - key: nri-kubernetes.yml
            path: nri-kubernetes.yml
          name: nri-bundle-nrk8s-ksm
        name: nri-kubernetes-config
      - emptyDir: {}
        name: forwarder-tmpfs-data
      - emptyDir: {}
        name: forwarder-tmpfs-user-data
      - emptyDir: {}
        name: forwarder-tmpfs-tmp
      - configMap:
          items:
          - key: newrelic-infra.yml
            path: newrelic-infra.yml
          name: nri-bundle-nrk8s-agent-ksm
        name: config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: ping-cloud
    role: p14c-bom-service
  name: p14c-bom-service
  namespace: ping-cloud
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: p14c-bom-service
  template:
    metadata:
      labels:
        app: ping-cloud
        role: p14c-bom-service
      name: p14c-bom-service
    spec:
      containers:
      - command:
        - python3
        - -u
        - /app/bom_service_controller.py
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: p14c-bom-service-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/p14c-integration/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - python3
            - -u
            - /app/liveness.py
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 3
        name: pingcloud-bom
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      serviceAccount: p14c-bom-serviceaccount
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: ping-cloud
    role: p14c-bootstrap
  name: p14c-bootstrap
  namespace: ping-cloud
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: p14c-bootstrap
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        role: p14c-bootstrap
      name: p14c-bootstrap
    spec:
      containers:
      - env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: DAEMONIZE
          value: "true"
        envFrom:
        - configMapRef:
            name: pingcloud-p14c-bootstrap-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: p14c-bootstrap
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
        volumeMounts:
        - mountPath: /app/config/app_config.yaml
          name: pingcloud-p14c-bootstrap-resources
          readOnly: true
          subPath: p14c-bootstrap-resources.yaml
      securityContext:
        fsGroup: 9999
        runAsGroup: 9999
        runAsNonRoot: true
        runAsUser: 9031
      serviceAccount: p14c-bootstrap-serviceaccount
      volumes:
      - configMap:
          name: pingcloud-p14c-bootstrap-resources
        name: pingcloud-p14c-bootstrap-resources
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral
  namespace: ping-cloud
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: pingcentral
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        entitled-app: "true"
        role: pingcentral
      name: pingcentral
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingcentral
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - env:
        - name: OLD_PC_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: OLD_PC_ADMIN_USER_PASSWORD
              name: pingcentral-passwords
        - name: PC_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PC_ADMIN_USER_PASSWORD
              name: pingcentral-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingcentral-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingcentral/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - /opt/liveness.sh
          failureThreshold: 4
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingcentral
        ports:
        - containerPort: 9022
          name: https
        readinessProbe:
          exec:
            command:
            - /opt/readiness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "2"
            memory: 5Gi
          requests:
            cpu: "1"
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /usr/local/secrets
          name: pingcentral-passwords
          readOnly: true
        - mountPath: /opt/in/instance/conf/pingcentral.lic
          name: pingcentral-license
          subPath: pingcentral.lic
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
      initContainers:
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingcentral-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingcentral-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingcentral-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingcentral-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingcentral-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingcentral-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingcentral-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingcentral
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingcentral-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      securityContext:
        fsGroup: 9999
      serviceAccount: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingcentral-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: pingcentral-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingcentral-license
      - name: pingcentral-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingcentral-passwords
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: ping-cloud
  name: pingdelegator
  namespace: ping-cloud
spec:
  replicas: 2
  selector:
    matchLabels:
      app: ping-cloud
      role: pingdelegator
  strategy:
    type: RollingUpdate
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        role: pingdelegator
      name: pingdelegator
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingdelegator
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - envFrom:
        - configMapRef:
            name: pingdelegator-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdelegator/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - nginx -s quit
              - while killall -0 nginx; do sleep 1; done
        livenessProbe:
          exec:
            command:
            - /opt/liveness.sh
          failureThreshold: 4
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingdelegator
        ports:
        - containerPort: 1443
          name: https
        readinessProbe:
          exec:
            command:
            - /opt/liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 1Gi
          requests:
            cpu: 80m
            memory: 256Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
      initContainers:
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingdelegator-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingdelegator-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingdelegator-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingdelegator-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingdelegator-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingdelegator-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdelegator-init
          subPath: logger.lib.sh
      securityContext:
        fsGroup: 9999
      serviceAccount: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingdelegator-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: pod-reaper
  namespace: pod-reaper
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pod-reaper
  template:
    metadata:
      labels:
        app: pod-reaper
    spec:
      containers:
      - env:
        - name: REQUIRE_LABEL_KEY
          value: pod-reaper
        - name: REQUIRE_LABEL_VALUES
          value: enabled
        - name: POD_SORTING_STRATEGY
          value: oldest-first
        - name: EVICT
          value: "true"
        envFrom:
        - configMapRef:
            name: pod-reaper-environment-variables-5cgh48ghhc
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/pod-reaper:2.12.0
        name: reaper
        resources:
          limits:
            cpu: 30m
            memory: 30Mi
          requests:
            cpu: 20m
            memory: 20Mi
      serviceAccountName: pod-reaper-service-account
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    argocd.argoproj.io/sync-options: Replace=true
  name: alertmanager
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      app: alertmanager
  template:
    metadata:
      labels:
        app: alertmanager
      name: alertmanager
    spec:
      containers:
      - args:
        - --config.file=/etc/alertmanager/config.yml
        - --storage.path=/alertmanager
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/prom/alertmanager:v0.26.0
        name: alertmanager
        ports:
        - containerPort: 9093
          name: alertmanager
        resources:
          limits:
            cpu: 1
            memory: 1Gi
          requests:
            cpu: 500m
            memory: 500M
        volumeMounts:
        - mountPath: /etc/alertmanager
          name: config-volume
        - mountPath: /alertmanager
          name: alertmanager
      volumes:
      - configMap:
          name: alertmanager-config
        name: config-volume
      - emptyDir: {}
        name: alertmanager
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: grafana-operator-controller-manager
  name: grafana-operator-controller-manager
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      control-plane: grafana-operator-controller-manager
  strategy: {}
  template:
    metadata:
      labels:
        control-plane: grafana-operator-controller-manager
    spec:
      containers:
      - args:
        - --health-probe-bind-address=:8081
        - --metrics-bind-address=0.0.0.0:9090
        - --leader-elect
        env:
        - name: WATCH_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/grafana-operator/grafana-operator:v5.3.0
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        name: manager
        ports:
        - containerPort: 9090
          name: metrics
          protocol: TCP
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            cpu: 200m
            memory: 100Mi
          requests:
            cpu: 100m
            memory: 20Mi
        securityContext:
          allowPrivilegeEscalation: false
      securityContext:
        runAsNonRoot: true
      serviceAccountName: grafana-operator-controller-manager
      terminationGracePeriodSeconds: 10
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: prometheus-agent
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus-agent
  template:
    metadata:
      labels:
        app: prometheus-agent
    spec:
      containers:
      - args:
        - --config.file=/etc/prometheus/prometheus.yml
        - --web.enable-lifecycle
        - --enable-feature=agent
        - --enable-feature=expand-external-labels
        envFrom:
        - configMapRef:
            name: prometheus-environment-variables-89d8mghhg8
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/prom/prometheus:v2.47.0
        name: prometheus
        ports:
        - containerPort: 9090
        resources:
          limits:
            cpu: 500m
            memory: 4000Mi
          requests:
            cpu: 100m
            memory: 512Mi
        volumeMounts:
        - mountPath: /etc/prometheus/
          name: prometheus-config-volume
      serviceAccountName: prometheus
      volumes:
      - configMap:
          name: prometheus-agent-config
        name: prometheus-config-volume
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: prometheus-job-exporter
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus-job-exporter
  template:
    metadata:
      labels:
        app: prometheus-job-exporter
    spec:
      containers:
      - envFrom:
        - configMapRef:
            name: prometheus-environment-variables-89d8mghhg8
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/prometheus-job-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: prometheus-job-exporter
        ports:
        - containerPort: 8000
          protocol: TCP
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 100Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /app/config.yaml
          name: prometheus-job-exporter-config
          readOnly: false
          subPath: config.yaml
      serviceAccountName: prometheus-job-exporter
      volumes:
      - configMap:
          name: prometheus-job-exporter-config
        name: prometheus-job-exporter-config
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: logstash-elastic
  name: logstash-elastic
  namespace: elastic-stack-logging
spec:
  podManagementPolicy: Parallel
  selector:
    matchLabels:
      app: logstash-elastic
  serviceName: logstash-elastic
  template:
    metadata:
      labels:
        app: logstash-elastic
    spec:
      containers:
      - image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/prom/logstash-exporter:v0.0.1
        imagePullPolicy: IfNotPresent
        name: exporter
        ports:
        - containerPort: 9198
          name: metrics
          protocol: TCP
        resources:
          limits:
            cpu: 500m
            memory: 500Mi
          requests:
            cpu: 150m
            memory: 100Mi
      - args:
        - -c
        - S3_BUCKET_NAME=${S3_BUCKET#s3://} /usr/local/bin/docker-entrypoint
        command:
        - /bin/sh
        env:
        - name: CONTAINER_NAME
          value: logstash
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: CONFIG_RELOAD_AUTOMATIC
          value: "false"
        - name: LOG_FORMAT
          value: json
        - name: PIPELINE_BATCH_SIZE
          value: "1000"
        - name: PIPELINE_ECS_COMPATIBILITY
          value: disabled
        - name: PIPELINE_ORDERED
          value: "false"
        - name: QUEUE_TYPE
          value: persisted
        - name: QUEUE_MAX_BYTES
          value: 1000gb
        - name: QUEUE_DRAIN
          value: "true"
        - name: DEAD_LETTER_QUEUE_ENABLE
          value: "true"
        - name: PATH_DEAD_LETTER_QUEUE
          value: /usr/share/logstash/data/queue/dead_letter
        - name: LS_JAVA_OPTS
          value: -Xms1g -Xmx1g
        - name: XPACK_MONITORING_ENABLED
          value: "false"
        - name: OS_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: os-logstash-creds
        - name: OS_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: os-logstash-creds
        - name: S3_BUCKET
          valueFrom:
            configMapKeyRef:
              key: bucketName
              name: s3-raw-logs-bucket
        - name: AWS_REGION
          valueFrom:
            configMapKeyRef:
              key: logs.region
              name: cluster-info
        - name: CW_CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: cluster.name
              name: cluster-info
        - name: NR_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: nr-license-key
        envFrom:
        - configMapRef:
            name: elk-environment-variables-dfk4bdbtkk
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/logstash/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 9600
          initialDelaySeconds: 300
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: logstash
        ports:
        - containerPort: 9600
          name: rest
          protocol: TCP
        - containerPort: 8080
          name: http-log-input
          protocol: TCP
        - containerPort: 8081
          name: http-s3-input
          protocol: TCP
        - containerPort: 8082
          name: http-cw-input
          protocol: TCP
        - containerPort: 8083
          name: http-nr-input
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 3
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 500m
            memory: 4Gi
          requests:
            cpu: 150m
            memory: 1Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /usr/share/logstash/config/pipelines.yml
          name: logstash-pipelines
          readOnly: true
          subPath: pipelines.yml
        - mountPath: /usr/share/logstash/pipeline/main
          name: logstash-pipeline-main
          readOnly: true
        - mountPath: /usr/share/logstash/pipeline/customer
          name: logstash-pipeline-customer
          readOnly: true
        - mountPath: /usr/share/logstash/pipeline/s3
          name: logstash-pipeline-s3
          readOnly: true
        - mountPath: /usr/share/logstash/pipeline/dlq
          name: logstash-pipeline-dlq
          readOnly: true
        - mountPath: /usr/share/logstash/pipeline/cloudwatch
          name: logstash-pipeline-cw
        - mountPath: /usr/share/logstash/pipeline/newrelic
          name: logstash-pipeline-nr
          readOnly: true
        - mountPath: /etc/logstash/templates
          name: logstash-search-template
          readOnly: true
        - mountPath: /enrichment-cache-files
          name: enrichment-cache-files
          readOnly: false
        - mountPath: /usr/share/logstash/data/queue
          name: logstash-efs
          readOnly: false
        - mountPath: /usr/share/logstash/certs
          name: os-certs
      - args:
        - enrichment_sidecar
        env:
        - name: ENRICHMENT_TOR_FEED_URL
          value: https://check.torproject.org/exit-addresses
        - name: ENRICHMENT_ALIEN_VAULT_FEED_URL
          value: https://reputation.alienvault.com/reputation.generic
        - name: ENRICHMENT_FILEPATH
          value: /enrichment-cache-files/
        - name: ENRICHMENT_DELAY_SECONDS
          value: "600"
        - name: PYTHONUNBUFFERED
          value: "1"
        - name: PYTHONIOENCODING
          value: UTF-8
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/enrichment-bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: enrichment-sidecar
        resources:
          limits:
            cpu: 500m
            memory: 500Mi
          requests:
            cpu: 150m
            memory: 100Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /enrichment-cache-files
          name: enrichment-cache-files
          readOnly: false
      initContainers:
      - command:
        - sh
        - -c
        - kubectl wait --for=condition=complete --timeout=900s -n elastic-stack-logging
          job/opensearch-bootstrap
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: wait-for-bootstrap-completed
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      - args:
        - create_enrichment_cache_files
        env:
        - name: ENRICHMENT_TOR_FEED_URL
          value: https://check.torproject.org/exit-addresses
        - name: ENRICHMENT_ALIEN_VAULT_FEED_URL
          value: https://reputation.alienvault.com/reputation.generic
        - name: ENRICHMENT_FILEPATH
          value: /enrichment-cache-files/
        - name: PYTHONUNBUFFERED
          value: "1"
        - name: PYTHONIOENCODING
          value: UTF-8
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/enrichment-bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: create-enrichment-cache-files
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /enrichment-cache
          name: enrichment-cache
        - mountPath: /enrichment-cache-files
          name: enrichment-cache-files
      serviceAccountName: logstash-elastic
      terminationGracePeriodSeconds: 60
      volumes:
      - configMap:
          name: logstash-pipeline-main-ht5h988bg2
        name: logstash-pipeline-main
      - configMap:
          name: logstash-pipeline-customer-97tc4thm7t
        name: logstash-pipeline-customer
      - configMap:
          name: logstash-pipeline-s3-gc9t2khd28
        name: logstash-pipeline-s3
      - configMap:
          name: logstash-pipeline-dlq-t7c6c88tfg
        name: logstash-pipeline-dlq
      - configMap:
          name: logstash-pipeline-cw-8chtm622kh
        name: logstash-pipeline-cw
      - configMap:
          name: logstash-pipeline-nr-6tcc6f926g
        name: logstash-pipeline-nr
      - configMap:
          name: logstash-pipelines
        name: logstash-pipelines
      - configMap:
          name: logstash-search-template
        name: logstash-search-template
      - configMap:
          name: enrichment-cache
        name: enrichment-cache
      - emptyDir: {}
        name: enrichment-cache-files
      - name: os-certs
        secret:
          secretName: opensearch-cert
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: logstash-elastic
      name: logstash-efs
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 1Mi
      storageClassName: efs
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app.kubernetes.io/instance: opensearch-cluster-hot
    app.kubernetes.io/name: opensearch
  name: opensearch-cluster-hot
  namespace: elastic-stack-logging
spec:
  podManagementPolicy: Parallel
  replicas: 3
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensearch-cluster-hot
      app.kubernetes.io/name: opensearch
  serviceName: opensearch-cluster-headless
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: opensearch-cluster-hot
        app.kubernetes.io/name: opensearch
      name: opensearch-cluster-hot
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                  - opensearch-cluster-hot
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - opensearch
              topologyKey: kubernetes.io/hostname
            weight: 1
      containers:
      - env:
        - name: node.name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: cluster.initial_cluster_manager_nodes
          value: opensearch-cluster-hot-0,opensearch-cluster-hot-1,opensearch-cluster-hot-2,
        - name: discovery.seed_hosts
          value: opensearch-cluster-headless
        - name: cluster.name
          value: opensearch-cluster
        - name: node.attr.temp
          value: hot
        - name: network.host
          value: 0.0.0.0
        - name: OPENSEARCH_JAVA_OPTS
          value: -Xmx3000M -Xms3000M
        - name: node.roles
          value: cluster_manager,ingest,data,remote_cluster_client,search,
        - name: DISABLE_INSTALL_DEMO_CONFIG
          value: "true"
        - name: logger.level
          value: WARN
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/opensearch/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: opensearch
        ports:
        - containerPort: 9200
          name: http
        - containerPort: 9300
          name: transport
        readinessProbe:
          failureThreshold: 3
          periodSeconds: 5
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        resources:
          limits:
            cpu: "4"
            memory: 4Gi
          requests:
            cpu: "1"
            memory: 4Gi
        securityContext:
          capabilities:
            drop:
            - ALL
          runAsNonRoot: true
          runAsUser: 1000
        startupProbe:
          failureThreshold: 30
          initialDelaySeconds: 5
          periodSeconds: 10
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        volumeMounts:
        - mountPath: /usr/share/opensearch/data
          name: data
        - mountPath: /usr/share/opensearch/config/opensearch-security
          name: security-config-data
        - mountPath: /usr/share/opensearch/config/opensearch.yml
          name: config
          subPath: opensearch.yml
        - mountPath: /usr/share/opensearch/config/certs
          name: node-cert
      enableServiceLinks: false
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: opensearch
      terminationGracePeriodSeconds: 120
      volumes:
      - configMap:
          name: opensearch-config-kgm6kddf69
        name: config
      - name: security-config-data
        secret:
          secretName: opensearch-securityconfig-97tg8dm8g4
      - name: node-cert
        secret:
          secretName: opensearch-cert
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 8Gi
      storageClassName: efs
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app.kubernetes.io/instance: opensearch-cluster-warm
    app.kubernetes.io/name: opensearch
  name: opensearch-cluster-warm
  namespace: elastic-stack-logging
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensearch-cluster-warm
      app.kubernetes.io/name: opensearch
  serviceName: opensearch-cluster-headless
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: opensearch-cluster-warm
        app.kubernetes.io/name: opensearch
      name: opensearch-cluster-warm
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - opensearch
              topologyKey: kubernetes.io/hostname
            weight: 1
      containers:
      - env:
        - name: node.name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: cluster.initial_cluster_manager_nodes
          value: opensearch-cluster-hot-0,opensearch-cluster-hot-1,opensearch-cluster-hot-2,
        - name: discovery.seed_hosts
          value: opensearch-cluster-headless
        - name: cluster.name
          value: opensearch-cluster
        - name: node.attr.temp
          value: warm
        - name: network.host
          value: 0.0.0.0
        - name: OPENSEARCH_JAVA_OPTS
          value: -Xmx3000M -Xms3000M
        - name: node.roles
          value: data,remote_cluster_client,
        - name: DISABLE_INSTALL_DEMO_CONFIG
          value: "true"
        - name: logger.level
          value: WARN
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/opensearch/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: opensearch
        ports:
        - containerPort: 9200
          name: http
        - containerPort: 9300
          name: transport
        readinessProbe:
          failureThreshold: 3
          periodSeconds: 5
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        resources:
          limits:
            cpu: "2"
            memory: 4Gi
          requests:
            cpu: "1"
            memory: 4Gi
        securityContext:
          capabilities:
            drop:
            - ALL
          runAsNonRoot: true
          runAsUser: 1000
        startupProbe:
          failureThreshold: 30
          initialDelaySeconds: 5
          periodSeconds: 10
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        volumeMounts:
        - mountPath: /usr/share/opensearch/data
          name: data
        - mountPath: /usr/share/opensearch/config/opensearch-security
          name: security-config-data
        - mountPath: /usr/share/opensearch/config/opensearch.yml
          name: config
          subPath: opensearch.yml
        - mountPath: /usr/share/opensearch/config/certs
          name: node-cert
      enableServiceLinks: false
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: opensearch
      terminationGracePeriodSeconds: 120
      volumes:
      - configMap:
          name: opensearch-config-kgm6kddf69
        name: config
      - name: security-config-data
        secret:
          secretName: opensearch-securityconfig-97tg8dm8g4
      - name: node-cert
        secret:
          secretName: opensearch-cert
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 125Gi
      storageClassName: opensearch-sc1
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingaccess-cluster
    role: pingaccess-engine
  name: pingaccess
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-engine
  serviceName: pingaccess
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingaccess-cluster
        pod-reaper: enabled
        role: pingaccess-engine
      name: pingaccess-engine
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingaccess-engine
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_ENGINE
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /opt/staging/hooks/86-pre-stop.sh
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-engine-liveness.sh
          failureThreshold: 4
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingaccess
        ports:
        - containerPort: 3000
        - containerPort: 3030
        - containerPort: 8080
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-engine-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 1
            memory: 2Gi
          requests:
            cpu: 1
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
      - env:
        - name: SERVICE_SHORTNAME
          value: pa
        - name: SERVICE_PORT
          value: "3000"
        - name: REPEAT_SEC
          value: "10"
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/prometheus-json-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-heartbeat-exporter
        ports:
        - containerPort: 8079
          name: pa-heartbeat
          protocol: TCP
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 300Mi
        securityContext:
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/config.yml
          name: pa-exporter-config
          subPath: config.yml
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingaccess-admin
        envFrom:
        - configMapRef:
            name: pingaccess-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingaccess-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingaccess-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingaccess-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingaccess-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingaccess-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingaccess-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingaccess-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingaccess-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingaccess
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      securityContext:
        fsGroup: 9999
      serviceAccountName: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingaccess-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: pingaccess-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-license
      - name: pingaccess-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-passwords
      - configMap:
          defaultMode: 420
          name: pa-exporter-config
        name: pa-exporter-config
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingaccess-cluster
    role: pingaccess-admin
  name: pingaccess-admin
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-admin
  serviceName: pingaccess-admin
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingaccess-cluster
        entitled-app: "true"
        pod-reaper: enabled
        role: pingaccess-admin
      name: pingaccess-admin
    spec:
      containers:
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_CONSOLE
        - name: HTTPS_PORT
          value: "9090"
        - name: OLD_PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: OLD_PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-admin-liveness.sh
          failureThreshold: 4
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingaccess-admin
        ports:
        - containerPort: 9000
        - containerPort: 9090
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/85-pa-admin-readiness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2
            memory: 4Gi
          requests:
            cpu: 2
            memory: 4Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /tmp/instance
          name: upgrade-dir
          subPath: instance
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingfederate-cluster
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingaccess-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingaccess-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingaccess-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingaccess-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingaccess-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingaccess-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingaccess-admin
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      - args:
        - -c
        - ' /opt/in/hooks/22-upgrade-server.sh '
        command:
        - /bin/sh
        env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_CONSOLE
        - name: STARTUP_COMMAND
          value: /opt/staging/hooks/22-upgrade-server.sh
        - name: HTTPS_PORT
          value: "9090"
        - name: OLD_PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: OLD_PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-upgrade
        ports:
        - containerPort: 9000
        - containerPort: 9090
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /tmp/instance
          name: upgrade-dir
          subPath: instance
      securityContext:
        fsGroup: 9999
      serviceAccountName: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - emptyDir: {}
        name: upgrade-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingaccess-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: out-dir
        persistentVolumeClaim:
          claimName: out-dir
      - name: pingaccess-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-license
      - name: pingaccess-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-passwords
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: ping-cloud
      name: out-dir
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 20Gi
      storageClassName: pingaccess-gp3
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingaccess-was-cluster
    role: pingaccess-was-engine
  name: pingaccess-was
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-was-engine
  serviceName: pingaccess-was
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingaccess-was-cluster
        pod-reaper: enabled
        role: pingaccess-was-engine
      name: pingaccess-was-engine
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingaccess-was-engine
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_ENGINE
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-was-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-was-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: true
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess-was/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /opt/staging/hooks/86-pre-stop.sh
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-was-engine-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingaccess-was
        ports:
        - containerPort: 3000
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-was-engine-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 1
            memory: 2560Mi
          requests:
            cpu: 100m
            memory: 1280Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-was-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingaccess-was-admin
        envFrom:
        - configMapRef:
            name: pingaccess-was-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingaccess-was-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-was-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingaccess-was-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingaccess-was-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingaccess-was-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingaccess-was-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingaccess-was-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingaccess-was-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingaccess-was-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-was-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingaccess-was
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-was-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      securityContext:
        fsGroup: 9999
      serviceAccountName: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingaccess-was-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: pingaccess-was-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-was-license
      - name: pingaccess-was-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-was-passwords
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingaccess-was-cluster
    role: pingaccess-was-admin
  name: pingaccess-was-admin
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-was-admin
  serviceName: pingaccess-was-admin
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingaccess-was-cluster
        pod-reaper: enabled
        role: pingaccess-was-admin
      name: pingaccess-was-admin
    spec:
      containers:
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_CONSOLE
        - name: HTTPS_PORT
          value: "9090"
        - name: OLD_PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: OLD_PA_ADMIN_USER_PASSWORD
              name: pingaccess-was-passwords
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-was-passwords
        - name: P14C_ISSUER
          valueFrom:
            secretKeyRef:
              key: P14C_ISSUER
              name: pingaccess-was-passwords
        - name: P14C_CLIENT_ID
          valueFrom:
            secretKeyRef:
              key: P14C_CLIENT_ID
              name: pingaccess-was-passwords
        - name: P14C_CLIENT_SECRET
          valueFrom:
            secretKeyRef:
              key: P14C_CLIENT_SECRET
              name: pingaccess-was-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess-was/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pa-admin-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingaccess-was-admin
        ports:
        - containerPort: 9000
        - containerPort: 9090
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/85-pa-admin-readiness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 2560Mi
          requests:
            cpu: 20m
            memory: 1280Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-was-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /opt/staging/p14c_env_vars
          name: data-dir
          subPath: p14c_env_vars
        - mountPath: /tmp/instance
          name: upgrade-dir
          subPath: instance
      initContainers:
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingaccess-was-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - python3
        - -u
        - /app/pingaccess_was_p1_init.py
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/p14c-integration/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-was-p14c-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/staging
          name: data-dir
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingaccess-was-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingaccess-was-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingaccess-was-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-was-init
          subPath: logger.lib.sh
        - mountPath: /opt/staging/p14c_env_vars
          name: data-dir
          subPath: p14c_env_vars
      - command:
        - /wait-for-services.sh
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingaccess-was-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingaccess-was-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingaccess-was-init
          subPath: wait-for-services.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingaccess-was-admin
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      - args:
        - -c
        - ' /opt/in/hooks/22-upgrade-server.sh '
        command:
        - /bin/sh
        env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_CONSOLE
        - name: HTTPS_PORT
          value: "9090"
        - name: OLD_PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: OLD_PA_ADMIN_USER_PASSWORD
              name: pingaccess-was-passwords
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-was-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingaccess-was-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess-was/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingaccess-was-upgrade
        ports:
        - containerPort: 9000
        - containerPort: 9090
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /opt/in/instance/conf/pingaccess.lic
          name: pingaccess-was-license
          subPath: pingaccess.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /tmp/instance
          name: upgrade-dir
          subPath: instance
      securityContext:
        fsGroup: 9999
      serviceAccountName: ping-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - emptyDir: {}
        name: upgrade-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingaccess-was-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: out-dir
        persistentVolumeClaim:
          claimName: out-dir
      - name: pingaccess-was-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-was-license
      - name: pingaccess-was-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingaccess-was-passwords
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: ping-cloud
      name: out-dir
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 20Gi
      storageClassName: pingaccess-was-gp3
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    class: pingdatasync-server
    role: pingdatasync
  name: pingdatasync
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      class: pingdatasync-server
      role: pingdatasync
  serviceName: pingdatasync-admin
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        class: pingdatasync-server
        role: pingdatasync
      name: pingdatasync
    spec:
      containers:
      - env:
        - name: ROOT_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: root-user-password
              name: pingdatasync-passwords
        - name: EXT_PD_SYNC_BIND_DN_PASSWORD
          valueFrom:
            secretKeyRef:
              key: EXT_PD_SYNC_BIND_DN_PASSWORD
              name: pingdatasync-passwords
        - name: EXT_PD_ADMIN_BIND_DN_PASSWORD
          valueFrom:
            secretKeyRef:
              key: EXT_PD_ADMIN_BIND_DN_PASSWORD
              name: pingdatasync-passwords
        - name: P1AS_PD_SYNC_BIND_DN_PASSWORD
          valueFrom:
            secretKeyRef:
              key: root-user-password
              name: pingdirectory-passwords
        - name: P1AS_PD_LDAP_PORT
          valueFrom:
            configMapKeyRef:
              key: LDAP_PORT
              name: pingdirectory-environment-variables
        - name: P1AS_PD_LDAPS_PORT
          valueFrom:
            configMapKeyRef:
              key: LDAPS_PORT
              name: pingdirectory-environment-variables
        - name: P1AS_PD_ADMIN_BIND_DN
          valueFrom:
            configMapKeyRef:
              key: ADMIN_BIND_DN
              name: pingdirectory-environment-variables
        - name: P1AS_PD_SYNC_BIND_DN
          valueFrom:
            configMapKeyRef:
              key: SYNC_BIND_DN
              name: pingdirectory-environment-variables
        - name: PINGDATASYNC_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: PINGDATASYNC_POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: pingdatasync-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdatasync/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - /opt/liveness.sh
          failureThreshold: 5
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingdatasync
        ports:
        - containerPort: 1389
          name: ldap
        - containerPort: 1636
          name: ldaps
        - containerPort: 1443
          name: https
        readinessProbe:
          exec:
            command:
            - /opt/readiness.sh
          failureThreshold: 5
          initialDelaySeconds: 90
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "2"
            memory: 4Gi
          requests:
            cpu: "2"
            memory: 4Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/secrets
          name: pingdatasync-passwords
          readOnly: true
        - mountPath: /opt/in/instance/conf/PingDirectory.lic
          name: pingdirectory-license
          subPath: PingDirectory.lic
      initContainers:
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingdatasync-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingdatasync-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /wait-for-pds.sh
        env:
        - name: P1AS_PD_LDAP_PORT
          valueFrom:
            configMapKeyRef:
              key: LDAP_PORT
              name: pingdirectory-environment-variables
        - name: P1AS_PD_LDAPS_PORT
          valueFrom:
            configMapKeyRef:
              key: LDAPS_PORT
              name: pingdirectory-environment-variables
        envFrom:
        - configMapRef:
            name: pingdatasync-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-pds
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingdatasync-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdatasync-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-pds.sh
          name: pingdatasync-init
          subPath: wait-for-pds.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingdatasync-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingdatasync-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingdatasync-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingdatasync-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdatasync-init
          subPath: logger.lib.sh
      securityContext:
        fsGroup: 9999
      serviceAccountName: ping-serviceaccount
      terminationGracePeriodSeconds: 300
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingdatasync-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: out-dir
        persistentVolumeClaim:
          claimName: out-dir
      - name: pingdatasync-passwords
        secret:
          defaultMode: 288
          optional: true
          secretName: pingdatasync-passwords
      - name: pingdirectory-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingdirectory-license
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: ping-cloud
        role: pingdatasync
      name: out-dir
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 20Gi
      storageClassName: pingdatasync-gp3
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    class: pingdirectory-server
    role: pingdirectory
  name: pingdirectory
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  replicas: 3
  selector:
    matchLabels:
      app: ping-cloud
      class: pingdirectory-server
      role: pingdirectory
  serviceName: pingdirectory
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        class: pingdirectory-server
        entitled-app: "true"
        role: pingdirectory
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: pingidentity.com/pd
                operator: In
                values:
                - "true"
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingdirectory
              topologyKey: topology.kubernetes.io/zone
            weight: 1
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: role
                operator: In
                values:
                - pingdirectory
            topologyKey: kubernetes.io/hostname
      containers:
      - env:
        - name: P14C_ENVIRONMENT_ID
          valueFrom:
            secretKeyRef:
              key: P14C_ENVIRONMENT_ID
              name: pingdirectory-passwords
        - name: P14C_CLIENT_ID
          valueFrom:
            secretKeyRef:
              key: P14C_CLIENT_ID
              name: pingdirectory-passwords
        - name: P14C_CLIENT_SECRET
          valueFrom:
            secretKeyRef:
              key: P14C_CLIENT_SECRET
              name: pingdirectory-passwords
        - name: ROOT_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: root-user-password
              name: pingdirectory-passwords
        - name: DMANAGER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: DMANAGER_PASSWORD
              name: pingdirectory-dmanager-password
        - name: PF_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_ADMIN_USER_PASSWORD
              name: pingcommon-passwords
        - name: PF_LDAP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_LDAP_PASSWORD
              name: pingcommon-passwords
        - name: ACME_CERT_KEYSTORE_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ACME_CERT_KEYSTORE_PASSWORD
              name: pingcommon-passwords
        - name: DA_OAUTH_TOKEN_VALIDATOR_SECRET
          valueFrom:
            secretKeyRef:
              key: DA_OAUTH_TOKEN_VALIDATOR_SECRET
              name: pingcommon-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - /opt/staging/hooks/86-pre-stop.sh
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/86-liveness.sh
          failureThreshold: 3
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingdirectory
        ports:
        - containerPort: 1389
          name: ldap
        - containerPort: 1636
          name: ldaps
        - containerPort: 1443
          name: https
        - containerPort: 8989
          name: repl
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/85-readiness.sh
          failureThreshold: 3
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            memory: 4Gi
          requests:
            cpu: "2"
            memory: 4Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        startupProbe:
          exec:
            command:
            - sh
            - -c
            - echo 'Finished delaying PingDirectory by 180s using startupProbe'
          failureThreshold: 100
          initialDelaySeconds: 180
          periodSeconds: 5
          timeoutSeconds: 5
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /opt/staging/topology.json
          name: data-dir
          subPath: topology.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /usr/local/secrets
          name: pingdirectory-passwords
          readOnly: true
        - mountPath: /usr/local/secrets/certs
          name: acme-tls-cert
          readOnly: true
        - mountPath: /opt/in/instance/PingDirectory.lic
          name: pingdirectory-license
          subPath: PingDirectory.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /usr/local/secrets/truststore_certs
          name: pingdirectory-truststore-certs
          readOnly: true
      - args:
        - --statsd.mapping-config=/tmp/mapping/pingdirectory-statsd-mapping.yml
        - --statsd.listen-udp=:8125
        - --web.listen-address=:9102
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/prom/statsd-exporter:v0.14.1
        name: pingdirectory-statsd-exporter
        ports:
        - containerPort: 9102
          protocol: TCP
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8125
          protocol: UDP
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 100Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /tmp/mapping/
          name: pingdirectory-statsd-mapping
          readOnly: false
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingdirectory
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingdirectory-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdirectory-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingdirectory-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingdirectory-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingdirectory-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingdirectory-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingdirectory-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdirectory-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingdirectory
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      - command:
        - sh
        - -c
        - echo "kms init container"
        envFrom:
        - configMapRef:
            name: pingdirectory-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: kms-init-container
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /utils.lib.sh
          name: pingdirectory-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingdirectory-init
          subPath: logger.lib.sh
      securityContext:
        fsGroup: 9999
      serviceAccount: ping-serviceaccount
      terminationGracePeriodSeconds: 300
      tolerations:
      - effect: NoSchedule
        key: pingidentity.com/pd-only
        operator: Equal
        value: "true"
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingdirectory-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: out-dir
        persistentVolumeClaim:
          claimName: out-dir
      - name: pingdirectory-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingdirectory-license
      - name: pingdirectory-passwords
        secret:
          defaultMode: 256
          optional: true
          secretName: pingdirectory-passwords
      - name: acme-tls-cert
        secret:
          defaultMode: 256
          optional: true
          secretName: acme-tls-cert
      - configMap:
          name: pingdirectory-statsd-mapping
        name: pingdirectory-statsd-mapping
      - name: pingdirectory-truststore-certs
        secret:
          defaultMode: 256
          optional: true
          secretName: pingdirectory-truststore-certs
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: ping-cloud
        class: pingdirectory-server
        role: pingdirectory
      name: out-dir
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 40Gi
      storageClassName: pingdirectory-gp3
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingfederate-cluster
    role: pingfederate-engine
  name: pingfederate
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  selector:
    matchLabels:
      app: ping-cloud
      role: pingfederate-engine
  serviceName: pingfederate
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingfederate-cluster
        pod-reaper: enabled
        role: pingfederate-engine
      name: pingfederate-engine
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: role
                  operator: In
                  values:
                  - pingfederate-engine
              topologyKey: topology.kubernetes.io/zone
            weight: 1
      containers:
      - env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: pingcloud-radsecproxy-environment-variables
        - configMapRef:
            name: pingfederate-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/grp-radiusproxy/dev:v1.19-release-branch-latest
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 15
          periodSeconds: 20
          successThreshold: 1
          tcpSocket:
            port: 2083
          timeoutSeconds: 3
        name: pingcloud-radsecproxy
        ports:
        - containerPort: 2083
        readinessProbe:
          failureThreshold: 3
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 2083
          timeoutSeconds: 3
        resources:
          limits:
            cpu: 400m
            memory: 500Mi
          requests:
            cpu: 200m
            memory: 200Mi
        volumeMounts:
        - mountPath: /usr/local/secrets/certs
          name: acme-tls-cert
          readOnly: true
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_ENGINE
        - name: AUTHENTICATION_MODE
          value: none
        - name: PF_DNS_PING_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: PF_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_ADMIN_USER_PASSWORD
              name: pingcommon-passwords
        - name: PF_LDAP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_LDAP_PASSWORD
              name: pingcommon-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        envFrom:
        - configMapRef:
            name: pingfederate-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingfederate/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        lifecycle:
          preStop:
            exec:
              command:
              - sh
              - -c
              - sleep 5
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pf-engine-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingfederate
        ports:
        - containerPort: 9031
        - containerPort: 8080
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pf-engine-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2
            memory: 4Gi
          requests:
            cpu: 2
            memory: 4Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/staging/native-s3-ping.jar
          name: data-dir
          subPath: native-s3-ping.jar
        - mountPath: /opt/in/instance/server/default/conf/pingfederate.lic
          name: pingfederate-license
          subPath: pingfederate.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /etc/podinfo
          name: podinfo
        - mountPath: /opt/staging/solutions_artifacts
          name: data-dir
          subPath: solutions_artifacts
      - env:
        - name: SERVICE_SHORTNAME
          value: pf
        - name: SERVICE_PORT
          value: "9031"
        - name: REPEAT_SEC
          value: "10"
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/prometheus-json-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingfederate-heartbeat-exporter
        ports:
        - containerPort: 8079
          name: pf-heartbeat
          protocol: TCP
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 300Mi
        securityContext:
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/config.yml
          name: pf-exporter-config
          subPath: config.yml
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingfederate-cluster pingdirectory
        envFrom:
        - configMapRef:
            name: pingfederate-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingfederate-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingfederate-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingfederate-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingfederate-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingfederate-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - args:
        - while ! kubectl get secret $(SECRET_NAME); do echo "Waiting for secret $(SECRET_NAME).
          CTRL-C to exit."; sleep 5; done
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: wait-for-tls-secret
        - name: SECRET_NAME
          value: acme-tls-cert
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-tls-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      - command:
        - python3
        - -u
        - /app/pingfederate_p1_init.py
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/p14c-integration/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingfederate-p14c-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/staging
          name: data-dir
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingfederate-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingfederate-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingfederate-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingfederate-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingfederate-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingfederate
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingfederate-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      securityContext:
        fsGroup: 9999
      serviceAccountName: pingcloud-radsecproxy-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - name: acme-tls-cert
        secret:
          defaultMode: 256
          optional: true
          secretName: acme-tls-cert
      - downwardAPI:
          items:
          - fieldRef:
              fieldPath: metadata.labels
            path: labels
          - fieldRef:
              fieldPath: metadata.annotations
            path: annotations
          - path: cpu_limit
            resourceFieldRef:
              containerName: pingfederate
              divisor: 1m
              resource: limits.cpu
          - path: cpu_request
            resourceFieldRef:
              containerName: pingfederate
              divisor: 1m
              resource: requests.cpu
        name: podinfo
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingfederate-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: pingfederate-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingfederate-license
      - configMap:
          defaultMode: 420
          name: pf-exporter-config
        name: pf-exporter-config
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app: ping-cloud
    cluster: pingfederate-cluster
    role: pingfederate-admin
  name: pingfederate-admin
  namespace: ping-cloud
spec:
  podManagementPolicy: OrderedReady
  replicas: 1
  selector:
    matchLabels:
      app: ping-cloud
      role: pingfederate-admin
  serviceName: pingfederate-admin
  template:
    metadata:
      annotations:
        lastUpdateReason: NA
      labels:
        app: ping-cloud
        cluster: pingfederate-cluster
        entitled-app: "true"
        pod-reaper: enabled
        role: pingfederate-admin
      name: pingfederate-admin
    spec:
      containers:
      - env:
        - name: OPERATIONAL_MODE
          value: CLUSTERED_CONSOLE
        - name: PF_DNS_PING_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: PF_LDAP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_LDAP_PASSWORD
              name: pingcommon-passwords
        - name: PF_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_ADMIN_USER_PASSWORD
              name: pingcommon-passwords
        - name: PC_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PC_ADMIN_USER_PASSWORD
              name: pingcommon-passwords
        - name: PA_ADMIN_USER_USERNAME
          valueFrom:
            configMapKeyRef:
              key: PA_ADMIN_USER_USERNAME
              name: pingaccess-admin-environment-variables
        - name: PA_ADMIN_USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PA_ADMIN_USER_PASSWORD
              name: pingaccess-passwords
        - name: DA_OAUTH_TOKEN_VALIDATOR_SECRET
          valueFrom:
            secretKeyRef:
              key: DA_OAUTH_TOKEN_VALIDATOR_SECRET
              name: pingcommon-passwords
        - name: NEW_RELIC_CONFIG_FILE
          value: /opt/shared-dir/newrelic.yml
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingfederate/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        livenessProbe:
          exec:
            command:
            - /opt/staging/hooks/99-pf-admin-liveness.sh
          failureThreshold: 3
          initialDelaySeconds: 90
          periodSeconds: 30
          timeoutSeconds: 5
        name: pingfederate-admin
        ports:
        - containerPort: 9999
          name: pf-admin
        readinessProbe:
          exec:
            command:
            - /opt/staging/hooks/85-pf-admin-readiness.sh
          failureThreshold: 3
          initialDelaySeconds: 90
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 1
            memory: 2Gi
          requests:
            cpu: 1
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /home/ping/.ssh
          name: ssh-dir
        - mountPath: /opt/shared-dir
          name: shared-dir
        - mountPath: /opt/staging/topology/descriptor.json
          name: topology-descriptor
          subPath: descriptor.json
        - mountPath: /usr/local/bin/kubectl
          name: data-dir
          subPath: kubectl
        - mountPath: /opt/staging/hooks/logger.lib.sh
          name: data-dir
          subPath: logger.lib.sh
        - mountPath: /opt/staging/jmx_prometheus_javaagent-0.14.0.jar
          name: data-dir
          subPath: jmx_prometheus_javaagent-0.14.0.jar
        - mountPath: /opt/staging/newrelic.jar
          name: data-dir
          subPath: newrelic.jar
        - mountPath: /opt/staging/native-s3-ping.jar
          name: data-dir
          subPath: native-s3-ping.jar
        - mountPath: /opt/out
          name: out-dir
        - mountPath: /opt/in/instance/server/default/conf/pingfederate.lic
          name: pingfederate-license
          subPath: pingfederate.lic
        - mountPath: /opt/staging/ds_env_vars
          name: data-dir
          subPath: ds_env_vars
        - mountPath: /opt/staging/p14c_env_vars
          name: data-dir
          subPath: p14c_env_vars
        - mountPath: /opt/staging/solutions_artifacts
          name: data-dir
          subPath: solutions_artifacts
        - mountPath: /etc/podinfo
          name: podinfo
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingdirectory
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingfederate-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingfederate-init
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingfederate-init
          subPath: wait-for-services.sh
      - command:
        - /get_ssm_env_vars.sh
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/aws-cli:2.0.17
        imagePullPolicy: IfNotPresent
        name: pingfederate-discovery-service
        volumeMounts:
        - mountPath: /config
          name: data-dir
        - mountPath: /get_ssm_env_vars.sh
          name: discovery-service
          subPath: get_ssm_env_vars.sh
      - command:
        - python3
        - -u
        - /app/pingfederate_p1_init.py
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/p14c-integration/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingfederate-p14c-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/staging
          name: data-dir
      - command:
        - /copy-dependencies.sh
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        - configMapRef:
            name: pingcommon-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        imagePullPolicy: IfNotPresent
        name: pingfederate-init
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /.ssh
          name: ssh-dir
        - mountPath: /data
          name: data-dir
        - mountPath: /id_rsa
          name: ssh-id-key-secret
          subPath: id_rsa
        - mountPath: /known_hosts
          name: known-hosts-config
          subPath: known_hosts
        - mountPath: /copy-dependencies.sh
          name: pingfederate-init
          subPath: copy-dependencies.sh
        - mountPath: /utils.lib.sh
          name: pingfederate-init
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingfederate-init
          subPath: logger.lib.sh
      - env:
        - name: NEW_RELIC_APP_NAME
          value: pingfederate-admin
        - name: METADATA_EP_URL
          value: http://metadata:5000
        - name: NEW_RELIC_CONFIG_FILEPATH
          value: /opt/shared-dir/newrelic.yml
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        - secretRef:
            name: newrelic-license-key
            optional: false
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/newrelic-tags-exporter/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: newrelic-tags-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /opt/shared-dir
          name: shared-dir
      securityContext:
        fsGroup: 9999
      serviceAccountName: pingfederate-admin-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: discovery-service
        name: discovery-service
      - downwardAPI:
          items:
          - fieldRef:
              fieldPath: metadata.labels
            path: labels
          - fieldRef:
              fieldPath: metadata.annotations
            path: annotations
          - path: cpu_limit
            resourceFieldRef:
              containerName: pingfederate-admin
              divisor: 1m
              resource: limits.cpu
          - path: cpu_request
            resourceFieldRef:
              containerName: pingfederate-admin
              divisor: 1m
              resource: requests.cpu
        name: podinfo
      - emptyDir: {}
        name: ssh-dir
      - emptyDir: {}
        name: shared-dir
      - emptyDir: {}
        name: data-dir
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingfederate-init
      - configMap:
          defaultMode: 420
          name: topology-descriptor
          optional: true
        name: topology-descriptor
      - name: ssh-id-key-secret
        secret:
          defaultMode: 256
          optional: true
          secretName: ssh-id-key-secret
      - configMap:
          defaultMode: 420
          name: known-hosts-config
          optional: true
        name: known-hosts-config
      - name: out-dir
        persistentVolumeClaim:
          claimName: out-dir
      - name: pingfederate-license
        secret:
          defaultMode: 256
          optional: true
          secretName: pingfederate-license
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      labels:
        app: ping-cloud
      name: out-dir
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 20Gi
      storageClassName: pingfederate-gp3
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: prometheus
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus
  serviceName: prometheus
  template:
    metadata:
      labels:
        app: prometheus
    spec:
      containers:
      - args:
        - --config.file=/etc/prometheus/prometheus.yml
        - --storage.tsdb.retention.time=$(PROMETHEUS_RETENTION_TIME)
        - --web.enable-remote-write-receiver
        - --enable-feature=memory-snapshot-on-shutdown
        - --enable-feature=expand-external-labels
        - --enable-feature=memory-snapshot-on-shutdown
        env:
        - name: PROMETHEUS_RETENTION_TIME
          valueFrom:
            configMapKeyRef:
              key: PROMETHEUS_RETENTION_TIME
              name: prometheus-environment-variables-89d8mghhg8
        envFrom:
        - configMapRef:
            name: prometheus-environment-variables-89d8mghhg8
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/prom/prometheus:v2.47.0
        name: prometheus
        ports:
        - containerPort: 9090
        resources:
          limits:
            cpu: 1500m
            memory: 5500Mi
          requests:
            cpu: 100m
            memory: 2000Mi
        volumeMounts:
        - mountPath: /etc/prometheus/
          name: prometheus-config-volume
        - mountPath: /prometheus/data
          name: prometheus-storage-volume
        - mountPath: /etc/prometheus/alert-rules.d
          name: alertsconfig
      serviceAccountName: prometheus
      volumes:
      - configMap:
          name: prometheus-config
        name: prometheus-config-volume
      - configMap:
          name: prom-alerts-4b8bg79c7b
        name: alertsconfig
  volumeClaimTemplates:
  - metadata:
      labels:
        app: prometheus
      name: prometheus-storage-volume
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 1Mi
      storageClassName: efs
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-periodic-backup
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
        spec:
          affinity:
            podAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: statefulset.kubernetes.io/pod-name
                    operator: In
                    values:
                    - pingaccess-admin-0
                topologyKey: kubernetes.io/hostname
          containers:
          - command:
            - /opt/in/backup-archive-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingaccess-admin-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingaccess-backup
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/backup-archive-data.sh
              name: pingaccess-backup
              subPath: backup-archive-data.sh
          restartPolicy: OnFailure
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingaccess-backup
            name: pingaccess-backup
  schedule: 30 * * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was-periodic-backup
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
        spec:
          affinity:
            podAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: statefulset.kubernetes.io/pod-name
                    operator: In
                    values:
                    - pingaccess-was-admin-0
                topologyKey: kubernetes.io/hostname
          containers:
          - command:
            - /opt/in/backup-archive-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingaccess-was-admin-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingaccess-was/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingaccess-was-backup
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/backup-archive-data.sh
              name: pingaccess-was-backup
              subPath: backup-archive-data.sh
          restartPolicy: OnFailure
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingaccess-was-backup
            name: pingaccess-was-backup
  schedule: 30 * * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-backup
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
            role: pingdirectory
        spec:
          containers:
          - command:
            - /opt/in/backup-cronjob.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            - name: PING_CLOUD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingdirectory-backup
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/backup-cronjob.sh
              name: backup-cronjob-script
              subPath: backup-cronjob.sh
            - mountPath: /opt/in/backup-ops.sh
              name: backup-ops-script
              subPath: backup-ops.sh
            - mountPath: /opt/in/hooks/logger.lib.sh
              name: pingdirectory-init
              subPath: logger.lib.sh
          restartPolicy: OnFailure
          securityContext:
            fsGroup: 9999
          serviceAccountName: pingdirectory-ops-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingdirectory-backup-cronjob
            name: backup-cronjob-script
          - configMap:
              defaultMode: 365
              items:
              - key: backup-ops.sh
                path: backup-ops.sh
              name: pingdirectory-backup-ops-template-files
            name: backup-ops-script
          - configMap:
              defaultMode: 365
              name: pingcommon-init
            name: pingdirectory-init
  schedule: 30 */6 * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-csd-upload
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
            role: pingdirectory
        spec:
          containers:
          - command:
            - /opt/in/upload-csd-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingdirectory-periodic-csd-upload
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/upload-csd-data.sh
              name: pingdirectory-periodic-csd-upload
              subPath: upload-csd-data.sh
          restartPolicy: OnFailure
          securityContext:
            fsGroup: 9999
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingdirectory-periodic-csd-upload
            name: pingdirectory-periodic-csd-upload
  schedule: 0 * * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-export-ldif
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
            role: pingdirectory
        spec:
          containers:
          - command:
            - /opt/in/export-ldif-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingdirectory-periodic-export-ldif
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/export-ldif-data.sh
              name: pingdirectory-export-ldif
              subPath: export-ldif-data.sh
          restartPolicy: OnFailure
          securityContext:
            fsGroup: 9999
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingdirectory-export-ldif
            name: pingdirectory-export-ldif
  schedule: 0 0 * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-periodic-monitor-upload
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
        role: pingdirectory
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
            role: pingdirectory
        spec:
          containers:
          - command:
            - /opt/in/monitor-log-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingdirectory-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingdirectory/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingdirectory-periodic-monitor-upload
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/monitor-log-data.sh
              name: pingdirectory-periodic-monitor-log-upload
              subPath: monitor-log-data.sh
          restartPolicy: OnFailure
          securityContext:
            fsGroup: 9999
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingdirectory-periodic-monitor-log-upload
            name: pingdirectory-periodic-monitor-log-upload
  schedule: 0 0 * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: batch/v1
kind: CronJob
metadata:
  labels:
    app: ping-cloud
  name: pingfederate-periodic-backup
  namespace: ping-cloud
spec:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      labels:
        app: ping-cloud
    spec:
      backoffLimit: 0
      template:
        metadata:
          labels:
            app: ping-cloud
        spec:
          affinity:
            podAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: statefulset.kubernetes.io/pod-name
                    operator: In
                    values:
                    - pingfederate-admin-0
                topologyKey: kubernetes.io/hostname
          containers:
          - command:
            - /opt/in/backup-archive-data.sh
            env:
            - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
              value: "true"
            envFrom:
            - configMapRef:
                name: pingfederate-admin-environment-variables
            - configMapRef:
                name: pingcommon-environment-variables
            image: public.ecr.aws/r2h3l6e4/pingcloud-apps/pingfederate/dev:v1.19-release-branch-latest
            imagePullPolicy: Always
            name: pingfederate-backup
            securityContext:
              allowPrivilegeEscalation: false
              runAsGroup: 9999
              runAsNonRoot: true
              runAsUser: 9031
            volumeMounts:
            - mountPath: /opt/in/backup-archive-data.sh
              name: pingfederate-backup
              subPath: backup-archive-data.sh
          restartPolicy: OnFailure
          serviceAccount: ping-serviceaccount
          volumes:
          - configMap:
              defaultMode: 365
              name: pingfederate-backup
            name: pingfederate-backup
  schedule: 30 * * * *
  startingDeadlineSeconds: 90
  successfulJobsHistoryLimit: 0
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app.kubernetes.io/instance: opensearch-cluster-hot
    app.kubernetes.io/name: opensearch
  name: opensearch-cluster-hot-pdb
  namespace: elastic-stack-logging
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensearch-cluster-hot
      app.kubernetes.io/name: opensearch
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-controller
  namespace: kube-system
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app: ebs-csi-controller
      app.kubernetes.io/name: aws-ebs-csi-driver
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: ping-cloud
  name: pa-engine-pdb
  namespace: ping-cloud
spec:
  minAvailable: 30%
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-engine
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: ping-cloud
  name: pa-was-engine-pdb
  namespace: ping-cloud
spec:
  minAvailable: 30%
  selector:
    matchLabels:
      app: ping-cloud
      role: pingaccess-was-engine
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pd-pdb
  namespace: ping-cloud
spec:
  minAvailable: 30%
  selector:
    matchLabels:
      app: ping-cloud
      class: pingdirectory-server
      role: pingdirectory
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: ping-cloud
  name: pf-engine-pdb
  namespace: ping-cloud
spec:
  minAvailable: 30%
  selector:
    matchLabels:
      app: ping-cloud
      role: pingfederate-engine
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: ping-cloud
  name: pingdelegator-pdb
  namespace: ping-cloud
spec:
  minAvailable: 30%
  selector:
    matchLabels:
      app: ping-cloud
      role: pingdelegator
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    k8s-app: metrics-server
  name: v1beta1.metrics.k8s.io
spec:
  group: metrics.k8s.io
  groupPriorityMinimum: 100
  insecureSkipTLSVerify: true
  service:
    name: metrics-server
    namespace: kube-system
  version: v1beta1
  versionPriority: 100
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: cloudwatch-agent
  namespace: amazon-cloudwatch
spec:
  selector:
    matchLabels:
      name: cloudwatch-agent
  template:
    metadata:
      labels:
        name: cloudwatch-agent
    spec:
      containers:
      - env:
        - name: HOST_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: HOST_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: K8S_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: CI_VERSION
          value: k8s/1.0.1
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/amazon/cloudwatch-agent:1.300026.3b189
        name: cloudwatch-agent
        resources:
          limits:
            cpu: 200m
            memory: 200Mi
          requests:
            cpu: 200m
            memory: 200Mi
        volumeMounts:
        - mountPath: /etc/cwagentconfig
          name: cwagentconfig
        - mountPath: /rootfs
          name: rootfs
          readOnly: true
        - mountPath: /var/run/docker.sock
          name: dockersock
          readOnly: true
        - mountPath: /var/lib/docker
          name: varlibdocker
          readOnly: true
        - mountPath: /run/containerd/containerd.sock
          name: containerdsock
          readOnly: true
        - mountPath: /sys
          name: sys
          readOnly: true
        - mountPath: /dev/disk
          name: devdisk
          readOnly: true
      priorityClassName: high-priority-apps-to-avoid-pending-state
      serviceAccountName: cloudwatch-agent
      terminationGracePeriodSeconds: 60
      volumes:
      - configMap:
          name: cwagentconfig
        name: cwagentconfig
      - hostPath:
          path: /
        name: rootfs
      - hostPath:
          path: /var/run/docker.sock
        name: dockersock
      - hostPath:
          path: /var/lib/docker
        name: varlibdocker
      - hostPath:
          path: /run/containerd/containerd.sock
        name: containerdsock
      - hostPath:
          path: /sys
        name: sys
      - hostPath:
          path: /dev/disk/
        name: devdisk
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    k8s-app: fluent-bit
  name: fluent-bit
  namespace: elastic-stack-logging
spec:
  selector:
    matchLabels:
      k8s-app: fluent-bit
  template:
    metadata:
      annotations:
        prometheus.io/path: /api/v1/metrics/prometheus
        prometheus.io/port: "2020"
        prometheus.io/scheme: http
        prometheus.io/scrape: "true"
      labels:
        k8s-app: fluent-bit
    spec:
      containers:
      - env:
        - name: READ_FROM_HEAD
          valueFrom:
            configMapKeyRef:
              key: read.head
              name: cluster-info
        - name: READ_FROM_TAIL
          valueFrom:
            configMapKeyRef:
              key: read.tail
              name: cluster-info
        - name: HOST_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: FLB_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: log.level
              name: cluster-info
        - name: NR_CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: newrelic_cluster_name
              name: cluster-info
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/fluent/fluent-bit:2.1.8
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /api/v1/health
            port: 2020
          initialDelaySeconds: 20
          periodSeconds: 180
          timeoutSeconds: 5
        name: fluent-bit
        ports:
        - containerPort: 2020
          name: metrics
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /
            port: 2020
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 1Gi
          requests:
            cpu: 200m
            memory: 100Mi
        securityContext:
          capabilities:
            add:
            - CAP_FOWNER
            drop:
            - ALL
        volumeMounts:
        - mountPath: /fluent-bit/state
          name: fluentbitstate
        - mountPath: /var/log
          name: varlog
          readOnly: true
        - mountPath: /var/lib/docker/containers
          name: varlibdockercontainers
          readOnly: true
        - mountPath: /fluent-bit/etc/fluent-bit.conf
          name: fluent-bit-config
          subPath: fluent-bit.conf
        - mountPath: /fluent-bit/etc/parsers.conf
          name: fluent-bit-parsers
          subPath: parsers.conf
        - mountPath: /fluent-bit/etc/pipelines_cw.conf
          name: fluent-bit-pipeline-cw
          subPath: cw.conf
        - mountPath: /fluent-bit/etc/pipelines_elk.conf
          name: fluent-bit-pipeline-elk
          subPath: elk.conf
        - mountPath: /fluent-bit/etc/pipelines_nr.conf
          name: fluent-bit-pipeline-nr
          subPath: nr.conf
        - mountPath: /fluent-bit/etc/pipelines_s3.conf
          name: fluent-bit-pipeline-s3
          subPath: s3.conf
        - mountPath: /fluent-bit/etc/pipelines_customer.conf
          name: fluent-bit-pipeline-customer
          subPath: customer.conf
        - mountPath: /run/log/journal
          name: runlogjournal
          readOnly: true
        - mountPath: /var/log/dmesg
          name: dmesg
          readOnly: true
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: true
      priorityClassName: high-priority-apps-to-avoid-pending-state
      serviceAccountName: fluent-bit
      terminationGracePeriodSeconds: 10
      tolerations:
      - effect: NoSchedule
        key: node-role.kubernetes.io/controlplane
        operator: Exists
      - effect: NoExecute
        operator: Exists
      - effect: NoSchedule
        operator: Exists
      volumes:
      - hostPath:
          path: /fluent-bit/state
        name: fluentbitstate
      - hostPath:
          path: /var/log
        name: varlog
      - hostPath:
          path: /var/lib/docker/containers
        name: varlibdockercontainers
      - configMap:
          name: fluent-bit-config-gbbk7dtckh
        name: fluent-bit-config
      - configMap:
          name: fluent-bit-parsers-9kt7db5k5c
        name: fluent-bit-parsers
      - configMap:
          name: fluent-bit-pipeline-cw-k65k95kkfc
        name: fluent-bit-pipeline-cw
      - configMap:
          name: fluent-bit-pipeline-elk-gtmf85g8k8
        name: fluent-bit-pipeline-elk
      - configMap:
          name: fluent-bit-pipeline-nr-ff7c55h5fb
        name: fluent-bit-pipeline-nr
      - configMap:
          name: fluent-bit-pipeline-s3-5k42bb26bf
        name: fluent-bit-pipeline-s3
      - configMap:
          name: fluent-bit-pipeline-customer-h29h8f4cfh
        name: fluent-bit-pipeline-customer
      - hostPath:
          path: /run/log/journal
        name: runlogjournal
      - hostPath:
          path: /var/log/dmesg
        name: dmesg
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs-csi-node
  namespace: kube-system
spec:
  selector:
    matchLabels:
      app: ebs-csi-node
      app.kubernetes.io/name: aws-ebs-csi-driver
  template:
    metadata:
      labels:
        app: ebs-csi-node
        app.kubernetes.io/name: aws-ebs-csi-driver
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: eks.amazonaws.com/compute-type
                operator: NotIn
                values:
                - fargate
      containers:
      - args:
        - node
        - --endpoint=$(CSI_ENDPOINT)
        - --logging-format=text
        - --v=2
        env:
        - name: CSI_ENDPOINT
          value: unix:/csi/csi.sock
        - name: CSI_NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        image: public.ecr.aws/ebs-csi-driver/aws-ebs-csi-driver:v1.20.0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: healthz
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 3
        name: ebs-plugin
        ports:
        - containerPort: 9808
          name: healthz
          protocol: TCP
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          privileged: true
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /var/lib/kubelet
          mountPropagation: Bidirectional
          name: kubelet-dir
        - mountPath: /csi
          name: plugin-dir
        - mountPath: /dev
          name: device-dir
      - args:
        - --csi-address=$(ADDRESS)
        - --kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)
        - --v=2
        env:
        - name: ADDRESS
          value: /csi/csi.sock
        - name: DRIVER_REG_SOCK_PATH
          value: /var/lib/kubelet/plugins/ebs.csi.aws.com/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/node-driver-registrar:v2.8.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        livenessProbe:
          exec:
            command:
            - /csi-node-driver-registrar
            - --kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)
            - --mode=kubelet-registration-probe
          initialDelaySeconds: 30
          periodSeconds: 90
          timeoutSeconds: 15
        name: node-driver-registrar
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: plugin-dir
        - mountPath: /registration
          name: registration-dir
        - mountPath: /var/lib/kubelet/plugins/ebs.csi.aws.com/
          name: probe-dir
      - args:
        - --csi-address=/csi/csi.sock
        image: public.ecr.aws/eks-distro/kubernetes-csi/livenessprobe:v2.10.0-eks-1-27-7
        imagePullPolicy: IfNotPresent
        name: liveness-probe
        resources:
          limits:
            memory: 256Mi
          requests:
            cpu: 20m
            memory: 40Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: plugin-dir
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-node-critical
      securityContext:
        fsGroup: 0
        runAsGroup: 0
        runAsNonRoot: false
        runAsUser: 0
      serviceAccountName: ebs-csi-node-sa
      tolerations:
      - operator: Exists
      volumes:
      - hostPath:
          path: /var/lib/kubelet
          type: Directory
        name: kubelet-dir
      - hostPath:
          path: /var/lib/kubelet/plugins/ebs.csi.aws.com/
          type: DirectoryOrCreate
        name: plugin-dir
      - hostPath:
          path: /var/lib/kubelet/plugins_registry/
          type: Directory
        name: registration-dir
      - hostPath:
          path: /dev
          type: Directory
        name: device-dir
      - emptyDir: {}
        name: probe-dir
  updateStrategy:
    rollingUpdate:
      maxUnavailable: 10%
    type: RollingUpdate
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    app.kubernetes.io/name: aws-efs-csi-driver
  name: efs-csi-node
  namespace: kube-system
spec:
  selector:
    matchLabels:
      app: efs-csi-node
      app.kubernetes.io/instance: kustomize
      app.kubernetes.io/name: aws-efs-csi-driver
  template:
    metadata:
      labels:
        app: efs-csi-node
        app.kubernetes.io/instance: kustomize
        app.kubernetes.io/name: aws-efs-csi-driver
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: eks.amazonaws.com/compute-type
                operator: NotIn
                values:
                - fargate
      containers:
      - args:
        - --endpoint=$(CSI_ENDPOINT)
        - --logtostderr
        - --v=2
        - --vol-metrics-opt-in=false
        - --vol-metrics-refresh-period=240
        - --vol-metrics-fs-rate-limit=5
        env:
        - name: CSI_ENDPOINT
          value: unix:/csi/csi.sock
        image: amazon/aws-efs-csi-driver:v1.5.7
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: healthz
          initialDelaySeconds: 10
          periodSeconds: 2
          timeoutSeconds: 3
        name: efs-plugin
        ports:
        - containerPort: 9809
          name: healthz
          protocol: TCP
        resources:
          limits:
            cpu: 40m
            memory: 300Mi
          requests:
            cpu: 20m
            memory: 200Mi
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /var/lib/kubelet
          mountPropagation: Bidirectional
          name: kubelet-dir
        - mountPath: /csi
          name: plugin-dir
        - mountPath: /var/run/efs
          name: efs-state-dir
        - mountPath: /var/amazon/efs
          name: efs-utils-config
        - mountPath: /etc/amazon/efs-legacy
          name: efs-utils-config-legacy
      - args:
        - --csi-address=$(ADDRESS)
        - --kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)
        - --v=2
        env:
        - name: ADDRESS
          value: /csi/csi.sock
        - name: DRIVER_REG_SOCK_PATH
          value: /var/lib/kubelet/plugins/efs.csi.aws.com/csi.sock
        - name: KUBE_NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        image: public.ecr.aws/eks-distro/kubernetes-csi/node-driver-registrar:v2.8.0-eks-1-27-3
        imagePullPolicy: IfNotPresent
        name: csi-driver-registrar
        resources:
          limits:
            cpu: 20m
            memory: 50Mi
          requests:
            cpu: 10m
            memory: 30Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: plugin-dir
        - mountPath: /registration
          name: registration-dir
      - args:
        - --csi-address=/csi/csi.sock
        - --health-port=9809
        - --v=2
        image: public.ecr.aws/eks-distro/kubernetes-csi/livenessprobe:v2.10.0-eks-1-27-3
        imagePullPolicy: IfNotPresent
        name: liveness-probe
        resources:
          limits:
            cpu: 20m
            memory: 50Mi
          requests:
            cpu: 10m
            memory: 30Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /csi
          name: plugin-dir
      dnsPolicy: ClusterFirst
      hostNetwork: true
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-node-critical
      securityContext:
        fsGroup: 0
        runAsGroup: 0
        runAsNonRoot: false
        runAsUser: 0
      serviceAccountName: efs-csi-node-sa
      tolerations:
      - operator: Exists
      volumes:
      - hostPath:
          path: /var/lib/kubelet
          type: Directory
        name: kubelet-dir
      - hostPath:
          path: /var/lib/kubelet/plugins/efs.csi.aws.com/
          type: DirectoryOrCreate
        name: plugin-dir
      - hostPath:
          path: /var/lib/kubelet/plugins_registry/
          type: Directory
        name: registration-dir
      - hostPath:
          path: /var/run/efs
          type: DirectoryOrCreate
        name: efs-state-dir
      - hostPath:
          path: /var/amazon/efs
          type: DirectoryOrCreate
        name: efs-utils-config
      - hostPath:
          path: /etc/amazon/efs
          type: DirectoryOrCreate
        name: efs-utils-config-legacy
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-controlplane
  namespace: newrelic
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: controlplane
      app.kubernetes.io/instance: nri-bundle
      app.kubernetes.io/name: newrelic-infrastructure
  template:
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/component: controlplane
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: newrelic-infrastructure
        nri-bundle.version: 5.0.4
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: node-role.kubernetes.io/control-plane
                operator: Exists
            - matchExpressions:
              - key: node-role.kubernetes.io/controlplane
                operator: Exists
            - matchExpressions:
              - key: node-role.kubernetes.io/etcd
                operator: Exists
            - matchExpressions:
              - key: node-role.kubernetes.io/controlplane
                operator: Exists
      containers:
      - env:
        - name: NRI_KUBERNETES_SINK_HTTP_PORT
          value: "8001"
        - name: NRI_KUBERNETES_CLUSTERNAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        - name: NRI_KUBERNETES_VERBOSE
          value: "false"
        - name: NRI_KUBERNETES_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRI_KUBERNETES_NODEIP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/nri-kubernetes/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: controlplane
        resources:
          limits:
            memory: 300M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /etc/newrelic-infra/nri-kubernetes.yml
          name: nri-kubernetes-config
          subPath: nri-kubernetes.yml
      - env:
        - name: NRI_KUBERNETES_VERBOSE
          value: "false"
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: NRIA_OVERRIDE_HOSTNAME_SHORT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: K8S_NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/k8s-events-forwarder:1.36.1
        imagePullPolicy: IfNotPresent
        name: forwarder
        ports:
        - containerPort: 8001
        resources:
          limits:
            memory: 300M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /var/db/newrelic-infra/data
          name: forwarder-tmpfs-data
        - mountPath: /var/db/newrelic-infra/user_data
          name: forwarder-tmpfs-user-data
        - mountPath: /tmp
          name: forwarder-tmpfs-tmp
        - mountPath: /etc/newrelic-infra.yml
          name: config
          subPath: newrelic-infra.yml
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: true
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      priorityClassName: high-priority-apps-to-avoid-pending-state
      serviceAccountName: nri-bundle-newrelic-infrastructure-controlplane
      tolerations:
      - effect: NoSchedule
        operator: Exists
      - effect: NoExecute
        operator: Exists
      volumes:
      - configMap:
          items:
          - key: nri-kubernetes.yml
            path: nri-kubernetes.yml
          name: nri-bundle-nrk8s-controlplane
        name: nri-kubernetes-config
      - emptyDir: {}
        name: forwarder-tmpfs-data
      - emptyDir: {}
        name: forwarder-tmpfs-user-data
      - emptyDir: {}
        name: forwarder-tmpfs-tmp
      - configMap:
          items:
          - key: newrelic-infra.yml
            path: newrelic-infra.yml
          name: nri-bundle-nrk8s-agent-controlplane
        name: config
  updateStrategy:
    rollingUpdate:
      maxUnavailable: 1
    type: RollingUpdate
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.2.0
    helm.sh/chart: newrelic-infrastructure-3.5.3
    nri-bundle.version: 5.0.4
  name: nri-bundle-nrk8s-kubelet
  namespace: newrelic
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: kubelet
      app.kubernetes.io/instance: nri-bundle
      app.kubernetes.io/name: newrelic-infrastructure
  template:
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/component: kubelet
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: newrelic-infrastructure
        nri-bundle.version: 5.0.4
    spec:
      containers:
      - env:
        - name: NRI_KUBERNETES_SINK_HTTP_PORT
          value: "8003"
        - name: NRI_KUBERNETES_CLUSTERNAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        - name: NRI_KUBERNETES_VERBOSE
          value: "false"
        - name: NRI_KUBERNETES_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRI_KUBERNETES_NODEIP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/nri-kubernetes/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: kubelet
        resources:
          limits:
            memory: 300M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /etc/newrelic-infra/nri-kubernetes.yml
          name: nri-kubernetes-config
          subPath: nri-kubernetes.yml
      - args:
        - newrelic-infra
        env:
        - name: NRI_KUBERNETES_VERBOSE
          value: "false"
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              key: NEW_RELIC_LICENSE_KEY
              name: newrelic-license-key
        - name: CLUSTER_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['CLUSTER_NAME']
        - name: NRIA_HOST
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: NRIA_OVERRIDE_HOSTNAME_SHORT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRI_KUBERNETES_NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: NRIA_CUSTOM_ATTRIBUTES
          value: '{"clusterName":"$(CLUSTER_NAME)"}'
        - name: NRIA_PASSTHROUGH_ENVIRONMENT
          value: KUBERNETES_SERVICE_HOST,KUBERNETES_SERVICE_PORT,CLUSTER_NAME,CADVISOR_PORT,NRK8S_NODE_NAME,KUBE_STATE_METRICS_URL,KUBE_STATE_METRICS_POD_LABEL,TIMEOUT,ETCD_TLS_SECRET_NAME,ETCD_TLS_SECRET_NAMESPACE,API_SERVER_SECURE_PORT,KUBE_STATE_METRICS_SCHEME,KUBE_STATE_METRICS_PORT,KUBE_STATE_METRICS_NAMESPACE,SCHEDULER_ENDPOINT_URL,ETCD_ENDPOINT_URL,CONTROLLER_MANAGER_ENDPOINT_URL,API_SERVER_ENDPOINT_URL,DISABLE_KUBE_STATE_METRICS,DISCOVERY_CACHE_TTL
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/newrelic/infrastructure-bundle:2.8.38
        imagePullPolicy: IfNotPresent
        name: agent
        ports:
        - containerPort: 8003
        resources:
          limits:
            memory: 300M
          requests:
            cpu: 100m
            memory: 150M
        securityContext:
          allowPrivilegeEscalation: true
          privileged: true
          readOnlyRootFilesystem: true
          runAsGroup: 0
          runAsNonRoot: false
          runAsUser: 0
        volumeMounts:
        - mountPath: /etc/newrelic-infra.yml
          name: config
          subPath: newrelic-infra.yml
        - mountPath: /etc/newrelic-infra/integrations.d/
          name: nri-integrations-cfg-volume
        - mountPath: /dev
          name: dev
        - mountPath: /var/run/docker.sock
          name: host-docker-socket
        - mountPath: /var/log
          name: log
        - mountPath: /host
          name: host-volume
          readOnly: true
        - mountPath: /var/db/newrelic-infra/data
          name: agent-tmpfs-data
        - mountPath: /var/db/newrelic-infra/user_data
          name: agent-tmpfs-user-data
        - mountPath: /tmp
          name: agent-tmpfs-tmp
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: false
      initContainers:
      - args:
        - 'kubectl get secret $(SECRET_NAME) && echo ''INFO: NR secret object found,
          skipping waiting for job completion.'' || kubectl wait --for=condition=Complete
          --timeout=$(WAIT_TIMEOUT_SEC)s job/$(JOB_NAME)'
        command:
        - /bin/sh
        - -c
        env:
        - name: WAIT_TIMEOUT_SEC
          value: "300"
        - name: JOB_NAME
          value: newrelic-license-secret-exporter
        - name: SECRET_NAME
          value: newrelic-license-key
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: wait-for-nr-license-secret
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
      priorityClassName: high-priority-apps-to-avoid-pending-state
      serviceAccountName: nri-bundle-newrelic-infrastructure
      tolerations:
      - effect: NoSchedule
        operator: Exists
      - effect: NoExecute
        operator: Exists
      volumes:
      - hostPath:
          path: /dev
        name: dev
      - hostPath:
          path: /var/run/docker.sock
        name: host-docker-socket
      - hostPath:
          path: /var/log
        name: log
      - hostPath:
          path: /
        name: host-volume
      - emptyDir: {}
        name: agent-tmpfs-data
      - emptyDir: {}
        name: agent-tmpfs-user-data
      - emptyDir: {}
        name: agent-tmpfs-tmp
      - configMap:
          items:
          - key: nri-kubernetes.yml
            path: nri-kubernetes.yml
          name: nri-bundle-nrk8s-kubelet
        name: nri-kubernetes-config
      - configMap:
          items:
          - key: newrelic-infra.yml
            path: newrelic-infra.yml
          name: nri-bundle-nrk8s-agent-kubelet
        name: config
      - configMap:
          name: nri-bundle-nrk8s-integrations-cfg
        name: nri-integrations-cfg-volume
  updateStrategy:
    rollingUpdate:
      maxUnavailable: 1
    type: RollingUpdate
---
apiVersion: argoproj.io/v1alpha1
kind: EventBus
metadata:
  name: default
  namespace: argo-events
spec:
  nats:
    native:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchLabels:
                  controller: eventbus-controller
                  eventbus-name: default
              topologyKey: kubernetes.io/hostname
            weight: 100
      auth: token
      containerTemplate:
        resources:
          requests:
            cpu: 10m
      metricsContainerTemplate:
        resources:
          requests:
            cpu: 10m
      replicas: 3
---
apiVersion: argoproj.io/v1alpha1
kind: EventSource
metadata:
  name: webhook
  namespace: argo-events
spec:
  service:
    ports:
    - name: notification
      port: 12999
      targetPort: 12999
    - name: prometheus
      port: 13000
      targetPort: 13000
  webhook:
    notification:
      endpoint: /notification
      method: POST
      port: "12999"
    prometheus:
      endpoint: /notification
      method: POST
      port: "13000"
---
apiVersion: argoproj.io/v1alpha1
kind: Sensor
metadata:
  name: prom-webhook
  namespace: argo-events
spec:
  dependencies:
  - eventName: prometheus
    eventSourceName: webhook
    filters:
      data:
      - path: body.alerts.0.labels.notifications_enabled
        type: string
        value:
        - "true"
    name: trigger-slack
    transform:
      jq: 'if (.body.alerts[0].status == "firing") then .body.emoji = ":exclamation:"
        else .body.emoji = ":white_check_mark: " end'
  replicas: 2
  template:
    serviceAccountName: argo-events-sa
  triggers:
  - parameters:
    - dest: slack.message
      src:
        dataTemplate: |-
          *Status*: {{ .Input.body.emoji }}{{ (index .Input.body.alerts 0).status }}
          *Severity*: {{ (index .Input.body.alerts 0).labels.severity }}
          *Description*: {{ (index .Input.body.alerts 0).annotations.description }}
          *Summary*: {{ (index .Input.body.alerts 0).annotations.summary }}
          {{if (index .Input.body.alerts 0).annotations.runbook}}
          *Runbook*: {{ (index .Input.body.alerts 0).annotations.runbook }}
          {{end}}
          *Cluster*: {{ (index .Input.body.alerts 0).labels.k8s_cluster_name }}
        dependencyName: trigger-slack
    - dest: slack.channel
      src:
        dataKey: body.alerts.0.labels.slack_channel
        dependencyName: trigger-slack
    template:
      name: trigger-slack
      slack:
        channel: p1as-application-oncall
        message: this is default message from argo-events
        slackToken:
          key: token
          name: slack-secret
---
apiVersion: argoproj.io/v1alpha1
kind: Sensor
metadata:
  name: webhook
  namespace: argo-events
spec:
  dependencies:
  - eventName: notification
    eventSourceName: webhook
    name: trigger-slack
  template:
    serviceAccountName: argo-events-sa
  triggers:
  - parameters:
    - dest: slack.channel
      src:
        dataKey: body.channel
        dependencyName: trigger-slack
    - dest: slack.message
      src:
        dataKey: body.message
        dependencyName: trigger-slack
    template:
      name: trigger-slack
      slack:
        channel: p1as-application-oncall
        message: this is default message from argo-events
        slackToken:
          key: token
          name: slack-secret
---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-controller
  namespace: ingress-nginx-private
spec:
  maxReplicas: 1
  minReplicas: 1
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nginx-ingress-controller
  targetCPUUtilizationPercentage: 70
---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-ingress-controller
  namespace: ingress-nginx-public
spec:
  maxReplicas: 3
  minReplicas: 3
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nginx-ingress-controller
  targetCPUUtilizationPercentage: 70
---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  labels:
    app: ping-cloud
  name: pingaccess
  namespace: ping-cloud
spec:
  maxReplicas: 2
  minReplicas: 2
  scaleTargetRef:
    apiVersion: apps/v1
    kind: StatefulSet
    name: pingaccess
  targetCPUUtilizationPercentage: 70
---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  labels:
    app: ping-cloud
  name: pingaccess-was
  namespace: ping-cloud
spec:
  maxReplicas: 2
  minReplicas: 2
  scaleTargetRef:
    apiVersion: apps/v1
    kind: StatefulSet
    name: pingaccess-was
  targetCPUUtilizationPercentage: 70
---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  labels:
    app: ping-cloud
  name: pingfederate
  namespace: ping-cloud
spec:
  maxReplicas: 2
  minReplicas: 2
  scaleTargetRef:
    apiVersion: apps/v1
    kind: StatefulSet
    name: pingfederate
  targetCPUUtilizationPercentage: 70
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: logstash-elastic
  namespace: elastic-stack-logging
spec:
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 120
    scaleUp:
      stabilizationWindowSeconds: 60
  maxReplicas: 2
  metrics:
  - resource:
      name: cpu
      target:
        averageUtilization: 70
        type: Utilization
    type: Resource
  minReplicas: 1
  scaleTargetRef:
    apiVersion: apps/v1
    kind: StatefulSet
    name: logstash-elastic
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation
    argocd.argoproj.io/sync-options: Replace=true
  name: logging-bootstrap
  namespace: elastic-stack-logging
spec:
  template:
    spec:
      containers:
      - env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: logging-bootstrap-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: logging-bootstrap
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /app/config/app_config.yaml
          name: logging-bootstrap-resources
          readOnly: true
          subPath: logging-bootstrap-resources.yaml
      restartPolicy: OnFailure
      serviceAccountName: enrichment
      volumes:
      - configMap:
          name: logging-bootstrap-resources
        name: logging-bootstrap-resources
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation
    argocd.argoproj.io/sync-options: Replace=true
  name: opensearch-bootstrap
  namespace: elastic-stack-logging
spec:
  backoffLimit: 10
  template:
    spec:
      containers:
      - env:
        - name: OS_HOST
          value: opensearch-cluster-master.elastic-stack-logging.svc.cluster.local
        - name: OS_PORT
          value: "9200"
        - name: BOOTSTRAP_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: os-bootstrap-creds
        - name: BOOTSTRAP_PASS
          valueFrom:
            secretKeyRef:
              key: password
              name: os-bootstrap-creds
        - name: TENANT_DOMAIN
          valueFrom:
            configMapKeyRef:
              key: tenant_domain
              name: cluster-info
        - name: PRIMARY_TENANT_DOMAIN
          valueFrom:
            configMapKeyRef:
              key: primary_tenant_domain
              name: cluster-info
        - name: INDEX_TEMPLATES_PATH
          value: /usr/share/opensearch/data/index-templates
        - name: ALERTS_PATH
          value: /usr/share/opensearch/data/alerts
        - name: NOTIFICATIONS_PATH
          value: /usr/share/opensearch/data/notifications
        - name: ISM_PATH
          value: /usr/share/opensearch/data/ism-policies
        - name: OSD_URL
          value: http://opensearch-dashboards:5601
        - name: DASHBOARDS_PATH
          value: /usr/share/opensearch/data/dashboards
        image: public.ecr.aws/r2h3l6e4/pingcloud-monitoring/os-bootstrap/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: opensearch-bootstrap
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /usr/share/opensearch/data/ism-policies
          name: os-ism-policies
        - mountPath: /usr/share/opensearch/data/index-templates
          name: os-index-templates
        - mountPath: /usr/share/opensearch/data/notifications
          name: os-notifications-channels
        - mountPath: /usr/share/opensearch/data/dashboards/pd
          name: os-dashboards-pd
        - mountPath: /usr/share/opensearch/data/dashboards/pf
          name: os-dashboards-pf
        - mountPath: /usr/share/opensearch/data/dashboards/pf-threat
          name: os-dashboards-pf-threat
        - mountPath: /usr/share/opensearch/data/dashboards/pa
          name: os-dashboards-pa
        - mountPath: /usr/share/opensearch/data/dashboards/pa-was
          name: os-dashboards-pa-was
        - mountPath: /usr/share/opensearch/data/alerts/pd-1
          name: os-alerts-pd-1
        - mountPath: /usr/share/opensearch/data/alerts/pd-2
          name: os-alerts-pd-2
        - mountPath: /usr/share/opensearch/data/alerts/pd-3
          name: os-alerts-pd-3
        - mountPath: /usr/share/opensearch/data/alerts/pd-4
          name: os-alerts-pd-4
        - mountPath: /usr/share/opensearch/data/alerts/pd-5
          name: os-alerts-pd-5
        - mountPath: /usr/share/opensearch/data/alerts/pds
          name: os-alerts-pds
        - mountPath: /usr/share/opensearch/data/alerts/pf
          name: os-alerts-pf
      restartPolicy: OnFailure
      volumes:
      - configMap:
          name: os-ism-policies-745k24kdb4
        name: os-ism-policies
      - configMap:
          name: os-index-templates-gb8m7tkmc7
        name: os-index-templates
      - configMap:
          name: os-notifications-channels-dc7547gk9b
        name: os-notifications-channels
      - configMap:
          name: os-dashboards-pd
        name: os-dashboards-pd
      - configMap:
          name: os-dashboards-pf
        name: os-dashboards-pf
      - configMap:
          name: os-dashboards-pf-threat
        name: os-dashboards-pf-threat
      - configMap:
          name: os-dashboards-pa
        name: os-dashboards-pa
      - configMap:
          name: os-dashboards-pa-was
        name: os-dashboards-pa-was
      - configMap:
          name: os-alerts-pd-1
        name: os-alerts-pd-1
      - configMap:
          name: os-alerts-pd-2
        name: os-alerts-pd-2
      - configMap:
          name: os-alerts-pd-3
        name: os-alerts-pd-3
      - configMap:
          name: os-alerts-pd-4
        name: os-alerts-pd-4
      - configMap:
          name: os-alerts-pd-5
        name: os-alerts-pd-5
      - configMap:
          name: os-alerts-pds
        name: os-alerts-pds
      - configMap:
          name: os-alerts-pf
        name: os-alerts-pf
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
  labels:
    app: newrelic-license-secret-exporter
  name: newrelic-license-secret-exporter
  namespace: newrelic
spec:
  template:
    metadata:
      annotations: {}
      labels:
        app: newrelic-license-secret-exporter
    spec:
      containers:
      - command:
        - /tmp/copy-secret.sh
        env:
        - name: SECRET_NAME
          value: newrelic-license-key
        - name: SECRET_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.annotations['SECRET_NAMESPACE']
        - name: CURRENT_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/toolkit:v1.15.0
        name: newrelic-license-secret-exporter
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 2000
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /tmp/copy-secret.sh
          name: copy-secret
          subPath: copy-secret.sh
      restartPolicy: OnFailure
      serviceAccountName: nri-bundle-newrelic-infrastructure
      volumes:
      - configMap:
          defaultMode: 365
          name: copy-secret
        name: copy-secret
  ttlSecondsAfterFinished: 30
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission-create
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission-create
  namespace: newrelic
spec:
  template:
    metadata:
      labels:
        app: nri-metadata-injection-admission-create
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: nri-metadata-injection
        app.kubernetes.io/version: 1.7.0
        helm.sh/chart: nri-metadata-injection-3.0.4
        nri-bundle.version: 5.0.4
      name: nri-bundle-nri-metadata-injection-admission-create
    spec:
      containers:
      - args:
        - create
        - --host=nri-bundle-nri-metadata-injection,nri-bundle-nri-metadata-injection.newrelic.svc
        - --namespace=newrelic
        - --secret-name=nri-bundle-nri-metadata-injection-admission
        - --cert-name=tls.crt
        - --key-name=tls.key
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/ingress-nginx/kube-webhook-certgen:v1.1.1
        imagePullPolicy: IfNotPresent
        name: create
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: true
      hostIPC: false
      hostNetwork: false
      hostPID: false
      restartPolicy: OnFailure
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      serviceAccountName: nri-bundle-nri-metadata-injection-admission
  ttlSecondsAfterFinished: 30
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: PostSync
    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation,HookSucceeded
  labels:
    app: nri-metadata-injection-admission-patch
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection-admission-patch
  namespace: newrelic
spec:
  template:
    metadata:
      labels:
        app: nri-metadata-injection-admission-patch
        app.kubernetes.io/instance: nri-bundle
        app.kubernetes.io/name: nri-metadata-injection
        app.kubernetes.io/version: 1.7.0
        helm.sh/chart: nri-metadata-injection-3.0.4
        nri-bundle.version: 5.0.4
      name: nri-bundle-nri-metadata-injection-admission-patch
    spec:
      containers:
      - args:
        - patch
        - --webhook-name=nri-bundle-nri-metadata-injection
        - --namespace=newrelic
        - --secret-name=nri-bundle-nri-metadata-injection-admission
        - --patch-failure-policy=Ignore
        - --patch-validating=false
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/ingress-nginx/kube-webhook-certgen:v1.1.1
        imagePullPolicy: IfNotPresent
        name: patch
      restartPolicy: OnFailure
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      serviceAccountName: nri-bundle-nri-metadata-injection-admission
  ttlSecondsAfterFinished: 30
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
  labels:
    app: ping-cloud
    role: p14c-oauth-service
  name: p14c-oauth-service
  namespace: ping-cloud
spec:
  template:
    metadata:
      labels:
        app: ping-cloud
        role: p14c-oauth-service
    spec:
      containers:
      - command:
        - python3
        - -u
        - /app/oauth_client_services_controller.py
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        envFrom:
        - configMapRef:
            name: p14c-oauth-service-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-services/p14c-integration/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingcloud-oauth
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
      restartPolicy: Never
      serviceAccountName: p14c-oauth-serviceaccount
  ttlSecondsAfterFinished: 86400
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    argocd.argoproj.io/hook: Sync
  labels:
    app: ping-cloud
    role: pingone-configurator
  name: pingone-configurator
  namespace: ping-cloud
spec:
  backoffLimit: 4
  template:
    metadata:
      labels:
        app: ping-cloud
        role: pingone-configurator
    spec:
      containers:
      - env:
        - name: ENVIRONMENT_METADATA_JSON
          valueFrom:
            configMapKeyRef:
              key: information.json
              name: p14c-environment-metadata
              optional: true
        - name: IS_PINGONE
          valueFrom:
            configMapKeyRef:
              key: P1
              name: is-pingone
              optional: true
        - name: PF_USERNAME
          value: Administrator
        - name: PF_PASSWORD
          valueFrom:
            secretKeyRef:
              key: PF_ADMIN_USER_PASSWORD
              name: pingcommon-passwords
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        - secretRef:
            name: p14c-bootstrap-secret
        image: public.ecr.aws/r2h3l6e4/pingcloud-solutions/ansible-beluga/dev:v1.19-release-branch-latest
        imagePullPolicy: Always
        name: pingone-configurator
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 300m
            memory: 256Mi
      initContainers:
      - command:
        - /wait-for-services.sh
        env:
        - name: WAIT_FOR_SERVICES
          value: pingfederate-cluster
        envFrom:
        - configMapRef:
            name: pingfederate-admin-environment-variables
        image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/busybox:1.32
        imagePullPolicy: IfNotPresent
        name: wait-for-services
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 9999
          runAsNonRoot: true
          runAsUser: 9031
        volumeMounts:
        - mountPath: /utils.lib.sh
          name: pingone-config
          subPath: utils.lib.sh
        - mountPath: /logger.lib.sh
          name: pingone-config
          subPath: logger.lib.sh
        - mountPath: /wait-for-services.sh
          name: pingone-config
          subPath: wait-for-services.sh
      restartPolicy: Never
      serviceAccount: p1-config-serviceaccount
      volumes:
      - configMap:
          defaultMode: 365
          name: pingcommon-init
        name: pingone-config
  ttlSecondsAfterFinished: 86400
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: acme-tls-cert
  namespace: cert-manager
spec:
  dnsNames:
  - '*.ping-demo.com'
  issuerRef:
    kind: ClusterIssuer
    name: letsencrypt-prod
  secretName: acme-tls-cert
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: opensearch-cert
  namespace: elastic-stack-logging
spec:
  commonName: elastic-stack-logging.svc.cluster.local
  dnsNames:
  - opensearch-cluster-master.elastic-stack-logging.svc.cluster.local
  - opensearch-cluster-headless.elastic-stack-logging.svc.cluster.local
  - '*.opensearch-cluster-headless.elastic-stack-logging.svc.cluster.local'
  - '*.opensearch-cluster-master.elastic-stack-logging.svc.cluster.local'
  - opensearch-cluster-headless.elastic-stack-logging.svc
  - opensearch-cluster-master.elastic-stack-logging.svc
  - '*.opensearch-cluster-headless.elastic-stack-logging.svc'
  - '*.opensearch-cluster-master.elastic-stack-logging.svc'
  issuerRef:
    kind: Issuer
    name: opensearch-self
  privateKey:
    algorithm: RSA
    encoding: PKCS8
    size: 2048
  secretName: opensearch-cert
  usages:
  - server auth
  - client auth
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: opensearch-self-ca
  namespace: elastic-stack-logging
spec:
  commonName: opensearch-self-ca
  isCA: true
  issuerRef:
    group: cert-manager.io
    kind: ClusterIssuer
    name: selfsigned-issuer
  privateKey:
    algorithm: ECDSA
    size: 256
  secretName: opensearch-self-ca
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: selfsigned-issuer
  namespace: elastic-stack-logging
spec:
  selfSigned: {}
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    email: support@pingidentity.com
    preferredChain: ISRG Root X1
    privateKeySecretRef:
      name: letsencrypt-prod
    server: https://acme-v02.api.letsencrypt.org/directory
    solvers:
    - dns01:
        route53:
          region: us-west-2
      selector:
        dnsZones:
        - ping-demo.com
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: opensearch-self
  namespace: elastic-stack-logging
spec:
  ca:
    secretName: opensearch-self-ca
---
apiVersion: grafana.integreatly.org/v1beta1
kind: Grafana
metadata:
  labels:
    dashboards: grafana
  name: grafana
  namespace: prometheus
spec:
  config:
    auth:
      disable_login_form: "true"
      disable_signout_menu: "true"
    auth.anonymous:
      enabled: "false"
    auth.proxy:
      auto_sign_up: "true"
      enabled: "true"
      header_name: X-Webauth-Email
      header_property: username
      headers: Email:X-Webauth-Email, Role:X-Webauth-Role
      sync_ttl: "60"
    log:
      mode: console
    security:
      admin_user: admin
  deployment:
    metadata:
      labels:
        app: grafana
    spec:
      template:
        spec:
          containers:
          - env:
            - name: GF_INSTALL_PLUGINS
              value: grafana-opensearch-datasource 2.5.1
            image: public.ecr.aws/r2h3l6e4/pingcloud-clustertools/grafana/grafana:10.1.0
            name: grafana
            resources:
              limits:
                cpu: 500m
                memory: 2500Mi
              requests:
                cpu: 100m
                memory: 100Mi
            securityContext:
              runAsGroup: 472
              runAsNonRoot: true
              runAsUser: 472
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: os-pa-audit
  namespace: prometheus
spec:
  datasource:
    access: proxy
    isDefault: false
    jsonData:
      database: pa-audit-ro
      esVersion: 8.0.0
      flavor: opensearch
      pplEnabled: true
      timeField: '@timestamp'
      tlsSkipVerify: true
      version: 2.8.0
    name: OS-PA-Audit
    type: grafana-opensearch-datasource
    uid: muQHLUs4k
    url: https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200
  instanceSelector:
    matchLabels:
      dashboards: grafana
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: os-pf-audit
  namespace: prometheus
spec:
  datasource:
    access: proxy
    isDefault: false
    jsonData:
      database: pf-audit-*
      esVersion: 8.0.0
      flavor: opensearch
      pplEnabled: true
      timeField: '@timestamp'
      tlsSkipVerify: true
      version: 2.8.0
    name: OS-PF-Audit
    type: grafana-opensearch-datasource
    uid: xCysL8y4z
    url: https://opensearch-cluster-master.elastic-stack-logging.svc.cluster.local:9200
  instanceSelector:
    matchLabels:
      dashboards: grafana
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: prometheus
  namespace: prometheus
spec:
  datasource:
    access: proxy
    editable: true
    isDefault: true
    name: prometheus
    type: prometheus
    uid: P1809F7CD0C75ACF3
    url: http://prometheus:9090
  instanceSelector:
    matchLabels:
      dashboards: grafana
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingaccess-admin-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingaccess-admin-api-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-admin
            port:
              number: 9000
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingaccess-admin-api-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingaccess-agent-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-public
  rules:
  - host: pingaccess-agent-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess
            port:
              number: 3030
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingaccess-agent-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingaccess-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-public
  rules:
  - host: pingaccess-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: healthcheck-httpbin-pa-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess
            port:
              number: 443
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingaccess-dev.ping-demo.com
    - healthcheck-httpbin-pa-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingaccess-was-admin-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingaccess-was-admin-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was-admin
            port:
              number: 9000
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingaccess-was-admin-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/enable-modsecurity: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/modsecurity-snippet: |
      Include /etc/nginx/owasp-modsecurity-crs/nginx-modsecurity.conf
      SecRuleEngine DetectionOnly
      SecRequestBodyAccess On
      SecAuditEngine RelevantOnly
      SecAuditLogParts ABCDEFGHIJKZ
      SecAuditLogType Serial
      SecAuditLogFormat JSON
      SecAuditLog /dev/stdout
  labels:
    app: ping-cloud
  name: pingaccess-was-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-public
  rules:
  - host: pingaccess-admin-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: pingfederate-admin-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: monitoring-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: prometheus-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: logs-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: pingcentral-admin-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: healthcheck-httpbin-pa-was-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  - host: argocd-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingaccess-was
            port:
              number: 443
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingaccess-admin-dev.ping-demo.com
    - pingfederate-admin-dev.ping-demo.com
    - monitoring-dev.ping-demo.com
    - prometheus-dev.ping-demo.com
    - logs-dev.ping-demo.com
    - pingcentral-admin-dev.ping-demo.com
    - healthcheck-httpbin-pa-was-dev.ping-demo.com
    - argocd-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
    role: pingcentral
  name: pingcentral-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingcentral.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingcentral
            port:
              number: 9022
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingcentral.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingdelegator-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingdelegator-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingdelegator
            port:
              number: 1443
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingdelegator-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
    role: pingdirectory
  name: pingdirectory-http-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingdirectory-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingdirectory-http
            port:
              number: 1443
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingdirectory-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingfederate-admin-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-private
  rules:
  - host: pingfederate-admin-api-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingfederate-admin
            port:
              name: pf-admin
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingfederate-admin-api-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTPS
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  labels:
    app: ping-cloud
  name: pingfederate-ingress
  namespace: ping-cloud
spec:
  ingressClassName: nginx-public
  rules:
  - host: pingfederate-dev.ping-demo.com
    http:
      paths:
      - backend:
          service:
            name: pingfederate
            port:
              number: 9031
        path: /
        pathType: Prefix
  tls:
  - hosts:
    - pingfederate-dev.ping-demo.com
---
apiVersion: networking.k8s.io/v1
kind: IngressClass
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/instance: ingress-nginx-private
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-private
    app.kubernetes.io/version: 1.8.0
  name: nginx-private
spec:
  controller: k8s.io/ingress-nginx-private
---
apiVersion: networking.k8s.io/v1
kind: IngressClass
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/instance: ingress-nginx-public
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
    app.kubernetes.io/role: ingress-nginx-public
    app.kubernetes.io/version: 1.8.0
  name: nginx-public
spec:
  controller: k8s.io/ingress-nginx-public
---
apiVersion: storage.k8s.io/v1
kind: CSIDriver
metadata:
  labels:
    app.kubernetes.io/name: aws-ebs-csi-driver
  name: ebs.csi.aws.com
spec:
  attachRequired: true
  fsGroupPolicy: File
  podInfoOnMount: false
---
apiVersion: storage.k8s.io/v1
kind: CSIDriver
metadata:
  annotations:
    helm.sh/hook: pre-install, pre-upgrade
    helm.sh/hook-delete-policy: before-hook-creation
    helm.sh/resource-policy: keep
  name: efs.csi.aws.com
spec:
  attachRequired: false
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  annotations:
    cert-manager.io/inject-ca-from-secret: cert-manager/cert-manager-webhook-ca
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: cert-manager-webhook
      namespace: cert-manager
      path: /mutate
  failurePolicy: Fail
  matchPolicy: Equivalent
  name: webhook.cert-manager.io
  rules:
  - apiGroups:
    - cert-manager.io
    - acme.cert-manager.io
    apiVersions:
    - v1
    operations:
    - CREATE
    - UPDATE
    resources:
    - '*/*'
  sideEffects: None
  timeoutSeconds: 10
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  labels:
    app.kubernetes.io/instance: nri-bundle
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.7.0
    helm.sh/chart: nri-metadata-injection-3.0.4
    nri-bundle.version: 5.0.4
  name: nri-bundle-nri-metadata-injection
webhooks:
- admissionReviewVersions:
  - v1beta1
  - v1
  clientConfig:
    caBundle: ""
    service:
      name: nri-bundle-nri-metadata-injection
      namespace: newrelic
      path: /mutate
  failurePolicy: Ignore
  name: metadata-injection.newrelic.com
  rules:
  - apiGroups:
    - ""
    apiVersions:
    - v1
    operations:
    - CREATE
    resources:
    - pods
  sideEffects: None
  timeoutSeconds: 30
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  annotations:
    cert-manager.io/inject-ca-from-secret: cert-manager/cert-manager-webhook-ca
  labels:
    app: webhook
    app.kubernetes.io/component: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/version: v1.12.1
  name: cert-manager-webhook
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: cert-manager-webhook
      namespace: cert-manager
      path: /validate
  failurePolicy: Fail
  matchPolicy: Equivalent
  name: webhook.cert-manager.io
  namespaceSelector:
    matchExpressions:
    - key: cert-manager.io/disable-validation
      operator: NotIn
      values:
      - "true"
    - key: name
      operator: NotIn
      values:
      - cert-manager
  rules:
  - apiGroups:
    - cert-manager.io
    - acme.cert-manager.io
    apiVersions:
    - v1
    operations:
    - CREATE
    - UPDATE
    resources:
    - '*/*'
  sideEffects: None
  timeoutSeconds: 10
